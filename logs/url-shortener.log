2024-08-26 12:00:32.309  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-26 12:00:32.490  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-26 12:00:33.172  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-26 12:00:33.228  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 171621 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-26 12:00:33.235  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-26 12:00:33.292 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-26 12:00:34.654  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-26 12:00:34.768  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 103 ms. Found 4 JPA repository interfaces.
2024-08-26 12:00:35.576  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-26 12:00:35.659  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-26 12:00:35.714  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-26 12:00:36.081  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-26 12:00:36.123  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-26 12:00:36.441  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-26 12:00:36.444  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-26 12:00:36.481  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-26 12:00:37.823  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-26 12:00:37.888 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-26 12:00:37.903 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-26 12:00:37.906 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-26 12:00:37.908 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-26 12:00:37.912 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-26 12:00:37.915 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-26 12:00:37.916 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-26 12:00:37.918 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-26 12:00:37.919 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-26 12:00:37.920 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-26 12:00:37.921 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-26 12:00:37.922 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-26 12:00:37.923 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-26 12:00:37.924 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-26 12:00:37.925 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-26 12:00:37.927 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-26 12:00:37.935 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-26 12:00:37.938 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-26 12:00:37.941 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-26 12:00:37.946  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-26 12:00:38.946  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-26 12:00:39.262 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 15 mappings in 'requestMappingHandlerMapping'
2024-08-26 12:00:39.434 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-26 12:00:39.478  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@45398bb0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@35ffe3ac, org.springframework.security.web.context.SecurityContextHolderFilter@661d49d1, org.springframework.security.web.header.HeaderWriterFilter@51bd10f0, org.springframework.web.filter.CorsFilter@60fc4450, org.springframework.security.web.authentication.logout.LogoutFilter@1b472cad, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@27f43664, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@234adbe2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e674698, org.springframework.security.web.access.ExceptionTranslationFilter@2c40e456, org.springframework.security.web.access.intercept.AuthorizationFilter@feb57b4]
2024-08-26 12:00:39.773 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-26 12:00:39.827 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-26 12:00:40.102  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-26 12:00:40.222  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.454 seconds (process running for 10.133)
2024-08-26 12:00:40.477 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-26 12:00:40.568 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-26 12:00:40.598 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-26 12:00:40.611 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-26 12:00:40.613 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-26 12:00:40.619 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-26 12:00:40.621 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-26 12:00:40.625 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-26 12:00:40.629 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-26 12:00:40.637 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-26 12:00:40.788 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-26 12:00:40.805 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-26 12:00:40.815 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-26 12:00:40.932 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-26 12:00:40.934 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-26 12:00:41.763 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Mon Aug 26 12:00:33 CEST 2024
2024-08-26 12:00:41.772  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-26 12:00:41.776  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-26 12:00:41.783  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 10:55:15.537  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 10:55:15.698  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 10:55:16.210  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 10:55:16.257  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 139508 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 10:55:16.262  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 10:55:16.320 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 10:55:17.671  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 10:55:17.793  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 111 ms. Found 4 JPA repository interfaces.
2024-08-27 10:55:18.659  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 10:55:18.771  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 10:55:18.837  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 10:55:19.214  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 10:55:19.275  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 10:55:19.587  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 10:55:19.590  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 10:55:19.629  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 10:55:20.989  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 10:55:21.054 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 10:55:21.069 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 10:55:21.073 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 10:55:21.076 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 10:55:21.080 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 10:55:21.084 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 10:55:21.085 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 10:55:21.087 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 10:55:21.088 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 10:55:21.089 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 10:55:21.090 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 10:55:21.092 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 10:55:21.093 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 10:55:21.095 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 10:55:21.095 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 10:55:21.098 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 10:55:21.106 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 10:55:21.109 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 10:55:21.112 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 10:55:21.117  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 10:55:21.973  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 10:55:22.227 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 10:55:22.400 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 10:55:22.446  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@41f3f64, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@454f6cc5, org.springframework.security.web.context.SecurityContextHolderFilter@6f8281e6, org.springframework.security.web.header.HeaderWriterFilter@3f69b166, org.springframework.web.filter.CorsFilter@3956df0a, org.springframework.security.web.authentication.logout.LogoutFilter@5f1bd673, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@206a465f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c509742, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@739500b8, org.springframework.security.web.access.ExceptionTranslationFilter@509d999c, org.springframework.security.web.access.intercept.AuthorizationFilter@5c940e28]
2024-08-27 10:55:22.717 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 10:55:22.770 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 10:55:22.968  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 10:55:23.061  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.169 seconds (process running for 9.487)
2024-08-27 10:55:23.254 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:23.337 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:55:23.367 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:23.378 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:23.380 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:55:23.385 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:23.387 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:55:23.392 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:23.395 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:23.404 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 10:55:23.585 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 10:55:23.603 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 10:55:23.610 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 10:55:23.758 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 10:55:23.760 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 10:55:24.650 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 10:55:16 CEST 2024
2024-08-27 10:55:24.660  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 10:55:24.663  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 10:55:24.668  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 10:55:40.050  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 10:55:40.200  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 10:55:40.733  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 10:55:40.770  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 139808 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 10:55:40.776  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 10:55:40.823 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 10:55:42.097  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 10:55:42.239  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 128 ms. Found 4 JPA repository interfaces.
2024-08-27 10:55:42.992  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 10:55:43.070  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 10:55:43.120  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 10:55:43.459  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 10:55:43.499  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 10:55:43.802  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 10:55:43.805  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 10:55:43.843  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 10:55:45.264  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 10:55:45.326 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 10:55:45.341 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 10:55:45.344 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 10:55:45.346 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 10:55:45.350 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 10:55:45.352 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 10:55:45.354 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 10:55:45.356 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 10:55:45.356 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 10:55:45.360 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 10:55:45.362 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 10:55:45.364 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 10:55:45.365 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 10:55:45.366 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 10:55:45.367 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 10:55:45.370 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 10:55:45.379 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 10:55:45.382 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 10:55:45.385 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 10:55:45.389  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 10:55:46.301  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 10:55:46.613 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 10:55:46.797 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 10:55:46.840  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@24c7b944, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4a4352b4, org.springframework.security.web.context.SecurityContextHolderFilter@270a3cef, org.springframework.security.web.header.HeaderWriterFilter@35ffe3ac, org.springframework.web.filter.CorsFilter@540ac21e, org.springframework.security.web.authentication.logout.LogoutFilter@365c8a47, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f7e5e11, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7bb996e0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d640fe6, org.springframework.security.web.access.ExceptionTranslationFilter@1d12eff1, org.springframework.security.web.access.intercept.AuthorizationFilter@b22bebc]
2024-08-27 10:55:47.128 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 10:55:47.174 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 10:55:47.380  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 10:55:47.477  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.097 seconds (process running for 9.25)
2024-08-27 10:55:47.712 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:47.792 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:55:47.817 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:47.828 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:47.830 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:55:47.834 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:47.836 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:55:47.840 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:47.843 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:47.851 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 10:55:47.997 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 10:55:48.020 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 10:55:48.028 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 10:55:48.144 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 10:55:48.146 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 10:55:48.964 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 10:55:40 CEST 2024
2024-08-27 10:55:48.978  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 10:55:48.984  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 10:55:48.990  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 10:59:23.098  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 10:59:23.237  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 10:59:23.786  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 10:59:23.841  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 141704 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 10:59:23.848  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 10:59:23.901 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 10:59:25.159  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 10:59:25.311  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 139 ms. Found 4 JPA repository interfaces.
2024-08-27 10:59:26.206  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 10:59:26.320  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 10:59:26.383  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 10:59:26.802  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 10:59:26.853  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 10:59:27.271  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 10:59:27.275  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 10:59:27.324  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 10:59:28.640  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 10:59:28.703 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 10:59:28.716 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 10:59:28.719 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 10:59:28.721 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 10:59:28.725 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 10:59:28.727 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 10:59:28.729 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 10:59:28.731 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 10:59:28.731 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 10:59:28.733 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 10:59:28.733 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 10:59:28.735 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 10:59:28.736 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 10:59:28.737 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 10:59:28.738 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 10:59:28.739 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 10:59:28.747 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 10:59:28.749 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 10:59:28.751 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 10:59:28.755  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 10:59:29.562  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 10:59:29.820 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 15 mappings in 'requestMappingHandlerMapping'
2024-08-27 10:59:29.992 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 10:59:30.031  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7786c2e0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c940e28, org.springframework.security.web.context.SecurityContextHolderFilter@3f69b166, org.springframework.security.web.header.HeaderWriterFilter@179cdf4f, org.springframework.web.filter.CorsFilter@56c39949, org.springframework.security.web.authentication.logout.LogoutFilter@7b6e196e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4ecc4b43, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6f8281e6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@41f3f64, org.springframework.security.web.access.ExceptionTranslationFilter@1fdbba0d, org.springframework.security.web.access.intercept.AuthorizationFilter@c50d1b2]
2024-08-27 10:59:30.257 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 10:59:30.308 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 10:59:30.500  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 10:59:30.582  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.131 seconds (process running for 9.165)
2024-08-27 10:59:30.757 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:59:30.847 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:59:30.870 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:59:30.880 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:59:30.882 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:59:30.886 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:59:30.888 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:59:30.892 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:59:30.895 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:59:30.903 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 10:59:31.072 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 10:59:31.088 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 10:59:31.094 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 10:59:31.223 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 10:59:31.225 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 10:59:32.076 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 10:59:23 CEST 2024
2024-08-27 10:59:32.088  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 10:59:32.093  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 10:59:32.099  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 11:02:12.063  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 11:02:12.119  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 143041 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 11:02:12.126  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-27 11:02:13.615  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 11:02:13.957  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 96 ms. Found 4 JPA repository interfaces.
2024-08-27 11:02:14.877  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-27 11:02:14.902  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-27 11:02:14.906  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-27 11:02:14.907  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-27 11:02:14.992  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-27 11:02:14.993  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2782 ms
2024-08-27 11:02:15.075  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 11:02:15.425  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 11:02:15.428  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 11:02:15.448  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 11:02:15.660  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 11:02:15.745  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 11:02:15.800  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 11:02:16.161  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 11:02:16.229  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 11:02:17.822  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 11:02:17.913 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 11:02:17.932 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:02:17.935 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:02:17.938 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 11:02:17.942 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 11:02:17.945 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 11:02:17.947 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 11:02:17.949 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 11:02:17.949 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 11:02:17.951 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 11:02:17.952 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 11:02:17.953 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 11:02:17.954 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 11:02:17.955 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 11:02:17.956 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 11:02:17.958 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 11:02:17.968 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 11:02:17.970 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 11:02:17.973 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 11:02:17.978  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:02:18.917  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 11:02:19.234 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 15 mappings in 'requestMappingHandlerMapping'
2024-08-27 11:02:19.362 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 11:02:19.420  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@76a86677, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b863b4, org.springframework.security.web.context.SecurityContextHolderFilter@67c61551, org.springframework.security.web.header.HeaderWriterFilter@475b796d, org.springframework.web.filter.CorsFilter@2524f9bf, org.springframework.security.web.authentication.logout.LogoutFilter@523e019c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6bbff652, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3d72abea, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7e2c8622, org.springframework.security.web.access.ExceptionTranslationFilter@6421e9e7, org.springframework.security.web.access.intercept.AuthorizationFilter@60b8c05c]
2024-08-27 11:02:19.605 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 11:02:19.670 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 11:02:20.023  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-27 11:02:20.043  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-27 11:02:20.058  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.624 seconds (process running for 10.696)
2024-08-27 11:02:20.292 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:02:20.374 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:02:20.402 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:02:20.413 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:02:20.415 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:02:20.420 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:02:20.422 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:02:20.426 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:02:20.429 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:02:20.438 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:02:20.618 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:02:20.635 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:02:20.641 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:02:20.784 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:02:20.786 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:02:31.497  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-27 11:02:31.497  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-27 11:02:31.497 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-27 11:02:31.498 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-27 11:02:31.498 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-27 11:02:31.499 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3bdf6d63
2024-08-27 11:02:31.500 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@726882da
2024-08-27 11:02:31.500 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-27 11:02:31.501  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-08-27 11:02:31.518  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:02:31.533  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:02:31.539 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-27 11:02:31.543 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:31.583 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:31.609 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-27 11:02:31.611 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:31.615 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:31.637 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-27 11:02:31.639 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:31.639 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-27 11:02:31.641 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:31.641 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-27 11:02:31.642 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:31.643 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:31.673 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-27 11:02:31.675 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:31.683 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:31.700 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:31.727 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:40.992 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-27 11:02:40.994 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:40.997 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.020 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-27 11:02:41.021 DEBUG --- [nio-8080-exec-8] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.022 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-27 11:02:41.022 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-27 11:02:41.023 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-27 11:02:41.023 DEBUG --- [io-8080-exec-10] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.023 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.024 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.023 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-27 11:02:41.028 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.028 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.029 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.031 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.033 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.046 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.367 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 11:02:41.368 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.371 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.406 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-27 11:02:41.407 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-27 11:02:41.411 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 11:02:41.412 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.415 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.433 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-27 11:02:41.436 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-27 11:02:41.447 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.478 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-27 11:02:41.479 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-27 11:02:42.067  INFO --- [nio-8080-exec-6] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 567 ms
2024-08-27 11:02:42.098 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-27 11:02:42.099 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-27 11:02:42.101 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:03:23.614  INFO --- [ionShutdownHook] o.a.c.h.Http11NioProtocol                : Stopping ProtocolHandler ["http-nio-8080"]
2024-08-27 11:03:23.628  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:03:23.631  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 11:03:23.639  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 11:03:34.225  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 11:03:34.282  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 143871 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 11:03:34.288  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-27 11:03:35.504  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 11:03:35.611  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 97 ms. Found 4 JPA repository interfaces.
2024-08-27 11:03:36.399  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-27 11:03:36.412  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-27 11:03:36.414  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-27 11:03:36.415  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-27 11:03:36.480  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-27 11:03:36.480  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2126 ms
2024-08-27 11:03:36.543  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 11:03:36.815  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 11:03:36.817  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 11:03:36.831  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 11:03:36.995  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 11:03:37.065  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 11:03:37.113  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 11:03:37.417  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 11:03:37.470  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 11:03:38.694  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 11:03:38.761 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 11:03:38.776 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:03:38.779 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:03:38.782 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 11:03:38.785 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 11:03:38.788 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 11:03:38.789 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 11:03:38.791 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 11:03:38.791 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 11:03:38.792 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 11:03:38.793 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 11:03:38.794 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 11:03:38.795 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 11:03:38.796 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 11:03:38.797 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 11:03:38.798 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 11:03:38.806 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 11:03:38.808 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 11:03:38.810 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 11:03:38.815  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:03:39.585  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 11:03:39.824 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 15 mappings in 'requestMappingHandlerMapping'
2024-08-27 11:03:39.925 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 11:03:39.961  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7e2c8622, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4b02dc4e, org.springframework.security.web.context.SecurityContextHolderFilter@3d72abea, org.springframework.security.web.header.HeaderWriterFilter@67c61551, org.springframework.web.filter.CorsFilter@b67b359, org.springframework.security.web.authentication.logout.LogoutFilter@1af29a19, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@45ea6c24, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@51f31fad, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@98c4a8b, org.springframework.security.web.access.ExceptionTranslationFilter@24244ea, org.springframework.security.web.access.intercept.AuthorizationFilter@3b863b4]
2024-08-27 11:03:40.071 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 11:03:40.121 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 11:03:40.396  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-27 11:03:40.413  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-27 11:03:40.425  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.702 seconds (process running for 8.311)
2024-08-27 11:03:40.601 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:03:40.676 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:03:40.699 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:03:40.709 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:03:40.710 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:03:40.714 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:03:40.716 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:03:40.719 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:03:40.722 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:03:40.729 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:03:40.883 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:03:40.898 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:03:40.905 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:03:41.034 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:03:41.036 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:04:12.715  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-27 11:04:12.715  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-27 11:04:12.715 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-27 11:04:12.716 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-27 11:04:12.716 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-27 11:04:12.717 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2fe152aa
2024-08-27 11:04:12.718 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@1297cf8
2024-08-27 11:04:12.719 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-27 11:04:12.719  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-08-27 11:04:12.740  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/users' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:04:12.764  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/users' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:04:12.770 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 11:04:12.773 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 11:04:12.867 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@67bbdfa]
2024-08-27 11:04:12.876  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : Received request to create user with username: havrusha
2024-08-27 11:04:12.876  INFO --- [nio-8080-exec-1] d.t.u.s.i.UserServiceImpl                : Attempting to create user with username: havrusha and email: havrusha@string
2024-08-27 11:04:12.879 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:04:13.018 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:04:13.024 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:04:13.031 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 11:04:13.036 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:04:13.038  INFO --- [nio-8080-exec-1] d.t.u.s.i.UserServiceImpl                : User created successfully with ID: 3
2024-08-27 11:04:13.038  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-08-27 11:04:13.060 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:04:13.061 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@4cca1e3d]
2024-08-27 11:04:13.081 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:05:08.241 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : PATCH "/users/3/role?newRole=PAID", parameters={masked}
2024-08-27 11:05:08.242 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-08-27 11:05:08.251  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : Received request to change role for user with ID: 3 to PAID
2024-08-27 11:05:08.251  INFO --- [nio-8080-exec-2] d.t.u.s.i.UserServiceImpl                : Attempting to change role for user with ID: 3 to PAID
2024-08-27 11:05:08.273 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 11:05:08.286 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 11:05:08.292 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:05:08.301 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-08-27 11:05:08.314 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    update
        subscriptions 
    set
        end_date=?,
        start_date=?,
        subscription_type=?,
        user_id=? 
    where
        id=?
2024-08-27 11:05:08.320 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-08-27 11:05:08.322 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:05:08.326  INFO --- [nio-8080-exec-2] d.t.u.s.i.UserServiceImpl                : User role updated successfully with ID: 3
2024-08-27 11:05:08.326  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : User role updated successfully with ID: 3
2024-08-27 11:05:08.327 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:05:08.327 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@7a95f07d]
2024-08-27 11:05:08.330 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:05:29.404 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/users/3", parameters={}
2024-08-27 11:05:29.405 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-08-27 11:05:29.406  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : Received request to get user with ID: 3
2024-08-27 11:05:29.407  INFO --- [nio-8080-exec-3] d.t.u.s.i.UserServiceImpl                : Fetching user with ID: 3
2024-08-27 11:05:29.408 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 11:05:29.411 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 11:05:29.414  INFO --- [nio-8080-exec-3] d.t.u.s.i.UserServiceImpl                : User with ID: 3 fetched successfully
2024-08-27 11:05:29.414  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : User fetched successfully with ID: 3
2024-08-27 11:05:29.415 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:05:29.416 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@12231a47]
2024-08-27 11:05:29.418 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:06:17.565 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : PATCH "/users/2/role?newRole=ADMIN", parameters={masked}
2024-08-27 11:06:17.566 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-08-27 11:06:17.567  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : Received request to change role for user with ID: 2 to ADMIN
2024-08-27 11:06:17.567  INFO --- [nio-8080-exec-4] d.t.u.s.i.UserServiceImpl                : Attempting to change role for user with ID: 2 to ADMIN
2024-08-27 11:06:17.569 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 11:06:17.572 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 11:06:17.576 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:06:17.579 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-08-27 11:06:17.580 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 11:06:17.583 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-08-27 11:06:17.584 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:06:17.586  INFO --- [nio-8080-exec-4] d.t.u.s.i.UserServiceImpl                : User role updated successfully with ID: 2
2024-08-27 11:06:17.587  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : User role updated successfully with ID: 2
2024-08-27 11:06:17.587 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:06:17.587 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@67544114]
2024-08-27 11:06:17.589 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:06:42.595 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-08-27 11:06:42.596 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-08-27 11:06:42.600 DEBUG --- [nio-8080-exec-9] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-08-27 11:06:42.603 DEBUG --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleGlobalException(Exception)
2024-08-27 11:06:42.605 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'image/avif', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 11:06:42.606 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["No static resource favicon.ico."]
2024-08-27 11:06:42.609 DEBUG --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-08-27 11:06:42.610 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 500 INTERNAL_SERVER_ERROR
2024-08-27 11:06:45.515 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-08-27 11:06:45.516 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-08-27 11:06:45.518 DEBUG --- [nio-8080-exec-4] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-08-27 11:06:45.519 DEBUG --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleGlobalException(Exception)
2024-08-27 11:06:45.522 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'image/avif', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 11:06:45.522 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["No static resource favicon.ico."]
2024-08-27 11:06:45.523 DEBUG --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-08-27 11:06:45.524 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 500 INTERNAL_SERVER_ERROR
2024-08-27 11:08:16.014 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : PATCH "/users/1/role?newRole=TRIAL", parameters={masked}
2024-08-27 11:08:16.015 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-08-27 11:08:16.016  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to TRIAL
2024-08-27 11:08:16.016  INFO --- [nio-8080-exec-2] d.t.u.s.i.UserServiceImpl                : Attempting to change role for user with ID: 1 to TRIAL
2024-08-27 11:08:16.017 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 11:08:16.021 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 11:08:16.024 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:08:16.026 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-08-27 11:08:16.027 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 11:08:16.029 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-08-27 11:08:16.030 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:08:16.031  INFO --- [nio-8080-exec-2] d.t.u.s.i.UserServiceImpl                : User role updated successfully with ID: 1
2024-08-27 11:08:16.032  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-08-27 11:08:16.032 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:08:16.032 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@46766787]
2024-08-27 11:08:16.034 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:28:45.274  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 11:28:45.416  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 11:28:45.951  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 11:28:46.001  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 157557 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 11:28:46.007  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 11:28:46.049 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 11:28:47.220  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 11:28:47.339  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 108 ms. Found 4 JPA repository interfaces.
2024-08-27 11:28:48.163  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 11:28:48.249  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 11:28:48.297  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 11:28:48.634  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 11:28:48.671  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 11:28:48.955  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 11:28:48.958  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 11:28:48.993  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 11:28:50.520  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 11:28:50.590 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 11:28:50.606 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:28:50.609 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:28:50.611 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 11:28:50.615 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 11:28:50.618 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 11:28:50.619 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 11:28:50.621 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 11:28:50.622 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 11:28:50.623 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 11:28:50.624 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 11:28:50.625 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 11:28:50.626 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 11:28:50.627 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 11:28:50.628 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 11:28:50.630 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 11:28:50.637 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 11:28:50.640 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 11:28:50.642 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 11:28:50.647  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:28:51.545  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 11:28:51.804  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [de/telran/urlshortener/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
2024-08-27 11:28:51.807  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:28:51.810  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 11:28:51.814  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 11:28:51.833  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-27 11:28:51.857 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [de/telran/urlshortener/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:880)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:833)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:493)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1420)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [de/telran/urlshortener/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:643)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1166)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1687)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1651)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeanCollection(DefaultListableBeanFactory.java:1541)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1509)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1390)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:872)
	... 98 more
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:178)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)
	... 115 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1179)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.createMvcMatchers(AbstractRequestMatcherRegistry.java:116)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:207)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:360)
	at de.telran.urlshortener.config.SecurityConfig.lambda$securityFilterChain$1(SecurityConfig.java:22)
	at org.springframework.security.config.annotation.web.builders.HttpSecurity.authorizeHttpRequests(HttpSecurity.java:1467)
	at de.telran.urlshortener.config.SecurityConfig.securityFilterChain(SecurityConfig.java:20)
	at de.telran.urlshortener.config.SecurityConfig$$SpringCGLIB$$0.CGLIB$securityFilterChain$1(<generated>)
	at de.telran.urlshortener.config.SecurityConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at de.telran.urlshortener.config.SecurityConfig$$SpringCGLIB$$0.securityFilterChain(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 116 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:663)
	at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1327)
	at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:368)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.initHandlerMappings(HandlerMappingIntrospector.java:130)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.afterPropertiesSet(HandlerMappingIntrospector.java:118)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 137 more
Caused by: java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.validateMethodMapping(AbstractHandlerMethodMapping.java:667)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:633)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.registerHandlerMethod(AbstractHandlerMethodMapping.java:331)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.registerHandlerMethod(RequestMappingHandlerMapping.java:486)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.registerHandlerMethod(RequestMappingHandlerMapping.java:79)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lambda$detectHandlerMethods$2(AbstractHandlerMethodMapping.java:298)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.detectHandlerMethods(AbstractHandlerMethodMapping.java:296)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.processCandidateBean(AbstractHandlerMethodMapping.java:265)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initHandlerMethods(AbstractHandlerMethodMapping.java:224)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.afterPropertiesSet(AbstractHandlerMethodMapping.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.afterPropertiesSet(RequestMappingHandlerMapping.java:233)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 150 more
2024-08-27 11:28:51.876 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@77d7d2d0]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3b32f0b4 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e517165, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@42f3156d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@10650953, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@63648ee9, org.springframework.boot.test.context.SpringBootTestAnnotation@7e93227b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [de/telran/urlshortener/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:880)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:833)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:493)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1420)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [de/telran/urlshortener/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:643)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1166)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1687)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1651)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeanCollection(DefaultListableBeanFactory.java:1541)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1509)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1390)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:872)
	... 98 more
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:178)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)
	... 115 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1179)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.createMvcMatchers(AbstractRequestMatcherRegistry.java:116)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:207)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:360)
	at de.telran.urlshortener.config.SecurityConfig.lambda$securityFilterChain$1(SecurityConfig.java:22)
	at org.springframework.security.config.annotation.web.builders.HttpSecurity.authorizeHttpRequests(HttpSecurity.java:1467)
	at de.telran.urlshortener.config.SecurityConfig.securityFilterChain(SecurityConfig.java:20)
	at de.telran.urlshortener.config.SecurityConfig$$SpringCGLIB$$0.CGLIB$securityFilterChain$1(<generated>)
	at de.telran.urlshortener.config.SecurityConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at de.telran.urlshortener.config.SecurityConfig$$SpringCGLIB$$0.securityFilterChain(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 116 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:663)
	at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1327)
	at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:368)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.initHandlerMappings(HandlerMappingIntrospector.java:130)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.afterPropertiesSet(HandlerMappingIntrospector.java:118)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 137 more
Caused by: java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.validateMethodMapping(AbstractHandlerMethodMapping.java:667)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:633)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.registerHandlerMethod(AbstractHandlerMethodMapping.java:331)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.registerHandlerMethod(RequestMappingHandlerMapping.java:486)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.registerHandlerMethod(RequestMappingHandlerMapping.java:79)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lambda$detectHandlerMethods$2(AbstractHandlerMethodMapping.java:298)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.detectHandlerMethods(AbstractHandlerMethodMapping.java:296)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.processCandidateBean(AbstractHandlerMethodMapping.java:265)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initHandlerMethods(AbstractHandlerMethodMapping.java:224)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.afterPropertiesSet(AbstractHandlerMethodMapping.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.afterPropertiesSet(RequestMappingHandlerMapping.java:233)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 150 more
2024-08-27 11:36:02.873  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 11:36:03.013  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 11:36:03.522  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 11:36:03.562  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 161249 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 11:36:03.569  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 11:36:03.618 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 11:36:04.948  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 11:36:05.090  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 130 ms. Found 4 JPA repository interfaces.
2024-08-27 11:36:05.861  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 11:36:05.939  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 11:36:05.993  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 11:36:06.330  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 11:36:06.372  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 11:36:06.697  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 11:36:06.700  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 11:36:06.739  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 11:36:08.122  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 11:36:08.203 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 11:36:08.218 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:36:08.221 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:36:08.224 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 11:36:08.229 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 11:36:08.232 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 11:36:08.233 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 11:36:08.235 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 11:36:08.236 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 11:36:08.237 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 11:36:08.238 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 11:36:08.240 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 11:36:08.241 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 11:36:08.243 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 11:36:08.244 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 11:36:08.246 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 11:36:08.256 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 11:36:08.258 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 11:36:08.262 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 11:36:08.267  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:36:09.211  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 11:36:09.513 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 11:36:09.699 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 11:36:09.740  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@cec1ce2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4d82ded2, org.springframework.security.web.context.SecurityContextHolderFilter@20183e2d, org.springframework.security.web.header.HeaderWriterFilter@6888a33, org.springframework.web.filter.CorsFilter@655875bb, org.springframework.security.web.authentication.logout.LogoutFilter@d3929ba, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3bd1c7f0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@76ea1cb5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6ad036d6, org.springframework.security.web.access.ExceptionTranslationFilter@6d224921, org.springframework.security.web.access.intercept.AuthorizationFilter@38320819]
2024-08-27 11:36:10.050 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 11:36:10.096 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 11:36:10.283  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 11:36:10.379  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.182 seconds (process running for 9.297)
2024-08-27 11:36:10.578 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:10.657 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:36:10.685 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:10.696 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:10.698 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:36:10.703 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:10.706 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:36:10.709 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:10.713 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:10.721 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:36:10.869 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:36:10.884 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:36:10.890 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:36:11.004 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:36:11.006 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:36:11.831 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 11:36:03 CEST 2024
2024-08-27 11:36:11.841  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:36:11.844  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 11:36:11.849  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 11:36:28.552  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 11:36:28.606  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 161539 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 11:36:28.612  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-27 11:36:29.780  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 11:36:29.865  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-08-27 11:36:30.598  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-27 11:36:30.614  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-27 11:36:30.616  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-27 11:36:30.617  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-27 11:36:30.687  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-27 11:36:30.688  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2016 ms
2024-08-27 11:36:30.755  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 11:36:31.043  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 11:36:31.045  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 11:36:31.061  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 11:36:31.219  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 11:36:31.295  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 11:36:31.346  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 11:36:31.633  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 11:36:31.690  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 11:36:32.933  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 11:36:32.998 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 11:36:33.012 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:36:33.014 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:36:33.016 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 11:36:33.019 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 11:36:33.021 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 11:36:33.023 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 11:36:33.024 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 11:36:33.025 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 11:36:33.026 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 11:36:33.026 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 11:36:33.027 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 11:36:33.028 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 11:36:33.029 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 11:36:33.030 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 11:36:33.031 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 11:36:33.038 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 11:36:33.040 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 11:36:33.042 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 11:36:33.045  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:36:33.850  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 11:36:34.107 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 11:36:34.215 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 11:36:34.254  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6c289070, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@69e58566, org.springframework.security.web.context.SecurityContextHolderFilter@3fbf66e7, org.springframework.security.web.header.HeaderWriterFilter@72b4ecb2, org.springframework.web.filter.CorsFilter@2e41e0c, org.springframework.security.web.authentication.logout.LogoutFilter@4eb69e8d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41ad6c00, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2a10407e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e214d39, org.springframework.security.web.access.ExceptionTranslationFilter@18f1631c, org.springframework.security.web.access.intercept.AuthorizationFilter@328b2c2a]
2024-08-27 11:36:34.387 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 11:36:34.444 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 11:36:34.724  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-27 11:36:34.741  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-27 11:36:34.754  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.676 seconds (process running for 8.161)
2024-08-27 11:36:34.927 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:35.013 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:36:35.036 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:35.046 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:35.047 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:36:35.051 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:35.053 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:36:35.056 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:35.059 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:35.066 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:36:35.231 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:36:35.252 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:36:35.258 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:36:35.386 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:36:35.388 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:37:31.614  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-27 11:37:31.614  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-27 11:37:31.614 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-27 11:37:31.615 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-27 11:37:31.615 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-27 11:37:31.616 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5cc28282
2024-08-27 11:37:31.617 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4f378d7e
2024-08-27 11:37:31.617 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-27 11:37:31.617  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-08-27 11:37:31.634  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:37:31.648  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:37:31.654 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-27 11:37:31.658 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:31.692 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:31.720 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-27 11:37:31.722 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:31.723 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-27 11:37:31.724 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-27 11:37:31.725 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:31.725 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:31.725 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-27 11:37:31.738 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:31.738 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:31.742 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:31.746 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:31.747 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-27 11:37:31.748 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:31.762 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:31.784 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:32.487 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 11:37:32.489 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:32.493 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:32.525 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-27 11:37:32.526 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-27 11:37:32.528 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 11:37:32.530 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:32.532 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:32.550 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-27 11:37:32.552 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-27 11:37:32.563 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:32.602 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-27 11:37:32.605 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-27 11:37:33.571  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 940 ms
2024-08-27 11:37:33.600 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-27 11:37:33.603 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-27 11:37:33.604 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:50.202 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 11:37:50.202 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 11:37:50.238 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@6e4c21d4]
2024-08-27 11:37:50.241  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : Received request to create user with username: havrusha
2024-08-27 11:37:50.242  INFO --- [nio-8080-exec-1] d.t.u.s.i.UserServiceImpl                : Attempting to create user with username: havrusha and email: havrusha@string
2024-08-27 11:37:50.245 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:37:50.399 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:37:50.403 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:37:50.413 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 11:37:50.420 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:37:50.422  INFO --- [nio-8080-exec-1] d.t.u.s.i.UserServiceImpl                : User created successfully with ID: 3
2024-08-27 11:37:50.423  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-08-27 11:37:50.428 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:37:50.428 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@272a1116]
2024-08-27 11:37:50.434 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:39:06.104 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 11:39:06.105 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 11:39:06.108 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@447c9ba6]
2024-08-27 11:39:06.109  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Creating short URL for: https://github.com/schemchuk/url-shortener
2024-08-27 11:39:06.110  INFO --- [nio-8080-exec-7] d.t.u.s.i.ShortUrlServiceImpl            : Creating short URL for user email: havrusha@string
2024-08-27 11:39:06.122 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 11:39:06.134 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 11:39:06.142  INFO --- [nio-8080-exec-7] d.t.u.s.i.ShortUrlServiceImpl            : Generating short key with length: 6
2024-08-27 11:39:06.142  INFO --- [nio-8080-exec-7] d.t.u.s.i.ShortUrlServiceImpl            : Generated short key: MtJ7aR
2024-08-27 11:39:06.142  INFO --- [nio-8080-exec-7] d.t.u.s.i.ShortUrlServiceImpl            : Generated short key: MtJ7aR
2024-08-27 11:39:06.148 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    insert 
    into
        short_urls
        (click_count, creation_date, expiry_date, full_url, short_key, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2024-08-27 11:39:06.151  INFO --- [nio-8080-exec-7] d.t.u.s.i.ShortUrlServiceImpl            : Short URL created with ID: 1
2024-08-27 11:39:06.152  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Short URL created successfully with key: MtJ7aR
2024-08-27 11:39:06.154 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:39:06.155 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@72507d70]
2024-08-27 11:39:06.156 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-08-27 11:39:29.394 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/short-urls/MtJ7aR", parameters={}
2024-08-27 11:39:29.394 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 11:39:29.395  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Fetching short URL with key: MtJ7aR
2024-08-27 11:39:29.396  INFO --- [nio-8080-exec-9] d.t.u.s.i.ShortUrlServiceImpl            : Fetching short URL with key: MtJ7aR
2024-08-27 11:39:29.399 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 11:39:29.412  INFO --- [nio-8080-exec-9] d.t.u.s.i.ShortUrlServiceImpl            : Incrementing click count for short URL with key: MtJ7aR
2024-08-27 11:39:29.414 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 11:39:29.424 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 11:39:29.431  INFO --- [nio-8080-exec-9] d.t.u.s.i.ShortUrlServiceImpl            : Click count incremented successfully for short URL with key: MtJ7aR
2024-08-27 11:39:29.431  INFO --- [nio-8080-exec-9] d.t.u.s.i.ShortUrlServiceImpl            : Short URL fetched successfully with key: MtJ7aR
2024-08-27 11:39:29.431  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@23b98c7b
2024-08-27 11:39:29.432 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:39:29.432 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@23b98c7b]
2024-08-27 11:39:29.435 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:39:32.537 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/short-urls/MtJ7aR", parameters={}
2024-08-27 11:39:32.538 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 11:39:32.539  INFO --- [nio-8080-exec-8] d.t.u.c.ShortUrlController               : Fetching short URL with key: MtJ7aR
2024-08-27 11:39:32.539  INFO --- [nio-8080-exec-8] d.t.u.s.i.ShortUrlServiceImpl            : Fetching short URL with key: MtJ7aR
2024-08-27 11:39:32.542 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 11:39:32.547  INFO --- [nio-8080-exec-8] d.t.u.s.i.ShortUrlServiceImpl            : Incrementing click count for short URL with key: MtJ7aR
2024-08-27 11:39:32.555 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 11:39:32.558 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 11:39:32.560  INFO --- [nio-8080-exec-8] d.t.u.s.i.ShortUrlServiceImpl            : Click count incremented successfully for short URL with key: MtJ7aR
2024-08-27 11:39:32.560  INFO --- [nio-8080-exec-8] d.t.u.s.i.ShortUrlServiceImpl            : Short URL fetched successfully with key: MtJ7aR
2024-08-27 11:39:32.560  INFO --- [nio-8080-exec-8] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@360a8d
2024-08-27 11:39:32.561 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:39:32.561 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@360a8d]
2024-08-27 11:39:32.563 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:39:48.184 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/r/MtJ7aR", parameters={}
2024-08-27 11:39:48.185 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.RedirectController#redirectToFullUrl(String)
2024-08-27 11:39:48.188 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 11:39:48.197 DEBUG --- [io-8080-exec-10] o.s.w.s.v.RedirectView                   : View [RedirectView], model {}
2024-08-27 11:39:48.201 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 302 FOUND
2024-08-27 11:50:07.017  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:50:07.019  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 11:50:07.022  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 11:50:11.062  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 11:50:11.094  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 168780 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 11:50:11.097  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-27 11:50:11.915  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 11:50:11.986  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 62 ms. Found 4 JPA repository interfaces.
2024-08-27 11:50:12.565  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-27 11:50:12.581  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-27 11:50:12.583  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-27 11:50:12.584  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-27 11:50:12.625  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-27 11:50:12.625  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1492 ms
2024-08-27 11:50:12.666  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 11:50:12.844  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 11:50:12.846  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 11:50:12.862  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 11:50:13.019  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 11:50:13.094  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 11:50:13.142  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 11:50:13.425  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 11:50:13.477  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 11:50:14.707  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 11:50:14.773 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 11:50:14.787 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:50:14.789 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:50:14.792 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 11:50:14.795 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 11:50:14.797 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 11:50:14.798 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 11:50:14.800 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 11:50:14.800 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 11:50:14.801 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 11:50:14.802 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 11:50:14.803 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 11:50:14.804 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 11:50:14.805 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 11:50:14.806 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 11:50:14.807 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 11:50:14.814 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 11:50:14.816 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 11:50:14.818 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 11:50:14.822  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:50:15.594  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 11:50:15.844 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 11:50:15.945 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 11:50:15.985  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@78c9c38a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8a0a1d1, org.springframework.security.web.context.SecurityContextHolderFilter@78fd1179, org.springframework.security.web.header.HeaderWriterFilter@98c4a8b, org.springframework.web.filter.CorsFilter@6dd50380, org.springframework.security.web.authentication.logout.LogoutFilter@53b60595, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5e08ed28, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b05292, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@215efb16, org.springframework.security.web.access.ExceptionTranslationFilter@4b02dc4e, org.springframework.security.web.access.intercept.AuthorizationFilter@1d0f03f6]
2024-08-27 11:50:16.128 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 11:50:16.179 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 11:50:16.438  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-27 11:50:16.455  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-27 11:50:16.468  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 5.76 seconds (process running for 6.931)
2024-08-27 11:50:16.645 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:50:16.719 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:50:16.740 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:50:16.749 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:50:16.751 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:50:16.755 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:50:16.756 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:50:16.759 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:50:16.762 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:50:16.769 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:50:16.926 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:50:16.943 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:50:16.949 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:50:17.078 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:50:17.080 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:50:40.786  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-27 11:50:40.786  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-27 11:50:40.787 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-27 11:50:40.787 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-27 11:50:40.787 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-27 11:50:40.788 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@72cf159f
2024-08-27 11:50:40.789 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@1fcef6f9
2024-08-27 11:50:40.789 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-27 11:50:40.790  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-08-27 11:50:40.806  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:50:40.822  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:50:40.829 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-27 11:50:40.833 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:40.869 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:40.901 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-27 11:50:40.903 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:40.907 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:40.931 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-27 11:50:40.933 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-27 11:50:40.933 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-27 11:50:40.934 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:40.934 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:40.933 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-27 11:50:40.934 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:40.936 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:40.938 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:40.944 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:40.973 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:40.990 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:41.677 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 11:50:41.679 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:41.681 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:41.711 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-27 11:50:41.712 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-27 11:50:41.713 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 11:50:41.715 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:41.719 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:41.735 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-27 11:50:41.738 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-27 11:50:41.748 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:41.774 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-27 11:50:41.776 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-27 11:50:42.720  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 921 ms
2024-08-27 11:50:42.748 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-27 11:50:42.752 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-27 11:50:42.753 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:51:01.090 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 11:51:01.090 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 11:51:01.119 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@1a64f868]
2024-08-27 11:51:01.123  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : Received request to create user with username: havrusha
2024-08-27 11:51:01.124  INFO --- [nio-8080-exec-1] d.t.u.s.i.UserServiceImpl                : Attempting to create user with username: havrusha and email: havrusha@string
2024-08-27 11:51:01.127 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:51:01.259 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:51:01.263 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:51:01.270 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 11:51:01.274 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:51:01.277  INFO --- [nio-8080-exec-1] d.t.u.s.i.UserServiceImpl                : User created successfully with ID: 3
2024-08-27 11:51:01.277  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-08-27 11:51:01.280 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:51:01.280 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@55bd40de]
2024-08-27 11:51:01.285 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:52:50.273 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 11:52:50.274 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 11:52:50.277 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@936c5ae]
2024-08-27 11:52:50.278  INFO --- [nio-8080-exec-6] d.t.u.c.ShortUrlController               : Creating short URL for: http://localhost:8080/h2-console/login.do?jsessionid=ecc30f732e980673912b9461de9e6971
2024-08-27 11:52:50.278  INFO --- [nio-8080-exec-6] d.t.u.s.i.ShortUrlServiceImpl            : Creating short URL for user email: havrusha@string
2024-08-27 11:52:50.291 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 11:52:50.305 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 11:52:50.315  INFO --- [nio-8080-exec-6] d.t.u.s.i.ShortUrlServiceImpl            : Generating short key with length: 6
2024-08-27 11:52:50.315  INFO --- [nio-8080-exec-6] d.t.u.s.i.ShortUrlServiceImpl            : Generated short key: 2U8T2A
2024-08-27 11:52:50.315  INFO --- [nio-8080-exec-6] d.t.u.s.i.ShortUrlServiceImpl            : Generated short key: 2U8T2A
2024-08-27 11:52:50.322 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    insert 
    into
        short_urls
        (click_count, creation_date, expiry_date, full_url, short_key, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2024-08-27 11:52:50.326  INFO --- [nio-8080-exec-6] d.t.u.s.i.ShortUrlServiceImpl            : Short URL created with ID: 1
2024-08-27 11:52:50.326  INFO --- [nio-8080-exec-6] d.t.u.c.ShortUrlController               : Short URL created successfully with key: 2U8T2A
2024-08-27 11:52:50.329 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:52:50.330 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@5b1e0b51]
2024-08-27 11:52:50.332 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-08-27 11:53:32.197 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/r/2U8T2A", parameters={}
2024-08-27 11:53:32.198 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.RedirectController#redirectToFullUrl(String)
2024-08-27 11:53:32.202 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 11:53:32.213 DEBUG --- [nio-8080-exec-7] o.s.w.s.v.RedirectView                   : View [RedirectView], model {}
2024-08-27 11:53:32.216 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 302 FOUND
2024-08-27 12:57:39.899  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 12:57:40.067  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 12:57:40.856  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 12:57:40.914  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 203723 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 12:57:40.921  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 12:57:40.977 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 12:57:42.753  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 12:57:42.888  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 123 ms. Found 4 JPA repository interfaces.
2024-08-27 12:57:43.758  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 12:57:43.854  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 12:57:43.916  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 12:57:44.298  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 12:57:44.342  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 12:57:44.685  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 12:57:44.688  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 12:57:44.728  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 12:57:46.251  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 12:57:46.320 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 12:57:46.336 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 12:57:46.339 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 12:57:46.343 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 12:57:46.347 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 12:57:46.350 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 12:57:46.352 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 12:57:46.354 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 12:57:46.354 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 12:57:46.356 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 12:57:46.356 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 12:57:46.358 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 12:57:46.359 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 12:57:46.361 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 12:57:46.362 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 12:57:46.363 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 12:57:46.372 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 12:57:46.374 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 12:57:46.377 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 12:57:46.382  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 12:57:47.366  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 12:57:47.672 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 12:57:47.866 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 12:57:47.914  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b72c62, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5d180628, org.springframework.security.web.context.SecurityContextHolderFilter@17e2ad13, org.springframework.security.web.header.HeaderWriterFilter@6203f10f, org.springframework.web.filter.CorsFilter@7b4b559d, org.springframework.security.web.authentication.logout.LogoutFilter@24c7b944, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5f4f198c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7966a964, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1046aaa4, org.springframework.security.web.access.ExceptionTranslationFilter@72b60be8, org.springframework.security.web.access.intercept.AuthorizationFilter@655875bb]
2024-08-27 12:57:48.274 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 12:57:48.341 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 12:57:48.611  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 12:57:48.713  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 8.324 seconds (process running for 10.609)
2024-08-27 12:57:48.952 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:57:49.049 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:57:49.082 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:57:49.096 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:57:49.099 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:57:49.105 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:57:49.107 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:57:49.112 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:57:49.117 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:57:49.127 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:57:49.296 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:57:49.313 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:57:49.320 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:57:49.434 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:57:49.437 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:57:50.406 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 12:57:40 CEST 2024
2024-08-27 12:57:50.416  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 12:57:50.421  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 12:57:50.442  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 12:58:04.984  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 12:58:05.136  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 12:58:05.645  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 12:58:05.695  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 204021 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 12:58:05.703  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 12:58:05.758 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 12:58:07.147  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 12:58:07.271  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 114 ms. Found 4 JPA repository interfaces.
2024-08-27 12:58:08.284  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 12:58:08.399  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 12:58:08.465  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 12:58:08.838  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 12:58:08.875  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 12:58:09.168  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 12:58:09.172  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 12:58:09.206  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 12:58:10.544  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 12:58:10.609 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 12:58:10.624 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 12:58:10.627 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 12:58:10.630 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 12:58:10.634 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 12:58:10.637 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 12:58:10.638 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 12:58:10.640 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 12:58:10.641 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 12:58:10.642 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 12:58:10.643 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 12:58:10.644 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 12:58:10.645 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 12:58:10.646 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 12:58:10.647 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 12:58:10.648 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 12:58:10.656 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 12:58:10.658 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 12:58:10.662 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 12:58:10.667  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 12:58:11.626  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 12:58:11.910 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 12:58:12.088 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 12:58:12.128  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6101fd7d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b22bebc, org.springframework.security.web.context.SecurityContextHolderFilter@35ffe3ac, org.springframework.security.web.header.HeaderWriterFilter@feb57b4, org.springframework.web.filter.CorsFilter@60773809, org.springframework.security.web.authentication.logout.LogoutFilter@55f29d39, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2e674698, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@270a3cef, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24c7b944, org.springframework.security.web.access.ExceptionTranslationFilter@4e7e7763, org.springframework.security.web.access.intercept.AuthorizationFilter@64f1e9f8]
2024-08-27 12:58:12.415 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 12:58:12.474 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 12:58:12.693  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 12:58:12.797  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.468 seconds (process running for 9.601)
2024-08-27 12:58:13.079 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:13.201 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:58:13.234 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:13.245 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:13.247 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:58:13.252 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:13.254 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:58:13.258 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:13.262 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:13.273 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:58:13.445 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:58:13.465 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:58:13.475 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:58:13.587 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:58:13.590 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:58:14.458 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 12:58:05 CEST 2024
2024-08-27 12:58:14.490  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 12:58:14.495  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 12:58:14.500  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 12:58:28.711  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 12:58:28.759  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 204313 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 12:58:28.765  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-27 12:58:29.975  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 12:58:30.057  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2024-08-27 12:58:30.904  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-27 12:58:30.919  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-27 12:58:30.922  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-27 12:58:30.923  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-27 12:58:30.991  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-27 12:58:30.992  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2174 ms
2024-08-27 12:58:31.059  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 12:58:31.365  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 12:58:31.368  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 12:58:31.384  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 12:58:31.546  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 12:58:31.631  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 12:58:31.676  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 12:58:31.994  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 12:58:32.058  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 12:58:33.425  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 12:58:33.499 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 12:58:33.514 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 12:58:33.516 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 12:58:33.518 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 12:58:33.521 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 12:58:33.524 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 12:58:33.525 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 12:58:33.527 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 12:58:33.528 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 12:58:33.529 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 12:58:33.530 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 12:58:33.531 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 12:58:33.532 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 12:58:33.533 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 12:58:33.533 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 12:58:33.535 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 12:58:33.542 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 12:58:33.544 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 12:58:33.546 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 12:58:33.550  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 12:58:34.342  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 12:58:34.593 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 12:58:34.704 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 12:58:34.748  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@13cec4ff, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5e08ed28, org.springframework.security.web.context.SecurityContextHolderFilter@6a9c848, org.springframework.security.web.header.HeaderWriterFilter@7976d382, org.springframework.web.filter.CorsFilter@24b05292, org.springframework.security.web.authentication.logout.LogoutFilter@696d28ee, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@b9c8678, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@318beab4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@34d6e9a4, org.springframework.security.web.access.ExceptionTranslationFilter@45ea6c24, org.springframework.security.web.access.intercept.AuthorizationFilter@4eb69e8d]
2024-08-27 12:58:34.900 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 12:58:34.949 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 12:58:35.266  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-27 12:58:35.285  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-27 12:58:35.298  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 7.09 seconds (process running for 8.562)
2024-08-27 12:58:35.481 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:35.562 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:58:35.587 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:35.598 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:35.600 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:58:35.604 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:35.606 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:58:35.610 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:35.613 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:35.619 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:58:35.785 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:58:35.802 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:58:35.807 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:58:35.949 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:58:35.951 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:58:46.859  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-27 12:58:46.860  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-27 12:58:46.860 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-27 12:58:46.861 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-27 12:58:46.861 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-27 12:58:46.863 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@48e1e18a
2024-08-27 12:58:46.865 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@7a59780b
2024-08-27 12:58:46.865 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-27 12:58:46.866  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 5 ms
2024-08-27 12:58:46.909  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 12:58:46.932  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 12:58:46.942 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-27 12:58:46.948 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:47.039 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:47.137 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-27 12:58:47.140 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:47.163 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:47.168 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-27 12:58:47.170 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:47.172 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-27 12:58:47.173 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:47.178 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-27 12:58:47.184 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:47.188 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:47.201 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-27 12:58:47.202 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:47.224 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:47.248 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:47.321 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:48.063 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 12:58:48.065 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:48.069 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:48.100 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-27 12:58:48.101 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-27 12:58:48.108 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 12:58:48.109 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:48.112 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:48.126 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-27 12:58:48.128 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-27 12:58:48.143 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:48.171 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-27 12:58:48.173 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-27 12:58:49.013  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 816 ms
2024-08-27 12:58:49.041 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-27 12:58:49.045 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-27 12:58:49.046 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:59:08.204 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 12:59:08.205 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 12:59:08.224 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@7131e1f8]
2024-08-27 12:59:08.227  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : Received request to create user with username: havrusha
2024-08-27 12:59:08.228  INFO --- [nio-8080-exec-1] d.t.u.s.UserService                      : Attempting to create user with username: havrusha and email: havrusha@string
2024-08-27 12:59:08.230 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:59:08.362 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:59:08.365 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:59:08.371 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 12:59:08.377 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:59:08.379  INFO --- [nio-8080-exec-1] d.t.u.s.UserService                      : User created successfully with ID: 3
2024-08-27 12:59:08.379  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-08-27 12:59:08.381 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 12:59:08.382 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@1bdb833a]
2024-08-27 12:59:08.386 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:59:59.509 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : PATCH "/users/3/role?newRole=PAID", parameters={masked}
2024-08-27 12:59:59.510 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-08-27 12:59:59.512  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : Received request to change role for user with ID: 3 to PAID
2024-08-27 12:59:59.513  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : Attempting to change role for user with ID: 3 to PAID
2024-08-27 12:59:59.543 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 12:59:59.554 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 12:59:59.562 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:59:59.568 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-08-27 12:59:59.579 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    update
        subscriptions 
    set
        end_date=?,
        start_date=?,
        subscription_type=?,
        user_id=? 
    where
        id=?
2024-08-27 12:59:59.584 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-08-27 12:59:59.586 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:59:59.589  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : User role updated successfully with ID: 3
2024-08-27 12:59:59.590  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : User role updated successfully with ID: 3
2024-08-27 12:59:59.590 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 12:59:59.590 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@5c30cf95]
2024-08-27 12:59:59.592 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 13:00:14.492 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-08-27 13:00:14.494 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-08-27 13:00:14.496 DEBUG --- [nio-8080-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-08-27 13:00:14.499 DEBUG --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleGlobalException(Exception)
2024-08-27 13:00:14.507 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'image/avif', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 13:00:14.507 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["No static resource favicon.ico."]
2024-08-27 13:00:14.517 DEBUG --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-08-27 13:00:14.518 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 500 INTERNAL_SERVER_ERROR
2024-08-27 13:00:17.582 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-08-27 13:00:17.585 DEBUG --- [io-8080-exec-10] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-08-27 13:00:17.588 DEBUG --- [io-8080-exec-10] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-08-27 13:00:17.589 DEBUG --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleGlobalException(Exception)
2024-08-27 13:00:17.593 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'image/avif', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 13:00:17.594 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["No static resource favicon.ico."]
2024-08-27 13:00:17.596 DEBUG --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-08-27 13:00:17.596 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 500 INTERNAL_SERVER_ERROR
<<<<<<< HEAD
2024-08-28 19:36:51.015  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 19:36:51.063  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 19684 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 19:36:51.069  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-28 19:36:52.329  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 19:36:52.408  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 69 ms. Found 4 JPA repository interfaces.
2024-08-28 19:36:53.172  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-28 19:36:53.184  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-28 19:36:53.186  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-28 19:36:53.187  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-28 19:36:53.248  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-28 19:36:53.248  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2121 ms
2024-08-28 19:36:53.309  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 19:36:53.604  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-28 19:36:53.606  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 19:36:53.624  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-28 19:36:53.799  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 19:36:53.880  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 19:36:53.922  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 19:36:54.196  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 19:36:54.248  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 19:36:55.468  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 19:36:55.533 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:10.920  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 15:24:11.059  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 15:24:11.575  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 15:24:11.617  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 266055 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 15:24:11.622  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 15:24:11.663 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 15:24:12.844  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 15:24:12.939  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 84 ms. Found 4 JPA repository interfaces.
2024-08-27 15:24:13.705  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 15:24:13.781  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 15:24:13.831  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 15:24:14.167  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 15:24:14.208  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 15:24:14.543  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 15:24:14.546  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 15:24:14.600  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 15:24:15.976  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 15:24:16.048 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
<<<<<<< HEAD
2024-08-28 19:36:55.547 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.065 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
<<<<<<< HEAD
2024-08-28 19:36:55.550 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.068 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
<<<<<<< HEAD
2024-08-28 19:36:55.552 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.071 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
<<<<<<< HEAD
2024-08-28 19:36:55.555 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.074 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
<<<<<<< HEAD
2024-08-28 19:36:55.558 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 19:36:55.559 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 19:36:55.561 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 19:36:55.561 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 19:36:55.563 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 19:36:55.564 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 19:36:55.565 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 19:36:55.566 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 19:36:55.567 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 19:36:55.567 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 19:36:55.568 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.077 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 15:24:16.079 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 15:24:16.081 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 15:24:16.082 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 15:24:16.083 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 15:24:16.084 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 15:24:16.087 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 15:24:16.088 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 15:24:16.090 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 15:24:16.091 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 15:24:16.093 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
<<<<<<< HEAD
2024-08-28 19:36:55.576 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.101 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
<<<<<<< HEAD
2024-08-28 19:36:55.578 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.103 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
<<<<<<< HEAD
2024-08-28 19:36:55.580 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.106 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
<<<<<<< HEAD
2024-08-28 19:36:55.584  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 19:36:56.443  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-28 19:36:57.055 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-28 19:36:57.156 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-28 19:36:57.204  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@456beb8b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@191cf38f, org.springframework.security.web.context.SecurityContextHolderFilter@4582da06, org.springframework.security.web.header.HeaderWriterFilter@58e9e852, org.springframework.web.filter.CorsFilter@2dc54b50, org.springframework.security.web.authentication.logout.LogoutFilter@6db59e26, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1c10eb3a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@49f32bcb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@31a9eaa, org.springframework.security.web.access.ExceptionTranslationFilter@5a35efac, org.springframework.security.web.access.intercept.AuthorizationFilter@54dc163a]
2024-08-28 19:36:57.322 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-28 19:36:57.373 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-28 19:36:57.629  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-28 19:36:57.646  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-28 19:36:57.659  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 7.075 seconds (process running for 8.609)
2024-08-28 19:36:57.836 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.110  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:24:16.790  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redirectController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/RedirectController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'shortUrlService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/ShortUrlService.class]: Unsatisfied dependency expressed through constructor parameter 3: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-08-27 15:24:16.791  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:24:16.793  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 15:24:16.797  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 15:24:16.812  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-27 15:24:16.844 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 3 of constructor in de.telran.urlshortener.service.ShortUrlService required a bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' that could not be found.


Action:

Consider defining a bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' in your configuration.

2024-08-27 15:24:16.852 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@1299fed3]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@1930e8ef testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e517165, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@42f3156d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@10650953, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@63648ee9, org.springframework.boot.test.context.SpringBootTestAnnotation@7e93227b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redirectController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/RedirectController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'shortUrlService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/ShortUrlService.class]: Unsatisfied dependency expressed through constructor parameter 3: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:241)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1193)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'shortUrlService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/ShortUrlService.class]: Unsatisfied dependency expressed through constructor parameter 3: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:241)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1193)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1441)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 97 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1878)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1404)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 111 more
2024-08-27 15:37:56.240  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 15:37:56.372  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 15:37:56.849  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 15:37:56.899  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 273877 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 15:37:56.905  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 15:37:56.955 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 15:37:58.185  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 15:37:58.276  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 4 JPA repository interfaces.
2024-08-27 15:37:59.068  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 15:37:59.148  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 15:37:59.204  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 15:37:59.539  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 15:37:59.579  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 15:37:59.876  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 15:37:59.879  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 15:37:59.915  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 15:38:01.303  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 15:38:01.373 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 15:38:01.390 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:38:01.393 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:38:01.396 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 15:38:01.400 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 15:38:01.403 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 15:38:01.404 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 15:38:01.407 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 15:38:01.407 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 15:38:01.409 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 15:38:01.410 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 15:38:01.412 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 15:38:01.413 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 15:38:01.415 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 15:38:01.415 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 15:38:01.417 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 15:38:01.426 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 15:38:01.428 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 15:38:01.431 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 15:38:01.436  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:38:02.065  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redirectController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/RedirectController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'shortUrlService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/ShortUrlService.class]: Unsatisfied dependency expressed through constructor parameter 3: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-08-27 15:38:02.066  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:38:02.069  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 15:38:02.074  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 15:38:02.089  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-27 15:38:02.123 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 3 of constructor in de.telran.urlshortener.service.ShortUrlService required a bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' that could not be found.


Action:

Consider defining a bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' in your configuration.

2024-08-27 15:38:02.131 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@755fdfad]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@2d732cda testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e517165, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@42f3156d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@10650953, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@63648ee9, org.springframework.boot.test.context.SpringBootTestAnnotation@7e93227b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redirectController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/RedirectController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'shortUrlService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/ShortUrlService.class]: Unsatisfied dependency expressed through constructor parameter 3: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:241)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1193)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'shortUrlService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/ShortUrlService.class]: Unsatisfied dependency expressed through constructor parameter 3: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:241)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1193)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1441)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 97 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1878)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1404)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 111 more
2024-08-27 15:43:29.876  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 15:43:30.038  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 15:43:30.759  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 15:43:30.834  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 276634 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 15:43:30.841  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 15:43:30.910 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 15:43:32.541  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 15:43:32.665  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 108 ms. Found 4 JPA repository interfaces.
2024-08-27 15:43:33.544  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 15:43:33.626  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 15:43:33.677  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 15:43:34.009  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 15:43:34.067  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 15:43:34.378  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 15:43:34.381  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 15:43:34.419  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 15:43:35.747  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 15:43:35.811 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 15:43:35.826 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:43:35.829 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:43:35.832 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 15:43:35.835 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 15:43:35.838 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 15:43:35.839 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 15:43:35.842 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 15:43:35.842 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 15:43:35.844 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 15:43:35.844 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 15:43:35.846 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 15:43:35.847 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 15:43:35.848 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 15:43:35.849 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 15:43:35.850 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 15:43:35.858 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 15:43:35.860 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 15:43:35.862 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 15:43:35.867  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:43:36.760  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 15:43:37.037 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 15:43:37.190 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 15:43:37.240  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@36e9fd4f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@730611a0, org.springframework.security.web.context.SecurityContextHolderFilter@5f1bd673, org.springframework.security.web.header.HeaderWriterFilter@7b6e196e, org.springframework.web.filter.CorsFilter@8b727cb, org.springframework.security.web.authentication.logout.LogoutFilter@6b58a0f9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@144fc5fa, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5472c27a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6030eff1, org.springframework.security.web.access.ExceptionTranslationFilter@20183e2d, org.springframework.security.web.access.intercept.AuthorizationFilter@32192a69]
2024-08-27 15:43:37.551 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 15:43:37.609 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 15:43:37.796  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 15:43:37.900  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.59 seconds (process running for 9.781)
2024-08-27 15:43:38.080 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
<<<<<<< HEAD
2024-08-28 19:36:57.913 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.150 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
<<<<<<< HEAD
2024-08-28 19:36:57.935 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.175 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
<<<<<<< HEAD
2024-08-28 19:36:57.945 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.186 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
<<<<<<< HEAD
2024-08-28 19:36:57.947 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.188 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
<<<<<<< HEAD
2024-08-28 19:36:57.951 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.193 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
<<<<<<< HEAD
2024-08-28 19:36:57.952 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.194 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
<<<<<<< HEAD
2024-08-28 19:36:57.956 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.198 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
<<<<<<< HEAD
2024-08-28 19:36:57.959 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.201 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
<<<<<<< HEAD
2024-08-28 19:36:57.965 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.208 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
<<<<<<< HEAD
2024-08-28 19:36:58.123 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.364 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
<<<<<<< HEAD
2024-08-28 19:36:58.140 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.383 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
<<<<<<< HEAD
2024-08-28 19:36:58.146 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.389 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
<<<<<<< HEAD
2024-08-28 19:36:58.287 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.500 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
<<<<<<< HEAD
2024-08-28 19:36:58.289 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.502 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
<<<<<<< HEAD
2024-08-28 19:37:07.887  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-28 19:37:07.888  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-28 19:37:07.888 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-28 19:37:07.888 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-28 19:37:07.888 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-28 19:37:07.890 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1455a374
2024-08-28 19:37:07.891 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@78e386a5
2024-08-28 19:37:07.891 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-28 19:37:07.892  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-08-28 19:37:07.908  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-28 19:37:07.921  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-28 19:37:07.928 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-28 19:37:07.932 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:07.966 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:07.997 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-28 19:37:07.999 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:08.004 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:08.030 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-28 19:37:08.032 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-28 19:37:08.032 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:08.033 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:08.033 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-28 19:37:08.034 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:08.036 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:08.040 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-28 19:37:08.042 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:08.055 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:08.061 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:08.086 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:08.970 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-28 19:37:08.971 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:08.975 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:09.008 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-28 19:37:09.009 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-28 19:37:09.011 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-28 19:37:09.013 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:09.017 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:09.036 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-28 19:37:09.039 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-28 19:37:09.052 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:09.084 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-28 19:37:09.085 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-28 19:37:10.141  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 1035 ms
2024-08-28 19:37:10.171 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-28 19:37:10.175 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-28 19:37:10.177 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
=======
2024-08-27 15:43:39.329 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 15:43:30 CEST 2024
2024-08-27 15:43:39.342  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:43:39.347  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 15:43:39.354  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 15:49:26.597  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 15:49:26.753  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 15:49:27.293  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 15:49:27.342  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 279555 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 15:49:27.348  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 15:49:27.398 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 15:49:28.741  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 15:49:28.834  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 81 ms. Found 4 JPA repository interfaces.
2024-08-27 15:49:29.641  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 15:49:29.721  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 15:49:29.776  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 15:49:30.110  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 15:49:30.152  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 15:49:30.485  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 15:49:30.488  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 15:49:30.527  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 15:49:31.986  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 15:49:32.053 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 15:49:32.068 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:49:32.072 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:49:32.075 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 15:49:32.079 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 15:49:32.082 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 15:49:32.084 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 15:49:32.086 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 15:49:32.087 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 15:49:32.088 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 15:49:32.089 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 15:49:32.091 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 15:49:32.091 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 15:49:32.093 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 15:49:32.095 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 15:49:32.097 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 15:49:32.107 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 15:49:32.110 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 15:49:32.112 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 15:49:32.117  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:49:33.037  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 15:49:33.363 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 15:49:33.526 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 15:49:33.566  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@16c3388e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@cec1ce2, org.springframework.security.web.context.SecurityContextHolderFilter@7d661205, org.springframework.security.web.header.HeaderWriterFilter@44233014, org.springframework.web.filter.CorsFilter@4d82ded2, org.springframework.security.web.authentication.logout.LogoutFilter@64f1e9f8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6203f10f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3bd1c7f0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@655875bb, org.springframework.security.web.access.ExceptionTranslationFilter@270a3cef, org.springframework.security.web.access.intercept.AuthorizationFilter@a8964c1]
2024-08-27 15:49:33.814 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 15:49:33.864 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 15:49:34.062  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 15:49:34.157  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.2 seconds (process running for 9.408)
2024-08-27 15:49:34.376 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:49:34.452 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 15:49:34.480 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:49:34.491 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:49:34.494 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 15:49:34.499 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:49:34.501 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 15:49:34.505 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:49:34.508 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:49:34.516 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 15:49:34.682 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 15:49:34.702 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 15:49:34.709 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 15:49:34.838 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 15:49:34.839 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 15:49:35.646 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 15:49:27 CEST 2024
2024-08-27 15:49:35.654  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:49:35.658  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 15:49:35.662  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 15:51:57.202  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 15:51:57.246  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 280881 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 15:51:57.252  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-27 15:51:58.408  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 15:51:58.493  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-08-27 15:51:59.228  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-27 15:51:59.249  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-27 15:51:59.252  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-27 15:51:59.252  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-27 15:51:59.315  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-27 15:51:59.316  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2013 ms
2024-08-27 15:51:59.377  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 15:51:59.665  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 15:51:59.667  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 15:51:59.684  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 15:51:59.850  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 15:51:59.935  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 15:51:59.985  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 15:52:00.268  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 15:52:00.325  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 15:52:01.565  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 15:52:01.630 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 15:52:01.646 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:52:01.648 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:52:01.651 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 15:52:01.654 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 15:52:01.657 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 15:52:01.658 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 15:52:01.660 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 15:52:01.660 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 15:52:01.662 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 15:52:01.662 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 15:52:01.664 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 15:52:01.664 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 15:52:01.665 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 15:52:01.666 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 15:52:01.667 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 15:52:01.675 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 15:52:01.677 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 15:52:01.679 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 15:52:01.683  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:52:02.463  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 15:52:02.711 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 15:52:02.814 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 15:52:02.864  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@67c912d3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@60515ab1, org.springframework.security.web.context.SecurityContextHolderFilter@38624a3a, org.springframework.security.web.header.HeaderWriterFilter@1c10eb3a, org.springframework.web.filter.CorsFilter@37e967df, org.springframework.security.web.authentication.logout.LogoutFilter@517fb2c3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@73cdf5f9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7d619bcb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@16a89351, org.springframework.security.web.access.ExceptionTranslationFilter@4582da06, org.springframework.security.web.access.intercept.AuthorizationFilter@31a9eaa]
2024-08-27 15:52:02.984 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 15:52:03.037 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 15:52:03.301  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-27 15:52:03.326  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-27 15:52:03.339  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.546 seconds (process running for 8.004)
2024-08-27 15:52:03.514 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:52:03.590 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 15:52:03.612 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:52:03.621 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:52:03.622 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 15:52:03.627 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:52:03.629 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 15:52:03.632 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:52:03.635 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:52:03.641 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 15:52:03.796 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 15:52:03.815 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 15:52:03.822 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 15:52:03.965 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 15:52:03.967 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 15:53:55.322  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-27 15:53:55.322  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-27 15:53:55.322 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-27 15:53:55.322 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-27 15:53:55.322 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-27 15:53:55.323 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6d21a69f
2024-08-27 15:53:55.324 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@6138ee0e
2024-08-27 15:53:55.325 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-27 15:53:55.325  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-08-27 15:53:55.336  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 15:53:55.347  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 15:53:55.352 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-27 15:53:55.355 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:55.385 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:55.412 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-27 15:53:55.414 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:55.418 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:55.430 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-27 15:53:55.431 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:55.434 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:55.432 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-27 15:53:55.437 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:55.441 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-27 15:53:55.441 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-27 15:53:55.443 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:55.443 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:55.454 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:55.458 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:55.484 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:56.078 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 15:53:56.080 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:56.083 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:56.115 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-27 15:53:56.115 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 15:53:56.116 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:56.116 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-27 15:53:56.119 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:56.148 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-27 15:53:56.151 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-27 15:53:56.169 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:56.204 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-27 15:53:56.205 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-27 15:53:57.127  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 903 ms
2024-08-27 15:53:57.156 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-27 15:53:57.160 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-27 15:53:57.163 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:54:38.886 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 15:54:38.886 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 15:54:38.905 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@16a79e9e]
2024-08-27 15:54:38.908  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : Received request to create user with username: havrusha
2024-08-27 15:54:38.909  INFO --- [nio-8080-exec-1] d.t.u.s.UserService                      : Attempting to create user with username: havrusha and email: havrusha@gmail.com
2024-08-27 15:54:38.911 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 15:54:39.044 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 15:54:39.048 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:54:39.055 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 15:54:39.062 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 15:54:39.064  INFO --- [nio-8080-exec-1] d.t.u.s.UserService                      : User created successfully with ID: 3
2024-08-27 15:54:39.065  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-08-27 15:54:39.067 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 15:54:39.067 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@423a780f]
2024-08-27 15:54:39.071 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:55:54.748 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 15:55:54.749 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 15:55:54.751 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@38e8e579]
2024-08-27 15:55:54.751  INFO --- [nio-8080-exec-6] d.t.u.c.ShortUrlController               : Creating short URL for: string
2024-08-27 15:55:54.751  INFO --- [nio-8080-exec-6] d.t.u.s.ShortUrlService                  : Creating short URL for user email: havrusha@gmail.com
2024-08-27 15:55:54.763 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 15:55:54.775 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 15:55:54.787 DEBUG --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleUrlValidationException(UrlValidationException)
2024-08-27 15:55:54.789 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 15:55:54.790 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Invalid URL format"]
2024-08-27 15:55:54.792 DEBUG --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [de.telran.urlshortener.exception.UrlValidationException: Invalid URL format]
2024-08-27 15:55:54.793 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 400 BAD_REQUEST
2024-08-27 15:56:48.665 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 15:56:48.665 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 15:56:48.667 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@36d6a84a]
2024-08-27 15:56:48.667  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Creating short URL for: http://localhost:8080/h2-console/login.do?jsessionid=381a7f29681802044dddb795eaa1ed1a
2024-08-27 15:56:48.667  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Creating short URL for user email: havrusha@gmail.com
2024-08-27 15:56:48.669 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 15:56:48.673 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 15:56:48.676  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Generating short key with length: 6
2024-08-27 15:56:48.676  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Generated short key: tFbNJ1
2024-08-27 15:56:48.677  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Generated short key: tFbNJ1
2024-08-27 15:56:48.683 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    insert 
    into
        short_urls
        (click_count, creation_date, expiry_date, full_url, short_key, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2024-08-27 15:56:48.687  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Short URL created with ID: 1
2024-08-27 15:56:48.688  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Short URL created successfully with key: tFbNJ1
2024-08-27 15:56:48.689 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 15:56:48.690 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@342f2128]
2024-08-27 15:56:48.691 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-08-27 15:57:26.266 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/short-urls/tFbNJ1", parameters={}
2024-08-27 15:57:26.267 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 15:57:26.268  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Fetching short URL with key: tFbNJ1
2024-08-27 15:57:26.268  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Fetching short URL with key: tFbNJ1
2024-08-27 15:57:26.272 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:26.291  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: tFbNJ1
2024-08-27 15:57:26.293 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:26.301 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 15:57:26.305  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: tFbNJ1
2024-08-27 15:57:26.306  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: tFbNJ1
2024-08-27 15:57:26.306  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@478807b5
2024-08-27 15:57:26.306 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 15:57:26.306 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@478807b5]
2024-08-27 15:57:26.308 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:57:29.564 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/short-urls/tFbNJ1", parameters={}
2024-08-27 15:57:29.565 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 15:57:29.566  INFO --- [nio-8080-exec-8] d.t.u.c.ShortUrlController               : Fetching short URL with key: tFbNJ1
2024-08-27 15:57:29.566  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Fetching short URL with key: tFbNJ1
2024-08-27 15:57:29.569 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:29.571  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: tFbNJ1
2024-08-27 15:57:29.575 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:29.578 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 15:57:29.581  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: tFbNJ1
2024-08-27 15:57:29.581  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: tFbNJ1
2024-08-27 15:57:29.581  INFO --- [nio-8080-exec-8] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@33a4708e
2024-08-27 15:57:29.582 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 15:57:29.582 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@33a4708e]
2024-08-27 15:57:29.583 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:57:31.133 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/short-urls/tFbNJ1", parameters={}
2024-08-27 15:57:31.133 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 15:57:31.134  INFO --- [io-8080-exec-10] d.t.u.c.ShortUrlController               : Fetching short URL with key: tFbNJ1
2024-08-27 15:57:31.134  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Fetching short URL with key: tFbNJ1
2024-08-27 15:57:31.136 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:31.138  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: tFbNJ1
2024-08-27 15:57:31.140 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:31.142 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 15:57:31.144  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: tFbNJ1
2024-08-27 15:57:31.144  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: tFbNJ1
2024-08-27 15:57:31.144  INFO --- [io-8080-exec-10] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@eb586d0
2024-08-27 15:57:31.145 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 15:57:31.146 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@eb586d0]
2024-08-27 15:57:31.147 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:57:55.359 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/r/tFbNJ1", parameters={}
2024-08-27 15:57:55.360 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.RedirectController#redirectToFullUrl(String)
2024-08-27 15:57:55.362 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:55.373 DEBUG --- [nio-8080-exec-1] o.s.w.s.v.RedirectView                   : View [RedirectView], model {}
2024-08-27 15:57:55.378 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 302 FOUND
2024-08-27 15:59:54.288 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 15:59:54.288 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 15:59:54.291 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@6d5ab11c]
2024-08-27 15:59:54.291  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-08-27 15:59:54.292  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@sraka
2024-08-27 15:59:54.293 DEBUG --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleEmailValidationException(EmailValidationException)
2024-08-27 15:59:54.294 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 15:59:54.294 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Invalid email format"]
2024-08-27 15:59:54.296 DEBUG --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [de.telran.urlshortener.exception.EmailValidationException: Invalid email format]
2024-08-27 15:59:54.297 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 400 BAD_REQUEST
2024-08-27 16:00:08.154 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:00:08.155 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:00:08.157 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@5e846e27]
2024-08-27 16:00:08.157  INFO --- [nio-8080-exec-5] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-08-27 16:00:08.157  INFO --- [nio-8080-exec-5] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@sraka.be
2024-08-27 16:00:08.159 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:00:08.257 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 16:00:08.259 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:00:08.261 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 16:00:08.262 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 16:00:08.263  INFO --- [nio-8080-exec-5] d.t.u.s.UserService                      : User created successfully with ID: 4
2024-08-27 16:00:08.263  INFO --- [nio-8080-exec-5] d.t.u.c.UserController                   : User created successfully with ID: 4
2024-08-27 16:00:08.263 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:00:08.263 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@27be293a]
2024-08-27 16:00:08.264 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:00:22.212 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:00:22.212 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:00:22.214 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@34dbaa]
2024-08-27 16:00:22.214  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-08-27 16:00:22.214  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@sraka.be
2024-08-27 16:00:22.215 DEBUG --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handlePasswordValidationException(PasswordValidationException)
2024-08-27 16:00:22.216 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 16:00:22.216 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Password must be at least 8 characters long"]
2024-08-27 16:00:22.218 DEBUG --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [de.telran.urlshortener.exception.PasswordValidationException: Password must be at least 8 characters long]
2024-08-27 16:00:22.218 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 400 BAD_REQUEST
2024-08-27 16:00:37.162 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:00:37.162 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:00:37.164 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@539e8400]
2024-08-27 16:00:37.165  INFO --- [nio-8080-exec-7] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-08-27 16:00:37.165  INFO --- [nio-8080-exec-7] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@sraka.be
2024-08-27 16:00:37.167 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:00:37.171  WARN --- [nio-8080-exec-7] d.t.u.s.UserService                      : Attempted to create user with already existing email: wasya@sraka.be
2024-08-27 16:00:37.172 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Failed to complete request: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
2024-08-27 16:00:37.178 ERROR --- [nio-8080-exec-7] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use] with root cause
de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:40)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-08-27 16:00:37.198 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-08-27 16:00:37.198 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-08-27 16:00:37.206 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:00:37.207 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Tue Aug 27 16:00:37 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-08-27 16:00:37.212 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-08-27 16:01:09.050 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:01:09.050 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:01:09.052 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@c164fe9]
2024-08-27 16:01:09.052  INFO --- [nio-8080-exec-9] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-08-27 16:01:09.052  INFO --- [nio-8080-exec-9] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@kamrad.be
2024-08-27 16:01:09.054 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:01:09.151 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 16:01:09.154  WARN --- [nio-8080-exec-9] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 23505, SQLState: 23505
2024-08-27 16:01:09.154 ERROR --- [nio-8080-exec-9] o.h.e.j.s.SqlExceptionHelper             : Нарушение уникального индекса или первичного ключа: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]
2024-08-27 16:01:09.161 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Нарушение уникального индекса или первичного ключа: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]] [insert into users (email,password,user_name,id) values (?,?,?,default)]; SQL [insert into users (email,password,user_name,id) values (?,?,?,default)]; constraint ["PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]]
2024-08-27 16:01:09.162 ERROR --- [nio-8080-exec-9] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Нарушение уникального индекса или первичного ключа: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]] [insert into users (email,password,user_name,id) values (?,?,?,default)]; SQL [insert into users (email,password,user_name,id) values (?,?,?,default)]; constraint ["PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]]] with root cause
org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Нарушение уникального индекса или первичного ключа: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:520)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.index.Index.getDuplicateKeyException(Index.java:527)
	at org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)
	at org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)
	at org.h2.command.dml.Insert.insertRows(Insert.java:174)
	at org.h2.command.dml.Insert.update(Insert.java:135)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:242)
	at org.h2.command.CommandContainer.update(CommandContainer.java:163)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:216)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:174)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performInsert(GetGeneratedKeysDelegate.java:107)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorPostInsertSingleTable.execute(MutationExecutorPostInsertSingleTable.java:100)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2860)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:667)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:290)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:271)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:321)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:386)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:300)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:219)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:134)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:766)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:750)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)
	at jdk.proxy2/jdk.proxy2.$Proxy134.persist(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy134.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:618)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)
	at jdk.proxy2/jdk.proxy2.$Proxy144.save(Unknown Source)
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:49)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-08-27 16:01:09.167 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-08-27 16:01:09.168 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-08-27 16:01:09.169 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:01:09.169 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Tue Aug 27 16:01:09 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-08-27 16:01:09.170 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-08-27 16:01:44.865 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:01:44.866 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:01:44.867 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@3e1b14fc]
2024-08-27 16:01:44.868  INFO --- [nio-8080-exec-8] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-08-27 16:01:44.868  INFO --- [nio-8080-exec-8] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@kamrad.be
2024-08-27 16:01:44.870 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:01:45.004 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 16:01:45.005  WARN --- [nio-8080-exec-8] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 23505, SQLState: 23505
2024-08-27 16:01:45.005 ERROR --- [nio-8080-exec-8] o.h.e.j.s.SqlExceptionHelper             : Нарушение уникального индекса или первичного ключа: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]
2024-08-27 16:01:45.006 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Нарушение уникального индекса или первичного ключа: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]] [insert into users (email,password,user_name,id) values (?,?,?,default)]; SQL [insert into users (email,password,user_name,id) values (?,?,?,default)]; constraint ["PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]]
2024-08-27 16:01:45.007 ERROR --- [nio-8080-exec-8] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Нарушение уникального индекса или первичного ключа: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]] [insert into users (email,password,user_name,id) values (?,?,?,default)]; SQL [insert into users (email,password,user_name,id) values (?,?,?,default)]; constraint ["PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]]] with root cause
org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Нарушение уникального индекса или первичного ключа: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:520)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.index.Index.getDuplicateKeyException(Index.java:527)
	at org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)
	at org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)
	at org.h2.command.dml.Insert.insertRows(Insert.java:174)
	at org.h2.command.dml.Insert.update(Insert.java:135)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:242)
	at org.h2.command.CommandContainer.update(CommandContainer.java:163)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:216)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:174)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performInsert(GetGeneratedKeysDelegate.java:107)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorPostInsertSingleTable.execute(MutationExecutorPostInsertSingleTable.java:100)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2860)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:667)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:290)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:271)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:321)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:386)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:300)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:219)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:134)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:766)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:750)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)
	at jdk.proxy2/jdk.proxy2.$Proxy134.persist(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy134.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:618)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)
	at jdk.proxy2/jdk.proxy2.$Proxy144.save(Unknown Source)
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:49)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-08-27 16:01:45.010 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-08-27 16:01:45.010 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-08-27 16:01:45.011 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:01:45.011 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Tue Aug 27 16:01:45 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-08-27 16:01:45.012 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-08-27 16:01:54.940 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:01:54.941 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:01:54.942 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@507fb5d7]
2024-08-27 16:01:54.942  INFO --- [io-8080-exec-10] d.t.u.c.UserController                   : Received request to create user with username: wasyar
2024-08-27 16:01:54.942  INFO --- [io-8080-exec-10] d.t.u.s.UserService                      : Attempting to create user with username: wasyar and email: wasya@kamrad.be
2024-08-27 16:01:54.944 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:01:55.091 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 16:01:55.095 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:01:55.097 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 16:01:55.099 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 16:01:55.100  INFO --- [io-8080-exec-10] d.t.u.s.UserService                      : User created successfully with ID: 7
2024-08-27 16:01:55.100  INFO --- [io-8080-exec-10] d.t.u.c.UserController                   : User created successfully with ID: 7
2024-08-27 16:01:55.101 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:01:55.101 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@7cdad98b]
2024-08-27 16:01:55.102 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:03:18.382 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:03:18.382 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:03:18.385 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@73e08016]
2024-08-27 16:03:18.385  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : Received request to create user with username: wasyart
2024-08-27 16:03:18.385  INFO --- [nio-8080-exec-2] d.t.u.s.UserService                      : Attempting to create user with username: wasyart and email: wasya@kamrad.be
2024-08-27 16:03:18.388 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:03:18.390  WARN --- [nio-8080-exec-2] d.t.u.s.UserService                      : Attempted to create user with already existing email: wasya@kamrad.be
2024-08-27 16:03:18.391 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Failed to complete request: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
2024-08-27 16:03:18.392 ERROR --- [nio-8080-exec-2] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use] with root cause
de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:40)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-08-27 16:03:18.396 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-08-27 16:03:18.397 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-08-27 16:03:18.399 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:03:18.399 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Tue Aug 27 16:03:18 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-08-27 16:03:18.401 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-08-27 16:03:35.392 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:03:35.392 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:03:35.393 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@1c43cb02]
2024-08-27 16:03:35.393  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : Received request to create user with username: wasyart
2024-08-27 16:03:35.393  INFO --- [nio-8080-exec-3] d.t.u.s.UserService                      : Attempting to create user with username: wasyart and email: wasya@kamrad.bet
2024-08-27 16:03:35.395 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:03:35.486 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 16:03:35.488 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:03:35.489 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 16:03:35.491 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 16:03:35.491  INFO --- [nio-8080-exec-3] d.t.u.s.UserService                      : User created successfully with ID: 8
2024-08-27 16:03:35.492  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : User created successfully with ID: 8
2024-08-27 16:03:35.492 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:03:35.492 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@37e37a4e]
2024-08-27 16:03:35.493 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:03:52.113 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:03:52.113 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:03:52.115 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@4dd25ded]
2024-08-27 16:03:52.115  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : Received request to create user with username: wasyartw
2024-08-27 16:03:52.115  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : Attempting to create user with username: wasyartw and email: wasya@kamrad.betr
2024-08-27 16:03:52.118 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:03:52.264 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 16:03:52.267 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:03:52.268 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 16:03:52.270 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 16:03:52.271  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : User created successfully with ID: 9
2024-08-27 16:03:52.271  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : User created successfully with ID: 9
2024-08-27 16:03:52.271 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:03:52.272 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@4fc2affc]
2024-08-27 16:03:52.273 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:04:57.458 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-08-27 16:04:57.459 DEBUG --- [io-8080-exec-10] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-08-27 16:04:57.461 DEBUG --- [io-8080-exec-10] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-08-27 16:04:57.463 DEBUG --- [io-8080-exec-10] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-08-27 16:04:57.464 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-08-27 16:04:57.467 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for GET "/error", parameters={}
2024-08-27 16:04:57.467 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-08-27 16:04:57.469 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json]
2024-08-27 16:04:57.471 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Tue Aug 27 16:04:57 CEST 2024, status=404, error=Not Found, path=/favicon.ico}]
2024-08-27 16:04:57.473 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 404
2024-08-27 16:08:03.469 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : PUT "/users/9", parameters={}
2024-08-27 16:08:03.469 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-08-27 16:08:03.471 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@61e4c6b]
2024-08-27 16:08:03.473  INFO --- [nio-8080-exec-8] d.t.u.c.UserController                   : Received request to update user with ID: 9
2024-08-27 16:08:03.473  INFO --- [nio-8080-exec-8] d.t.u.s.UserService                      : Attempting to update user with ID: 9
2024-08-27 16:08:03.488 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 16:08:03.501 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 16:08:03.644 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    update
        users 
    set
        email=?,
        password=?,
        user_name=? 
    where
        id=?
2024-08-27 16:08:03.646  INFO --- [nio-8080-exec-8] d.t.u.s.UserService                      : User with ID: 9 updated successfully
2024-08-27 16:08:03.646  INFO --- [nio-8080-exec-8] d.t.u.c.UserController                   : User updated successfully with ID: 9
2024-08-27 16:08:03.646 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:08:03.646 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@32491098]
2024-08-27 16:08:03.647 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:09:15.218 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : DELETE "/users/7", parameters={}
2024-08-27 16:09:15.218 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-08-27 16:09:15.219  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : Received request to delete user with ID: 7
2024-08-27 16:09:15.219  INFO --- [nio-8080-exec-2] d.t.u.s.UserService                      : Attempting to delete user with ID: 7
2024-08-27 16:09:15.220 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 16:09:15.223 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 16:09:15.251 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        su1_0.user_id,
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key 
    from
        short_urls su1_0 
    where
        su1_0.user_id=?
2024-08-27 16:09:15.259 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=?
2024-08-27 16:09:15.266 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    delete 
    from
        subscriptions 
    where
        id=?
2024-08-27 16:09:15.269 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    delete 
    from
        users 
    where
        id=?
2024-08-27 16:09:15.270  INFO --- [nio-8080-exec-2] d.t.u.s.UserService                      : User with ID: 7 deleted successfully
2024-08-27 16:09:15.271  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : User deleted successfully with ID: 7
2024-08-27 16:09:15.271 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:09:15.271 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Nothing to write: null body
2024-08-27 16:09:15.272 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:10:08.182 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : PATCH "/users/3/role?newRole=PAID", parameters={masked}
2024-08-27 16:10:08.183 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-08-27 16:10:08.185  INFO --- [nio-8080-exec-9] d.t.u.c.UserController                   : Received request to change role for user with ID: 3 to PAID
2024-08-27 16:10:08.185  INFO --- [nio-8080-exec-9] d.t.u.s.UserService                      : Attempting to change role for user with ID: 3 to PAID
2024-08-27 16:10:08.186 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 16:10:08.191 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 16:10:08.198 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:10:08.211 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-08-27 16:10:08.216 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    update
        subscriptions 
    set
        end_date=?,
        start_date=?,
        subscription_type=?,
        user_id=? 
    where
        id=?
2024-08-27 16:10:08.217 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-08-27 16:10:08.218 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 16:10:08.221  INFO --- [nio-8080-exec-9] d.t.u.s.UserService                      : User role updated successfully with ID: 3
2024-08-27 16:10:08.221  INFO --- [nio-8080-exec-9] d.t.u.c.UserController                   : User role updated successfully with ID: 3
2024-08-27 16:10:08.222 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:10:08.222 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@6110822b]
2024-08-27 16:10:08.223 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:10:20.045 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : PATCH "/users/2/role?newRole=PAID", parameters={masked}
2024-08-27 16:10:20.045 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-08-27 16:10:20.046  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : Received request to change role for user with ID: 2 to PAID
2024-08-27 16:10:20.046  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : Attempting to change role for user with ID: 2 to PAID
2024-08-27 16:10:20.048 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 16:10:20.053 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 16:10:20.057 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:10:20.065 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-08-27 16:10:20.068 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 16:10:20.073 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-08-27 16:10:20.075 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 16:10:20.081  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : User role updated successfully with ID: 2
2024-08-27 16:10:20.082  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : User role updated successfully with ID: 2
2024-08-27 16:10:20.082 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:10:20.082 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@3a212782]
2024-08-27 16:10:20.085 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:15:29.886 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 16:15:29.886 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 16:15:29.887 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@492cd2c9]
2024-08-27 16:15:29.888  INFO --- [io-8080-exec-10] d.t.u.c.ShortUrlController               : Creating short URL for: http://localhost:8080/h2-console/login.do?jsessionid=381a7f29681802044dddb795eaa1ed1a
2024-08-27 16:15:29.888  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Creating short URL for user email: wasya@kamrad.betr
2024-08-27 16:15:29.890 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 16:15:29.892 ERROR --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : User not found with email: wasya@kamrad.betr
2024-08-27 16:15:29.893 DEBUG --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleShortUrlNotFoundException(ShortUrlNotFoundException)
2024-08-27 16:15:29.894 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 16:15:29.894 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["User not found with email: wasya@kamrad.betr"]
2024-08-27 16:15:29.895 DEBUG --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [de.telran.urlshortener.exception.ShortUrlNotFoundException: User not found with email: wasya@kamrad.betr]
2024-08-27 16:15:29.896 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-08-27 16:16:44.991 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 16:16:44.991 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 16:16:44.992 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@fd87f79]
2024-08-27 16:16:44.993  INFO --- [nio-8080-exec-1] d.t.u.c.ShortUrlController               : Creating short URL for: http://localhost:8080/swagger-ui/index.html#/short-url-controller
2024-08-27 16:16:44.993  INFO --- [nio-8080-exec-1] d.t.u.s.ShortUrlService                  : Creating short URL for user email: wasya@kamrad.betr
2024-08-27 16:16:44.995 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 16:16:44.996 ERROR --- [nio-8080-exec-1] d.t.u.s.ShortUrlService                  : User not found with email: wasya@kamrad.betr
2024-08-27 16:16:44.996 DEBUG --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleShortUrlNotFoundException(ShortUrlNotFoundException)
2024-08-27 16:16:44.997 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 16:16:44.997 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["User not found with email: wasya@kamrad.betr"]
2024-08-27 16:16:44.998 DEBUG --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [de.telran.urlshortener.exception.ShortUrlNotFoundException: User not found with email: wasya@kamrad.betr]
2024-08-27 16:16:44.998 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-08-27 16:17:43.207 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 16:17:43.207 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 16:17:43.208 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@648cedbd]
2024-08-27 16:17:43.208  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Creating short URL for: http://localhost:8080/swagger-ui/index.html#/short-url-controller
2024-08-27 16:17:43.208  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Creating short URL for user email: string@gmail.cjm
2024-08-27 16:17:43.210 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 16:17:43.213 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 16:17:43.214  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Generating short key with length: 6
2024-08-27 16:17:43.215  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Generated short key: GSXeIc
2024-08-27 16:17:43.215  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Generated short key: GSXeIc
2024-08-27 16:17:43.216 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    insert 
    into
        short_urls
        (click_count, creation_date, expiry_date, full_url, short_key, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2024-08-27 16:17:43.219  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Short URL created with ID: 2
2024-08-27 16:17:43.219  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Short URL created successfully with key: GSXeIc
2024-08-27 16:17:43.220 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:17:43.220 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@54edb458]
2024-08-27 16:17:43.221 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-08-27 16:18:45.258 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/short-urls/GSXeIc", parameters={}
2024-08-27 16:18:45.258 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 16:18:45.258  INFO --- [nio-8080-exec-2] d.t.u.c.ShortUrlController               : Fetching short URL with key: GSXeIc
2024-08-27 16:18:45.259  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Fetching short URL with key: GSXeIc
2024-08-27 16:18:45.261 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 16:18:45.262  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: GSXeIc
2024-08-27 16:18:45.264 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 16:18:45.267 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 16:18:45.268  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: GSXeIc
2024-08-27 16:18:45.268  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: GSXeIc
2024-08-27 16:18:45.268  INFO --- [nio-8080-exec-2] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@1f28dac9
2024-08-27 16:18:45.269 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:18:45.269 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@1f28dac9]
2024-08-27 16:18:45.271 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:18:46.404 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/short-urls/GSXeIc", parameters={}
2024-08-27 16:18:46.404 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 16:18:46.405  INFO --- [nio-8080-exec-3] d.t.u.c.ShortUrlController               : Fetching short URL with key: GSXeIc
2024-08-27 16:18:46.405  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Fetching short URL with key: GSXeIc
2024-08-27 16:18:46.407 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 16:18:46.409  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: GSXeIc
2024-08-27 16:18:46.413 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 16:18:46.415 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 16:18:46.417  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: GSXeIc
2024-08-27 16:18:46.417  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: GSXeIc
2024-08-27 16:18:46.417  INFO --- [nio-8080-exec-3] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@cbaec49
2024-08-27 16:18:46.418 DEBUG --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:18:46.418 DEBUG --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@cbaec49]
2024-08-27 16:18:46.419 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:18:47.261 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/short-urls/GSXeIc", parameters={}
2024-08-27 16:18:47.262 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 16:18:47.262  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Fetching short URL with key: GSXeIc
2024-08-27 16:18:47.262  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Fetching short URL with key: GSXeIc
2024-08-27 16:18:47.265 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 16:18:47.267  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: GSXeIc
2024-08-27 16:18:47.269 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 16:18:47.272 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 16:18:47.273  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: GSXeIc
2024-08-27 16:18:47.274  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: GSXeIc
2024-08-27 16:18:47.274  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@75f0c60c
2024-08-27 16:18:47.274 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:18:47.275 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@75f0c60c]
2024-08-27 16:18:47.276 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:19:50.461 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/roles/ADMIN", parameters={}
2024-08-27 16:19:50.462 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.RoleController#getRoleByName(String)
2024-08-27 16:19:50.465 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:19:50.469 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:19:50.470 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.RoleDto.RoleResponse@5b3318b1]
2024-08-27 16:19:50.471 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:20:56.027 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : DELETE "/short-urls/1", parameters={}
2024-08-27 16:20:56.028 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#deleteShortUrl(Long)
2024-08-27 16:20:56.028  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Deleting short URL with ID: 1
2024-08-27 16:20:56.029  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Attempting to delete short URL with ID: 1
2024-08-27 16:20:56.031 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.id=?
2024-08-27 16:20:56.036 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    delete 
    from
        short_urls 
    where
        id=?
2024-08-27 16:20:56.037  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Short URL with ID: 1 deleted successfully
2024-08-27 16:20:56.037  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Short URL with ID: 1 deleted successfully
2024-08-27 16:20:56.039 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:20:56.039 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-08-27 16:20:56.039 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 204 NO_CONTENT
2024-08-27 16:22:29.165 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/users/1", parameters={}
2024-08-27 16:22:29.165 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-08-27 16:22:29.166  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : Received request to get user with ID: 1
2024-08-27 16:22:29.166  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : Fetching user with ID: 1
2024-08-27 16:22:29.168 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 16:22:29.174 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 16:22:29.179  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : User with ID: 1 fetched successfully
2024-08-27 16:22:29.179  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : User fetched successfully with ID: 1
2024-08-27 16:22:29.180 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:22:29.180 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@58d47c69]
2024-08-27 16:22:29.182 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 15:23:53.424  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 15:23:53.470  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 250860 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 15:23:53.475  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-28 15:23:54.669  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 15:23:54.753  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2024-08-28 15:23:55.486  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-28 15:23:55.499  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-28 15:23:55.501  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-28 15:23:55.502  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-28 15:23:55.563  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-28 15:23:55.564  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2039 ms
2024-08-28 15:23:55.624  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 15:23:55.912  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-28 15:23:55.914  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 15:23:55.929  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-28 15:23:56.092  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 15:23:56.172  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 15:23:56.217  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 15:23:56.494  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 15:23:56.546  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 15:23:57.775  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 15:23:57.841 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 15:23:57.856 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 15:23:57.858 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 15:23:57.861 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 15:23:57.864 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 15:23:57.867 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 15:23:57.868 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 15:23:57.869 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 15:23:57.870 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 15:23:57.871 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 15:23:57.872 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 15:23:57.873 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 15:23:57.874 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 15:23:57.875 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 15:23:57.876 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 15:23:57.877 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 15:23:57.887 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 15:23:57.889 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 15:23:57.892 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 15:23:57.896  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 15:23:58.679  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-28 15:23:58.931 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-28 15:23:59.034 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-28 15:23:59.071  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@517fb2c3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6c289070, org.springframework.security.web.context.SecurityContextHolderFilter@5687ba39, org.springframework.security.web.header.HeaderWriterFilter@3ad5f99, org.springframework.web.filter.CorsFilter@69e58566, org.springframework.security.web.authentication.logout.LogoutFilter@130bd00e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6abbdcde, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@41ad6c00, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e41e0c, org.springframework.security.web.access.ExceptionTranslationFilter@6b9b9cb9, org.springframework.security.web.access.intercept.AuthorizationFilter@738ed8d3]
2024-08-28 15:23:59.198 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-28 15:23:59.247 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-28 15:23:59.506  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-28 15:23:59.523  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-28 15:23:59.535  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.538 seconds (process running for 8.01)
2024-08-28 15:23:59.726 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:23:59.807 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 15:23:59.831 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:23:59.840 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:23:59.842 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 15:23:59.847 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:23:59.848 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 15:23:59.851 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:23:59.854 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:23:59.861 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 15:24:00.031 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 15:24:00.045 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 15:24:00.051 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 15:24:00.190 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 15:24:00.192 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 15:38:20.721  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 15:38:20.725  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-28 15:38:20.731  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-28 15:38:24.174  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 15:38:24.219  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 258467 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 15:38:24.224  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-28 15:38:25.354  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 15:38:25.437  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73 ms. Found 4 JPA repository interfaces.
2024-08-28 15:38:26.162  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-28 15:38:26.176  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-28 15:38:26.179  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-28 15:38:26.179  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-28 15:38:26.250  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-28 15:38:26.251  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1972 ms
2024-08-28 15:38:26.311  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 15:38:26.577  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-28 15:38:26.579  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 15:38:26.596  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-28 15:38:26.762  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 15:38:26.841  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 15:38:26.885  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 15:38:27.158  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 15:38:27.214  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 15:38:28.452  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 15:38:28.523 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 15:38:28.537 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 15:38:28.540 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 15:38:28.542 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 15:38:28.545 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 15:38:28.547 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 15:38:28.548 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 15:38:28.550 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 15:38:28.551 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 15:38:28.553 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 15:38:28.553 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 15:38:28.555 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 15:38:28.556 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 15:38:28.557 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 15:38:28.558 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 15:38:28.559 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 15:38:28.566 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 15:38:28.568 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 15:38:28.571 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 15:38:28.575  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 15:38:29.358  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-28 15:38:29.386  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 25a1fbe6-3d41-4096-9b36-83e981f03476

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-28 15:38:29.626 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-28 15:38:29.738 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-28 15:38:29.774  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@54dc163a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5bbeb9e3, org.springframework.security.web.context.SecurityContextHolderFilter@52238861, org.springframework.security.web.header.HeaderWriterFilter@5a35efac, org.springframework.web.filter.CorsFilter@456beb8b, org.springframework.security.web.authentication.logout.LogoutFilter@6e200307, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4582da06, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@523e019c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@191cf38f, org.springframework.security.web.access.ExceptionTranslationFilter@2a10407e, org.springframework.security.web.access.intercept.AuthorizationFilter@611ffa8d]
2024-08-28 15:38:29.902 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-28 15:38:29.949 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-28 15:38:30.207  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-28 15:38:30.224  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-28 15:38:30.236  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.495 seconds (process running for 7.955)
2024-08-28 15:38:30.409 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:38:30.484 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 15:38:30.507 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:38:30.515 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:38:30.517 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 15:38:30.521 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:38:30.522 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 15:38:30.526 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:38:30.529 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:38:30.535 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 15:38:30.690 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 15:38:30.706 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 15:38:30.711 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 15:38:30.849 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 15:38:30.851 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 15:38:58.694  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-28 16:01:28.524  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 16:01:28.573  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 270247 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 16:01:28.579  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-28 16:01:29.711  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 16:01:29.790  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 69 ms. Found 4 JPA repository interfaces.
2024-08-28 16:01:30.686  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-28 16:01:30.698  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-28 16:01:30.701  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-28 16:01:30.702  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-28 16:01:30.761  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-28 16:01:30.761  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2129 ms
2024-08-28 16:01:30.822  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 16:01:31.111  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-28 16:01:31.113  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 16:01:31.129  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-28 16:01:31.286  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 16:01:31.369  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 16:01:31.417  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 16:01:31.691  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 16:01:31.742  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 16:01:32.956  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 16:01:33.025 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 16:01:33.040 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:01:33.043 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:01:33.046 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 16:01:33.050 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 16:01:33.054 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 16:01:33.055 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 16:01:33.057 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 16:01:33.058 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 16:01:33.059 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 16:01:33.060 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 16:01:33.062 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 16:01:33.062 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 16:01:33.063 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 16:01:33.064 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 16:01:33.065 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 16:01:33.073 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 16:01:33.075 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 16:01:33.077 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 16:01:33.081  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:01:33.667  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/UserController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/UserService.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-08-28 16:01:33.668  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:01:33.670  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-28 16:01:33.674  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-28 16:01:33.676  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-08-28 16:01:33.692  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-28 16:01:33.719 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in de.telran.urlshortener.service.UserService required a bean of type 'org.springframework.security.crypto.password.PasswordEncoder' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.crypto.password.PasswordEncoder' in your configuration.

2024-08-28 16:02:11.886  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-28 16:02:12.082  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-28 16:02:12.594  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 16:02:12.643  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 270690 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 16:02:12.650  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-28 16:02:12.708 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-28 16:02:13.986  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 16:02:14.080  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 81 ms. Found 4 JPA repository interfaces.
2024-08-28 16:02:14.989  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 16:02:15.098  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 16:02:15.151  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 16:02:15.501  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 16:02:15.540  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 16:02:15.874  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-28 16:02:15.876  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 16:02:15.909  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 16:02:17.234  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 16:02:17.306 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 16:02:17.323 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:02:17.328 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:02:17.337 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 16:02:17.342 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 16:02:17.345 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 16:02:17.347 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 16:02:17.349 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 16:02:17.350 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 16:02:17.352 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 16:02:17.353 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 16:02:17.355 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 16:02:17.356 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 16:02:17.358 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 16:02:17.359 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 16:02:17.361 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 16:02:17.373 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 16:02:17.376 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 16:02:17.379 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 16:02:17.385  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:02:18.049  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/UserController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/UserService.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-08-28 16:02:18.050  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:02:18.053  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-28 16:02:18.057  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-28 16:02:18.073  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-28 16:02:18.107 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in de.telran.urlshortener.service.UserService required a bean of type 'org.springframework.security.crypto.password.PasswordEncoder' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.crypto.password.PasswordEncoder' in your configuration.

2024-08-28 16:02:18.116 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@9120cb5]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@69cc3370 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e517165, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@42f3156d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@10650953, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@63648ee9, org.springframework.boot.test.context.SpringBootTestAnnotation@7e93227b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/UserController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/UserService.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:241)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1193)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/UserService.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:241)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1193)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1441)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 97 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1878)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1404)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 111 more
2024-08-28 16:04:22.369  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 16:04:22.416  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 272066 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 16:04:22.421  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-28 16:04:23.573  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 16:04:23.660  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 77 ms. Found 4 JPA repository interfaces.
2024-08-28 16:04:24.390  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-28 16:04:24.411  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-28 16:04:24.414  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-28 16:04:24.414  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-28 16:04:24.472  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-28 16:04:24.473  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1999 ms
2024-08-28 16:04:24.530  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 16:04:24.798  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-28 16:04:24.800  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 16:04:24.815  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-28 16:04:24.978  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 16:04:25.064  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 16:04:25.109  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 16:04:25.398  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 16:04:25.455  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 16:04:26.709  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 16:04:26.771 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 16:04:26.786 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:04:26.789 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:04:26.791 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 16:04:26.794 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 16:04:26.797 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 16:04:26.799 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 16:04:26.801 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 16:04:26.801 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 16:04:26.802 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 16:04:26.803 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 16:04:26.804 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 16:04:26.805 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 16:04:26.806 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 16:04:26.806 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 16:04:26.807 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 16:04:26.814 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 16:04:26.816 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 16:04:26.818 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 16:04:26.822  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:04:27.606  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-28 16:04:27.631  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: f3bc915d-0c49-4f40-959c-296cbc6c8dcc

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-28 16:04:27.868 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-28 16:04:27.976 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-28 16:04:28.024  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@34d6e9a4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@515a2afd, org.springframework.security.web.context.SecurityContextHolderFilter@318beab4, org.springframework.security.web.header.HeaderWriterFilter@6a9c848, org.springframework.web.filter.CorsFilter@4822fc53, org.springframework.security.web.authentication.logout.LogoutFilter@6012bee8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@578483bd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@38447073, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6e200307, org.springframework.security.web.access.ExceptionTranslationFilter@59f36439, org.springframework.security.web.access.intercept.AuthorizationFilter@5e08ed28]
2024-08-28 16:04:28.148 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-28 16:04:28.197 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-28 16:04:28.458  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-28 16:04:28.477  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-28 16:04:28.490  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.566 seconds (process running for 8.148)
2024-08-28 16:04:28.672 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:28.750 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 16:04:28.774 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:28.783 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:28.785 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 16:04:28.789 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:28.791 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 16:04:28.794 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:28.797 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:28.804 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 16:04:28.965 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 16:04:28.980 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 16:04:28.986 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 16:04:29.123 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 16:04:29.125 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 16:04:51.616  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-28 16:04:51.775  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-28 16:04:52.316  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 16:04:52.385  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 272429 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 16:04:52.392  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-28 16:04:52.450 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-28 16:04:53.912  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 16:04:54.048  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 124 ms. Found 4 JPA repository interfaces.
2024-08-28 16:04:54.799  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 16:04:54.881  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 16:04:54.932  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 16:04:55.264  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 16:04:55.305  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 16:04:55.617  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-28 16:04:55.620  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 16:04:55.660  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 16:04:57.027  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 16:04:57.088 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 16:04:57.103 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:04:57.106 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:04:57.108 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 16:04:57.112 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 16:04:57.114 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 16:04:57.116 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 16:04:57.118 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 16:04:57.118 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 16:04:57.120 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 16:04:57.120 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 16:04:57.122 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 16:04:57.123 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 16:04:57.124 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 16:04:57.124 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 16:04:57.126 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 16:04:57.133 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 16:04:57.136 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 16:04:57.138 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 16:04:57.143  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:04:57.987  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-28 16:04:58.017  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 7e6988f5-e0df-4ea5-8f9d-df5267b4a141

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-28 16:04:58.313 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-28 16:04:58.482 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-28 16:04:58.528  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6101fd7d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b22bebc, org.springframework.security.web.context.SecurityContextHolderFilter@35ffe3ac, org.springframework.security.web.header.HeaderWriterFilter@feb57b4, org.springframework.web.filter.CorsFilter@60773809, org.springframework.security.web.authentication.logout.LogoutFilter@55f29d39, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2e674698, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@270a3cef, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24c7b944, org.springframework.security.web.access.ExceptionTranslationFilter@4e7e7763, org.springframework.security.web.access.intercept.AuthorizationFilter@64f1e9f8]
2024-08-28 16:04:58.770 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-28 16:04:58.827 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-28 16:04:59.012  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-28 16:04:59.102  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.119 seconds (process running for 9.413)
2024-08-28 16:04:59.301 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:59.373 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 16:04:59.399 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:59.410 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:59.412 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 16:04:59.417 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:59.419 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 16:04:59.423 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:59.427 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:59.436 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 16:04:59.600 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 16:04:59.617 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 16:04:59.623 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 16:04:59.766 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 16:04:59.768 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 16:05:00.588 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Wed Aug 28 16:04:52 CEST 2024
2024-08-28 16:05:00.596  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:05:00.599  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-28 16:05:00.604  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-28 19:54:13.191  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 19:54:13.238  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 28625 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 19:54:13.243  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-28 19:54:14.441  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 19:54:14.522  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 71 ms. Found 4 JPA repository interfaces.
2024-08-28 19:54:15.307  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-28 19:54:15.321  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-28 19:54:15.324  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-28 19:54:15.324  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-28 19:54:15.386  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-28 19:54:15.386  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2091 ms
2024-08-28 19:54:15.447  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 19:54:15.739  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-28 19:54:15.742  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 19:54:15.757  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-28 19:54:15.921  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 19:54:16.021  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 19:54:16.067  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 19:54:16.342  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 19:54:16.397  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 19:54:17.648  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 19:54:17.721 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 19:54:17.737 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 19:54:17.740 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 19:54:17.743 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 19:54:17.747 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 19:54:17.750 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 19:54:17.751 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 19:54:17.754 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 19:54:17.754 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 19:54:17.755 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 19:54:17.756 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 19:54:17.758 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 19:54:17.759 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 19:54:17.760 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 19:54:17.761 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 19:54:17.762 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 19:54:17.772 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 19:54:17.775 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 19:54:17.778 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 19:54:17.783  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 19:54:18.560  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-28 19:54:18.586  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 5bb75b6a-f656-4354-b4a6-7b367c255a8a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-28 19:54:18.833 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-28 19:54:18.945 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-28 19:54:18.982  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@517fb2c3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6c289070, org.springframework.security.web.context.SecurityContextHolderFilter@5687ba39, org.springframework.security.web.header.HeaderWriterFilter@3ad5f99, org.springframework.web.filter.CorsFilter@69e58566, org.springframework.security.web.authentication.logout.LogoutFilter@130bd00e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6abbdcde, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@41ad6c00, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e41e0c, org.springframework.security.web.access.ExceptionTranslationFilter@6b9b9cb9, org.springframework.security.web.access.intercept.AuthorizationFilter@738ed8d3]
2024-08-28 19:54:19.125 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-28 19:54:19.181 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-28 19:54:19.444  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-28 19:54:19.461  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-28 19:54:19.474  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.728 seconds (process running for 8.272)
2024-08-28 19:54:19.654 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 19:54:19.739 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 19:54:19.762 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 19:54:19.771 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 19:54:19.772 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 19:54:19.776 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 19:54:19.778 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 19:54:19.781 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 19:54:19.784 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 19:54:19.792 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 19:54:19.963 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 19:54:19.985 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 19:54:19.991 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 19:54:20.126 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 19:54:20.128 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 19:55:11.969  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-28 19:55:11.969  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-28 19:55:11.970 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-28 19:55:11.970 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-28 19:55:11.970 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-28 19:55:11.972 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@c7008b4
2024-08-28 19:55:11.973 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@12922d53
2024-08-28 19:55:11.973 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-28 19:55:11.974  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-08-28 19:55:11.988  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-28 19:55:12.001  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-28 19:55:12.008 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-28 19:55:12.011 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.047 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:12.072 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-28 19:55:12.074 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.082 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:12.089 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-28 19:55:12.090 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-28 19:55:12.090 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-28 19:55:12.090 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-28 19:55:12.091 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.091 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.091 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.091 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.094 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:12.100 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:12.120 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:12.134 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:12.994 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-28 19:55:12.995 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.998 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:13.033 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-28 19:55:13.034 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-28 19:55:13.060 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-28 19:55:13.063 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-28 19:55:13.074 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:13.095 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-28 19:55:13.096 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-28 19:55:13.987  INFO --- [nio-8080-exec-9] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 867 ms
2024-08-28 19:55:14.014 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-28 19:55:14.018 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-28 19:55:14.019 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
>>>>>>> swaggerDocumentation
