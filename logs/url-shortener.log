2024-09-19 07:58:18.433  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 07:58:18.478  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 07:58:19.402  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 07:58:19.449  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 06cba471-69fb-461a-be31-2dc0f40897d0

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 07:58:19.462  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 07:58:19.708 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 07:58:19.963 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 07:58:20.384 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 07:58:20.435 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 07:58:20.778  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Started RoleRepositoryTest in 10.183 seconds (process running for 12.561)
2024-09-19 07:58:21.053 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 07:58:21.085 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 07:58:21.090 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 07:58:21.095 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 07:58:21.099 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 07:58:21.104 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 07:58:21.112 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 07:58:21.118 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 07:58:21.776 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 07:58:21.782 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 07:58:21.792 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 07:58:21.882 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 07:58:21.923  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 07:58:21.956  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 07:58:22.061  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 10985 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 07:58:22.065 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 07:58:22.066  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 07:58:22.259  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 07:58:22.288  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 28 ms. Found 4 JPA repository interfaces.
2024-09-19 07:58:22.327  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 07:58:22.388  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:bb66d870-f2f9-4ad7-833f-da84362467a0;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 07:58:22.697  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 07:58:22.797  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 07:58:22.820  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 07:58:23.071  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 07:58:23.072  INFO --- [           main] l.command                                : Using deploymentId: 6725503072
2024-09-19 07:58:23.074  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 07:58:23.098  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 07:58:23.123  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 07:58:23.126  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 25ms
2024-09-19 07:58:23.139  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 07:58:23.147  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 07:58:23.148  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-19 07:58:23.154  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 07:58:23.161  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 07:58:23.170  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 07:58:23.172  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 16ms
2024-09-19 07:58:23.178  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 07:58:23.186  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 07:58:23.190  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 07:58:23.191  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-19 07:58:23.196  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 07:58:23.199  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 07:58:23.203  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 07:58:23.207  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 07:58:23.214  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 07:58:23.215  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 19ms
2024-09-19 07:58:23.221  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 07:58:23.241  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 07:58:23.256  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 07:58:23.257  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 36ms
2024-09-19 07:58:23.263  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 07:58:23.283  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 07:58:23.284  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 19ms
2024-09-19 07:58:23.288  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 07:58:23.288  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 07:58:23.288  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 07:58:23.289  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 07:58:23.289  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 07:58:23.290  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 07:58:23.290  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 07:58:23.296  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 07:58:23.297  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 07:58:23.300  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 07:58:23.302  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 07:58:23.350  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 07:58:23.355  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 07:58:23.373  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 07:58:23.376  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 07:58:23.377  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 07:58:23.609  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 07:58:23.644  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 07:58:23.783  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 1.82 seconds (process running for 15.567)
2024-09-19 07:58:23.813 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 07:58:23.889 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 07:58:23.936 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 07:58:23.961  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 07:58:24.020  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 07:58:24.088  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 10985 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 07:58:24.090 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 07:58:24.090  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 07:58:24.092 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@a10723a
2024-09-19 07:58:25.378  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b1b0a65b-5f7d-478a-9678-843a403d50ad

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 07:58:25.385  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 07:58:25.538 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 07:58:25.759 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 07:58:25.956 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 07:58:25.979 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 07:58:26.128 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 07:58:26.131  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 07:58:26.132  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 07:58:26.135  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 3 ms
2024-09-19 07:58:26.181  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.134 seconds (process running for 17.964)
2024-09-19 07:58:26.358 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 07:58:26.444  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 07:58:26.452  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 07:58:26.483 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 07:58:26.485 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 07:58:26.540 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 07:58:26.624 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@642f1d22]
2024-09-19 07:58:26.629  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 07:58:26.632  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 07:58:26.656 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 07:58:26.658 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@2d589ced]
2024-09-19 07:58:26.767 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 07:58:26.769 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@251d3913]
2024-09-19 07:58:26.771  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 07:58:26.772  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 07:58:26.774 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 07:58:26.774 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@2280c0f5]
2024-09-19 07:58:26.799 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 07:58:26.807  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 07:58:26.809  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 07:58:26.810 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 07:58:26.811 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@ff18823]
2024-09-19 07:58:27.408 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 07:58:27.410 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@44971269
2024-09-19 07:58:27.419 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 07:58:27.425 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 07:58:27.816  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 07:58:27.817  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 07:58:27.827  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 07:58:27.828  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 07:58:27.835  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 07:58:27.835  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 07:58:27.847  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 07:58:27.849  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 07:58:27.862  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 07:58:27.865  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 07:58:28.506  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 07:58:28.511  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 07:58:28.512  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 07:58:28.525  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 07:58:28.527  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 07:58:28.542  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 07:58:28.555  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 07:58:28.556  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 07:58:28.579  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 07:58:28.601  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 07:58:28.623  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 07:58:28.664 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@58b67519, started on Thu Sep 19 07:58:11 CEST 2024
2024-09-19 07:58:28.679  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 07:58:28.684  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 07:58:28.707  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 07:58:28.710  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 07:58:28.711 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@a10723a, started on Thu Sep 19 07:58:24 CEST 2024
2024-09-19 08:32:12.444  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 08:32:12.630  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 08:32:13.214  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 08:32:13.261  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 28962 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 08:32:13.267 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 08:32:13.269  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 08:32:13.322 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 08:32:14.798  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 08:32:14.919  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 106 ms. Found 4 JPA repository interfaces.
2024-09-19 08:32:15.993  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 08:32:16.525  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7b3feb26
2024-09-19 08:32:16.528  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 08:32:17.728  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 08:32:17.819  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-19 08:32:17.823  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 08:32:17.840  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 08:32:17.841  INFO --- [           main] l.util                                   : Run:                          0
2024-09-19 08:32:17.841  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-19 08:32:17.842  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 08:32:17.842  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 08:32:17.842  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 08:32:17.844  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 08:32:17.876  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 08:32:17.879  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 08:32:18.079  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 08:32:18.159  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 08:32:18.207  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 08:32:18.663  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 08:32:18.724  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 08:32:18.726  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 08:32:20.132  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 08:32:20.173  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 08:32:21.162  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 08:32:21.200  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: d18abd03-b281-4771-9296-37bf146c32b1

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 08:32:21.212  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 08:32:21.484 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 08:32:21.731 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 08:32:22.157 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 08:32:22.231 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 08:32:22.587  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Started RoleRepositoryTest in 9.727 seconds (process running for 12.382)
2024-09-19 08:32:22.790 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 08:32:22.812 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 08:32:22.817 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 08:32:22.821 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 08:32:22.825 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 08:32:22.830 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 08:32:22.837 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 08:32:22.843 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 08:32:23.512 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 08:32:23.518 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 08:32:23.526 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 08:32:23.611 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 08:32:23.651  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 08:32:23.693  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 08:32:23.784  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 28962 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 08:32:23.785 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 08:32:23.789  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 08:32:23.952  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 08:32:23.973  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 4 JPA repository interfaces.
2024-09-19 08:32:24.008  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 08:32:24.077  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:04f7da92-6211-4e65-a3df-3099b4b2fa5b;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 08:32:24.403  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 08:32:24.499  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 08:32:24.519  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 08:32:24.664  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 08:32:24.665  INFO --- [           main] l.command                                : Using deploymentId: 6727544664
2024-09-19 08:32:24.666  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 08:32:24.690  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 08:32:24.711  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 08:32:24.713  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 20ms
2024-09-19 08:32:24.725  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 08:32:24.733  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 08:32:24.734  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-19 08:32:24.742  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 08:32:24.748  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 08:32:24.758  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 08:32:24.758  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 16ms
2024-09-19 08:32:24.765  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 08:32:24.774  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 08:32:24.778  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 08:32:24.779  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 13ms
2024-09-19 08:32:24.785  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 08:32:24.789  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 08:32:24.793  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 08:32:24.796  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 08:32:24.802  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 08:32:24.803  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-19 08:32:24.806  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 08:32:24.820  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 08:32:24.830  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 08:32:24.831  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 23ms
2024-09-19 08:32:24.834  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 08:32:24.847  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 08:32:24.848  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 13ms
2024-09-19 08:32:24.851  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 08:32:24.852  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 08:32:24.852  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 08:32:24.852  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 08:32:24.853  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 08:32:24.853  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 08:32:24.854  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 08:32:24.857  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 08:32:24.858  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 08:32:24.860  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 08:32:24.861  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 08:32:24.894  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 08:32:24.898  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 08:32:24.915  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 08:32:24.918  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 08:32:24.918  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 08:32:25.147  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 08:32:25.179  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 08:32:25.285  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 1.586 seconds (process running for 15.081)
2024-09-19 08:32:25.311 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 08:32:25.396 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 08:32:25.447 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 08:32:25.494  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 08:32:25.532  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 08:32:25.603  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 28962 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 08:32:25.604 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 08:32:25.605  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 08:32:25.607 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@790431bf
2024-09-19 08:32:26.850  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: df24b328-80c2-4795-9727-5b33c13f292a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 08:32:26.855  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 08:32:26.971 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 08:32:27.282 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 08:32:27.515 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 08:32:27.538 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 08:32:27.678 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 08:32:27.680  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 08:32:27.681  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 08:32:27.683  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 2 ms
2024-09-19 08:32:27.726  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.168 seconds (process running for 17.521)
2024-09-19 08:32:27.924 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 08:32:28.002  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 08:32:28.010  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 08:32:28.043 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 08:32:28.044 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 08:32:28.091 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 08:32:28.181 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@424bcd62]
2024-09-19 08:32:28.186  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 08:32:28.188  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 08:32:28.209 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 08:32:28.210 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@3ff00c4c]
2024-09-19 08:32:28.352 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 08:32:28.355 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@2a621df3]
2024-09-19 08:32:28.357  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 08:32:28.358  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 08:32:28.360 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 08:32:28.361 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@7fab8e9a]
2024-09-19 08:32:28.389 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 08:32:28.398  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 08:32:28.400  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 08:32:28.401 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 08:32:28.402 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@7d7a0e06]
2024-09-19 08:32:29.031 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 08:32:29.033 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@1e69a9c6
2024-09-19 08:32:29.043 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 08:32:29.050 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 08:32:29.437  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 08:32:29.439  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 08:32:29.452  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 08:32:29.454  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 08:32:29.462  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 08:32:29.463  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 08:32:29.472  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 08:32:29.474  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 08:32:29.484  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 08:32:29.487  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 08:32:30.150  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 08:32:30.153  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 08:32:30.153  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 08:32:30.160  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 08:32:30.161  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 08:32:30.168  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 08:32:30.174  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 08:32:30.175  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 08:32:30.190  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 08:32:30.228  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 08:32:30.246  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 08:32:30.277 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@58b67519, started on Thu Sep 19 08:32:13 CEST 2024
2024-09-19 08:32:30.288  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 08:32:30.292  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 08:32:30.310  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 08:32:30.314  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 08:32:30.315 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@790431bf, started on Thu Sep 19 08:32:25 CEST 2024
2024-09-19 09:29:20.696  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:29:20.852  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 09:29:21.609  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 09:29:21.649  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 61181 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 09:29:21.654 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 09:29:21.655  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 09:29:21.712 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 09:29:23.194  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 09:29:23.304  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 94 ms. Found 4 JPA repository interfaces.
2024-09-19 09:29:24.269  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 09:29:24.920  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6f1d799
2024-09-19 09:29:24.924  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 09:29:26.300  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 09:29:26.411  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-19 09:29:26.416  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 09:29:26.439  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 09:29:26.439  INFO --- [           main] l.util                                   : Run:                          0
2024-09-19 09:29:26.440  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-19 09:29:26.441  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 09:29:26.442  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 09:29:26.443  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 09:29:26.445  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 09:29:26.499  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 09:29:26.502  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 09:29:26.716  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 09:29:26.822  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 09:29:26.881  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 09:29:27.606  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 09:29:27.696  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 09:29:27.698  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 09:29:29.190  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 09:29:29.241  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:29:30.204  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 09:29:30.244  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 80185a70-fb89-4c70-82fc-4b7d10c0d423

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 09:29:30.255  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 09:29:30.536 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 09:29:30.775 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 09:29:31.173 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 09:29:31.225 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 09:29:31.537  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Started RoleRepositoryTest in 10.426 seconds (process running for 12.671)
2024-09-19 09:29:31.806 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:29:31.833 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:29:31.838 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:29:31.842 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:29:31.847 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:29:31.851 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:29:31.860 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:29:31.866 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:29:32.593 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:29:32.597 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:29:32.605 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:29:32.695 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:29:32.743  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:29:32.774  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 09:29:32.841  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 61181 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 09:29:32.843 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 09:29:32.843  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 09:29:33.004  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 09:29:33.050  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 44 ms. Found 4 JPA repository interfaces.
2024-09-19 09:29:33.077  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 09:29:33.125  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:14cd37cc-724e-462b-89d3-e0045f637359;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 09:29:33.629  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 09:29:33.715  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 09:29:33.736  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 09:29:33.880  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 09:29:33.881  INFO --- [           main] l.command                                : Using deploymentId: 6730973880
2024-09-19 09:29:33.882  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 09:29:33.905  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 09:29:33.940  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 09:29:33.941  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 34ms
2024-09-19 09:29:33.957  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 09:29:33.966  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 09:29:33.967  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-19 09:29:33.975  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 09:29:33.982  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 09:29:33.991  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 09:29:33.991  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-19 09:29:33.997  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 09:29:34.004  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 09:29:34.007  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 09:29:34.008  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-19 09:29:34.012  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 09:29:34.015  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 09:29:34.019  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 09:29:34.022  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 09:29:34.028  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 09:29:34.029  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-19 09:29:34.032  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 09:29:34.047  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 09:29:34.058  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 09:29:34.058  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 25ms
2024-09-19 09:29:34.062  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 09:29:34.075  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 09:29:34.076  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 13ms
2024-09-19 09:29:34.079  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 09:29:34.080  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 09:29:34.080  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 09:29:34.080  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 09:29:34.081  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 09:29:34.081  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 09:29:34.081  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 09:29:34.086  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 09:29:34.086  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 09:29:34.089  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 09:29:34.089  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 09:29:34.123  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 09:29:34.126  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 09:29:34.135  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 09:29:34.138  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 09:29:34.138  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 09:29:34.317  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 09:29:34.343  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:29:34.466  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 1.686 seconds (process running for 15.6)
2024-09-19 09:29:34.492 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:29:34.554 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 09:29:34.587 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:29:34.612  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:29:34.651  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 09:29:34.727  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 61181 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 09:29:34.728 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 09:29:34.728  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 09:29:34.730 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7b7d69d1
2024-09-19 09:29:35.960  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 8d88410a-96ba-499b-ac36-0ff1719a760d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 09:29:35.969  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 09:29:36.178 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 09:29:36.453 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 09:29:36.727 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 09:29:36.750 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 09:29:36.883 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 09:29:36.887  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 09:29:36.888  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 09:29:36.894  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 5 ms
2024-09-19 09:29:36.947  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.27 seconds (process running for 18.081)
2024-09-19 09:29:37.154 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 09:29:37.259  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 09:29:37.269  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 09:29:37.302 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:29:37.304 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 09:29:37.349 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 09:29:37.460 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@50c253b6]
2024-09-19 09:29:37.464  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 09:29:37.467  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 09:29:37.490 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:29:37.491 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@5f1bf89a]
2024-09-19 09:29:37.623 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 09:29:37.626 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@2b60acb3]
2024-09-19 09:29:37.627  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 09:29:37.629  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 09:29:37.631 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:29:37.631 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@a99f50e]
2024-09-19 09:29:37.661 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 09:29:37.670  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 09:29:37.671  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 09:29:37.673 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:29:37.673 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@498c3adc]
2024-09-19 09:29:38.295 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 09:29:38.297 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@451a5843
2024-09-19 09:29:38.310 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 09:29:38.317 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 09:29:38.723  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 09:29:38.725  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 09:29:38.739  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 09:29:38.741  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 09:29:38.752  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 09:29:38.754  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 09:29:38.770  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 09:29:38.771  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 09:29:38.785  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 09:29:38.787  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 09:29:39.479  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 09:29:39.484  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 09:29:39.485  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 09:29:39.496  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 09:29:39.497  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 09:29:39.509  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 09:29:39.518  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 09:29:39.519  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 09:29:39.538  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 09:29:39.563  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:29:39.593  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 09:29:39.628 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@58b67519, started on Thu Sep 19 09:29:21 CEST 2024
2024-09-19 09:29:39.646  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:29:39.651  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 09:29:39.675  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 09:29:39.680  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:29:39.681 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7b7d69d1, started on Thu Sep 19 09:29:34 CEST 2024
2024-09-19 09:34:47.107  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:34:47.291  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 09:34:47.962  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 09:34:48.009  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 63943 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 09:34:48.015 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 09:34:48.017  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 09:34:48.076 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 09:34:49.867  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 09:34:49.981  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 102 ms. Found 4 JPA repository interfaces.
2024-09-19 09:34:50.853  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 09:34:51.423  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7b3feb26
2024-09-19 09:34:51.425  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 09:34:52.520  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 09:34:52.613  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-19 09:34:52.617  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 09:34:52.633  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 09:34:52.633  INFO --- [           main] l.util                                   : Run:                          0
2024-09-19 09:34:52.634  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-19 09:34:52.634  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 09:34:52.634  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 09:34:52.635  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 09:34:52.636  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 09:34:52.661  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 09:34:52.664  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 09:34:52.832  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 09:34:52.919  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 09:34:52.973  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 09:34:53.504  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 09:34:53.586  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 09:34:53.588  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 09:34:54.935  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 09:34:54.978  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:34:55.843  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 09:34:55.889  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: a2cf3b46-6655-4fc3-a48c-1149d91fbd76

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 09:34:55.900  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 09:34:56.122 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 09:34:56.368 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 09:34:56.784 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 09:34:56.840 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 09:34:57.172  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Started RoleRepositoryTest in 9.649 seconds (process running for 12.469)
2024-09-19 09:34:57.362 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:34:57.385 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:34:57.390 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:34:57.394 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:34:57.399 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:34:57.407 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:34:57.413 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:34:57.417 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:34:58.173 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:34:58.178 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:34:58.186 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:34:58.266 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:34:58.312  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:34:58.361  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 09:34:58.449  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 63943 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 09:34:58.450 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 09:34:58.451  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 09:34:58.625  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 09:34:58.653  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 4 JPA repository interfaces.
2024-09-19 09:34:58.689  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 09:34:58.746  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:e7cb0d66-86d6-4f26-880b-1e7e61a3643d;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 09:34:59.113  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 09:34:59.193  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 09:34:59.214  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 09:34:59.378  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 09:34:59.379  INFO --- [           main] l.command                                : Using deploymentId: 6731299379
2024-09-19 09:34:59.381  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 09:34:59.404  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 09:34:59.419  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 09:34:59.421  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 14ms
2024-09-19 09:34:59.432  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 09:34:59.440  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 09:34:59.441  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-19 09:34:59.446  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 09:34:59.451  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 09:34:59.460  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 09:34:59.461  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-19 09:34:59.467  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 09:34:59.475  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 09:34:59.479  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 09:34:59.480  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-19 09:34:59.485  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 09:34:59.488  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 09:34:59.492  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 09:34:59.496  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 09:34:59.505  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 09:34:59.506  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 19ms
2024-09-19 09:34:59.511  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 09:34:59.531  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 09:34:59.543  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 09:34:59.543  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 32ms
2024-09-19 09:34:59.548  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 09:34:59.566  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 09:34:59.567  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 18ms
2024-09-19 09:34:59.572  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 09:34:59.572  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 09:34:59.573  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 09:34:59.573  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 09:34:59.574  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 09:34:59.574  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 09:34:59.574  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 09:34:59.579  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 09:34:59.579  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 09:34:59.582  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 09:34:59.583  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 09:34:59.620  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 09:34:59.625  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 09:34:59.641  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 09:34:59.644  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 09:34:59.645  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 09:34:59.867  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 09:34:59.901  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:35:00.069  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 1.698 seconds (process running for 15.366)
2024-09-19 09:35:00.106 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:35:00.199 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 09:35:00.250 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:35:00.274  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:35:00.314  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 09:35:00.441  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 63943 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 09:35:00.443 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 09:35:00.443  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 09:35:00.446 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@13ec6ea8
2024-09-19 09:35:01.782  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: aae502b0-37cc-42fc-bcac-2f329388b0ee

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 09:35:01.790  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 09:35:01.959 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 09:35:02.252 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 09:35:02.630 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 09:35:02.666 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 09:35:02.849 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 09:35:02.852  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 09:35:02.853  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 09:35:02.856  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 2 ms
2024-09-19 09:35:02.920  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.563 seconds (process running for 18.217)
2024-09-19 09:35:03.108 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 09:35:03.192  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 09:35:03.199  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 09:35:03.231 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:35:03.233 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 09:35:03.276 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 09:35:03.384 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@6cd8b2de]
2024-09-19 09:35:03.388  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 09:35:03.390  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 09:35:03.411 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:35:03.412 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@3ea14a58]
2024-09-19 09:35:03.530 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 09:35:03.532 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@3d2bb013]
2024-09-19 09:35:03.533  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 09:35:03.534  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 09:35:03.535 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:35:03.536 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@167eab4]
2024-09-19 09:35:03.558 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 09:35:03.566  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 09:35:03.567  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 09:35:03.569 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:35:03.570 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@7a9ad451]
2024-09-19 09:35:04.167 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 09:35:04.169 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@181f61b4
2024-09-19 09:35:04.180 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 09:35:04.187 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 09:35:04.589  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 09:35:04.591  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 09:35:04.604  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 09:35:04.606  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 09:35:04.614  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 09:35:04.615  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 09:35:04.626  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 09:35:04.627  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 09:35:04.638  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 09:35:04.641  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 09:35:05.312  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 09:35:05.317  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 09:35:05.318  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 09:35:05.325  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 09:35:05.326  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 09:35:05.334  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 09:35:05.342  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 09:35:05.343  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 09:35:05.360  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 09:35:05.381  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:35:05.406  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 09:35:05.449 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@58b67519, started on Thu Sep 19 09:34:48 CEST 2024
2024-09-19 09:35:05.464  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:35:05.469  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 09:35:05.490  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 09:35:05.493  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:35:05.495 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@13ec6ea8, started on Thu Sep 19 09:35:00 CEST 2024
2024-09-19 09:37:44.177  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:37:44.333  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 09:37:44.982  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 09:37:45.042  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 65551 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 09:37:45.047 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 09:37:45.051  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 09:37:45.111 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 09:37:46.681  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 09:37:46.830  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 131 ms. Found 4 JPA repository interfaces.
2024-09-19 09:37:47.895  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 09:37:48.517  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2976ca51
2024-09-19 09:37:48.520  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 09:37:49.627  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 09:37:49.722  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-19 09:37:49.726  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 09:37:49.743  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 09:37:49.744  INFO --- [           main] l.util                                   : Run:                          0
2024-09-19 09:37:49.744  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-19 09:37:49.745  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 09:37:49.745  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 09:37:49.746  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 09:37:49.748  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 09:37:49.780  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 09:37:49.783  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 09:37:49.934  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 09:37:50.032  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 09:37:50.085  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 09:37:50.552  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 09:37:50.618  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 09:37:50.620  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 09:37:51.943  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 09:37:51.986  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:37:52.789  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 09:37:52.827  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: c73e3d91-7449-41f2-b953-54af488b9c6c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 09:37:52.837  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 09:37:53.049 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 09:37:53.262 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 09:37:53.705 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 09:37:53.754 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 09:37:54.083  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Started RoleRepositoryTest in 9.534 seconds (process running for 12.023)
2024-09-19 09:37:54.276 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:37:54.298 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:37:54.303 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:37:54.308 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:37:54.312 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:37:54.317 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:37:54.326 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:37:54.334 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:37:55.086 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:37:55.091 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:37:55.099 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:37:55.199 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:37:55.239  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:37:55.268  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 09:37:55.325  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 65551 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 09:37:55.326 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 09:37:55.327  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 09:37:55.472  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 09:37:55.493  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 4 JPA repository interfaces.
2024-09-19 09:37:55.519  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 09:37:55.566  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:aa3d92e1-788d-4a37-adc9-e8957bf7803f;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 09:37:55.876  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 09:37:55.956  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 09:37:55.973  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 09:37:56.122  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 09:37:56.123  INFO --- [           main] l.command                                : Using deploymentId: 6731476123
2024-09-19 09:37:56.125  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 09:37:56.148  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 09:37:56.164  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 09:37:56.166  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 15ms
2024-09-19 09:37:56.176  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 09:37:56.182  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 09:37:56.183  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-19 09:37:56.188  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 09:37:56.192  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 09:37:56.201  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 09:37:56.201  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 13ms
2024-09-19 09:37:56.206  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 09:37:56.212  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 09:37:56.215  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 09:37:56.216  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-19 09:37:56.221  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 09:37:56.224  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 09:37:56.227  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 09:37:56.230  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 09:37:56.237  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 09:37:56.237  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-19 09:37:56.241  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 09:37:56.254  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 09:37:56.263  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 09:37:56.264  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 23ms
2024-09-19 09:37:56.268  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 09:37:56.279  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 09:37:56.280  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 12ms
2024-09-19 09:37:56.283  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 09:37:56.283  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 09:37:56.284  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 09:37:56.284  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 09:37:56.284  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 09:37:56.284  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 09:37:56.285  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 09:37:56.288  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 09:37:56.289  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 09:37:56.291  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 09:37:56.292  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 09:37:56.318  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 09:37:56.321  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 09:37:56.332  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 09:37:56.335  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 09:37:56.335  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 09:37:56.518  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 09:37:56.553  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:37:56.659  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 1.386 seconds (process running for 14.6)
2024-09-19 09:37:56.683 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:37:56.739 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 09:37:56.770 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:37:56.788  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:37:56.817  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 09:37:56.897  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 65551 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 09:37:56.898 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 09:37:56.899  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 09:37:56.901 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@11f30fc6
2024-09-19 09:37:58.026  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: d095167f-5ed7-49cf-a35f-48a66de2a7ed

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 09:37:58.030  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 09:37:58.139 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 09:37:58.332 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 09:37:58.650 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 09:37:58.708 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 09:37:58.842 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 09:37:58.845  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 09:37:58.846  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 09:37:58.848  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 2 ms
2024-09-19 09:37:58.894  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.057 seconds (process running for 16.834)
2024-09-19 09:37:59.084 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 09:37:59.171  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 09:37:59.180  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 09:37:59.214 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:37:59.215 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 09:37:59.256 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 09:37:59.341 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@3d920227]
2024-09-19 09:37:59.347  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 09:37:59.349  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 09:37:59.372 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:37:59.374 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@38aca984]
2024-09-19 09:37:59.487 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 09:37:59.490 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@671f70bc]
2024-09-19 09:37:59.492  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 09:37:59.493  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 09:37:59.495 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:37:59.495 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@244ba147]
2024-09-19 09:37:59.522 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 09:37:59.530  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 09:37:59.531  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 09:37:59.533 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:37:59.534 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@564c0e38]
2024-09-19 09:38:00.069 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 09:38:00.071 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@9bd43b7
2024-09-19 09:38:00.083 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 09:38:00.089 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 09:38:00.447  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 09:38:00.449  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 09:38:00.462  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 09:38:00.464  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 09:38:00.472  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 09:38:00.473  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 09:38:00.482  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 09:38:00.483  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 09:38:00.492  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 09:38:00.495  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 09:38:01.137  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 09:38:01.140  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 09:38:01.141  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 09:38:01.148  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 09:38:01.149  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 09:38:01.157  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 09:38:01.165  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 09:38:01.165  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 09:38:01.182  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 09:38:01.202  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:38:01.229  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 09:38:01.264 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@58b67519, started on Thu Sep 19 09:37:45 CEST 2024
2024-09-19 09:38:01.282  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:38:01.287  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 09:38:01.303  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 09:38:01.307  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:38:01.308 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@11f30fc6, started on Thu Sep 19 09:37:56 CEST 2024
2024-09-19 09:46:52.193  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:46:52.342  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 09:46:52.879  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 09:46:52.922  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 70355 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 09:46:52.927 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 09:46:52.929  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 09:46:52.982 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 09:46:54.353  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 09:46:54.457  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 91 ms. Found 4 JPA repository interfaces.
2024-09-19 09:46:55.352  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 09:46:55.924  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@69d2fb0a
2024-09-19 09:46:55.927  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 09:46:57.110  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 09:46:57.194  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-19 09:46:57.198  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 09:46:57.213  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 09:46:57.213  INFO --- [           main] l.util                                   : Run:                          0
2024-09-19 09:46:57.214  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-19 09:46:57.214  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 09:46:57.215  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 09:46:57.215  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 09:46:57.216  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 09:46:57.243  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 09:46:57.246  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 09:46:57.392  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 09:46:57.499  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 09:46:57.556  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 09:46:57.973  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 09:46:58.035  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 09:46:58.036  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 09:46:59.330  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 09:46:59.369  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:47:00.156  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 09:47:00.197  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 90a93efb-a2f2-42cb-aea5-12decb45bd0b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 09:47:00.208  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 09:47:00.428 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 09:47:00.655 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 09:47:01.026 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 09:47:01.073 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 09:47:01.364  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Started RoleRepositoryTest in 8.821 seconds (process running for 11.125)
2024-09-19 09:47:01.593 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:47:01.624 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:47:01.629 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:47:01.634 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:47:01.639 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:47:01.649 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:47:01.655 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:47:01.660 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:47:02.316 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:47:02.321 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:47:02.329 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:47:02.395 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 09:47:02.433  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:47:02.464  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 09:47:02.518  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 70355 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 09:47:02.519 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 09:47:02.519  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 09:47:02.663  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 09:47:02.681  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 4 JPA repository interfaces.
2024-09-19 09:47:02.725  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 09:47:02.772  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:81d41730-49fe-436a-bb5c-c9e0e75a5dab;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 09:47:03.075  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 09:47:03.148  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 09:47:03.165  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 09:47:03.305  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 09:47:03.306  INFO --- [           main] l.command                                : Using deploymentId: 6732023306
2024-09-19 09:47:03.308  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 09:47:03.327  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 09:47:03.343  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 09:47:03.345  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 16ms
2024-09-19 09:47:03.358  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 09:47:03.364  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 09:47:03.365  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-19 09:47:03.371  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 09:47:03.376  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 09:47:03.385  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 09:47:03.386  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-19 09:47:03.392  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 09:47:03.398  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 09:47:03.402  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 09:47:03.402  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-19 09:47:03.407  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 09:47:03.410  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 09:47:03.413  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 09:47:03.416  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 09:47:03.422  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 09:47:03.422  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-19 09:47:03.426  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 09:47:03.439  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 09:47:03.461  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 09:47:03.461  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 35ms
2024-09-19 09:47:03.465  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 09:47:03.478  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 09:47:03.478  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 13ms
2024-09-19 09:47:03.481  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 09:47:03.481  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 09:47:03.482  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 09:47:03.482  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 09:47:03.483  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 09:47:03.483  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 09:47:03.483  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 09:47:03.487  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 09:47:03.487  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 09:47:03.490  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 09:47:03.490  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 09:47:03.522  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 09:47:03.525  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 09:47:03.538  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 09:47:03.541  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 09:47:03.542  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 09:47:03.700  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 09:47:03.726  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:47:03.837  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 1.368 seconds (process running for 13.599)
2024-09-19 09:47:03.862 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:47:03.922 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 09:47:03.952 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 09:47:03.973  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:47:04.003  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 09:47:04.074  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 70355 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 09:47:04.075 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 09:47:04.075  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 09:47:04.078 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@13ec6ea8
2024-09-19 09:47:05.512  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 02bb0ac4-247c-4c75-80d6-4e70aef49d2f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 09:47:05.523  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 09:47:05.769 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 09:47:06.175 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 09:47:06.644 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 09:47:06.686 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 09:47:06.913 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 09:47:06.916  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 09:47:06.917  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 09:47:06.925  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 7 ms
2024-09-19 09:47:07.001  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.977 seconds (process running for 16.763)
2024-09-19 09:47:07.166 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 09:47:07.257  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 09:47:07.264  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 09:47:07.315 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:47:07.317 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 09:47:07.370 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 09:47:07.451 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@6cd8b2de]
2024-09-19 09:47:07.455  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 09:47:07.458  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 09:47:07.477 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:47:07.479 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@3ea14a58]
2024-09-19 09:47:07.584 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 09:47:07.586 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@3d2bb013]
2024-09-19 09:47:07.587  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 09:47:07.589  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 09:47:07.590 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:47:07.591 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@167eab4]
2024-09-19 09:47:07.612 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 09:47:07.620  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 09:47:07.621  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 09:47:07.622 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 09:47:07.623 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@7a9ad451]
2024-09-19 09:47:08.151 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 09:47:08.153 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@181f61b4
2024-09-19 09:47:08.163 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 09:47:08.168 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 09:47:08.534  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 09:47:08.536  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 09:47:08.546  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 09:47:08.547  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 09:47:08.554  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 09:47:08.555  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 09:47:08.563  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 09:47:08.564  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 09:47:08.573  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 09:47:08.576  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 09:47:09.217  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 09:47:09.220  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 09:47:09.220  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 09:47:09.226  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 09:47:09.227  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 09:47:09.234  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 09:47:09.240  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 09:47:09.240  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 09:47:09.258  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 09:47:09.279  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 09:47:09.299  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 09:47:09.334 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@58b67519, started on Thu Sep 19 09:46:52 CEST 2024
2024-09-19 09:47:09.344  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:47:09.348  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 09:47:09.364  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 09:47:09.368  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 09:47:09.369 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@13ec6ea8, started on Thu Sep 19 09:47:04 CEST 2024
2024-09-19 10:10:35.740  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 10:10:35.900  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 10:10:36.479  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 10:10:36.529  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 83847 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 10:10:36.534 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 10:10:36.536  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 10:10:36.590 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 10:10:38.295  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 10:10:38.431  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 121 ms. Found 4 JPA repository interfaces.
2024-09-19 10:10:39.683  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 10:10:42.537  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
2024-09-19 10:10:42.566  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-19 10:10:42.597 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1463)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	... 88 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 95 more
Caused by: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:438)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:189)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:104)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:149)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:165)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:425)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1426)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:133)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:935)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:805)
	... 114 more
Caused by: java.net.SocketException: Connection reset
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:318)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1099)
	at com.mysql.cj.protocol.ReadAheadInputStream.fill(ReadAheadInputStream.java:107)
	at com.mysql.cj.protocol.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:150)
	at com.mysql.cj.protocol.ReadAheadInputStream.read(ReadAheadInputStream.java:180)
	at java.base/java.io.FilterInputStream.read(FilterInputStream.java:119)
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:64)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 120 more
2024-09-19 10:10:42.616  WARN --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.repository.RoleRepositoryTest@31ab4859]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@44aed6a4 testClass = de.telran.urlshortener.repository.RoleRepositoryTest, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2ad3a1bb, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5bd73d1a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@726386ed, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6ab72419, org.springframework.boot.test.context.SpringBootTestAnnotation@f60b3bc5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1463)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	... 88 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 95 more
Caused by: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:438)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:189)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:104)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:149)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:165)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:582)
	at com.mysql.cj.protocol.a.NativeProtocol.readServerCapabilities(NativeProtocol.java:537)
	at com.mysql.cj.protocol.a.NativeProtocol.beforeHandshake(NativeProtocol.java:425)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1426)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:133)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:935)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:805)
	... 114 more
Caused by: java.net.SocketException: Connection reset
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:318)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1099)
	at com.mysql.cj.protocol.ReadAheadInputStream.fill(ReadAheadInputStream.java:107)
	at com.mysql.cj.protocol.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:150)
	at com.mysql.cj.protocol.ReadAheadInputStream.read(ReadAheadInputStream.java:180)
	at java.base/java.io.FilterInputStream.read(FilterInputStream.java:119)
	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:64)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeaderLocal(SimplePacketReader.java:81)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:63)
	at com.mysql.cj.protocol.a.SimplePacketReader.readHeader(SimplePacketReader.java:45)
	at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:576)
	... 120 more
2024-09-19 10:10:42.687  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 10:10:42.740  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 10:10:42.909  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 83847 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 10:10:42.910 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 10:10:42.911  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 10:10:43.131  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 10:10:43.165  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 33 ms. Found 4 JPA repository interfaces.
2024-09-19 10:10:43.207  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 10:10:43.299  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:ca827935-0860-4390-bb55-c89d4da781dc;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 10:10:43.759  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 10:10:44.779  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 10:10:44.929  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 10:10:45.132  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 10:10:45.135  INFO --- [           main] l.command                                : Using deploymentId: 6733445134
2024-09-19 10:10:45.138  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 10:10:45.204  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 10:10:45.224  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 10:10:45.226  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 20ms
2024-09-19 10:10:45.241  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 10:10:45.251  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 10:10:45.252  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 10ms
2024-09-19 10:10:45.261  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 10:10:45.268  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 10:10:45.280  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 10:10:45.281  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 20ms
2024-09-19 10:10:45.292  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 10:10:45.301  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 10:10:45.306  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 10:10:45.307  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 13ms
2024-09-19 10:10:45.315  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 10:10:45.319  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 10:10:45.324  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 10:10:45.328  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 10:10:45.336  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 10:10:45.337  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 21ms
2024-09-19 10:10:45.343  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 10:10:45.362  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 10:10:45.375  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 10:10:45.377  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 33ms
2024-09-19 10:10:45.383  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 10:10:45.406  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 10:10:45.408  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 23ms
2024-09-19 10:10:45.423  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 10:10:45.423  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 10:10:45.424  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 10:10:45.425  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 10:10:45.425  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 10:10:45.426  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 10:10:45.428  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 10:10:45.433  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 10:10:45.434  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 10:10:45.438  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 10:10:45.440  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 10:10:45.572  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 10:10:45.656  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 10:10:45.715  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 10:10:46.184  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 10:10:46.261  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 10:10:46.263  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 10:10:47.581  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 10:10:47.632  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 10:10:48.312  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 5.562 seconds (process running for 14.811)
2024-09-19 10:10:49.268 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 10:10:49.361 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 10:10:49.392 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 10:10:49.414  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 10:10:49.452  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 10:10:49.525  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 83847 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 10:10:49.527 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 10:10:49.527  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 10:10:49.531 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@48515dfc
2024-09-19 10:10:51.155  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: ea0fcd18-8ef0-40bf-bd00-38ad2432417b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 10:10:51.174  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 10:10:51.680 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 10:10:51.998 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 10:10:52.355 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 10:10:52.426 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 10:10:52.574 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 10:10:52.587  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 10:10:52.588  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 10:10:52.590  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 2 ms
2024-09-19 10:10:52.635  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 3.161 seconds (process running for 19.134)
2024-09-19 10:10:52.795 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 10:10:52.883  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 10:10:52.889  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 10:10:52.920 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 10:10:52.922 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 10:10:52.974 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 10:10:53.102 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@2b04b29d]
2024-09-19 10:10:53.108  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 10:10:53.112  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 10:10:53.140 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 10:10:53.142 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@2488a11]
2024-09-19 10:10:53.313 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 10:10:53.315 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@6fc53b18]
2024-09-19 10:10:53.316  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 10:10:53.317  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 10:10:53.319 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 10:10:53.319 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@1cac6a4f]
2024-09-19 10:10:53.340 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 10:10:53.348  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 10:10:53.350  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 10:10:53.351 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 10:10:53.352 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@79c01d37]
2024-09-19 10:10:53.908 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 10:10:53.909 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@ed37e52
2024-09-19 10:10:53.923 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 10:10:53.934 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 10:10:54.312  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 10:10:54.314  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 10:10:54.323  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 10:10:54.325  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 10:10:54.331  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 10:10:54.332  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 10:10:54.339  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 10:10:54.340  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 10:10:54.348  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 10:10:54.350  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 10:10:54.974  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 10:10:54.978  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 10:10:54.980  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 10:10:54.987  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 10:10:54.988  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 10:10:54.996  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 10:10:55.003  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 10:10:55.004  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 10:10:55.019  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 10:10:55.037  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 10:10:55.057  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 10:10:55.062  WARN --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@43c4f7ee]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@7d1a1ee9 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2ad3a1bb, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5bd73d1a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@726386ed, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6ab72419, org.springframework.boot.test.context.SpringBootTestAnnotation@f60b3bc5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2024-09-19 10:10:55.095  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 10:10:55.099 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@48515dfc, started on Thu Sep 19 10:10:49 CEST 2024
2024-09-19 10:16:47.454  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 10:16:47.629  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 10:16:48.217  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 10:16:48.262  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 87239 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 10:16:48.268 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 10:16:48.270  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 10:16:48.327 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 10:16:49.940  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 10:16:50.053  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 101 ms. Found 4 JPA repository interfaces.
2024-09-19 10:16:51.130  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 10:16:52.298  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
2024-09-19 10:16:52.315  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-19 10:16:52.350 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1463)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	... 88 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 95 more
Caused by: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:438)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:189)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:104)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:149)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:165)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:88)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:120)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:935)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:805)
	... 114 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:62)
	... 117 more
2024-09-19 10:16:52.383  WARN --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.repository.RoleRepositoryTest@7848321e]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@4cc26df testClass = de.telran.urlshortener.repository.RoleRepositoryTest, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2ad3a1bb, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5bd73d1a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@726386ed, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6ab72419, org.springframework.boot.test.context.SpringBootTestAnnotation@f60b3bc5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1463)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	... 88 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 95 more
Caused by: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:438)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:189)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:104)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:149)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:165)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:88)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:120)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:935)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:805)
	... 114 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:62)
	... 117 more
2024-09-19 10:16:52.445  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 10:16:52.484  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 10:16:52.660  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 87239 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 10:16:52.662 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 10:16:52.663  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 10:16:52.871  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 10:16:52.908  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 36 ms. Found 4 JPA repository interfaces.
2024-09-19 10:16:52.943  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 10:16:53.044  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:3b183b20-20d8-4f60-8df7-300c642be074;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 10:16:53.481  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 10:16:54.335  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 10:16:54.506  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 10:16:54.703  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 10:16:54.705  INFO --- [           main] l.command                                : Using deploymentId: 6733814704
2024-09-19 10:16:54.708  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 10:16:54.767  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 10:16:54.786  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 10:16:54.788  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 18ms
2024-09-19 10:16:54.801  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 10:16:54.810  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 10:16:54.811  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-19 10:16:54.818  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 10:16:54.825  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 10:16:54.837  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 10:16:54.838  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 19ms
2024-09-19 10:16:54.847  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 10:16:54.856  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 10:16:54.861  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 10:16:54.862  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 13ms
2024-09-19 10:16:54.868  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 10:16:54.872  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 10:16:54.877  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 10:16:54.882  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 10:16:54.889  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 10:16:54.890  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-09-19 10:16:54.895  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 10:16:54.914  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 10:16:54.927  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 10:16:54.928  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 32ms
2024-09-19 10:16:54.934  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 10:16:54.953  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 10:16:54.954  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 19ms
2024-09-19 10:16:54.969  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 10:16:54.969  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 10:16:54.970  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 10:16:54.971  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 10:16:54.971  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 10:16:54.972  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 10:16:54.974  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 10:16:54.979  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 10:16:54.980  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 10:16:54.984  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 10:16:54.986  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 10:16:55.117  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 10:16:55.214  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 10:16:55.271  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 10:16:55.783  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 10:16:55.841  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 10:16:55.843  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 10:16:57.196  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 10:16:57.245  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 10:16:57.814  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 5.311 seconds (process running for 12.635)
2024-09-19 10:16:58.609 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 10:16:58.679 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 10:16:58.709 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 10:16:58.731  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 10:16:58.766  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 10:16:58.833  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 87239 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 10:16:58.834 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 10:16:58.834  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 10:16:58.837 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4c822e9b
2024-09-19 10:17:00.217  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 163ab716-895e-47e0-ac8d-45baff10b1df

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 10:17:00.239  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 10:17:00.564 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 10:17:00.892 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 10:17:01.311 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 10:17:01.410 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 10:17:01.549 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 10:17:01.562  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 10:17:01.563  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 10:17:01.566  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 3 ms
2024-09-19 10:17:01.613  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.824 seconds (process running for 16.433)
2024-09-19 10:17:01.754 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 10:17:01.835  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 10:17:01.842  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 10:17:01.886 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 10:17:01.887 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 10:17:01.941 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 10:17:02.044 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@7abc82fa]
2024-09-19 10:17:02.048  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 10:17:02.051  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 10:17:02.070 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 10:17:02.072 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@5ff7631f]
2024-09-19 10:17:02.174 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 10:17:02.177 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@614a720e]
2024-09-19 10:17:02.178  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 10:17:02.179  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 10:17:02.181 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 10:17:02.182 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@134b19ae]
2024-09-19 10:17:02.209 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 10:17:02.219  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 10:17:02.221  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 10:17:02.223 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 10:17:02.223 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@7a543319]
2024-09-19 10:17:02.855 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 10:17:02.856 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@16374086
2024-09-19 10:17:02.867 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 10:17:02.875 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 10:17:03.163  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 10:17:03.166  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 10:17:03.179  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 10:17:03.182  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 10:17:03.190  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 10:17:03.191  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 10:17:03.200  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 10:17:03.201  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 10:17:03.212  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 10:17:03.215  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 10:17:03.795  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 10:17:03.798  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 10:17:03.799  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 10:17:03.807  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 10:17:03.808  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 10:17:03.815  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 10:17:03.822  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 10:17:03.823  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 10:17:03.839  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 10:17:03.854  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 10:17:03.878  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 10:17:03.884  WARN --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@4c44928e]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@43542dd7 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2ad3a1bb, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5bd73d1a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@726386ed, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6ab72419, org.springframework.boot.test.context.SpringBootTestAnnotation@f60b3bc5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2024-09-19 10:17:03.914  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 10:17:03.918 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4c822e9b, started on Thu Sep 19 10:16:58 CEST 2024
2024-09-19 10:18:59.048  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 10:18:59.198  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 10:18:59.767  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 10:18:59.794  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 88551 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 10:18:59.799 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 10:18:59.801  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 10:18:59.852 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 10:19:01.137  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 10:19:01.247  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 99 ms. Found 4 JPA repository interfaces.
2024-09-19 10:19:02.102  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 10:19:02.685  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@35e689a0
2024-09-19 10:19:02.687  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 10:19:03.892  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 10:19:03.983  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-19 10:19:03.987  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 10:19:04.002  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 10:19:04.002  INFO --- [           main] l.util                                   : Run:                          0
2024-09-19 10:19:04.003  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-19 10:19:04.003  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 10:19:04.004  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 10:19:04.004  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 10:19:04.005  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 10:19:04.039  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 10:19:04.042  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 10:19:04.204  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 10:19:04.289  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 10:19:04.345  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 10:19:04.812  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 10:19:04.876  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 10:19:04.879  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 10:19:06.342  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 10:19:06.384  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 10:19:07.310  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 10:19:07.354  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 98f9ec96-669d-4e6b-8536-a5cf5455748f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 10:19:07.367  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 10:19:07.627 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 10:19:07.869 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 10:19:08.230 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 10:19:08.300 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 10:19:08.614  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Started RoleRepositoryTest in 9.23 seconds (process running for 11.475)
2024-09-19 10:19:08.814 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 10:19:08.852 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 10:19:08.857 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 10:19:08.862 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 10:19:08.867 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 10:19:08.872 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 10:19:08.883 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 10:19:08.897 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 10:19:09.557 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 10:19:09.562 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 10:19:09.570 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 10:19:09.668 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 10:19:09.731  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 10:19:09.765  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 10:19:09.833  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 88551 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 10:19:09.834 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 10:19:09.835  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 10:19:09.998  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 10:19:10.022  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 23 ms. Found 4 JPA repository interfaces.
2024-09-19 10:19:10.054  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 10:19:10.108  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:3ca828e9-c4c1-4f57-bd2e-2b9dcb3c0a70;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 10:19:10.430  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 10:19:10.517  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 10:19:10.541  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 10:19:10.717  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 10:19:10.718  INFO --- [           main] l.command                                : Using deploymentId: 6733950718
2024-09-19 10:19:10.720  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 10:19:10.745  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 10:19:10.761  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 10:19:10.763  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 16ms
2024-09-19 10:19:10.773  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 10:19:10.779  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 10:19:10.780  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 5ms
2024-09-19 10:19:10.785  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 10:19:10.789  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 10:19:10.798  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 10:19:10.799  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-19 10:19:10.805  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 10:19:10.811  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 10:19:10.814  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 10:19:10.815  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-19 10:19:10.820  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 10:19:10.823  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 10:19:10.826  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 10:19:10.829  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 10:19:10.835  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 10:19:10.836  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-19 10:19:10.841  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 10:19:10.857  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 10:19:10.869  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 10:19:10.870  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 27ms
2024-09-19 10:19:10.874  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 10:19:10.890  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 10:19:10.891  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 17ms
2024-09-19 10:19:10.895  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 10:19:10.895  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 10:19:10.896  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 10:19:10.896  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 10:19:10.896  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 10:19:10.896  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 10:19:10.897  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 10:19:10.901  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 10:19:10.901  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 10:19:10.904  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 10:19:10.905  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 10:19:10.943  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 10:19:10.946  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 10:19:10.958  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 10:19:10.960  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 10:19:10.961  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 10:19:11.111  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 10:19:11.137  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 10:19:11.225  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 1.454 seconds (process running for 14.085)
2024-09-19 10:19:11.249 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 10:19:11.314 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 10:19:11.344 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 10:19:11.361  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 10:19:11.383  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 10:19:11.448  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 88551 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 10:19:11.449 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 10:19:11.450  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 10:19:11.451 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1a4bc0df
2024-09-19 10:19:12.603  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: ff26b1a0-4a89-4f4d-98e3-d236407d7eb3

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 10:19:12.610  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 10:19:12.768 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 10:19:12.994 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 10:19:13.265 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 10:19:13.325 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 10:19:13.457 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 10:19:13.460  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 10:19:13.461  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 10:19:13.465  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 4 ms
2024-09-19 10:19:13.503  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.103 seconds (process running for 16.363)
2024-09-19 10:19:13.652 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 10:19:13.735  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 10:19:13.743  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 10:19:13.774 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 10:19:13.776 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 10:19:13.820 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 10:19:13.905 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@77d68b94]
2024-09-19 10:19:13.909  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 10:19:13.911  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 10:19:13.932 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 10:19:13.933 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@c1707d4]
2024-09-19 10:19:14.049 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 10:19:14.052 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@525dd5af]
2024-09-19 10:19:14.053  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 10:19:14.054  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 10:19:14.055 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 10:19:14.056 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@11675922]
2024-09-19 10:19:14.080 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 10:19:14.089  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 10:19:14.091  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 10:19:14.092 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 10:19:14.093 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@64bcd98a]
2024-09-19 10:19:14.621 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 10:19:14.622 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@5580356d
2024-09-19 10:19:14.633 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 10:19:14.640 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 10:19:14.991  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 10:19:14.993  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 10:19:15.003  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 10:19:15.005  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 10:19:15.014  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 10:19:15.015  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 10:19:15.023  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 10:19:15.024  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 10:19:15.033  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 10:19:15.035  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 10:19:15.746  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 10:19:15.749  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 10:19:15.750  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 10:19:15.757  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 10:19:15.758  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 10:19:15.765  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 10:19:15.771  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 10:19:15.772  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 10:19:15.787  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 10:19:15.811  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 10:19:15.835  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 10:19:15.871 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@58b67519, started on Thu Sep 19 10:18:59 CEST 2024
2024-09-19 10:19:15.887  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 10:19:15.891  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 10:19:15.914  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 10:19:15.918  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 10:19:15.920 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@1a4bc0df, started on Thu Sep 19 10:19:11 CEST 2024
2024-09-19 11:10:12.043  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 11:10:12.091  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 4354 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 11:10:12.096 DEBUG --- [           main] d.t.u.UrlShortenerApplication            : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 11:10:12.098  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "prod"
2024-09-19 11:10:13.543  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 11:10:13.637  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 83 ms. Found 4 JPA repository interfaces.
2024-09-19 11:10:14.683  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-19 11:10:14.706  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-19 11:10:14.709  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-19 11:10:14.710  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-09-19 11:10:14.793  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-19 11:10:14.794  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2640 ms
2024-09-19 11:10:14.956 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 11:10:15.117  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 11:10:15.634  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a03529c
2024-09-19 11:10:15.636  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 11:10:16.805  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 11:10:16.886  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-19 11:10:16.890  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 11:10:16.903  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 11:10:16.903  INFO --- [           main] l.util                                   : Run:                          0
2024-09-19 11:10:16.903  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-19 11:10:16.904  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 11:10:16.904  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 11:10:16.904  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 11:10:16.906  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 11:10:16.936  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 11:10:16.939  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 11:10:17.103  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 11:10:17.209  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 11:10:17.257  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 11:10:17.730  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 11:10:17.820  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 11:10:17.822  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 11:10:19.356  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 11:10:19.400  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 11:10:20.279  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 11:10:20.323  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 069a9e09-5b74-4452-84bd-7b131236c980

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 11:10:20.334  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 11:10:20.623 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 11:10:20.811 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 11:10:21.183 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 11:10:21.240 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 11:10:21.621  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-19 11:10:21.638  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path '/'
2024-09-19 11:10:21.653  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 10.038 seconds (process running for 12.62)
2024-09-19 11:10:21.859 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:10:21.895 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:10:21.899 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:10:21.903 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:10:21.908 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:10:21.913 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:10:21.922 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 11:10:21.933 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 11:12:47.986  INFO --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-19 11:12:47.988  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-19 11:12:47.988 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-19 11:12:47.989 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-19 11:12:47.989 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-19 11:12:47.991 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5f2312f3
2024-09-19 11:12:47.993 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@473ee461
2024-09-19 11:12:47.997 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-19 11:12:47.999  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed initialization in 10 ms
2024-09-19 11:12:48.041 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-19 11:12:48.045 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-19 11:12:48.085 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-19 11:12:48.100 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-19 11:12:48.102 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-19 11:12:48.103 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-19 11:12:48.105 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-19 11:12:48.105 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-19 11:12:48.107 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-19 11:12:48.111 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-19 11:12:48.114 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-19 11:12:48.129 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-19 11:12:48.906 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-19 11:12:48.908 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-19 11:12:48.917 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-19 11:12:48.921 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-19 11:12:48.923 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-19 11:12:48.992 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-19 11:12:49.232 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-19 11:12:49.234 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-19 11:12:49.237 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-19 11:12:49.285 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-19 11:12:49.286 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-19 11:12:49.323 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-19 11:12:49.328 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-19 11:12:49.339 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-19 11:12:49.401 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-19 11:12:49.402 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-19 11:12:50.837  INFO --- [nio-8080-exec-9] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 1400 ms
2024-09-19 11:12:50.877 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-19 11:12:50.884 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-09-19 11:12:50.888 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-19 11:13:14.381  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 11:13:14.388  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 11:13:14.411  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 11:25:25.715  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 11:25:25.903  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 11:25:26.526  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 11:25:26.582  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 14163 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 11:25:26.588 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 11:25:26.590  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 11:25:26.652 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 11:25:28.208  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 11:25:28.329  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 108 ms. Found 4 JPA repository interfaces.
2024-09-19 11:25:29.379  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 11:25:30.593  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
2024-09-19 11:25:30.610  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-19 11:25:30.643 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1463)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	... 88 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 95 more
Caused by: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:438)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:189)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:104)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:149)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:165)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:88)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:120)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:935)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:805)
	... 114 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:62)
	... 117 more
2024-09-19 11:25:30.667  WARN --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.repository.RoleRepositoryTest@5350ab17]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@5fde1d64 testClass = de.telran.urlshortener.repository.RoleRepositoryTest, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2ad3a1bb, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5bd73d1a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@726386ed, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6ab72419, org.springframework.boot.test.context.SpringBootTestAnnotation@f60b3bc5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1463)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	... 88 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 95 more
Caused by: liquibase.exception.DatabaseException: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:438)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:189)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:104)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:149)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:165)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:88)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:120)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:935)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:805)
	... 114 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:62)
	... 117 more
2024-09-19 11:25:30.751  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 11:25:30.783  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 11:25:30.993  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 14163 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 11:25:30.995 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 11:25:30.996  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 11:25:31.331  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 11:25:31.368  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 35 ms. Found 4 JPA repository interfaces.
2024-09-19 11:25:31.414  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 11:25:31.491  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:c886315b-b425-4001-8e56-b9a80016bf4e;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 11:25:32.073  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 11:25:33.187  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 11:25:33.482  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 11:25:33.697  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 11:25:33.699  INFO --- [           main] l.command                                : Using deploymentId: 6737933699
2024-09-19 11:25:33.702  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 11:25:33.768  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 11:25:33.788  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 11:25:33.791  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 20ms
2024-09-19 11:25:33.806  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 11:25:33.815  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 11:25:33.816  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-19 11:25:33.825  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 11:25:33.833  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 11:25:33.847  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 11:25:33.848  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 22ms
2024-09-19 11:25:33.858  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 11:25:33.867  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 11:25:33.871  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 11:25:33.872  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 13ms
2024-09-19 11:25:33.879  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 11:25:33.883  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 11:25:33.887  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 11:25:33.891  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 11:25:33.897  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 11:25:33.898  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 19ms
2024-09-19 11:25:33.904  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 11:25:33.921  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 11:25:33.934  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 11:25:33.935  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 30ms
2024-09-19 11:25:33.941  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 11:25:33.963  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 11:25:33.965  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 22ms
2024-09-19 11:25:33.980  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 11:25:33.981  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 11:25:33.982  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 11:25:33.982  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 11:25:33.983  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 11:25:33.984  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 11:25:33.986  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 11:25:33.993  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 11:25:33.994  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 11:25:33.999  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 11:25:34.002  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 11:25:34.169  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 11:25:34.290  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 11:25:34.358  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 11:25:34.980  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 11:25:35.053  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 11:25:35.055  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 11:25:36.564  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 11:25:36.632  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 11:25:37.274  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 6.479 seconds (process running for 13.798)
2024-09-19 11:25:38.123 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 11:25:38.194 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 11:25:38.226 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 11:25:38.246  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 11:25:38.279  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 11:25:38.344  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 14163 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 11:25:38.345 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 11:25:38.346  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 11:25:38.348 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7f6e9e03
2024-09-19 11:25:39.840  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 0c11c475-28d0-42b0-a3cd-e68729eae697

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 11:25:39.869  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 11:25:40.308 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 11:25:40.672 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 11:25:41.068 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 11:25:41.149 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 11:25:41.304 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 11:25:41.324  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 11:25:41.325  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 11:25:41.328  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 2 ms
2024-09-19 11:25:41.366  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 3.066 seconds (process running for 17.89)
2024-09-19 11:25:41.531 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 11:25:41.624  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 11:25:41.635  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 11:25:41.672 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 11:25:41.674 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 11:25:41.729 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 11:25:41.831 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@714ab3a1]
2024-09-19 11:25:41.839  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 11:25:41.843  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 11:25:41.868 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 11:25:41.869 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@64718893]
2024-09-19 11:25:41.973 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 11:25:41.975 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@56e46791]
2024-09-19 11:25:41.976  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 11:25:41.977  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 11:25:41.978 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 11:25:41.979 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@32b1d581]
2024-09-19 11:25:41.999 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 11:25:42.009  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 11:25:42.011  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 11:25:42.014 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 11:25:42.015 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@684329d1]
2024-09-19 11:25:42.616 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 11:25:42.617 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@646e17b9
2024-09-19 11:25:42.630 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 11:25:42.636 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 11:25:43.005  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 11:25:43.007  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 11:25:43.018  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 11:25:43.019  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 11:25:43.027  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 11:25:43.027  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 11:25:43.036  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 11:25:43.037  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 11:25:43.050  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 11:25:43.054  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 11:25:43.794  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 11:25:43.798  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 11:25:43.798  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 11:25:43.807  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 11:25:43.809  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 11:25:43.815  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 11:25:43.821  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 11:25:43.822  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 11:25:43.837  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 11:25:43.862  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 11:25:43.887  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 11:25:43.893  WARN --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@7eb22e87]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@31e5554e testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2ad3a1bb, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5bd73d1a, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@726386ed, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@6ab72419, org.springframework.boot.test.context.SpringBootTestAnnotation@f60b3bc5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2024-09-19 11:25:43.938  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 11:25:43.941 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7f6e9e03, started on Thu Sep 19 11:25:38 CEST 2024
2024-09-19 11:26:42.433  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 11:26:42.619  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 11:26:43.227  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 11:26:43.269  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 15027 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 11:26:43.276 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 11:26:43.278  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 11:26:43.336 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 11:26:44.863  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 11:26:44.992  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 115 ms. Found 4 JPA repository interfaces.
2024-09-19 11:26:45.886  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 11:26:46.454  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@273293c8
2024-09-19 11:26:46.457  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 11:26:47.737  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 11:26:47.831  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-19 11:26:47.836  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 11:26:47.852  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 11:26:47.852  INFO --- [           main] l.util                                   : Run:                          0
2024-09-19 11:26:47.853  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-19 11:26:47.853  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 11:26:47.853  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 11:26:47.854  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 11:26:47.855  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 11:26:47.880  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 11:26:47.882  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 11:26:48.020  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 11:26:48.139  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 11:26:48.205  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 11:26:48.712  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 11:26:48.776  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 11:26:48.778  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 11:26:50.099  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 11:26:50.145  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 11:26:51.045  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 11:26:51.087  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 3a2c0456-d746-48c7-8e6d-ddd393ebc7f3

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 11:26:51.100  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 11:26:51.367 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 11:26:51.647 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 11:26:52.095 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 11:26:52.148 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 11:26:52.501  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Started RoleRepositoryTest in 9.654 seconds (process running for 12.278)
2024-09-19 11:26:52.768 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:26:52.796 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:26:52.800 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:26:52.805 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:26:52.810 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:26:52.815 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:26:52.824 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 11:26:52.834 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 11:26:53.549 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:26:53.553 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:26:53.560 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:26:53.637 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:26:53.681  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 11:26:53.740  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 11:26:53.814  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 15027 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 11:26:53.816 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 11:26:53.816  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 11:26:54.016  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 11:26:54.048  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 30 ms. Found 4 JPA repository interfaces.
2024-09-19 11:26:54.101  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 11:26:54.177  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:ac009c84-57ff-44f7-8836-1767a4c0564f;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 11:26:54.549  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 11:26:54.662  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 11:26:54.685  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 11:26:54.905  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 11:26:54.907  INFO --- [           main] l.command                                : Using deploymentId: 6738014906
2024-09-19 11:26:54.909  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 11:26:54.942  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 11:26:54.960  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 11:26:54.961  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-19 11:26:54.976  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 11:26:54.984  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 11:26:54.985  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-19 11:26:54.994  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 11:26:55.002  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 11:26:55.013  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 11:26:55.014  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 19ms
2024-09-19 11:26:55.022  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 11:26:55.030  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 11:26:55.034  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 11:26:55.035  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 13ms
2024-09-19 11:26:55.042  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 11:26:55.046  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 11:26:55.050  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 11:26:55.054  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 11:26:55.059  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 11:26:55.060  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 18ms
2024-09-19 11:26:55.065  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 11:26:55.086  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 11:26:55.101  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 11:26:55.102  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 35ms
2024-09-19 11:26:55.107  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 11:26:55.126  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 11:26:55.127  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 19ms
2024-09-19 11:26:55.132  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 11:26:55.133  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 11:26:55.133  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 11:26:55.134  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 11:26:55.134  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 11:26:55.135  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 11:26:55.135  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 11:26:55.140  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 11:26:55.141  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 11:26:55.144  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 11:26:55.145  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 11:26:55.193  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 11:26:55.198  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 11:26:55.215  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 11:26:55.219  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 11:26:55.219  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 11:26:55.468  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 11:26:55.505  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 11:26:55.606  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 1.858 seconds (process running for 15.383)
2024-09-19 11:26:55.630 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 11:26:55.696 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 11:26:55.729 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 11:26:55.749  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 11:26:55.785  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 11:26:55.882  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 15027 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 11:26:55.884 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 11:26:55.884  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 11:26:55.887 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@13d63185
2024-09-19 11:26:57.182  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: c1e4ede8-c6b8-41e2-8054-90e182e33164

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 11:26:57.187  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 11:26:57.331 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 11:26:57.570 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 11:26:57.774 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 11:26:57.793 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 11:26:57.937 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 11:26:57.939  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 11:26:57.940  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 11:26:57.943  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 1 ms
2024-09-19 11:26:57.973  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.155 seconds (process running for 17.75)
2024-09-19 11:26:58.122 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 11:26:58.217  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 11:26:58.227  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 11:26:58.270 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 11:26:58.272 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 11:26:58.316 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 11:26:58.400 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@260715eb]
2024-09-19 11:26:58.404  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 11:26:58.407  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 11:26:58.427 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 11:26:58.428 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@bc35e84]
2024-09-19 11:26:58.577 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 11:26:58.580 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@652e4bb6]
2024-09-19 11:26:58.581  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 11:26:58.582  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 11:26:58.583 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 11:26:58.584 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@251d3913]
2024-09-19 11:26:58.603 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 11:26:58.612  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 11:26:58.614  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 11:26:58.615 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 11:26:58.616 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@77d01d83]
2024-09-19 11:26:59.233 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 11:26:59.235 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@671275fe
2024-09-19 11:26:59.248 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 11:26:59.257 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 11:26:59.684  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 11:26:59.686  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 11:26:59.697  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 11:26:59.699  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 11:26:59.705  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 11:26:59.706  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 11:26:59.717  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 11:26:59.719  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 11:26:59.730  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 11:26:59.733  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 11:27:00.384  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 11:27:00.387  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 11:27:00.388  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 11:27:00.394  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 11:27:00.395  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 11:27:00.402  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 11:27:00.408  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 11:27:00.409  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 11:27:00.426  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 11:27:00.454  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 11:27:00.474  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 11:27:00.510 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@58b67519, started on Thu Sep 19 11:26:43 CEST 2024
2024-09-19 11:27:00.528  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 11:27:00.532  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 11:27:00.549  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 11:27:00.552  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 11:27:00.553 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@13d63185, started on Thu Sep 19 11:26:55 CEST 2024
2024-09-19 11:31:02.696  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 11:31:02.858  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 11:31:03.552  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 11:31:03.596  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 18440 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 11:31:03.602 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 11:31:03.604  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 11:31:03.671 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 11:31:05.317  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 11:31:05.463  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 129 ms. Found 4 JPA repository interfaces.
2024-09-19 11:31:06.491  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 11:31:07.202  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@333e5fb6
2024-09-19 11:31:07.206  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 11:31:08.248  INFO --- [           main] l.changelog                              : Creating database history table with name: url_shortener_db.DATABASECHANGELOG
2024-09-19 11:31:08.684  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 11:31:09.026  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 11:31:09.029  INFO --- [           main] l.command                                : Using deploymentId: 6738269028
2024-09-19 11:31:09.033  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 11:31:09.084  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 11:31:09.190  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 11:31:09.193  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 107ms
2024-09-19 11:31:09.217  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 11:31:09.365  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 11:31:09.367  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 149ms
2024-09-19 11:31:09.416  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 11:31:09.574  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 11:31:09.804  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 11:31:09.807  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 389ms
2024-09-19 11:31:09.839  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 11:31:09.940  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 11:31:10.175  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 11:31:10.176  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 336ms
2024-09-19 11:31:10.197  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 11:31:10.275  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 11:31:10.499  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 11:31:10.692  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 11:31:10.891  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 11:31:10.893  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 694ms
2024-09-19 11:31:10.911  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 11:31:10.965  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 11:31:11.022  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 11:31:11.025  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 112ms
2024-09-19 11:31:11.043  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 11:31:11.127  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 11:31:11.129  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 85ms
2024-09-19 11:31:11.162  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 11:31:11.163  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 11:31:11.163  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 11:31:11.164  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 11:31:11.164  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 11:31:11.165  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 11:31:11.167  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 11:31:11.172  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 11:31:11.173  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 11:31:11.190  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 11:31:11.193  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 11:31:11.362  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 11:31:11.443  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 11:31:11.517  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 11:31:12.281  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 11:31:12.379  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 11:31:12.382  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 11:31:14.109  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 11:31:14.163  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 11:31:15.249  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 11:31:15.288  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 89c7cc9e-c3fb-4bd4-b2c6-a8b642808721

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 11:31:15.302  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 11:31:15.617 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 11:31:15.912 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 11:31:16.395 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 11:31:16.465 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 11:31:16.851  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Started RoleRepositoryTest in 13.747 seconds (process running for 16.257)
2024-09-19 11:31:17.076 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:31:17.130 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name) 
    values
        (?, ?)
2024-09-19 11:31:17.190 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:31:17.203 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:31:17.212 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name) 
    values
        (?, ?)
2024-09-19 11:31:17.235 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:31:17.241 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name) 
    values
        (?, ?)
2024-09-19 11:31:17.259 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:31:17.265 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:31:17.274 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 11:31:17.449 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 11:31:17.471 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-19 11:31:17.509 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 11:31:17.661 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 11:31:17.668 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-19 11:31:18.683 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:31:18.695 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:31:18.710 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:31:18.876 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 11:31:18.939  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 11:31:18.993  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 11:31:19.167  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 18440 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 11:31:19.170 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 11:31:19.172  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 11:31:19.356  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 11:31:19.386  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 29 ms. Found 4 JPA repository interfaces.
2024-09-19 11:31:19.433  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 11:31:19.488  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:8b1ef607-3d40-4bae-878c-ec77b04abd4f;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 11:31:19.924  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 11:31:20.036  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 11:31:20.052  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 11:31:20.114  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 11:31:20.114  INFO --- [           main] l.command                                : Using deploymentId: 6738280114
2024-09-19 11:31:20.116  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 11:31:20.138  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 11:31:20.151  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 11:31:20.152  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 12ms
2024-09-19 11:31:20.161  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 11:31:20.166  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 11:31:20.167  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 5ms
2024-09-19 11:31:20.173  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 11:31:20.178  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 11:31:20.186  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 11:31:20.187  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-19 11:31:20.194  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 11:31:20.203  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 11:31:20.209  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 11:31:20.210  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 14ms
2024-09-19 11:31:20.218  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 11:31:20.221  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 11:31:20.224  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 11:31:20.228  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 11:31:20.236  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 11:31:20.236  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 18ms
2024-09-19 11:31:20.242  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 11:31:20.265  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 11:31:20.283  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 11:31:20.284  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 42ms
2024-09-19 11:31:20.289  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 11:31:20.309  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 11:31:20.310  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 19ms
2024-09-19 11:31:20.314  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 11:31:20.314  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 11:31:20.315  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 11:31:20.315  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 11:31:20.316  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 11:31:20.316  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 11:31:20.316  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 11:31:20.317  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 11:31:20.318  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 11:31:20.321  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 11:31:20.322  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 11:31:20.370  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 11:31:20.375  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 11:31:20.393  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 11:31:20.396  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 11:31:20.397  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 11:31:20.632  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 11:31:20.666  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 11:31:20.790  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 1.787 seconds (process running for 20.196)
2024-09-19 11:31:20.810 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 11:31:20.837 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 11:31:20.845 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 11:31:20.872  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 11:31:20.919  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 11:31:21.019  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 18440 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 11:31:21.020 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 11:31:21.021  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 11:31:21.024 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@46179420
2024-09-19 11:31:22.371  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 008ff499-55a6-4923-9f38-673f23e71a6d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 11:31:22.377  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 11:31:22.542 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 11:31:22.756 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 11:31:23.056 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 11:31:23.079 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 11:31:23.235 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 11:31:23.238  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 11:31:23.239  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 11:31:23.241  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 2 ms
2024-09-19 11:31:23.309  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.356 seconds (process running for 22.715)
2024-09-19 11:31:23.612 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 11:31:23.714  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 11:31:23.722  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 11:31:23.764 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 11:31:23.766 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 11:31:23.834 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 11:31:23.958 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@5d55e5bb]
2024-09-19 11:31:23.964  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 11:31:23.967  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 11:31:23.993 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 11:31:23.994 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@34ceabf1]
2024-09-19 11:31:24.148 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 11:31:24.151 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@47dfbba3]
2024-09-19 11:31:24.152  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 11:31:24.153  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 11:31:24.156 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 11:31:24.157 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@6c6d3ce5]
2024-09-19 11:31:24.183 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 11:31:24.194  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 11:31:24.196  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 11:31:24.198 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 11:31:24.198 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@7a977d23]
2024-09-19 11:31:24.818 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 11:31:24.820 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@7a8ea
2024-09-19 11:31:24.833 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 11:31:24.840 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 11:31:25.261  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 11:31:25.263  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 11:31:25.276  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 11:31:25.278  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 11:31:25.287  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 11:31:25.288  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 11:31:25.300  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 11:31:25.302  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 11:31:25.316  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 11:31:25.319  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 11:31:26.020  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 11:31:26.025  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 11:31:26.026  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 11:31:26.034  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 11:31:26.035  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 11:31:26.046  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 11:31:26.055  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 11:31:26.055  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 11:31:26.072  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 11:31:26.096  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 11:31:26.122  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 11:31:26.157 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@58b67519, started on Thu Sep 19 11:31:03 CEST 2024
2024-09-19 11:31:26.169  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 11:31:26.176  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 11:31:26.193  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 11:31:26.196  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 11:31:26.197 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@46179420, started on Thu Sep 19 11:31:21 CEST 2024
2024-09-19 19:20:03.466  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 19:20:03.623  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 19:20:04.187  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 19:20:04.231  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 18192 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 19:20:04.237 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 19:20:04.238  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 19:20:04.286 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 19:20:05.781  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 19:20:05.909  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 113 ms. Found 4 JPA repository interfaces.
2024-09-19 19:20:06.868  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 19:20:07.483  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@17136390
2024-09-19 19:20:07.486  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 19:20:08.562  INFO --- [           main] l.changelog                              : Creating database history table with name: url_shortener_db.DATABASECHANGELOG
2024-09-19 19:20:08.985  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 19:20:09.310  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 19:20:09.316  INFO --- [           main] l.command                                : Using deploymentId: 6766409315
2024-09-19 19:20:09.322  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 19:20:09.382  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 19:20:09.485  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 19:20:09.487  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 103ms
2024-09-19 19:20:09.515  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 19:20:09.782  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 19:20:09.784  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 269ms
2024-09-19 19:20:09.813  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 19:20:09.902  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 19:20:10.117  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 19:20:10.120  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 306ms
2024-09-19 19:20:10.146  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 19:20:10.250  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 19:20:10.491  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 19:20:10.492  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 346ms
2024-09-19 19:20:10.511  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 19:20:10.609  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 19:20:10.766  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 19:20:10.992  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 19:20:11.205  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 19:20:11.207  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 695ms
2024-09-19 19:20:11.226  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 19:20:11.285  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 19:20:11.348  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 19:20:11.349  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 122ms
2024-09-19 19:20:11.366  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 19:20:11.439  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 19:20:11.441  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 74ms
2024-09-19 19:20:11.464  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 19:20:11.464  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 19:20:11.465  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 19:20:11.465  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 19:20:11.465  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 19:20:11.465  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 19:20:11.467  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 19:20:11.470  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 19:20:11.471  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 19:20:11.486  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 19:20:11.488  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 19:20:11.660  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 19:20:11.770  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 19:20:11.824  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 19:20:12.347  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 19:20:12.417  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 19:20:12.419  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 19:20:13.870  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 19:20:13.921  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:20:14.809  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 19:20:14.854  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 54865789-a7d1-45f6-9d38-f261bc3fac5a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 19:20:14.869  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 19:20:15.141 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 19:20:15.402 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 19:20:15.867 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 19:20:15.927 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 19:20:16.419  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Started RoleRepositoryTest in 12.578 seconds (process running for 15.091)
2024-09-19 19:20:16.628 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:20:16.678 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name) 
    values
        (?, ?)
2024-09-19 19:20:16.743 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:20:16.756 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:20:16.762 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name) 
    values
        (?, ?)
2024-09-19 19:20:16.786 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:20:16.790 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name) 
    values
        (?, ?)
2024-09-19 19:20:16.808 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:20:16.813 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:20:16.826 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:20:16.971 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 19:20:16.987 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-19 19:20:17.013 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:20:17.135 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 19:20:17.141 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-19 19:20:17.893 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:20:17.901 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:20:17.910 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:20:17.986 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:20:18.026  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 19:20:18.060  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 19:20:18.156  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 18192 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 19:20:18.158 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 19:20:18.158  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 19:20:18.321  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 19:20:18.344  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 4 JPA repository interfaces.
2024-09-19 19:20:18.385  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 19:20:18.459  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:983162c9-feb3-48f0-80e2-52fe79e0de85;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 19:20:18.875  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 19:20:18.978  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 19:20:18.995  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 19:20:19.071  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 19:20:19.072  INFO --- [           main] l.command                                : Using deploymentId: 6766419071
2024-09-19 19:20:19.074  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 19:20:19.097  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 19:20:19.111  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 19:20:19.111  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-19 19:20:19.121  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 19:20:19.128  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 19:20:19.129  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-19 19:20:19.135  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 19:20:19.142  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 19:20:19.153  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 19:20:19.154  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 18ms
2024-09-19 19:20:19.162  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 19:20:19.172  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 19:20:19.178  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 19:20:19.179  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 16ms
2024-09-19 19:20:19.185  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 19:20:19.188  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 19:20:19.191  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 19:20:19.196  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 19:20:19.204  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 19:20:19.205  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 19ms
2024-09-19 19:20:19.210  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 19:20:19.230  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 19:20:19.244  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 19:20:19.245  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 35ms
2024-09-19 19:20:19.250  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 19:20:19.269  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 19:20:19.270  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 19ms
2024-09-19 19:20:19.274  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 19:20:19.275  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 19:20:19.275  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 19:20:19.275  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 19:20:19.276  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 19:20:19.276  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 19:20:19.277  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 19:20:19.278  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 19:20:19.278  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 19:20:19.281  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 19:20:19.282  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 19:20:19.321  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 19:20:19.325  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 19:20:19.340  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 19:20:19.343  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 19:20:19.344  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 19:20:19.572  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 19:20:19.603  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:20:19.713  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 1.647 seconds (process running for 18.385)
2024-09-19 19:20:19.733 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:20:19.757 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 19:20:19.764 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:20:19.789  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 19:20:19.818  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 19:20:19.888  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 18192 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 19:20:19.890 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 19:20:19.890  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 19:20:19.893 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@33c6625c
2024-09-19 19:20:21.309  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 2d240e27-43c8-49d9-baf3-f120801a5eb8

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 19:20:21.316  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 19:20:21.455 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 19:20:21.669 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 19:20:21.950 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 19:20:21.971 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 19:20:22.109 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 19:20:22.112  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 19:20:22.112  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 19:20:22.115  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 2 ms
2024-09-19 19:20:22.154  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.315 seconds (process running for 20.826)
2024-09-19 19:20:22.363 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 19:20:22.441  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 19:20:22.448  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 19:20:22.480 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 19:20:22.482 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 19:20:22.529 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 19:20:22.621 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@18b0bbc3]
2024-09-19 19:20:22.627  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 19:20:22.630  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 19:20:22.668 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 19:20:22.674 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@7c65b55b]
2024-09-19 19:20:22.784 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 19:20:22.787 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@6c6d3ce5]
2024-09-19 19:20:22.787  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 19:20:22.789  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 19:20:22.790 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 19:20:22.790 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@2de77ecf]
2024-09-19 19:20:22.811 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 19:20:22.820  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 19:20:22.822  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 19:20:22.823 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 19:20:22.824 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@51173c3a]
2024-09-19 19:20:23.500 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 19:20:23.502 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@62885131
2024-09-19 19:20:23.514 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 19:20:23.523 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 19:20:23.986  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 19:20:23.988  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 19:20:24.001  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 19:20:24.003  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 19:20:24.012  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 19:20:24.013  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 19:20:24.026  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 19:20:24.027  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 19:20:24.041  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 19:20:24.045  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 19:20:24.826  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 19:20:24.831  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 19:20:24.831  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 19:20:24.846  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 19:20:24.847  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 19:20:24.857  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 19:20:24.865  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 19:20:24.866  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 19:20:24.882  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 19:20:24.904  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 19:20:24.933  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 19:20:24.973 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@58b67519, started on Thu Sep 19 19:20:04 CEST 2024
2024-09-19 19:20:24.986  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:20:24.990  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 19:20:25.013  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 19:20:25.016  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:20:25.017 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@33c6625c, started on Thu Sep 19 19:20:19 CEST 2024
2024-09-19 19:28:50.582  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 19:28:50.739  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-19 19:28:51.268  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 19:28:51.312  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 23689 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 19:28:51.317 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 19:28:51.319  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 19:28:51.374 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-19 19:28:52.894  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 19:28:53.000  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 94 ms. Found 4 JPA repository interfaces.
2024-09-19 19:28:53.932  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 19:28:54.467  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3bf5911d
2024-09-19 19:28:54.470  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 19:28:55.550  INFO --- [           main] l.changelog                              : Creating database history table with name: url_shortener_db.DATABASECHANGELOG
2024-09-19 19:28:55.952  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 19:28:56.371  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 19:28:56.374  INFO --- [           main] l.command                                : Using deploymentId: 6766936373
2024-09-19 19:28:56.378  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 19:28:56.435  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 19:28:56.543  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 19:28:56.545  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 108ms
2024-09-19 19:28:56.569  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 19:28:56.693  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 19:28:56.695  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 124ms
2024-09-19 19:28:56.729  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 19:28:56.808  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 19:28:57.050  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 19:28:57.052  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 323ms
2024-09-19 19:28:57.077  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 19:28:57.187  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 19:28:57.419  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 19:28:57.421  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 343ms
2024-09-19 19:28:57.443  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 19:28:57.525  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 19:28:57.673  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 19:28:57.868  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 19:28:58.086  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 19:28:58.088  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 643ms
2024-09-19 19:28:58.109  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 19:28:58.167  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 19:28:58.259  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 19:28:58.260  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 150ms
2024-09-19 19:28:58.563  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 19:28:58.717  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 19:28:58.719  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 154ms
2024-09-19 19:28:58.752  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 19:28:58.753  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 19:28:58.754  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 19:28:58.754  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 19:28:58.755  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 19:28:58.756  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 19:28:58.759  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 19:28:58.765  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 19:28:58.766  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 19:28:58.790  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 19:28:58.794  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 19:28:58.955  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 19:28:59.031  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 19:28:59.083  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 19:28:59.527  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 19:28:59.590  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 19:28:59.592  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 19:29:00.975  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 19:29:01.036  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:29:01.978  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 19:29:02.023  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 43ec1743-7eff-4569-98a5-40b7b108e08d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 19:29:02.035  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 19:29:02.303 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 19:29:02.561 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 19:29:03.059 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 19:29:03.137 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 19:29:03.575  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Started RoleRepositoryTest in 12.647 seconds (process running for 15.089)
2024-09-19 19:29:03.846 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:03.911 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name) 
    values
        (?, ?)
2024-09-19 19:29:04.030 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:04.040 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:04.046 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name) 
    values
        (?, ?)
2024-09-19 19:29:04.072 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:04.077 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name) 
    values
        (?, ?)
2024-09-19 19:29:04.097 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:04.106 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:04.121 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:29:04.291 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 19:29:04.312 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-19 19:29:04.334 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:29:04.451 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 19:29:04.455 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-19 19:29:05.222 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:05.228 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:05.236 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:05.322 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:05.361  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 19:29:05.402  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-19 19:29:05.489  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 23689 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 19:29:05.492 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 19:29:05.495  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-19 19:29:05.671  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 19:29:05.690  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 4 JPA repository interfaces.
2024-09-19 19:29:05.727  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-19 19:29:05.782  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:7b10347a-5cba-41b8-83e8-a8f53d4a9456;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-19 19:29:06.130  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-19 19:29:06.221  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-19 19:29:06.234  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 19:29:06.293  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-19 19:29:06.294  INFO --- [           main] l.command                                : Using deploymentId: 6766946294
2024-09-19 19:29:06.296  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-19 19:29:06.317  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-19 19:29:06.329  INFO --- [           main] l.changelog                              : Table roles created
2024-09-19 19:29:06.330  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-19 19:29:06.339  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-19 19:29:06.345  INFO --- [           main] l.changelog                              : Table users created
2024-09-19 19:29:06.346  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-19 19:29:06.352  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-19 19:29:06.357  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-19 19:29:06.365  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-19 19:29:06.366  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-19 19:29:06.372  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-19 19:29:06.379  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-19 19:29:06.383  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-19 19:29:06.384  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-19 19:29:06.389  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-19 19:29:06.392  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-19 19:29:06.395  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-19 19:29:06.400  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-19 19:29:06.407  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-19 19:29:06.408  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 18ms
2024-09-19 19:29:06.413  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-19 19:29:06.432  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-19 19:29:06.447  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-19 19:29:06.448  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 34ms
2024-09-19 19:29:06.452  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-19 19:29:06.469  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-19 19:29:06.470  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 17ms
2024-09-19 19:29:06.473  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 19:29:06.474  INFO --- [           main] l.util                                   : Run:                          7
2024-09-19 19:29:06.474  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-19 19:29:06.474  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 19:29:06.474  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 19:29:06.475  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 19:29:06.475  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 19:29:06.476  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-19 19:29:06.476  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-19 19:29:06.479  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 19:29:06.480  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 19:29:06.514  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 19:29:06.518  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 19:29:06.531  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 19:29:06.533  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 19:29:06.534  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 19:29:06.706  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 19:29:06.740  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:29:06.877  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 1.461 seconds (process running for 18.391)
2024-09-19 19:29:06.897 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:29:06.920 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-19 19:29:06.927 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:29:06.970  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 19:29:07.003  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-19 19:29:07.083  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 23689 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 19:29:07.085 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 19:29:07.085  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-19 19:29:07.088 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4f0ea6f8
2024-09-19 19:29:08.329  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 64fc20c8-126b-4e07-a37c-7d0d784fc5d7

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 19:29:08.334  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 19:29:08.436 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-19 19:29:08.640 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-19 19:29:08.877 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 19:29:08.897 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 19:29:09.036 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 19:29:09.039  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-19 19:29:09.039  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-19 19:29:09.043  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 2 ms
2024-09-19 19:29:09.085  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.054 seconds (process running for 20.599)
2024-09-19 19:29:09.276 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-19 19:29:09.373  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-19 19:29:09.383  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-19 19:29:09.415 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 19:29:09.417 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-19 19:29:09.464 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-19 19:29:09.563 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@7e626011]
2024-09-19 19:29:09.568  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-19 19:29:09.572  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-19 19:29:09.597 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 19:29:09.598 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@1355d2a0]
2024-09-19 19:29:09.719 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-19 19:29:09.722 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@70a8ebfc]
2024-09-19 19:29:09.723  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-19 19:29:09.724  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-19 19:29:09.725 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 19:29:09.726 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@4be2f788]
2024-09-19 19:29:09.748 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-19 19:29:09.757  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-19 19:29:09.759  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-19 19:29:09.761 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-19 19:29:09.761 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@6c249eb5]
2024-09-19 19:29:10.393 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 19:29:10.394 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@58e8535e
2024-09-19 19:29:10.405 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-19 19:29:10.411 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-19 19:29:10.809  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-19 19:29:10.812  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-19 19:29:10.829  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-19 19:29:10.832  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-19 19:29:10.845  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-19 19:29:10.847  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-19 19:29:10.863  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-19 19:29:10.864  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-19 19:29:10.877  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-19 19:29:10.879  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-19 19:29:11.564  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-19 19:29:11.567  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-19 19:29:11.567  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-19 19:29:11.574  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-19 19:29:11.574  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-19 19:29:11.580  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 19:29:11.586  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-19 19:29:11.587  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-19 19:29:11.601  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-19 19:29:11.615  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-19 19:29:11.640  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-19 19:29:11.676 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@58b67519, started on Thu Sep 19 19:28:51 CEST 2024
2024-09-19 19:29:11.695  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:29:11.700  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 19:29:11.715  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 19:29:11.718  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:29:11.719 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4f0ea6f8, started on Thu Sep 19 19:29:07 CEST 2024
2024-09-19 19:29:27.551  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 19:29:27.598  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 24136 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 19:29:27.610 DEBUG --- [           main] d.t.u.UrlShortenerApplication            : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 19:29:27.612  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "prod"
2024-09-19 19:29:28.955  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 19:29:29.039  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-09-19 19:29:29.889  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-19 19:29:29.906  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-19 19:29:29.909  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-19 19:29:29.909  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-09-19 19:29:29.974  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-19 19:29:29.975  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2275 ms
2024-09-19 19:29:30.088 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 19:29:30.251  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 19:29:30.697  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3d8d52be
2024-09-19 19:29:30.699  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 19:29:31.679  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 19:29:31.752  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-19 19:29:31.756  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 19:29:31.768  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 19:29:31.768  INFO --- [           main] l.util                                   : Run:                          0
2024-09-19 19:29:31.768  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-19 19:29:31.769  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 19:29:31.769  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 19:29:31.769  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 19:29:31.770  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 19:29:31.799  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 19:29:31.802  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 19:29:31.915  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 19:29:32.004  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 19:29:32.053  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 19:29:32.429  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 19:29:32.485  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 19:29:32.486  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 19:29:33.777  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 19:29:33.928  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:29:34.763  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 19:29:34.809  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: d9e286d6-4596-4673-98e7-ca80dfe620f6

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 19:29:34.821  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 19:29:35.094 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 19:29:35.287 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 19:29:35.617 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 19:29:35.681 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 19:29:36.028  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-19 19:29:36.045  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path '/'
2024-09-19 19:29:36.067  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.999 seconds (process running for 11.438)
2024-09-19 19:29:36.265 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:36.288 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:36.292 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:36.296 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:36.300 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:36.304 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:29:36.311 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:29:36.316 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:30:09.423  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:30:09.427  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 19:30:09.434  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 19:30:42.658  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 19:30:42.694  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 24924 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 19:30:42.699 DEBUG --- [           main] d.t.u.UrlShortenerApplication            : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 19:30:42.700  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "prod"
2024-09-19 19:30:43.922  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 19:30:44.009  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 77 ms. Found 4 JPA repository interfaces.
2024-09-19 19:30:44.870  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-19 19:30:44.886  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-19 19:30:44.888  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-19 19:30:44.889  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-09-19 19:30:44.949  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-19 19:30:44.949  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2198 ms
2024-09-19 19:30:45.067 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 19:30:45.258  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 19:30:45.693  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@12aa381f
2024-09-19 19:30:45.695  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 19:30:46.691  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 19:30:46.765  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-19 19:30:46.768  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 19:30:46.780  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 19:30:46.780  INFO --- [           main] l.util                                   : Run:                          0
2024-09-19 19:30:46.780  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-19 19:30:46.780  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 19:30:46.781  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 19:30:46.781  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 19:30:46.782  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 19:30:46.806  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 19:30:46.809  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 19:30:46.937  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 19:30:47.026  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 19:30:47.074  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 19:30:47.449  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 19:30:47.504  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 19:30:47.506  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 19:30:48.787  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 19:30:48.827  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:30:49.639  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 19:30:49.680  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: f729158a-d67c-4708-abc2-a57e02f2e9af

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 19:30:49.691  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 19:30:49.935 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 19:30:50.125 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 19:30:50.426 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 19:30:50.480 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 19:30:50.864  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-19 19:30:50.882  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path '/'
2024-09-19 19:30:50.897  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.684 seconds (process running for 10.338)
2024-09-19 19:30:51.122 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:30:51.148 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:30:51.152 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:30:51.156 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:30:51.160 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:30:51.167 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:30:51.172 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:30:51.176 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:30:57.029  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:30:57.032  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 19:30:57.039  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 19:31:36.870  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 19:31:36.920  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 25552 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 19:31:36.925 DEBUG --- [           main] d.t.u.UrlShortenerApplication            : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 19:31:36.927  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "prod"
2024-09-19 19:31:38.170  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 19:31:38.288  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 108 ms. Found 4 JPA repository interfaces.
2024-09-19 19:31:39.111  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-19 19:31:39.128  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-19 19:31:39.130  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-19 19:31:39.131  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-09-19 19:31:39.195  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-19 19:31:39.195  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2206 ms
2024-09-19 19:31:39.305 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 19:31:39.465  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 19:31:39.878  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@15e5246
2024-09-19 19:31:39.880  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 19:31:40.908  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 19:31:40.982  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-19 19:31:40.985  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 19:31:40.998  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 19:31:40.998  INFO --- [           main] l.util                                   : Run:                          0
2024-09-19 19:31:40.999  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-19 19:31:40.999  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 19:31:40.999  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 19:31:40.999  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 19:31:41.001  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 19:31:41.025  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 19:31:41.028  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 19:31:41.172  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 19:31:41.261  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 19:31:41.307  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 19:31:41.676  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 19:31:41.754  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 19:31:41.756  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 19:31:43.070  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 19:31:43.116  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:31:43.934  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 19:31:43.972  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: eef60567-2719-4083-909c-42c656ee49bf

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 19:31:43.983  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 19:31:44.242 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 19:31:44.438 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 19:31:44.732 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 19:31:44.786 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 19:31:45.147  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-19 19:31:45.173  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path '/'
2024-09-19 19:31:45.189  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.724 seconds (process running for 10.336)
2024-09-19 19:31:45.396 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:31:45.420 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:31:45.424 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:31:45.428 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:31:45.432 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:31:45.439 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:31:45.445 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:31:45.449 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:33:19.586  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:33:19.591  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 19:33:19.599  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-19 19:36:55.474  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-19 19:36:55.534  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 4212 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-19 19:36:55.539 DEBUG --- [           main] d.t.u.UrlShortenerApplication            : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-19 19:36:55.540  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "prod"
2024-09-19 19:36:56.912  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-19 19:36:57.005  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 82 ms. Found 4 JPA repository interfaces.
2024-09-19 19:36:58.267  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-19 19:36:58.289  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-19 19:36:58.292  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-19 19:36:58.293  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-09-19 19:36:58.367  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-19 19:36:58.368  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2769 ms
2024-09-19 19:36:58.498 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-19 19:36:58.694  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-19 19:36:59.267  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1bec1589
2024-09-19 19:36:59.269  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-19 19:37:00.454  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 19:37:00.535  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-19 19:37:00.539  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-19 19:37:00.551  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-19 19:37:00.551  INFO --- [           main] l.util                                   : Run:                          0
2024-09-19 19:37:00.552  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-19 19:37:00.552  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-19 19:37:00.552  INFO --- [           main] l.util                                   : -------------------------------
2024-09-19 19:37:00.552  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-19 19:37:00.554  INFO --- [           main] l.util                                   : Update summary generated
2024-09-19 19:37:00.578  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-19 19:37:00.580  INFO --- [           main] l.command                                : Command execution complete
2024-09-19 19:37:00.728  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-19 19:37:00.848  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-19 19:37:00.908  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-19 19:37:01.367  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-19 19:37:01.436  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-19 19:37:01.439  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-19 19:37:02.908  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-19 19:37:02.955  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:37:03.855  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-19 19:37:03.895  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 96caba66-344c-472d-aae7-f0e9d2f18f31

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-19 19:37:03.906  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-19 19:37:04.172 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-19 19:37:04.352 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-19 19:37:04.646 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-19 19:37:04.700 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-19 19:37:05.064  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-19 19:37:05.082  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path '/'
2024-09-19 19:37:05.098  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 10.103 seconds (process running for 12.326)
2024-09-19 19:37:05.313 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:37:05.344 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:37:05.348 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:37:05.352 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:37:05.356 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:37:05.365 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:37:05.428 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-19 19:37:05.432 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-19 19:38:48.820  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-19 19:38:48.824  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-19 19:38:48.833  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-21 12:39:01.460  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.RoleRepositoryTest]: RoleRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-21 12:39:01.621  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.RoleRepositoryTest
2024-09-21 12:39:02.206  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-21 12:39:02.246  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Starting RoleRepositoryTest using Java 21.0.2 with PID 46526 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-21 12:39:02.251 DEBUG --- [           main] d.t.u.r.RoleRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-21 12:39:02.253  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : The following 1 profile is active: "prod"
2024-09-21 12:39:02.301 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58b67519
2024-09-21 12:39:03.902  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-21 12:39:04.023  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 106 ms. Found 4 JPA repository interfaces.
2024-09-21 12:39:05.024  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-21 12:39:05.725  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7e38e254
2024-09-21 12:39:05.727  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-21 12:39:07.227  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-21 12:39:07.332  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-21 12:39:07.337  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-21 12:39:07.353  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-21 12:39:07.354  INFO --- [           main] l.util                                   : Run:                          0
2024-09-21 12:39:07.355  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-21 12:39:07.355  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-21 12:39:07.356  INFO --- [           main] l.util                                   : -------------------------------
2024-09-21 12:39:07.356  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-21 12:39:07.357  INFO --- [           main] l.util                                   : Update summary generated
2024-09-21 12:39:07.388  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-21 12:39:07.391  INFO --- [           main] l.command                                : Command execution complete
2024-09-21 12:39:07.630  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-21 12:39:07.746  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-21 12:39:07.816  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-21 12:39:08.349  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-21 12:39:08.422  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-21 12:39:08.424  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-21 12:39:09.941  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-21 12:39:09.995  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-21 12:39:11.044  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-21 12:39:11.081  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: a2e97779-6ebc-4b0b-b5c9-282fbf9c5069

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-21 12:39:11.093  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-21 12:39:11.380 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-21 12:39:11.658 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-21 12:39:12.084 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-21 12:39:12.165 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-21 12:39:12.543  INFO --- [           main] d.t.u.r.RoleRepositoryTest               : Started RoleRepositoryTest in 10.703 seconds (process running for 13.29)
2024-09-21 12:39:12.808 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:12.838 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:12.843 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:12.850 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:12.856 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:12.870 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-21 12:39:12.885 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-21 12:39:12.892 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:13.705 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:13.709 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:13.718 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:13.823 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:13.867  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-21 12:39:13.899  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-21 12:39:13.964  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 46526 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-21 12:39:13.965 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-21 12:39:13.966  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "prod"
2024-09-21 12:39:14.146  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-21 12:39:14.169  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 4 JPA repository interfaces.
2024-09-21 12:39:14.211  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-21 12:39:14.273  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:228f9c89-ce26-44b3-a19f-bab93996ca42;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-21 12:39:14.659  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-21 12:39:14.748  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-21 12:39:14.774  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-21 12:39:14.926  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-21 12:39:14.927  INFO --- [           main] l.command                                : Using deploymentId: 6915154927
2024-09-21 12:39:14.929  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-21 12:39:14.953  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-21 12:39:14.970  INFO --- [           main] l.changelog                              : Table roles created
2024-09-21 12:39:14.971  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 16ms
2024-09-21 12:39:14.982  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-21 12:39:14.988  INFO --- [           main] l.changelog                              : Table users created
2024-09-21 12:39:14.989  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-21 12:39:14.995  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-21 12:39:15.000  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-21 12:39:15.009  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-21 12:39:15.010  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-21 12:39:15.015  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-21 12:39:15.022  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-21 12:39:15.025  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-21 12:39:15.026  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-21 12:39:15.030  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-21 12:39:15.034  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-21 12:39:15.037  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-21 12:39:15.041  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-21 12:39:15.046  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-21 12:39:15.047  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-21 12:39:15.051  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-21 12:39:15.070  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-21 12:39:15.086  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-21 12:39:15.087  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 35ms
2024-09-21 12:39:15.093  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-21 12:39:15.113  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-21 12:39:15.113  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 19ms
2024-09-21 12:39:15.117  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-21 12:39:15.117  INFO --- [           main] l.util                                   : Run:                          7
2024-09-21 12:39:15.118  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-21 12:39:15.118  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-21 12:39:15.118  INFO --- [           main] l.util                                   : -------------------------------
2024-09-21 12:39:15.119  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-21 12:39:15.119  INFO --- [           main] l.util                                   : Update summary generated
2024-09-21 12:39:15.126  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-21 12:39:15.127  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-21 12:39:15.129  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-21 12:39:15.130  INFO --- [           main] l.command                                : Command execution complete
2024-09-21 12:39:15.176  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-21 12:39:15.181  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-21 12:39:15.194  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-21 12:39:15.196  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-21 12:39:15.196  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-21 12:39:15.398  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-21 12:39:15.436  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-21 12:39:15.553  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 1.648 seconds (process running for 16.3)
2024-09-21 12:39:15.587 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-21 12:39:15.660 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name) 
    values
        (?, ?, ?, ?)
2024-09-21 12:39:15.705 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-21 12:39:15.730  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-21 12:39:15.775  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-21 12:39:15.857  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 46526 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-21 12:39:15.858 DEBUG --- [           main] d.t.u.c.UserControllerTest               : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-21 12:39:15.858  INFO --- [           main] d.t.u.c.UserControllerTest               : The following 1 profile is active: "prod"
2024-09-21 12:39:15.861 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2ca307d3
2024-09-21 12:39:17.205  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: eb44f5ae-75fc-4b87-b8b3-8afff6b80bd8

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-21 12:39:17.211  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-21 12:39:17.368 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2024-09-21 12:39:17.694 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2024-09-21 12:39:18.079 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-21 12:39:18.110 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-21 12:39:18.265 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-21 12:39:18.267  INFO --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-09-21 12:39:18.268  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Initializing Servlet ''
2024-09-21 12:39:18.271  INFO --- [           main] o.s.t.w.s.TestDispatcherServlet          : Completed initialization in 3 ms
2024-09-21 12:39:18.315  INFO --- [           main] d.t.u.c.UserControllerTest               : Started UserControllerTest in 2.511 seconds (process running for 19.062)
2024-09-21 12:39:18.499 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-21 12:39:18.592  INFO --- [           main] d.t.u.c.UserController                   : Received request to delete user with ID: 1
2024-09-21 12:39:18.602  INFO --- [           main] d.t.u.c.UserController                   : User deleted successfully with ID: 1
2024-09-21 12:39:18.642 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-21 12:39:18.644 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-09-21 12:39:18.697 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-21 12:39:18.798 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@1c83c000]
2024-09-21 12:39:18.803  INFO --- [           main] d.t.u.c.UserController                   : Received request to update user with ID: 1
2024-09-21 12:39:18.807  INFO --- [           main] d.t.u.c.UserController                   : User updated successfully with ID: 1
2024-09-21 12:39:18.838 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-21 12:39:18.840 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@152f96e5]
2024-09-21 12:39:18.984 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-21 12:39:18.988 DEBUG --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userdto.UserRequest@7fab8e9a]
2024-09-21 12:39:18.989  INFO --- [           main] d.t.u.c.UserController                   : Received request to create user with username: testUser
2024-09-21 12:39:18.990  INFO --- [           main] d.t.u.c.UserController                   : User created successfully with ID: 1
2024-09-21 12:39:18.992 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-21 12:39:18.992 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@1f600254]
2024-09-21 12:39:19.020 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-21 12:39:19.030  INFO --- [           main] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to ADMIN
2024-09-21 12:39:19.032  INFO --- [           main] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-09-21 12:39:19.033 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-21 12:39:19.034 DEBUG --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userdto.UserResponse@2c3f9229]
2024-09-21 12:39:19.692 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-21 12:39:19.693 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Found role: de.telran.urlshortener.entity.Role@23c21550
2024-09-21 12:39:19.704 ERROR --- [           main] d.t.u.s.r.RoleService                    : Role name INVALID_ROLE is invalid
2024-09-21 12:39:19.712 DEBUG --- [           main] d.t.u.s.r.RoleService                    : Parsed role name: ADMIN
2024-09-21 12:39:20.136  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: existing@example.com
2024-09-21 12:39:20.140  WARN --- [           main] d.t.u.s.u.UserService                    : Attempted to create user with already existing email: existing@example.com
2024-09-21 12:39:20.183  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to change role for user with ID: 1 to PAID
2024-09-21 12:39:20.186  INFO --- [           main] d.t.u.s.u.UserService                    : User role updated successfully with ID: 1
2024-09-21 12:39:20.196  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to delete user with ID: 1
2024-09-21 12:39:20.197  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 deleted successfully
2024-09-21 12:39:20.207  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to update user with ID: 1
2024-09-21 12:39:20.207  INFO --- [           main] d.t.u.s.u.UserService                    : User with ID: 1 updated successfully
2024-09-21 12:39:20.217  INFO --- [           main] d.t.u.s.u.UserService                    : Attempting to create user with username: user and email: user@example.com
2024-09-21 12:39:20.219  INFO --- [           main] d.t.u.s.u.UserService                    : User created successfully with ID: null
2024-09-21 12:39:20.908  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Creating short URL for user email: user@example.com
2024-09-21 12:39:20.911  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Generated short key: 123ABc
2024-09-21 12:39:20.917  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL created with ID: 1
2024-09-21 12:39:20.925  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Fetching short URL with key: shortKey
2024-09-21 12:39:20.926  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL fetched successfully with key: shortKey
2024-09-21 12:39:20.934  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-21 12:39:20.941  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Attempting to delete short URL with ID: 1
2024-09-21 12:39:20.942  INFO --- [           main] d.t.u.s.s.ShortUrlService                : Short URL with ID: 1 deleted successfully
2024-09-21 12:39:20.959  INFO --- [           main] d.t.u.s.s.ShortUrlTrackingService        : Click count incremented successfully for short URL with key: abc123
2024-09-21 12:39:20.979  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-21 12:39:21.001  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-21 12:39:21.029 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@58b67519, started on Sat Sep 21 12:39:02 CEST 2024
2024-09-21 12:39:21.045  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-21 12:39:21.049  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-21 12:39:21.066  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-21 12:39:21.070  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-21 12:39:21.071 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@2ca307d3, started on Sat Sep 21 12:39:15 CEST 2024
2024-09-21 12:39:36.773  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-21 12:39:36.809  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 46955 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-21 12:39:36.814 DEBUG --- [           main] d.t.u.UrlShortenerApplication            : Running with Spring Boot v3.3.1, Spring v6.1.10
2024-09-21 12:39:36.815  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "prod"
2024-09-21 12:39:38.047  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-21 12:39:38.136  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 4 JPA repository interfaces.
2024-09-21 12:39:39.125  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-21 12:39:39.142  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-21 12:39:39.144  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-21 12:39:39.145  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-09-21 12:39:39.210  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-21 12:39:39.211  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2338 ms
2024-09-21 12:39:39.329 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-21 12:39:39.511  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-21 12:39:39.994  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@632d4cf2
2024-09-21 12:39:39.996  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-21 12:39:40.919  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-21 12:39:41.010  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-21 12:39:41.014  INFO --- [           main] l.changelog                              : Reading from url_shortener_db.DATABASECHANGELOG
2024-09-21 12:39:41.028  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-21 12:39:41.028  INFO --- [           main] l.util                                   : Run:                          0
2024-09-21 12:39:41.028  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-21 12:39:41.029  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-21 12:39:41.029  INFO --- [           main] l.util                                   : -------------------------------
2024-09-21 12:39:41.029  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-21 12:39:41.030  INFO --- [           main] l.util                                   : Update summary generated
2024-09-21 12:39:41.055  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-21 12:39:41.058  INFO --- [           main] l.command                                : Command execution complete
2024-09-21 12:39:41.184  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-21 12:39:41.280  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-09-21 12:39:41.323  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-21 12:39:41.710  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-21 12:39:41.775  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-21 12:39:41.777  WARN --- [           main] o.h.o.deprecation                        : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2024-09-21 12:39:43.146  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-21 12:39:43.192  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-21 12:39:44.045  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-21 12:39:44.087  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 01389e3c-4b28-43f3-880a-1b70d8eda1a2

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-21 12:39:44.097  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2024-09-21 12:39:44.364 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-21 12:39:44.564 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-21 12:39:44.863 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-21 12:39:44.935 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-21 12:39:45.308  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-21 12:39:45.326  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path '/'
2024-09-21 12:39:45.341  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 9.001 seconds (process running for 10.975)
2024-09-21 12:39:45.565 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:45.588 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:45.592 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:45.596 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:45.600 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:45.607 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-21 12:39:45.611 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    limit
        ?
2024-09-21 12:39:45.615 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-21 12:39:51.634  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-21 12:39:51.637  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-21 12:39:51.650  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
