2024-08-26 12:00:32.309  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-26 12:00:32.490  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-26 12:00:33.172  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-26 12:00:33.228  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 171621 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-26 12:00:33.235  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-26 12:00:33.292 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-26 12:00:34.654  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-26 12:00:34.768  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 103 ms. Found 4 JPA repository interfaces.
2024-08-26 12:00:35.576  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-26 12:00:35.659  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-26 12:00:35.714  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-26 12:00:36.081  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-26 12:00:36.123  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-26 12:00:36.441  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-26 12:00:36.444  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-26 12:00:36.481  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-26 12:00:37.823  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-26 12:00:37.888 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-26 12:00:37.903 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-26 12:00:37.906 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-26 12:00:37.908 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-26 12:00:37.912 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-26 12:00:37.915 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-26 12:00:37.916 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-26 12:00:37.918 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-26 12:00:37.919 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-26 12:00:37.920 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-26 12:00:37.921 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-26 12:00:37.922 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-26 12:00:37.923 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-26 12:00:37.924 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-26 12:00:37.925 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-26 12:00:37.927 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-26 12:00:37.935 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-26 12:00:37.938 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-26 12:00:37.941 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-26 12:00:37.946  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-26 12:00:38.946  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-26 12:00:39.262 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 15 mappings in 'requestMappingHandlerMapping'
2024-08-26 12:00:39.434 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-26 12:00:39.478  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@45398bb0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@35ffe3ac, org.springframework.security.web.context.SecurityContextHolderFilter@661d49d1, org.springframework.security.web.header.HeaderWriterFilter@51bd10f0, org.springframework.web.filter.CorsFilter@60fc4450, org.springframework.security.web.authentication.logout.LogoutFilter@1b472cad, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@27f43664, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@234adbe2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e674698, org.springframework.security.web.access.ExceptionTranslationFilter@2c40e456, org.springframework.security.web.access.intercept.AuthorizationFilter@feb57b4]
2024-08-26 12:00:39.773 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-26 12:00:39.827 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-26 12:00:40.102  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-26 12:00:40.222  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.454 seconds (process running for 10.133)
2024-08-26 12:00:40.477 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-26 12:00:40.568 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-26 12:00:40.598 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-26 12:00:40.611 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-26 12:00:40.613 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-26 12:00:40.619 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-26 12:00:40.621 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-26 12:00:40.625 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-26 12:00:40.629 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-26 12:00:40.637 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-26 12:00:40.788 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-26 12:00:40.805 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-26 12:00:40.815 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-26 12:00:40.932 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-26 12:00:40.934 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-26 12:00:41.763 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Mon Aug 26 12:00:33 CEST 2024
2024-08-26 12:00:41.772  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-26 12:00:41.776  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-26 12:00:41.783  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 10:55:15.537  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 10:55:15.698  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 10:55:16.210  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 10:55:16.257  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 139508 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 10:55:16.262  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 10:55:16.320 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 10:55:17.671  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 10:55:17.793  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 111 ms. Found 4 JPA repository interfaces.
2024-08-27 10:55:18.659  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 10:55:18.771  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 10:55:18.837  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 10:55:19.214  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 10:55:19.275  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 10:55:19.587  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 10:55:19.590  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 10:55:19.629  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 10:55:20.989  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 10:55:21.054 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 10:55:21.069 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 10:55:21.073 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 10:55:21.076 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 10:55:21.080 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 10:55:21.084 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 10:55:21.085 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 10:55:21.087 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 10:55:21.088 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 10:55:21.089 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 10:55:21.090 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 10:55:21.092 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 10:55:21.093 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 10:55:21.095 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 10:55:21.095 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 10:55:21.098 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 10:55:21.106 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 10:55:21.109 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 10:55:21.112 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 10:55:21.117  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 10:55:21.973  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 10:55:22.227 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 10:55:22.400 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 10:55:22.446  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@41f3f64, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@454f6cc5, org.springframework.security.web.context.SecurityContextHolderFilter@6f8281e6, org.springframework.security.web.header.HeaderWriterFilter@3f69b166, org.springframework.web.filter.CorsFilter@3956df0a, org.springframework.security.web.authentication.logout.LogoutFilter@5f1bd673, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@206a465f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c509742, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@739500b8, org.springframework.security.web.access.ExceptionTranslationFilter@509d999c, org.springframework.security.web.access.intercept.AuthorizationFilter@5c940e28]
2024-08-27 10:55:22.717 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 10:55:22.770 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 10:55:22.968  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 10:55:23.061  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.169 seconds (process running for 9.487)
2024-08-27 10:55:23.254 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:23.337 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:55:23.367 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:23.378 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:23.380 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:55:23.385 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:23.387 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:55:23.392 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:23.395 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:23.404 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 10:55:23.585 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 10:55:23.603 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 10:55:23.610 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 10:55:23.758 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 10:55:23.760 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 10:55:24.650 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 10:55:16 CEST 2024
2024-08-27 10:55:24.660  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 10:55:24.663  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 10:55:24.668  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 10:55:40.050  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 10:55:40.200  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 10:55:40.733  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 10:55:40.770  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 139808 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 10:55:40.776  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 10:55:40.823 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 10:55:42.097  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 10:55:42.239  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 128 ms. Found 4 JPA repository interfaces.
2024-08-27 10:55:42.992  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 10:55:43.070  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 10:55:43.120  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 10:55:43.459  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 10:55:43.499  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 10:55:43.802  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 10:55:43.805  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 10:55:43.843  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 10:55:45.264  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 10:55:45.326 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 10:55:45.341 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 10:55:45.344 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 10:55:45.346 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 10:55:45.350 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 10:55:45.352 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 10:55:45.354 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 10:55:45.356 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 10:55:45.356 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 10:55:45.360 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 10:55:45.362 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 10:55:45.364 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 10:55:45.365 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 10:55:45.366 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 10:55:45.367 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 10:55:45.370 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 10:55:45.379 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 10:55:45.382 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 10:55:45.385 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 10:55:45.389  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 10:55:46.301  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 10:55:46.613 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 10:55:46.797 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 10:55:46.840  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@24c7b944, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4a4352b4, org.springframework.security.web.context.SecurityContextHolderFilter@270a3cef, org.springframework.security.web.header.HeaderWriterFilter@35ffe3ac, org.springframework.web.filter.CorsFilter@540ac21e, org.springframework.security.web.authentication.logout.LogoutFilter@365c8a47, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f7e5e11, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7bb996e0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d640fe6, org.springframework.security.web.access.ExceptionTranslationFilter@1d12eff1, org.springframework.security.web.access.intercept.AuthorizationFilter@b22bebc]
2024-08-27 10:55:47.128 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 10:55:47.174 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 10:55:47.380  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 10:55:47.477  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.097 seconds (process running for 9.25)
2024-08-27 10:55:47.712 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:47.792 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:55:47.817 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:47.828 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:47.830 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:55:47.834 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:47.836 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:55:47.840 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:47.843 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:55:47.851 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 10:55:47.997 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 10:55:48.020 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 10:55:48.028 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 10:55:48.144 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 10:55:48.146 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 10:55:48.964 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 10:55:40 CEST 2024
2024-08-27 10:55:48.978  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 10:55:48.984  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 10:55:48.990  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 10:59:23.098  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 10:59:23.237  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 10:59:23.786  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 10:59:23.841  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 141704 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 10:59:23.848  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 10:59:23.901 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 10:59:25.159  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 10:59:25.311  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 139 ms. Found 4 JPA repository interfaces.
2024-08-27 10:59:26.206  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 10:59:26.320  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 10:59:26.383  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 10:59:26.802  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 10:59:26.853  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 10:59:27.271  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 10:59:27.275  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 10:59:27.324  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 10:59:28.640  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 10:59:28.703 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 10:59:28.716 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 10:59:28.719 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 10:59:28.721 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 10:59:28.725 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 10:59:28.727 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 10:59:28.729 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 10:59:28.731 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 10:59:28.731 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 10:59:28.733 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 10:59:28.733 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 10:59:28.735 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 10:59:28.736 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 10:59:28.737 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 10:59:28.738 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 10:59:28.739 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 10:59:28.747 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 10:59:28.749 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 10:59:28.751 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 10:59:28.755  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 10:59:29.562  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 10:59:29.820 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 15 mappings in 'requestMappingHandlerMapping'
2024-08-27 10:59:29.992 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 10:59:30.031  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7786c2e0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c940e28, org.springframework.security.web.context.SecurityContextHolderFilter@3f69b166, org.springframework.security.web.header.HeaderWriterFilter@179cdf4f, org.springframework.web.filter.CorsFilter@56c39949, org.springframework.security.web.authentication.logout.LogoutFilter@7b6e196e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4ecc4b43, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6f8281e6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@41f3f64, org.springframework.security.web.access.ExceptionTranslationFilter@1fdbba0d, org.springframework.security.web.access.intercept.AuthorizationFilter@c50d1b2]
2024-08-27 10:59:30.257 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 10:59:30.308 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 10:59:30.500  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 10:59:30.582  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.131 seconds (process running for 9.165)
2024-08-27 10:59:30.757 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:59:30.847 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:59:30.870 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:59:30.880 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:59:30.882 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:59:30.886 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:59:30.888 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 10:59:30.892 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:59:30.895 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 10:59:30.903 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 10:59:31.072 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 10:59:31.088 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 10:59:31.094 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 10:59:31.223 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 10:59:31.225 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 10:59:32.076 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 10:59:23 CEST 2024
2024-08-27 10:59:32.088  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 10:59:32.093  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 10:59:32.099  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 11:02:12.063  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 11:02:12.119  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 143041 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 11:02:12.126  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-27 11:02:13.615  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 11:02:13.957  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 96 ms. Found 4 JPA repository interfaces.
2024-08-27 11:02:14.877  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-27 11:02:14.902  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-27 11:02:14.906  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-27 11:02:14.907  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-27 11:02:14.992  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-27 11:02:14.993  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2782 ms
2024-08-27 11:02:15.075  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 11:02:15.425  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 11:02:15.428  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 11:02:15.448  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 11:02:15.660  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 11:02:15.745  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 11:02:15.800  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 11:02:16.161  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 11:02:16.229  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 11:02:17.822  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 11:02:17.913 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 11:02:17.932 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:02:17.935 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:02:17.938 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 11:02:17.942 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 11:02:17.945 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 11:02:17.947 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 11:02:17.949 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 11:02:17.949 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 11:02:17.951 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 11:02:17.952 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 11:02:17.953 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 11:02:17.954 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 11:02:17.955 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 11:02:17.956 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 11:02:17.958 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 11:02:17.968 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 11:02:17.970 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 11:02:17.973 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 11:02:17.978  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:02:18.917  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 11:02:19.234 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 15 mappings in 'requestMappingHandlerMapping'
2024-08-27 11:02:19.362 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 11:02:19.420  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@76a86677, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b863b4, org.springframework.security.web.context.SecurityContextHolderFilter@67c61551, org.springframework.security.web.header.HeaderWriterFilter@475b796d, org.springframework.web.filter.CorsFilter@2524f9bf, org.springframework.security.web.authentication.logout.LogoutFilter@523e019c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6bbff652, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3d72abea, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7e2c8622, org.springframework.security.web.access.ExceptionTranslationFilter@6421e9e7, org.springframework.security.web.access.intercept.AuthorizationFilter@60b8c05c]
2024-08-27 11:02:19.605 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 11:02:19.670 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 11:02:20.023  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-27 11:02:20.043  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-27 11:02:20.058  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.624 seconds (process running for 10.696)
2024-08-27 11:02:20.292 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:02:20.374 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:02:20.402 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:02:20.413 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:02:20.415 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:02:20.420 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:02:20.422 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:02:20.426 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:02:20.429 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:02:20.438 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:02:20.618 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:02:20.635 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:02:20.641 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:02:20.784 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:02:20.786 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:02:31.497  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-27 11:02:31.497  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-27 11:02:31.497 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-27 11:02:31.498 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-27 11:02:31.498 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-27 11:02:31.499 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3bdf6d63
2024-08-27 11:02:31.500 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@726882da
2024-08-27 11:02:31.500 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-27 11:02:31.501  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-08-27 11:02:31.518  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:02:31.533  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:02:31.539 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-27 11:02:31.543 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:31.583 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:31.609 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-27 11:02:31.611 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:31.615 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:31.637 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-27 11:02:31.639 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:31.639 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-27 11:02:31.641 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:31.641 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-27 11:02:31.642 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:31.643 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:31.673 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-27 11:02:31.675 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:31.683 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:31.700 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:31.727 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:40.992 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-27 11:02:40.994 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:40.997 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.020 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-27 11:02:41.021 DEBUG --- [nio-8080-exec-8] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.022 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-27 11:02:41.022 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-27 11:02:41.023 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-27 11:02:41.023 DEBUG --- [io-8080-exec-10] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.023 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.024 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.023 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-27 11:02:41.028 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.028 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.029 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.031 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.033 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.046 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.367 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 11:02:41.368 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.371 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.406 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-27 11:02:41.407 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-27 11:02:41.411 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 11:02:41.412 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:02:41.415 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.433 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-27 11:02:41.436 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-27 11:02:41.447 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:02:41.478 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-27 11:02:41.479 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-27 11:02:42.067  INFO --- [nio-8080-exec-6] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 567 ms
2024-08-27 11:02:42.098 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-27 11:02:42.099 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-27 11:02:42.101 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:03:23.614  INFO --- [ionShutdownHook] o.a.c.h.Http11NioProtocol                : Stopping ProtocolHandler ["http-nio-8080"]
2024-08-27 11:03:23.628  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:03:23.631  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 11:03:23.639  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 11:03:34.225  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 11:03:34.282  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 143871 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 11:03:34.288  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-27 11:03:35.504  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 11:03:35.611  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 97 ms. Found 4 JPA repository interfaces.
2024-08-27 11:03:36.399  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-27 11:03:36.412  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-27 11:03:36.414  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-27 11:03:36.415  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-27 11:03:36.480  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-27 11:03:36.480  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2126 ms
2024-08-27 11:03:36.543  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 11:03:36.815  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 11:03:36.817  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 11:03:36.831  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 11:03:36.995  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 11:03:37.065  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 11:03:37.113  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 11:03:37.417  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 11:03:37.470  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 11:03:38.694  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 11:03:38.761 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 11:03:38.776 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:03:38.779 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:03:38.782 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 11:03:38.785 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 11:03:38.788 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 11:03:38.789 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 11:03:38.791 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 11:03:38.791 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 11:03:38.792 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 11:03:38.793 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 11:03:38.794 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 11:03:38.795 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 11:03:38.796 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 11:03:38.797 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 11:03:38.798 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 11:03:38.806 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 11:03:38.808 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 11:03:38.810 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 11:03:38.815  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:03:39.585  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 11:03:39.824 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 15 mappings in 'requestMappingHandlerMapping'
2024-08-27 11:03:39.925 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 11:03:39.961  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7e2c8622, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4b02dc4e, org.springframework.security.web.context.SecurityContextHolderFilter@3d72abea, org.springframework.security.web.header.HeaderWriterFilter@67c61551, org.springframework.web.filter.CorsFilter@b67b359, org.springframework.security.web.authentication.logout.LogoutFilter@1af29a19, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@45ea6c24, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@51f31fad, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@98c4a8b, org.springframework.security.web.access.ExceptionTranslationFilter@24244ea, org.springframework.security.web.access.intercept.AuthorizationFilter@3b863b4]
2024-08-27 11:03:40.071 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 11:03:40.121 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 11:03:40.396  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-27 11:03:40.413  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-27 11:03:40.425  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.702 seconds (process running for 8.311)
2024-08-27 11:03:40.601 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:03:40.676 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:03:40.699 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:03:40.709 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:03:40.710 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:03:40.714 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:03:40.716 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:03:40.719 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:03:40.722 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:03:40.729 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:03:40.883 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:03:40.898 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:03:40.905 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:03:41.034 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:03:41.036 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:04:12.715  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-27 11:04:12.715  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-27 11:04:12.715 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-27 11:04:12.716 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-27 11:04:12.716 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-27 11:04:12.717 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2fe152aa
2024-08-27 11:04:12.718 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@1297cf8
2024-08-27 11:04:12.719 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-27 11:04:12.719  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-08-27 11:04:12.740  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/users' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:04:12.764  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/users' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:04:12.770 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 11:04:12.773 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 11:04:12.867 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@67bbdfa]
2024-08-27 11:04:12.876  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : Received request to create user with username: havrusha
2024-08-27 11:04:12.876  INFO --- [nio-8080-exec-1] d.t.u.s.i.UserServiceImpl                : Attempting to create user with username: havrusha and email: havrusha@string
2024-08-27 11:04:12.879 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:04:13.018 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:04:13.024 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:04:13.031 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 11:04:13.036 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:04:13.038  INFO --- [nio-8080-exec-1] d.t.u.s.i.UserServiceImpl                : User created successfully with ID: 3
2024-08-27 11:04:13.038  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-08-27 11:04:13.060 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:04:13.061 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@4cca1e3d]
2024-08-27 11:04:13.081 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:05:08.241 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : PATCH "/users/3/role?newRole=PAID", parameters={masked}
2024-08-27 11:05:08.242 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-08-27 11:05:08.251  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : Received request to change role for user with ID: 3 to PAID
2024-08-27 11:05:08.251  INFO --- [nio-8080-exec-2] d.t.u.s.i.UserServiceImpl                : Attempting to change role for user with ID: 3 to PAID
2024-08-27 11:05:08.273 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 11:05:08.286 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 11:05:08.292 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:05:08.301 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-08-27 11:05:08.314 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    update
        subscriptions 
    set
        end_date=?,
        start_date=?,
        subscription_type=?,
        user_id=? 
    where
        id=?
2024-08-27 11:05:08.320 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-08-27 11:05:08.322 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:05:08.326  INFO --- [nio-8080-exec-2] d.t.u.s.i.UserServiceImpl                : User role updated successfully with ID: 3
2024-08-27 11:05:08.326  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : User role updated successfully with ID: 3
2024-08-27 11:05:08.327 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:05:08.327 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@7a95f07d]
2024-08-27 11:05:08.330 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:05:29.404 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/users/3", parameters={}
2024-08-27 11:05:29.405 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-08-27 11:05:29.406  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : Received request to get user with ID: 3
2024-08-27 11:05:29.407  INFO --- [nio-8080-exec-3] d.t.u.s.i.UserServiceImpl                : Fetching user with ID: 3
2024-08-27 11:05:29.408 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 11:05:29.411 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 11:05:29.414  INFO --- [nio-8080-exec-3] d.t.u.s.i.UserServiceImpl                : User with ID: 3 fetched successfully
2024-08-27 11:05:29.414  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : User fetched successfully with ID: 3
2024-08-27 11:05:29.415 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:05:29.416 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@12231a47]
2024-08-27 11:05:29.418 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:06:17.565 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : PATCH "/users/2/role?newRole=ADMIN", parameters={masked}
2024-08-27 11:06:17.566 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-08-27 11:06:17.567  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : Received request to change role for user with ID: 2 to ADMIN
2024-08-27 11:06:17.567  INFO --- [nio-8080-exec-4] d.t.u.s.i.UserServiceImpl                : Attempting to change role for user with ID: 2 to ADMIN
2024-08-27 11:06:17.569 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 11:06:17.572 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 11:06:17.576 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:06:17.579 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-08-27 11:06:17.580 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 11:06:17.583 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-08-27 11:06:17.584 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:06:17.586  INFO --- [nio-8080-exec-4] d.t.u.s.i.UserServiceImpl                : User role updated successfully with ID: 2
2024-08-27 11:06:17.587  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : User role updated successfully with ID: 2
2024-08-27 11:06:17.587 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:06:17.587 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@67544114]
2024-08-27 11:06:17.589 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:06:42.595 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-08-27 11:06:42.596 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-08-27 11:06:42.600 DEBUG --- [nio-8080-exec-9] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-08-27 11:06:42.603 DEBUG --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleGlobalException(Exception)
2024-08-27 11:06:42.605 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'image/avif', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 11:06:42.606 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["No static resource favicon.ico."]
2024-08-27 11:06:42.609 DEBUG --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-08-27 11:06:42.610 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 500 INTERNAL_SERVER_ERROR
2024-08-27 11:06:45.515 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-08-27 11:06:45.516 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-08-27 11:06:45.518 DEBUG --- [nio-8080-exec-4] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-08-27 11:06:45.519 DEBUG --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleGlobalException(Exception)
2024-08-27 11:06:45.522 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'image/avif', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 11:06:45.522 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["No static resource favicon.ico."]
2024-08-27 11:06:45.523 DEBUG --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-08-27 11:06:45.524 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 500 INTERNAL_SERVER_ERROR
2024-08-27 11:08:16.014 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : PATCH "/users/1/role?newRole=TRIAL", parameters={masked}
2024-08-27 11:08:16.015 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-08-27 11:08:16.016  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : Received request to change role for user with ID: 1 to TRIAL
2024-08-27 11:08:16.016  INFO --- [nio-8080-exec-2] d.t.u.s.i.UserServiceImpl                : Attempting to change role for user with ID: 1 to TRIAL
2024-08-27 11:08:16.017 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 11:08:16.021 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 11:08:16.024 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:08:16.026 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-08-27 11:08:16.027 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 11:08:16.029 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-08-27 11:08:16.030 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:08:16.031  INFO --- [nio-8080-exec-2] d.t.u.s.i.UserServiceImpl                : User role updated successfully with ID: 1
2024-08-27 11:08:16.032  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : User role updated successfully with ID: 1
2024-08-27 11:08:16.032 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:08:16.032 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@46766787]
2024-08-27 11:08:16.034 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:28:45.274  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 11:28:45.416  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 11:28:45.951  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 11:28:46.001  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 157557 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 11:28:46.007  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 11:28:46.049 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 11:28:47.220  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 11:28:47.339  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 108 ms. Found 4 JPA repository interfaces.
2024-08-27 11:28:48.163  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 11:28:48.249  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 11:28:48.297  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 11:28:48.634  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 11:28:48.671  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 11:28:48.955  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 11:28:48.958  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 11:28:48.993  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 11:28:50.520  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 11:28:50.590 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 11:28:50.606 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:28:50.609 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:28:50.611 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 11:28:50.615 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 11:28:50.618 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 11:28:50.619 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 11:28:50.621 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 11:28:50.622 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 11:28:50.623 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 11:28:50.624 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 11:28:50.625 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 11:28:50.626 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 11:28:50.627 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 11:28:50.628 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 11:28:50.630 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 11:28:50.637 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 11:28:50.640 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 11:28:50.642 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 11:28:50.647  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:28:51.545  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 11:28:51.804  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [de/telran/urlshortener/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
2024-08-27 11:28:51.807  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:28:51.810  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 11:28:51.814  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 11:28:51.833  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-27 11:28:51.857 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [de/telran/urlshortener/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:880)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:833)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:493)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1420)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [de/telran/urlshortener/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:643)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1166)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1687)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1651)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeanCollection(DefaultListableBeanFactory.java:1541)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1509)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1390)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:872)
	... 98 more
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:178)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)
	... 115 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1179)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.createMvcMatchers(AbstractRequestMatcherRegistry.java:116)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:207)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:360)
	at de.telran.urlshortener.config.SecurityConfig.lambda$securityFilterChain$1(SecurityConfig.java:22)
	at org.springframework.security.config.annotation.web.builders.HttpSecurity.authorizeHttpRequests(HttpSecurity.java:1467)
	at de.telran.urlshortener.config.SecurityConfig.securityFilterChain(SecurityConfig.java:20)
	at de.telran.urlshortener.config.SecurityConfig$$SpringCGLIB$$0.CGLIB$securityFilterChain$1(<generated>)
	at de.telran.urlshortener.config.SecurityConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at de.telran.urlshortener.config.SecurityConfig$$SpringCGLIB$$0.securityFilterChain(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 116 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:663)
	at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1327)
	at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:368)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.initHandlerMappings(HandlerMappingIntrospector.java:130)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.afterPropertiesSet(HandlerMappingIntrospector.java:118)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 137 more
Caused by: java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.validateMethodMapping(AbstractHandlerMethodMapping.java:667)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:633)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.registerHandlerMethod(AbstractHandlerMethodMapping.java:331)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.registerHandlerMethod(RequestMappingHandlerMapping.java:486)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.registerHandlerMethod(RequestMappingHandlerMapping.java:79)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lambda$detectHandlerMethods$2(AbstractHandlerMethodMapping.java:298)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.detectHandlerMethods(AbstractHandlerMethodMapping.java:296)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.processCandidateBean(AbstractHandlerMethodMapping.java:265)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initHandlerMethods(AbstractHandlerMethodMapping.java:224)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.afterPropertiesSet(AbstractHandlerMethodMapping.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.afterPropertiesSet(RequestMappingHandlerMapping.java:233)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 150 more
2024-08-27 11:28:51.876 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@77d7d2d0]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3b32f0b4 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e517165, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@42f3156d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@10650953, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@63648ee9, org.springframework.boot.test.context.SpringBootTestAnnotation@7e93227b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [de/telran/urlshortener/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:880)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:833)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:493)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1420)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [de/telran/urlshortener/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:643)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1166)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1687)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1651)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeanCollection(DefaultListableBeanFactory.java:1541)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1509)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1390)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:872)
	... 98 more
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:178)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)
	... 115 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcHandlerMappingIntrospector' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1179)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.createMvcMatchers(AbstractRequestMatcherRegistry.java:116)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:207)
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:360)
	at de.telran.urlshortener.config.SecurityConfig.lambda$securityFilterChain$1(SecurityConfig.java:22)
	at org.springframework.security.config.annotation.web.builders.HttpSecurity.authorizeHttpRequests(HttpSecurity.java:1467)
	at de.telran.urlshortener.config.SecurityConfig.securityFilterChain(SecurityConfig.java:20)
	at de.telran.urlshortener.config.SecurityConfig$$SpringCGLIB$$0.CGLIB$securityFilterChain$1(<generated>)
	at de.telran.urlshortener.config.SecurityConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)
	at de.telran.urlshortener.config.SecurityConfig$$SpringCGLIB$$0.securityFilterChain(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	... 116 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:663)
	at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1327)
	at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:368)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.initHandlerMappings(HandlerMappingIntrospector.java:130)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.afterPropertiesSet(HandlerMappingIntrospector.java:118)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 137 more
Caused by: java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'shortUrlController' method 
de.telran.urlshortener.controller.ShortUrlController#redirectToFullUrl(String)
to {GET [/short-urls/{shortKey}]}: There is already 'shortUrlController' bean method
de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String) mapped.
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.validateMethodMapping(AbstractHandlerMethodMapping.java:667)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:633)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.registerHandlerMethod(AbstractHandlerMethodMapping.java:331)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.registerHandlerMethod(RequestMappingHandlerMapping.java:486)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.registerHandlerMethod(RequestMappingHandlerMapping.java:79)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lambda$detectHandlerMethods$2(AbstractHandlerMethodMapping.java:298)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.detectHandlerMethods(AbstractHandlerMethodMapping.java:296)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.processCandidateBean(AbstractHandlerMethodMapping.java:265)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initHandlerMethods(AbstractHandlerMethodMapping.java:224)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.afterPropertiesSet(AbstractHandlerMethodMapping.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.afterPropertiesSet(RequestMappingHandlerMapping.java:233)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 150 more
2024-08-27 11:36:02.873  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 11:36:03.013  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 11:36:03.522  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 11:36:03.562  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 161249 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 11:36:03.569  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 11:36:03.618 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 11:36:04.948  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 11:36:05.090  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 130 ms. Found 4 JPA repository interfaces.
2024-08-27 11:36:05.861  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 11:36:05.939  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 11:36:05.993  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 11:36:06.330  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 11:36:06.372  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 11:36:06.697  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 11:36:06.700  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 11:36:06.739  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 11:36:08.122  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 11:36:08.203 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 11:36:08.218 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:36:08.221 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:36:08.224 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 11:36:08.229 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 11:36:08.232 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 11:36:08.233 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 11:36:08.235 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 11:36:08.236 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 11:36:08.237 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 11:36:08.238 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 11:36:08.240 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 11:36:08.241 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 11:36:08.243 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 11:36:08.244 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 11:36:08.246 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 11:36:08.256 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 11:36:08.258 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 11:36:08.262 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 11:36:08.267  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:36:09.211  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 11:36:09.513 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 11:36:09.699 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 11:36:09.740  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@cec1ce2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4d82ded2, org.springframework.security.web.context.SecurityContextHolderFilter@20183e2d, org.springframework.security.web.header.HeaderWriterFilter@6888a33, org.springframework.web.filter.CorsFilter@655875bb, org.springframework.security.web.authentication.logout.LogoutFilter@d3929ba, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3bd1c7f0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@76ea1cb5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6ad036d6, org.springframework.security.web.access.ExceptionTranslationFilter@6d224921, org.springframework.security.web.access.intercept.AuthorizationFilter@38320819]
2024-08-27 11:36:10.050 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 11:36:10.096 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 11:36:10.283  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 11:36:10.379  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.182 seconds (process running for 9.297)
2024-08-27 11:36:10.578 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:10.657 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:36:10.685 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:10.696 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:10.698 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:36:10.703 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:10.706 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:36:10.709 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:10.713 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:10.721 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:36:10.869 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:36:10.884 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:36:10.890 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:36:11.004 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:36:11.006 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:36:11.831 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 11:36:03 CEST 2024
2024-08-27 11:36:11.841  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:36:11.844  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 11:36:11.849  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 11:36:28.552  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 11:36:28.606  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 161539 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 11:36:28.612  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-27 11:36:29.780  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 11:36:29.865  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-08-27 11:36:30.598  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-27 11:36:30.614  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-27 11:36:30.616  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-27 11:36:30.617  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-27 11:36:30.687  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-27 11:36:30.688  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2016 ms
2024-08-27 11:36:30.755  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 11:36:31.043  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 11:36:31.045  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 11:36:31.061  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 11:36:31.219  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 11:36:31.295  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 11:36:31.346  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 11:36:31.633  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 11:36:31.690  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 11:36:32.933  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 11:36:32.998 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 11:36:33.012 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:36:33.014 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:36:33.016 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 11:36:33.019 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 11:36:33.021 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 11:36:33.023 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 11:36:33.024 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 11:36:33.025 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 11:36:33.026 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 11:36:33.026 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 11:36:33.027 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 11:36:33.028 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 11:36:33.029 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 11:36:33.030 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 11:36:33.031 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 11:36:33.038 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 11:36:33.040 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 11:36:33.042 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 11:36:33.045  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:36:33.850  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 11:36:34.107 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 11:36:34.215 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 11:36:34.254  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6c289070, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@69e58566, org.springframework.security.web.context.SecurityContextHolderFilter@3fbf66e7, org.springframework.security.web.header.HeaderWriterFilter@72b4ecb2, org.springframework.web.filter.CorsFilter@2e41e0c, org.springframework.security.web.authentication.logout.LogoutFilter@4eb69e8d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41ad6c00, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2a10407e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e214d39, org.springframework.security.web.access.ExceptionTranslationFilter@18f1631c, org.springframework.security.web.access.intercept.AuthorizationFilter@328b2c2a]
2024-08-27 11:36:34.387 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 11:36:34.444 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 11:36:34.724  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-27 11:36:34.741  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-27 11:36:34.754  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.676 seconds (process running for 8.161)
2024-08-27 11:36:34.927 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:35.013 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:36:35.036 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:35.046 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:35.047 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:36:35.051 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:35.053 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:36:35.056 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:35.059 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:36:35.066 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:36:35.231 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:36:35.252 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:36:35.258 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:36:35.386 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:36:35.388 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:37:31.614  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-27 11:37:31.614  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-27 11:37:31.614 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-27 11:37:31.615 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-27 11:37:31.615 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-27 11:37:31.616 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5cc28282
2024-08-27 11:37:31.617 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4f378d7e
2024-08-27 11:37:31.617 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-27 11:37:31.617  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-08-27 11:37:31.634  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:37:31.648  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:37:31.654 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-27 11:37:31.658 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:31.692 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:31.720 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-27 11:37:31.722 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:31.723 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-27 11:37:31.724 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-27 11:37:31.725 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:31.725 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:31.725 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-27 11:37:31.738 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:31.738 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:31.742 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:31.746 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:31.747 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-27 11:37:31.748 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:31.762 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:31.784 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:32.487 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 11:37:32.489 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:32.493 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:32.525 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-27 11:37:32.526 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-27 11:37:32.528 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 11:37:32.530 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:37:32.532 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:32.550 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-27 11:37:32.552 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-27 11:37:32.563 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:32.602 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-27 11:37:32.605 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-27 11:37:33.571  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 940 ms
2024-08-27 11:37:33.600 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-27 11:37:33.603 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-27 11:37:33.604 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:37:50.202 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 11:37:50.202 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 11:37:50.238 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@6e4c21d4]
2024-08-27 11:37:50.241  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : Received request to create user with username: havrusha
2024-08-27 11:37:50.242  INFO --- [nio-8080-exec-1] d.t.u.s.i.UserServiceImpl                : Attempting to create user with username: havrusha and email: havrusha@string
2024-08-27 11:37:50.245 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:37:50.399 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:37:50.403 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:37:50.413 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 11:37:50.420 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:37:50.422  INFO --- [nio-8080-exec-1] d.t.u.s.i.UserServiceImpl                : User created successfully with ID: 3
2024-08-27 11:37:50.423  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-08-27 11:37:50.428 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:37:50.428 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@272a1116]
2024-08-27 11:37:50.434 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:39:06.104 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 11:39:06.105 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 11:39:06.108 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@447c9ba6]
2024-08-27 11:39:06.109  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Creating short URL for: https://github.com/schemchuk/url-shortener
2024-08-27 11:39:06.110  INFO --- [nio-8080-exec-7] d.t.u.s.i.ShortUrlServiceImpl            : Creating short URL for user email: havrusha@string
2024-08-27 11:39:06.122 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 11:39:06.134 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 11:39:06.142  INFO --- [nio-8080-exec-7] d.t.u.s.i.ShortUrlServiceImpl            : Generating short key with length: 6
2024-08-27 11:39:06.142  INFO --- [nio-8080-exec-7] d.t.u.s.i.ShortUrlServiceImpl            : Generated short key: MtJ7aR
2024-08-27 11:39:06.142  INFO --- [nio-8080-exec-7] d.t.u.s.i.ShortUrlServiceImpl            : Generated short key: MtJ7aR
2024-08-27 11:39:06.148 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    insert 
    into
        short_urls
        (click_count, creation_date, expiry_date, full_url, short_key, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2024-08-27 11:39:06.151  INFO --- [nio-8080-exec-7] d.t.u.s.i.ShortUrlServiceImpl            : Short URL created with ID: 1
2024-08-27 11:39:06.152  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Short URL created successfully with key: MtJ7aR
2024-08-27 11:39:06.154 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:39:06.155 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@72507d70]
2024-08-27 11:39:06.156 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-08-27 11:39:29.394 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/short-urls/MtJ7aR", parameters={}
2024-08-27 11:39:29.394 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 11:39:29.395  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Fetching short URL with key: MtJ7aR
2024-08-27 11:39:29.396  INFO --- [nio-8080-exec-9] d.t.u.s.i.ShortUrlServiceImpl            : Fetching short URL with key: MtJ7aR
2024-08-27 11:39:29.399 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 11:39:29.412  INFO --- [nio-8080-exec-9] d.t.u.s.i.ShortUrlServiceImpl            : Incrementing click count for short URL with key: MtJ7aR
2024-08-27 11:39:29.414 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 11:39:29.424 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 11:39:29.431  INFO --- [nio-8080-exec-9] d.t.u.s.i.ShortUrlServiceImpl            : Click count incremented successfully for short URL with key: MtJ7aR
2024-08-27 11:39:29.431  INFO --- [nio-8080-exec-9] d.t.u.s.i.ShortUrlServiceImpl            : Short URL fetched successfully with key: MtJ7aR
2024-08-27 11:39:29.431  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@23b98c7b
2024-08-27 11:39:29.432 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:39:29.432 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@23b98c7b]
2024-08-27 11:39:29.435 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:39:32.537 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/short-urls/MtJ7aR", parameters={}
2024-08-27 11:39:32.538 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 11:39:32.539  INFO --- [nio-8080-exec-8] d.t.u.c.ShortUrlController               : Fetching short URL with key: MtJ7aR
2024-08-27 11:39:32.539  INFO --- [nio-8080-exec-8] d.t.u.s.i.ShortUrlServiceImpl            : Fetching short URL with key: MtJ7aR
2024-08-27 11:39:32.542 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 11:39:32.547  INFO --- [nio-8080-exec-8] d.t.u.s.i.ShortUrlServiceImpl            : Incrementing click count for short URL with key: MtJ7aR
2024-08-27 11:39:32.555 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 11:39:32.558 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 11:39:32.560  INFO --- [nio-8080-exec-8] d.t.u.s.i.ShortUrlServiceImpl            : Click count incremented successfully for short URL with key: MtJ7aR
2024-08-27 11:39:32.560  INFO --- [nio-8080-exec-8] d.t.u.s.i.ShortUrlServiceImpl            : Short URL fetched successfully with key: MtJ7aR
2024-08-27 11:39:32.560  INFO --- [nio-8080-exec-8] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@360a8d
2024-08-27 11:39:32.561 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:39:32.561 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@360a8d]
2024-08-27 11:39:32.563 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:39:48.184 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/r/MtJ7aR", parameters={}
2024-08-27 11:39:48.185 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.RedirectController#redirectToFullUrl(String)
2024-08-27 11:39:48.188 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 11:39:48.197 DEBUG --- [io-8080-exec-10] o.s.w.s.v.RedirectView                   : View [RedirectView], model {}
2024-08-27 11:39:48.201 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 302 FOUND
2024-08-27 11:50:07.017  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:50:07.019  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 11:50:07.022  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 11:50:11.062  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 11:50:11.094  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 168780 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 11:50:11.097  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-27 11:50:11.915  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 11:50:11.986  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 62 ms. Found 4 JPA repository interfaces.
2024-08-27 11:50:12.565  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-27 11:50:12.581  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-27 11:50:12.583  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-27 11:50:12.584  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-27 11:50:12.625  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-27 11:50:12.625  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1492 ms
2024-08-27 11:50:12.666  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 11:50:12.844  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 11:50:12.846  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 11:50:12.862  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 11:50:13.019  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 11:50:13.094  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 11:50:13.142  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 11:50:13.425  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 11:50:13.477  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 11:50:14.707  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 11:50:14.773 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 11:50:14.787 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:50:14.789 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 11:50:14.792 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 11:50:14.795 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 11:50:14.797 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 11:50:14.798 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 11:50:14.800 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 11:50:14.800 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 11:50:14.801 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 11:50:14.802 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 11:50:14.803 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 11:50:14.804 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 11:50:14.805 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 11:50:14.806 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 11:50:14.807 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 11:50:14.814 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 11:50:14.816 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 11:50:14.818 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 11:50:14.822  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 11:50:15.594  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 11:50:15.844 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 11:50:15.945 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 11:50:15.985  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@78c9c38a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8a0a1d1, org.springframework.security.web.context.SecurityContextHolderFilter@78fd1179, org.springframework.security.web.header.HeaderWriterFilter@98c4a8b, org.springframework.web.filter.CorsFilter@6dd50380, org.springframework.security.web.authentication.logout.LogoutFilter@53b60595, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5e08ed28, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b05292, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@215efb16, org.springframework.security.web.access.ExceptionTranslationFilter@4b02dc4e, org.springframework.security.web.access.intercept.AuthorizationFilter@1d0f03f6]
2024-08-27 11:50:16.128 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 11:50:16.179 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 11:50:16.438  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-27 11:50:16.455  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-27 11:50:16.468  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 5.76 seconds (process running for 6.931)
2024-08-27 11:50:16.645 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:50:16.719 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:50:16.740 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:50:16.749 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:50:16.751 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:50:16.755 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:50:16.756 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 11:50:16.759 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:50:16.762 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:50:16.769 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:50:16.926 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:50:16.943 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:50:16.949 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:50:17.078 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:50:17.080 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:50:40.786  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-27 11:50:40.786  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-27 11:50:40.787 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-27 11:50:40.787 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-27 11:50:40.787 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-27 11:50:40.788 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@72cf159f
2024-08-27 11:50:40.789 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@1fcef6f9
2024-08-27 11:50:40.789 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-27 11:50:40.790  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-08-27 11:50:40.806  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:50:40.822  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 11:50:40.829 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-27 11:50:40.833 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:40.869 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:40.901 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-27 11:50:40.903 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:40.907 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:40.931 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-27 11:50:40.933 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-27 11:50:40.933 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-27 11:50:40.934 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:40.934 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:40.933 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-27 11:50:40.934 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:40.936 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:40.938 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:40.944 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:40.973 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:40.990 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:41.677 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 11:50:41.679 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:41.681 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:41.711 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-27 11:50:41.712 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-27 11:50:41.713 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 11:50:41.715 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 11:50:41.719 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:41.735 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-27 11:50:41.738 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-27 11:50:41.748 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:50:41.774 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-27 11:50:41.776 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-27 11:50:42.720  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 921 ms
2024-08-27 11:50:42.748 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-27 11:50:42.752 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-27 11:50:42.753 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:51:01.090 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 11:51:01.090 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 11:51:01.119 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@1a64f868]
2024-08-27 11:51:01.123  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : Received request to create user with username: havrusha
2024-08-27 11:51:01.124  INFO --- [nio-8080-exec-1] d.t.u.s.i.UserServiceImpl                : Attempting to create user with username: havrusha and email: havrusha@string
2024-08-27 11:51:01.127 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 11:51:01.259 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 11:51:01.263 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 11:51:01.270 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 11:51:01.274 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 11:51:01.277  INFO --- [nio-8080-exec-1] d.t.u.s.i.UserServiceImpl                : User created successfully with ID: 3
2024-08-27 11:51:01.277  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-08-27 11:51:01.280 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:51:01.280 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@55bd40de]
2024-08-27 11:51:01.285 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 11:52:50.273 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 11:52:50.274 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 11:52:50.277 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@936c5ae]
2024-08-27 11:52:50.278  INFO --- [nio-8080-exec-6] d.t.u.c.ShortUrlController               : Creating short URL for: http://localhost:8080/h2-console/login.do?jsessionid=ecc30f732e980673912b9461de9e6971
2024-08-27 11:52:50.278  INFO --- [nio-8080-exec-6] d.t.u.s.i.ShortUrlServiceImpl            : Creating short URL for user email: havrusha@string
2024-08-27 11:52:50.291 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 11:52:50.305 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 11:52:50.315  INFO --- [nio-8080-exec-6] d.t.u.s.i.ShortUrlServiceImpl            : Generating short key with length: 6
2024-08-27 11:52:50.315  INFO --- [nio-8080-exec-6] d.t.u.s.i.ShortUrlServiceImpl            : Generated short key: 2U8T2A
2024-08-27 11:52:50.315  INFO --- [nio-8080-exec-6] d.t.u.s.i.ShortUrlServiceImpl            : Generated short key: 2U8T2A
2024-08-27 11:52:50.322 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    insert 
    into
        short_urls
        (click_count, creation_date, expiry_date, full_url, short_key, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2024-08-27 11:52:50.326  INFO --- [nio-8080-exec-6] d.t.u.s.i.ShortUrlServiceImpl            : Short URL created with ID: 1
2024-08-27 11:52:50.326  INFO --- [nio-8080-exec-6] d.t.u.c.ShortUrlController               : Short URL created successfully with key: 2U8T2A
2024-08-27 11:52:50.329 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 11:52:50.330 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@5b1e0b51]
2024-08-27 11:52:50.332 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-08-27 11:53:32.197 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/r/2U8T2A", parameters={}
2024-08-27 11:53:32.198 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.RedirectController#redirectToFullUrl(String)
2024-08-27 11:53:32.202 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 11:53:32.213 DEBUG --- [nio-8080-exec-7] o.s.w.s.v.RedirectView                   : View [RedirectView], model {}
2024-08-27 11:53:32.216 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 302 FOUND
2024-08-27 12:57:39.899  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 12:57:40.067  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 12:57:40.856  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 12:57:40.914  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 203723 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 12:57:40.921  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 12:57:40.977 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 12:57:42.753  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 12:57:42.888  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 123 ms. Found 4 JPA repository interfaces.
2024-08-27 12:57:43.758  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 12:57:43.854  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 12:57:43.916  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 12:57:44.298  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 12:57:44.342  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 12:57:44.685  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 12:57:44.688  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 12:57:44.728  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 12:57:46.251  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 12:57:46.320 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 12:57:46.336 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 12:57:46.339 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 12:57:46.343 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 12:57:46.347 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 12:57:46.350 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 12:57:46.352 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 12:57:46.354 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 12:57:46.354 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 12:57:46.356 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 12:57:46.356 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 12:57:46.358 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 12:57:46.359 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 12:57:46.361 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 12:57:46.362 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 12:57:46.363 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 12:57:46.372 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 12:57:46.374 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 12:57:46.377 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 12:57:46.382  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 12:57:47.366  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 12:57:47.672 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 12:57:47.866 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 12:57:47.914  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b72c62, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5d180628, org.springframework.security.web.context.SecurityContextHolderFilter@17e2ad13, org.springframework.security.web.header.HeaderWriterFilter@6203f10f, org.springframework.web.filter.CorsFilter@7b4b559d, org.springframework.security.web.authentication.logout.LogoutFilter@24c7b944, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5f4f198c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7966a964, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1046aaa4, org.springframework.security.web.access.ExceptionTranslationFilter@72b60be8, org.springframework.security.web.access.intercept.AuthorizationFilter@655875bb]
2024-08-27 12:57:48.274 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 12:57:48.341 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 12:57:48.611  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 12:57:48.713  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 8.324 seconds (process running for 10.609)
2024-08-27 12:57:48.952 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:57:49.049 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:57:49.082 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:57:49.096 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:57:49.099 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:57:49.105 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:57:49.107 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:57:49.112 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:57:49.117 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:57:49.127 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:57:49.296 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:57:49.313 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:57:49.320 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:57:49.434 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:57:49.437 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:57:50.406 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 12:57:40 CEST 2024
2024-08-27 12:57:50.416  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 12:57:50.421  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 12:57:50.442  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 12:58:04.984  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 12:58:05.136  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 12:58:05.645  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 12:58:05.695  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 204021 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 12:58:05.703  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 12:58:05.758 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 12:58:07.147  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 12:58:07.271  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 114 ms. Found 4 JPA repository interfaces.
2024-08-27 12:58:08.284  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 12:58:08.399  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 12:58:08.465  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 12:58:08.838  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 12:58:08.875  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 12:58:09.168  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 12:58:09.172  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 12:58:09.206  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 12:58:10.544  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 12:58:10.609 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 12:58:10.624 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 12:58:10.627 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 12:58:10.630 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 12:58:10.634 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 12:58:10.637 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 12:58:10.638 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 12:58:10.640 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 12:58:10.641 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 12:58:10.642 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 12:58:10.643 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 12:58:10.644 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 12:58:10.645 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 12:58:10.646 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 12:58:10.647 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 12:58:10.648 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 12:58:10.656 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 12:58:10.658 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 12:58:10.662 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 12:58:10.667  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 12:58:11.626  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 12:58:11.910 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 12:58:12.088 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 12:58:12.128  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6101fd7d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b22bebc, org.springframework.security.web.context.SecurityContextHolderFilter@35ffe3ac, org.springframework.security.web.header.HeaderWriterFilter@feb57b4, org.springframework.web.filter.CorsFilter@60773809, org.springframework.security.web.authentication.logout.LogoutFilter@55f29d39, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2e674698, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@270a3cef, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24c7b944, org.springframework.security.web.access.ExceptionTranslationFilter@4e7e7763, org.springframework.security.web.access.intercept.AuthorizationFilter@64f1e9f8]
2024-08-27 12:58:12.415 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 12:58:12.474 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 12:58:12.693  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 12:58:12.797  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.468 seconds (process running for 9.601)
2024-08-27 12:58:13.079 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:13.201 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:58:13.234 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:13.245 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:13.247 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:58:13.252 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:13.254 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:58:13.258 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:13.262 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:13.273 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:58:13.445 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:58:13.465 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:58:13.475 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:58:13.587 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:58:13.590 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:58:14.458 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 12:58:05 CEST 2024
2024-08-27 12:58:14.490  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 12:58:14.495  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 12:58:14.500  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 12:58:28.711  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 12:58:28.759  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 204313 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 12:58:28.765  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-27 12:58:29.975  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 12:58:30.057  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2024-08-27 12:58:30.904  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-27 12:58:30.919  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-27 12:58:30.922  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-27 12:58:30.923  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-27 12:58:30.991  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-27 12:58:30.992  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2174 ms
2024-08-27 12:58:31.059  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 12:58:31.365  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 12:58:31.368  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 12:58:31.384  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 12:58:31.546  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 12:58:31.631  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 12:58:31.676  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 12:58:31.994  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 12:58:32.058  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 12:58:33.425  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 12:58:33.499 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 12:58:33.514 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 12:58:33.516 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 12:58:33.518 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 12:58:33.521 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 12:58:33.524 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 12:58:33.525 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 12:58:33.527 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 12:58:33.528 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 12:58:33.529 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 12:58:33.530 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 12:58:33.531 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 12:58:33.532 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 12:58:33.533 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 12:58:33.533 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 12:58:33.535 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 12:58:33.542 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 12:58:33.544 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 12:58:33.546 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 12:58:33.550  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 12:58:34.342  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 12:58:34.593 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 12:58:34.704 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 12:58:34.748  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@13cec4ff, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5e08ed28, org.springframework.security.web.context.SecurityContextHolderFilter@6a9c848, org.springframework.security.web.header.HeaderWriterFilter@7976d382, org.springframework.web.filter.CorsFilter@24b05292, org.springframework.security.web.authentication.logout.LogoutFilter@696d28ee, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@b9c8678, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@318beab4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@34d6e9a4, org.springframework.security.web.access.ExceptionTranslationFilter@45ea6c24, org.springframework.security.web.access.intercept.AuthorizationFilter@4eb69e8d]
2024-08-27 12:58:34.900 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 12:58:34.949 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 12:58:35.266  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-27 12:58:35.285  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-27 12:58:35.298  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 7.09 seconds (process running for 8.562)
2024-08-27 12:58:35.481 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:35.562 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:58:35.587 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:35.598 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:35.600 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:58:35.604 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:35.606 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 12:58:35.610 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:35.613 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:58:35.619 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:58:35.785 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:58:35.802 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:58:35.807 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:58:35.949 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:58:35.951 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:58:46.859  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-27 12:58:46.860  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-27 12:58:46.860 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-27 12:58:46.861 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-27 12:58:46.861 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-27 12:58:46.863 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@48e1e18a
2024-08-27 12:58:46.865 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@7a59780b
2024-08-27 12:58:46.865 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-27 12:58:46.866  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 5 ms
2024-08-27 12:58:46.909  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 12:58:46.932  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 12:58:46.942 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-27 12:58:46.948 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:47.039 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:47.137 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-27 12:58:47.140 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:47.163 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:47.168 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-27 12:58:47.170 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:47.172 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-27 12:58:47.173 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:47.178 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-27 12:58:47.184 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:47.188 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:47.201 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-27 12:58:47.202 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:47.224 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:47.248 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:47.321 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:48.063 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 12:58:48.065 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:48.069 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:48.100 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-27 12:58:48.101 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-27 12:58:48.108 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 12:58:48.109 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 12:58:48.112 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:48.126 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-27 12:58:48.128 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-27 12:58:48.143 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:58:48.171 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-27 12:58:48.173 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-27 12:58:49.013  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 816 ms
2024-08-27 12:58:49.041 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-27 12:58:49.045 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-27 12:58:49.046 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:59:08.204 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 12:59:08.205 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 12:59:08.224 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@7131e1f8]
2024-08-27 12:59:08.227  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : Received request to create user with username: havrusha
2024-08-27 12:59:08.228  INFO --- [nio-8080-exec-1] d.t.u.s.UserService                      : Attempting to create user with username: havrusha and email: havrusha@string
2024-08-27 12:59:08.230 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 12:59:08.362 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 12:59:08.365 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:59:08.371 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 12:59:08.377 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:59:08.379  INFO --- [nio-8080-exec-1] d.t.u.s.UserService                      : User created successfully with ID: 3
2024-08-27 12:59:08.379  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-08-27 12:59:08.381 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 12:59:08.382 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@1bdb833a]
2024-08-27 12:59:08.386 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 12:59:59.509 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : PATCH "/users/3/role?newRole=PAID", parameters={masked}
2024-08-27 12:59:59.510 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-08-27 12:59:59.512  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : Received request to change role for user with ID: 3 to PAID
2024-08-27 12:59:59.513  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : Attempting to change role for user with ID: 3 to PAID
2024-08-27 12:59:59.543 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 12:59:59.554 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 12:59:59.562 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 12:59:59.568 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-08-27 12:59:59.579 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    update
        subscriptions 
    set
        end_date=?,
        start_date=?,
        subscription_type=?,
        user_id=? 
    where
        id=?
2024-08-27 12:59:59.584 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-08-27 12:59:59.586 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 12:59:59.589  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : User role updated successfully with ID: 3
2024-08-27 12:59:59.590  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : User role updated successfully with ID: 3
2024-08-27 12:59:59.590 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 12:59:59.590 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@5c30cf95]
2024-08-27 12:59:59.592 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 13:00:14.492 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-08-27 13:00:14.494 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-08-27 13:00:14.496 DEBUG --- [nio-8080-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-08-27 13:00:14.499 DEBUG --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleGlobalException(Exception)
2024-08-27 13:00:14.507 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'image/avif', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 13:00:14.507 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["No static resource favicon.ico."]
2024-08-27 13:00:14.517 DEBUG --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-08-27 13:00:14.518 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 500 INTERNAL_SERVER_ERROR
2024-08-27 13:00:17.582 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-08-27 13:00:17.585 DEBUG --- [io-8080-exec-10] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-08-27 13:00:17.588 DEBUG --- [io-8080-exec-10] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-08-27 13:00:17.589 DEBUG --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleGlobalException(Exception)
2024-08-27 13:00:17.593 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'image/avif', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 13:00:17.594 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["No static resource favicon.ico."]
2024-08-27 13:00:17.596 DEBUG --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-08-27 13:00:17.596 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 500 INTERNAL_SERVER_ERROR
<<<<<<< HEAD
2024-08-28 19:36:51.015  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 19:36:51.063  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 19684 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 19:36:51.069  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-28 19:36:52.329  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 19:36:52.408  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 69 ms. Found 4 JPA repository interfaces.
2024-08-28 19:36:53.172  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-28 19:36:53.184  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-28 19:36:53.186  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-28 19:36:53.187  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-28 19:36:53.248  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-28 19:36:53.248  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2121 ms
2024-08-28 19:36:53.309  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 19:36:53.604  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-28 19:36:53.606  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 19:36:53.624  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-28 19:36:53.799  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 19:36:53.880  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 19:36:53.922  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 19:36:54.196  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 19:36:54.248  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 19:36:55.468  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 19:36:55.533 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:10.920  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 15:24:11.059  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 15:24:11.575  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 15:24:11.617  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 266055 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 15:24:11.622  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 15:24:11.663 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 15:24:12.844  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 15:24:12.939  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 84 ms. Found 4 JPA repository interfaces.
2024-08-27 15:24:13.705  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 15:24:13.781  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 15:24:13.831  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 15:24:14.167  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 15:24:14.208  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 15:24:14.543  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 15:24:14.546  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 15:24:14.600  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 15:24:15.976  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 15:24:16.048 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
<<<<<<< HEAD
2024-08-28 19:36:55.547 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.065 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
<<<<<<< HEAD
2024-08-28 19:36:55.550 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.068 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
<<<<<<< HEAD
2024-08-28 19:36:55.552 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.071 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
<<<<<<< HEAD
2024-08-28 19:36:55.555 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.074 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
<<<<<<< HEAD
2024-08-28 19:36:55.558 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 19:36:55.559 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 19:36:55.561 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 19:36:55.561 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 19:36:55.563 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 19:36:55.564 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 19:36:55.565 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 19:36:55.566 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 19:36:55.567 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 19:36:55.567 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 19:36:55.568 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.077 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 15:24:16.079 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 15:24:16.081 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 15:24:16.082 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 15:24:16.083 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 15:24:16.084 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 15:24:16.087 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 15:24:16.088 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 15:24:16.090 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 15:24:16.091 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 15:24:16.093 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
<<<<<<< HEAD
2024-08-28 19:36:55.576 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.101 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
<<<<<<< HEAD
2024-08-28 19:36:55.578 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.103 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
<<<<<<< HEAD
2024-08-28 19:36:55.580 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.106 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
<<<<<<< HEAD
2024-08-28 19:36:55.584  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 19:36:56.443  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-28 19:36:57.055 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-28 19:36:57.156 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-28 19:36:57.204  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@456beb8b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@191cf38f, org.springframework.security.web.context.SecurityContextHolderFilter@4582da06, org.springframework.security.web.header.HeaderWriterFilter@58e9e852, org.springframework.web.filter.CorsFilter@2dc54b50, org.springframework.security.web.authentication.logout.LogoutFilter@6db59e26, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1c10eb3a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@49f32bcb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@31a9eaa, org.springframework.security.web.access.ExceptionTranslationFilter@5a35efac, org.springframework.security.web.access.intercept.AuthorizationFilter@54dc163a]
2024-08-28 19:36:57.322 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-28 19:36:57.373 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-28 19:36:57.629  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-28 19:36:57.646  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-28 19:36:57.659  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 7.075 seconds (process running for 8.609)
2024-08-28 19:36:57.836 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:24:16.110  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:24:16.790  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redirectController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/RedirectController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'shortUrlService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/ShortUrlService.class]: Unsatisfied dependency expressed through constructor parameter 3: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-08-27 15:24:16.791  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:24:16.793  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 15:24:16.797  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 15:24:16.812  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-27 15:24:16.844 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 3 of constructor in de.telran.urlshortener.service.ShortUrlService required a bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' that could not be found.


Action:

Consider defining a bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' in your configuration.

2024-08-27 15:24:16.852 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@1299fed3]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@1930e8ef testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e517165, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@42f3156d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@10650953, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@63648ee9, org.springframework.boot.test.context.SpringBootTestAnnotation@7e93227b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redirectController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/RedirectController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'shortUrlService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/ShortUrlService.class]: Unsatisfied dependency expressed through constructor parameter 3: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:241)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1193)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'shortUrlService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/ShortUrlService.class]: Unsatisfied dependency expressed through constructor parameter 3: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:241)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1193)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1441)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 97 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1878)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1404)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 111 more
2024-08-27 15:37:56.240  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 15:37:56.372  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 15:37:56.849  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 15:37:56.899  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 273877 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 15:37:56.905  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 15:37:56.955 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 15:37:58.185  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 15:37:58.276  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 4 JPA repository interfaces.
2024-08-27 15:37:59.068  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 15:37:59.148  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 15:37:59.204  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 15:37:59.539  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 15:37:59.579  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 15:37:59.876  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 15:37:59.879  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 15:37:59.915  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 15:38:01.303  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 15:38:01.373 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 15:38:01.390 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:38:01.393 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:38:01.396 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 15:38:01.400 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 15:38:01.403 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 15:38:01.404 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 15:38:01.407 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 15:38:01.407 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 15:38:01.409 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 15:38:01.410 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 15:38:01.412 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 15:38:01.413 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 15:38:01.415 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 15:38:01.415 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 15:38:01.417 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 15:38:01.426 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 15:38:01.428 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 15:38:01.431 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 15:38:01.436  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:38:02.065  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redirectController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/RedirectController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'shortUrlService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/ShortUrlService.class]: Unsatisfied dependency expressed through constructor parameter 3: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-08-27 15:38:02.066  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:38:02.069  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 15:38:02.074  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 15:38:02.089  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-27 15:38:02.123 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 3 of constructor in de.telran.urlshortener.service.ShortUrlService required a bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' that could not be found.


Action:

Consider defining a bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' in your configuration.

2024-08-27 15:38:02.131 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@755fdfad]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@2d732cda testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e517165, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@42f3156d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@10650953, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@63648ee9, org.springframework.boot.test.context.SpringBootTestAnnotation@7e93227b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redirectController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/RedirectController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'shortUrlService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/ShortUrlService.class]: Unsatisfied dependency expressed through constructor parameter 3: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:241)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1193)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'shortUrlService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/ShortUrlService.class]: Unsatisfied dependency expressed through constructor parameter 3: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:241)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1193)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1441)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 97 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'de.telran.urlshortener.mapper.ShortUrlMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1878)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1404)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 111 more
2024-08-27 15:43:29.876  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 15:43:30.038  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 15:43:30.759  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 15:43:30.834  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 276634 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 15:43:30.841  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 15:43:30.910 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 15:43:32.541  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 15:43:32.665  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 108 ms. Found 4 JPA repository interfaces.
2024-08-27 15:43:33.544  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 15:43:33.626  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 15:43:33.677  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 15:43:34.009  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 15:43:34.067  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 15:43:34.378  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 15:43:34.381  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 15:43:34.419  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 15:43:35.747  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 15:43:35.811 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 15:43:35.826 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:43:35.829 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:43:35.832 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 15:43:35.835 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 15:43:35.838 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 15:43:35.839 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 15:43:35.842 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 15:43:35.842 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 15:43:35.844 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 15:43:35.844 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 15:43:35.846 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 15:43:35.847 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 15:43:35.848 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 15:43:35.849 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 15:43:35.850 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 15:43:35.858 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 15:43:35.860 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 15:43:35.862 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 15:43:35.867  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:43:36.760  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 15:43:37.037 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 15:43:37.190 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 15:43:37.240  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@36e9fd4f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@730611a0, org.springframework.security.web.context.SecurityContextHolderFilter@5f1bd673, org.springframework.security.web.header.HeaderWriterFilter@7b6e196e, org.springframework.web.filter.CorsFilter@8b727cb, org.springframework.security.web.authentication.logout.LogoutFilter@6b58a0f9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@144fc5fa, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5472c27a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6030eff1, org.springframework.security.web.access.ExceptionTranslationFilter@20183e2d, org.springframework.security.web.access.intercept.AuthorizationFilter@32192a69]
2024-08-27 15:43:37.551 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 15:43:37.609 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 15:43:37.796  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 15:43:37.900  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.59 seconds (process running for 9.781)
2024-08-27 15:43:38.080 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
<<<<<<< HEAD
2024-08-28 19:36:57.913 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.150 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
<<<<<<< HEAD
2024-08-28 19:36:57.935 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.175 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
<<<<<<< HEAD
2024-08-28 19:36:57.945 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.186 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
<<<<<<< HEAD
2024-08-28 19:36:57.947 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.188 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
<<<<<<< HEAD
2024-08-28 19:36:57.951 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.193 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
<<<<<<< HEAD
2024-08-28 19:36:57.952 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.194 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
<<<<<<< HEAD
2024-08-28 19:36:57.956 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.198 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
<<<<<<< HEAD
2024-08-28 19:36:57.959 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.201 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
<<<<<<< HEAD
2024-08-28 19:36:57.965 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.208 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
<<<<<<< HEAD
2024-08-28 19:36:58.123 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.364 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
<<<<<<< HEAD
2024-08-28 19:36:58.140 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.383 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
<<<<<<< HEAD
2024-08-28 19:36:58.146 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.389 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
<<<<<<< HEAD
2024-08-28 19:36:58.287 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.500 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
<<<<<<< HEAD
2024-08-28 19:36:58.289 DEBUG --- [           main] o.h.SQL                                  : 
=======
2024-08-27 15:43:38.502 DEBUG --- [           main] o.h.SQL                                  : 
>>>>>>> swaggerDocumentation
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
<<<<<<< HEAD
2024-08-28 19:37:07.887  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-28 19:37:07.888  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-28 19:37:07.888 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-28 19:37:07.888 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-28 19:37:07.888 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-28 19:37:07.890 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1455a374
2024-08-28 19:37:07.891 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@78e386a5
2024-08-28 19:37:07.891 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-28 19:37:07.892  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-08-28 19:37:07.908  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-28 19:37:07.921  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-28 19:37:07.928 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-28 19:37:07.932 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:07.966 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:07.997 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-28 19:37:07.999 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:08.004 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:08.030 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-28 19:37:08.032 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-28 19:37:08.032 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:08.033 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:08.033 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-28 19:37:08.034 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:08.036 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:08.040 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-28 19:37:08.042 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:08.055 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:08.061 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:08.086 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:08.970 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-28 19:37:08.971 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:08.975 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:09.008 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-28 19:37:09.009 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-28 19:37:09.011 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-28 19:37:09.013 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:37:09.017 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:09.036 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-28 19:37:09.039 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-28 19:37:09.052 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:37:09.084 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-28 19:37:09.085 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-28 19:37:10.141  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 1035 ms
2024-08-28 19:37:10.171 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-28 19:37:10.175 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-28 19:37:10.177 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
=======
2024-08-27 15:43:39.329 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 15:43:30 CEST 2024
2024-08-27 15:43:39.342  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:43:39.347  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 15:43:39.354  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 15:49:26.597  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-27 15:49:26.753  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-27 15:49:27.293  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 15:49:27.342  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 279555 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 15:49:27.348  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-27 15:49:27.398 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-27 15:49:28.741  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 15:49:28.834  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 81 ms. Found 4 JPA repository interfaces.
2024-08-27 15:49:29.641  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 15:49:29.721  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 15:49:29.776  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 15:49:30.110  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 15:49:30.152  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 15:49:30.485  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 15:49:30.488  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 15:49:30.527  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 15:49:31.986  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 15:49:32.053 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 15:49:32.068 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:49:32.072 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:49:32.075 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 15:49:32.079 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 15:49:32.082 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 15:49:32.084 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 15:49:32.086 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 15:49:32.087 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 15:49:32.088 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 15:49:32.089 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 15:49:32.091 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 15:49:32.091 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 15:49:32.093 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 15:49:32.095 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 15:49:32.097 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 15:49:32.107 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 15:49:32.110 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 15:49:32.112 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 15:49:32.117  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:49:33.037  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 15:49:33.363 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 15:49:33.526 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 15:49:33.566  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@16c3388e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@cec1ce2, org.springframework.security.web.context.SecurityContextHolderFilter@7d661205, org.springframework.security.web.header.HeaderWriterFilter@44233014, org.springframework.web.filter.CorsFilter@4d82ded2, org.springframework.security.web.authentication.logout.LogoutFilter@64f1e9f8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6203f10f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3bd1c7f0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@655875bb, org.springframework.security.web.access.ExceptionTranslationFilter@270a3cef, org.springframework.security.web.access.intercept.AuthorizationFilter@a8964c1]
2024-08-27 15:49:33.814 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 15:49:33.864 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 15:49:34.062  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 15:49:34.157  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.2 seconds (process running for 9.408)
2024-08-27 15:49:34.376 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:49:34.452 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 15:49:34.480 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:49:34.491 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:49:34.494 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 15:49:34.499 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:49:34.501 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 15:49:34.505 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:49:34.508 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:49:34.516 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 15:49:34.682 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 15:49:34.702 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 15:49:34.709 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 15:49:34.838 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 15:49:34.839 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 15:49:35.646 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Tue Aug 27 15:49:27 CEST 2024
2024-08-27 15:49:35.654  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:49:35.658  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-27 15:49:35.662  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-27 15:51:57.202  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-27 15:51:57.246  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 280881 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-27 15:51:57.252  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-27 15:51:58.408  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-27 15:51:58.493  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-08-27 15:51:59.228  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-27 15:51:59.249  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-27 15:51:59.252  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-27 15:51:59.252  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-27 15:51:59.315  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-27 15:51:59.316  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2013 ms
2024-08-27 15:51:59.377  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-27 15:51:59.665  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-27 15:51:59.667  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-27 15:51:59.684  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-27 15:51:59.850  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-27 15:51:59.935  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-27 15:51:59.985  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-27 15:52:00.268  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-27 15:52:00.325  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-27 15:52:01.565  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-27 15:52:01.630 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-27 15:52:01.646 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:52:01.648 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-27 15:52:01.651 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-27 15:52:01.654 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-27 15:52:01.657 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-27 15:52:01.658 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-27 15:52:01.660 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-27 15:52:01.660 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-27 15:52:01.662 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-27 15:52:01.662 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-27 15:52:01.664 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-27 15:52:01.664 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-27 15:52:01.665 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-27 15:52:01.666 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-27 15:52:01.667 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-27 15:52:01.675 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-27 15:52:01.677 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-27 15:52:01.679 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-27 15:52:01.683  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-27 15:52:02.463  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-27 15:52:02.711 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-27 15:52:02.814 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-27 15:52:02.864  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@67c912d3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@60515ab1, org.springframework.security.web.context.SecurityContextHolderFilter@38624a3a, org.springframework.security.web.header.HeaderWriterFilter@1c10eb3a, org.springframework.web.filter.CorsFilter@37e967df, org.springframework.security.web.authentication.logout.LogoutFilter@517fb2c3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@73cdf5f9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7d619bcb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@16a89351, org.springframework.security.web.access.ExceptionTranslationFilter@4582da06, org.springframework.security.web.access.intercept.AuthorizationFilter@31a9eaa]
2024-08-27 15:52:02.984 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-27 15:52:03.037 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-27 15:52:03.301  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-27 15:52:03.326  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-27 15:52:03.339  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.546 seconds (process running for 8.004)
2024-08-27 15:52:03.514 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:52:03.590 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 15:52:03.612 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:52:03.621 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:52:03.622 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 15:52:03.627 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:52:03.629 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-27 15:52:03.632 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:52:03.635 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:52:03.641 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 15:52:03.796 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 15:52:03.815 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 15:52:03.822 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 15:52:03.965 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 15:52:03.967 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 15:53:55.322  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-27 15:53:55.322  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-27 15:53:55.322 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-27 15:53:55.322 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-27 15:53:55.322 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-27 15:53:55.323 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6d21a69f
2024-08-27 15:53:55.324 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@6138ee0e
2024-08-27 15:53:55.325 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-27 15:53:55.325  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-08-27 15:53:55.336  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 15:53:55.347  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-27 15:53:55.352 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-27 15:53:55.355 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:55.385 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:55.412 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-27 15:53:55.414 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:55.418 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:55.430 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-27 15:53:55.431 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:55.434 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:55.432 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-27 15:53:55.437 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:55.441 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-27 15:53:55.441 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-27 15:53:55.443 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:55.443 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:55.454 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:55.458 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:55.484 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:56.078 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 15:53:56.080 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:56.083 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:56.115 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-27 15:53:56.115 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-27 15:53:56.116 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-27 15:53:56.116 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-27 15:53:56.119 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:56.148 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-27 15:53:56.151 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-27 15:53:56.169 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:53:56.204 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-27 15:53:56.205 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-27 15:53:57.127  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 903 ms
2024-08-27 15:53:57.156 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-27 15:53:57.160 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-27 15:53:57.163 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:54:38.886 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 15:54:38.886 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 15:54:38.905 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@16a79e9e]
2024-08-27 15:54:38.908  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : Received request to create user with username: havrusha
2024-08-27 15:54:38.909  INFO --- [nio-8080-exec-1] d.t.u.s.UserService                      : Attempting to create user with username: havrusha and email: havrusha@gmail.com
2024-08-27 15:54:38.911 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 15:54:39.044 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 15:54:39.048 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 15:54:39.055 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 15:54:39.062 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 15:54:39.064  INFO --- [nio-8080-exec-1] d.t.u.s.UserService                      : User created successfully with ID: 3
2024-08-27 15:54:39.065  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-08-27 15:54:39.067 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 15:54:39.067 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@423a780f]
2024-08-27 15:54:39.071 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:55:54.748 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 15:55:54.749 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 15:55:54.751 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@38e8e579]
2024-08-27 15:55:54.751  INFO --- [nio-8080-exec-6] d.t.u.c.ShortUrlController               : Creating short URL for: string
2024-08-27 15:55:54.751  INFO --- [nio-8080-exec-6] d.t.u.s.ShortUrlService                  : Creating short URL for user email: havrusha@gmail.com
2024-08-27 15:55:54.763 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 15:55:54.775 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 15:55:54.787 DEBUG --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleUrlValidationException(UrlValidationException)
2024-08-27 15:55:54.789 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 15:55:54.790 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Invalid URL format"]
2024-08-27 15:55:54.792 DEBUG --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [de.telran.urlshortener.exception.UrlValidationException: Invalid URL format]
2024-08-27 15:55:54.793 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 400 BAD_REQUEST
2024-08-27 15:56:48.665 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 15:56:48.665 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 15:56:48.667 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@36d6a84a]
2024-08-27 15:56:48.667  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Creating short URL for: http://localhost:8080/h2-console/login.do?jsessionid=381a7f29681802044dddb795eaa1ed1a
2024-08-27 15:56:48.667  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Creating short URL for user email: havrusha@gmail.com
2024-08-27 15:56:48.669 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 15:56:48.673 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 15:56:48.676  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Generating short key with length: 6
2024-08-27 15:56:48.676  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Generated short key: tFbNJ1
2024-08-27 15:56:48.677  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Generated short key: tFbNJ1
2024-08-27 15:56:48.683 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    insert 
    into
        short_urls
        (click_count, creation_date, expiry_date, full_url, short_key, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2024-08-27 15:56:48.687  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Short URL created with ID: 1
2024-08-27 15:56:48.688  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Short URL created successfully with key: tFbNJ1
2024-08-27 15:56:48.689 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 15:56:48.690 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@342f2128]
2024-08-27 15:56:48.691 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-08-27 15:57:26.266 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/short-urls/tFbNJ1", parameters={}
2024-08-27 15:57:26.267 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 15:57:26.268  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Fetching short URL with key: tFbNJ1
2024-08-27 15:57:26.268  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Fetching short URL with key: tFbNJ1
2024-08-27 15:57:26.272 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:26.291  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: tFbNJ1
2024-08-27 15:57:26.293 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:26.301 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 15:57:26.305  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: tFbNJ1
2024-08-27 15:57:26.306  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: tFbNJ1
2024-08-27 15:57:26.306  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@478807b5
2024-08-27 15:57:26.306 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 15:57:26.306 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@478807b5]
2024-08-27 15:57:26.308 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:57:29.564 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/short-urls/tFbNJ1", parameters={}
2024-08-27 15:57:29.565 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 15:57:29.566  INFO --- [nio-8080-exec-8] d.t.u.c.ShortUrlController               : Fetching short URL with key: tFbNJ1
2024-08-27 15:57:29.566  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Fetching short URL with key: tFbNJ1
2024-08-27 15:57:29.569 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:29.571  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: tFbNJ1
2024-08-27 15:57:29.575 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:29.578 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 15:57:29.581  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: tFbNJ1
2024-08-27 15:57:29.581  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: tFbNJ1
2024-08-27 15:57:29.581  INFO --- [nio-8080-exec-8] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@33a4708e
2024-08-27 15:57:29.582 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 15:57:29.582 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@33a4708e]
2024-08-27 15:57:29.583 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:57:31.133 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/short-urls/tFbNJ1", parameters={}
2024-08-27 15:57:31.133 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 15:57:31.134  INFO --- [io-8080-exec-10] d.t.u.c.ShortUrlController               : Fetching short URL with key: tFbNJ1
2024-08-27 15:57:31.134  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Fetching short URL with key: tFbNJ1
2024-08-27 15:57:31.136 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:31.138  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: tFbNJ1
2024-08-27 15:57:31.140 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:31.142 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 15:57:31.144  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: tFbNJ1
2024-08-27 15:57:31.144  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: tFbNJ1
2024-08-27 15:57:31.144  INFO --- [io-8080-exec-10] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@eb586d0
2024-08-27 15:57:31.145 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 15:57:31.146 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@eb586d0]
2024-08-27 15:57:31.147 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 15:57:55.359 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/r/tFbNJ1", parameters={}
2024-08-27 15:57:55.360 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.RedirectController#redirectToFullUrl(String)
2024-08-27 15:57:55.362 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 15:57:55.373 DEBUG --- [nio-8080-exec-1] o.s.w.s.v.RedirectView                   : View [RedirectView], model {}
2024-08-27 15:57:55.378 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 302 FOUND
2024-08-27 15:59:54.288 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 15:59:54.288 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 15:59:54.291 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@6d5ab11c]
2024-08-27 15:59:54.291  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-08-27 15:59:54.292  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@sraka
2024-08-27 15:59:54.293 DEBUG --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleEmailValidationException(EmailValidationException)
2024-08-27 15:59:54.294 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 15:59:54.294 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Invalid email format"]
2024-08-27 15:59:54.296 DEBUG --- [nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [de.telran.urlshortener.exception.EmailValidationException: Invalid email format]
2024-08-27 15:59:54.297 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 400 BAD_REQUEST
2024-08-27 16:00:08.154 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:00:08.155 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:00:08.157 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@5e846e27]
2024-08-27 16:00:08.157  INFO --- [nio-8080-exec-5] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-08-27 16:00:08.157  INFO --- [nio-8080-exec-5] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@sraka.be
2024-08-27 16:00:08.159 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:00:08.257 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 16:00:08.259 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:00:08.261 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 16:00:08.262 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 16:00:08.263  INFO --- [nio-8080-exec-5] d.t.u.s.UserService                      : User created successfully with ID: 4
2024-08-27 16:00:08.263  INFO --- [nio-8080-exec-5] d.t.u.c.UserController                   : User created successfully with ID: 4
2024-08-27 16:00:08.263 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:00:08.263 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@27be293a]
2024-08-27 16:00:08.264 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:00:22.212 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:00:22.212 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:00:22.214 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@34dbaa]
2024-08-27 16:00:22.214  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-08-27 16:00:22.214  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@sraka.be
2024-08-27 16:00:22.215 DEBUG --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handlePasswordValidationException(PasswordValidationException)
2024-08-27 16:00:22.216 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 16:00:22.216 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Password must be at least 8 characters long"]
2024-08-27 16:00:22.218 DEBUG --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [de.telran.urlshortener.exception.PasswordValidationException: Password must be at least 8 characters long]
2024-08-27 16:00:22.218 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 400 BAD_REQUEST
2024-08-27 16:00:37.162 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:00:37.162 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:00:37.164 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@539e8400]
2024-08-27 16:00:37.165  INFO --- [nio-8080-exec-7] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-08-27 16:00:37.165  INFO --- [nio-8080-exec-7] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@sraka.be
2024-08-27 16:00:37.167 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:00:37.171  WARN --- [nio-8080-exec-7] d.t.u.s.UserService                      : Attempted to create user with already existing email: wasya@sraka.be
2024-08-27 16:00:37.172 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Failed to complete request: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
2024-08-27 16:00:37.178 ERROR --- [nio-8080-exec-7] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use] with root cause
de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:40)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-08-27 16:00:37.198 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-08-27 16:00:37.198 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-08-27 16:00:37.206 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:00:37.207 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Tue Aug 27 16:00:37 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-08-27 16:00:37.212 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-08-27 16:01:09.050 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:01:09.050 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:01:09.052 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@c164fe9]
2024-08-27 16:01:09.052  INFO --- [nio-8080-exec-9] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-08-27 16:01:09.052  INFO --- [nio-8080-exec-9] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@kamrad.be
2024-08-27 16:01:09.054 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:01:09.151 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 16:01:09.154  WARN --- [nio-8080-exec-9] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 23505, SQLState: 23505
2024-08-27 16:01:09.154 ERROR --- [nio-8080-exec-9] o.h.e.j.s.SqlExceptionHelper             :      : "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]
2024-08-27 16:01:09.161 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.dao.DataIntegrityViolationException: could not execute statement [     : "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]] [insert into users (email,password,user_name,id) values (?,?,?,default)]; SQL [insert into users (email,password,user_name,id) values (?,?,?,default)]; constraint ["PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]]
2024-08-27 16:01:09.162 ERROR --- [nio-8080-exec-9] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [     : "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]] [insert into users (email,password,user_name,id) values (?,?,?,default)]; SQL [insert into users (email,password,user_name,id) values (?,?,?,default)]; constraint ["PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]]] with root cause
org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException:      : "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:520)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.index.Index.getDuplicateKeyException(Index.java:527)
	at org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)
	at org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)
	at org.h2.command.dml.Insert.insertRows(Insert.java:174)
	at org.h2.command.dml.Insert.update(Insert.java:135)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:242)
	at org.h2.command.CommandContainer.update(CommandContainer.java:163)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:216)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:174)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performInsert(GetGeneratedKeysDelegate.java:107)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorPostInsertSingleTable.execute(MutationExecutorPostInsertSingleTable.java:100)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2860)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:667)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:290)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:271)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:321)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:386)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:300)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:219)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:134)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:766)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:750)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)
	at jdk.proxy2/jdk.proxy2.$Proxy134.persist(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy134.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:618)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)
	at jdk.proxy2/jdk.proxy2.$Proxy144.save(Unknown Source)
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:49)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-08-27 16:01:09.167 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-08-27 16:01:09.168 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-08-27 16:01:09.169 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:01:09.169 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Tue Aug 27 16:01:09 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-08-27 16:01:09.170 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-08-27 16:01:44.865 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:01:44.866 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:01:44.867 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@3e1b14fc]
2024-08-27 16:01:44.868  INFO --- [nio-8080-exec-8] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-08-27 16:01:44.868  INFO --- [nio-8080-exec-8] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@kamrad.be
2024-08-27 16:01:44.870 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:01:45.004 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 16:01:45.005  WARN --- [nio-8080-exec-8] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 23505, SQLState: 23505
2024-08-27 16:01:45.005 ERROR --- [nio-8080-exec-8] o.h.e.j.s.SqlExceptionHelper             :      : "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]
2024-08-27 16:01:45.006 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.dao.DataIntegrityViolationException: could not execute statement [     : "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]] [insert into users (email,password,user_name,id) values (?,?,?,default)]; SQL [insert into users (email,password,user_name,id) values (?,?,?,default)]; constraint ["PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]]
2024-08-27 16:01:45.007 ERROR --- [nio-8080-exec-8] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [     : "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]] [insert into users (email,password,user_name,id) values (?,?,?,default)]; SQL [insert into users (email,password,user_name,id) values (?,?,?,default)]; constraint ["PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]]] with root cause
org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException:      : "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"
Unique index or primary key violation: "PUBLIC.UK_K8D0F2N7N88W1A16YHUA64ONX_INDEX_4 ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 4 */ 'wasya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:520)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.index.Index.getDuplicateKeyException(Index.java:527)
	at org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)
	at org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)
	at org.h2.command.dml.Insert.insertRows(Insert.java:174)
	at org.h2.command.dml.Insert.update(Insert.java:135)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:242)
	at org.h2.command.CommandContainer.update(CommandContainer.java:163)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:216)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:174)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performInsert(GetGeneratedKeysDelegate.java:107)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorPostInsertSingleTable.execute(MutationExecutorPostInsertSingleTable.java:100)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2860)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:667)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:290)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:271)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:321)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:386)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:300)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:219)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:134)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:766)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:750)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)
	at jdk.proxy2/jdk.proxy2.$Proxy134.persist(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy134.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:618)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)
	at jdk.proxy2/jdk.proxy2.$Proxy144.save(Unknown Source)
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:49)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-08-27 16:01:45.010 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-08-27 16:01:45.010 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-08-27 16:01:45.011 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:01:45.011 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Tue Aug 27 16:01:45 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-08-27 16:01:45.012 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-08-27 16:01:54.940 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:01:54.941 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:01:54.942 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@507fb5d7]
2024-08-27 16:01:54.942  INFO --- [io-8080-exec-10] d.t.u.c.UserController                   : Received request to create user with username: wasyar
2024-08-27 16:01:54.942  INFO --- [io-8080-exec-10] d.t.u.s.UserService                      : Attempting to create user with username: wasyar and email: wasya@kamrad.be
2024-08-27 16:01:54.944 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:01:55.091 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 16:01:55.095 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:01:55.097 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 16:01:55.099 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 16:01:55.100  INFO --- [io-8080-exec-10] d.t.u.s.UserService                      : User created successfully with ID: 7
2024-08-27 16:01:55.100  INFO --- [io-8080-exec-10] d.t.u.c.UserController                   : User created successfully with ID: 7
2024-08-27 16:01:55.101 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:01:55.101 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@7cdad98b]
2024-08-27 16:01:55.102 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:03:18.382 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:03:18.382 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:03:18.385 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@73e08016]
2024-08-27 16:03:18.385  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : Received request to create user with username: wasyart
2024-08-27 16:03:18.385  INFO --- [nio-8080-exec-2] d.t.u.s.UserService                      : Attempting to create user with username: wasyart and email: wasya@kamrad.be
2024-08-27 16:03:18.388 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:03:18.390  WARN --- [nio-8080-exec-2] d.t.u.s.UserService                      : Attempted to create user with already existing email: wasya@kamrad.be
2024-08-27 16:03:18.391 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Failed to complete request: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
2024-08-27 16:03:18.392 ERROR --- [nio-8080-exec-2] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use] with root cause
de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:40)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-08-27 16:03:18.396 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-08-27 16:03:18.397 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-08-27 16:03:18.399 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:03:18.399 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Tue Aug 27 16:03:18 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-08-27 16:03:18.401 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-08-27 16:03:35.392 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:03:35.392 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:03:35.393 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@1c43cb02]
2024-08-27 16:03:35.393  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : Received request to create user with username: wasyart
2024-08-27 16:03:35.393  INFO --- [nio-8080-exec-3] d.t.u.s.UserService                      : Attempting to create user with username: wasyart and email: wasya@kamrad.bet
2024-08-27 16:03:35.395 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:03:35.486 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 16:03:35.488 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:03:35.489 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 16:03:35.491 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 16:03:35.491  INFO --- [nio-8080-exec-3] d.t.u.s.UserService                      : User created successfully with ID: 8
2024-08-27 16:03:35.492  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : User created successfully with ID: 8
2024-08-27 16:03:35.492 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:03:35.492 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@37e37a4e]
2024-08-27 16:03:35.493 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:03:52.113 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-08-27 16:03:52.113 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-08-27 16:03:52.115 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@4dd25ded]
2024-08-27 16:03:52.115  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : Received request to create user with username: wasyartw
2024-08-27 16:03:52.115  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : Attempting to create user with username: wasyartw and email: wasya@kamrad.betr
2024-08-27 16:03:52.118 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-27 16:03:52.264 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-27 16:03:52.267 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:03:52.268 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 16:03:52.270 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 16:03:52.271  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : User created successfully with ID: 9
2024-08-27 16:03:52.271  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : User created successfully with ID: 9
2024-08-27 16:03:52.271 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:03:52.272 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@4fc2affc]
2024-08-27 16:03:52.273 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:04:57.458 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-08-27 16:04:57.459 DEBUG --- [io-8080-exec-10] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-08-27 16:04:57.461 DEBUG --- [io-8080-exec-10] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-08-27 16:04:57.463 DEBUG --- [io-8080-exec-10] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-08-27 16:04:57.464 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-08-27 16:04:57.467 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for GET "/error", parameters={}
2024-08-27 16:04:57.467 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-08-27 16:04:57.469 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json]
2024-08-27 16:04:57.471 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Tue Aug 27 16:04:57 CEST 2024, status=404, error=Not Found, path=/favicon.ico}]
2024-08-27 16:04:57.473 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 404
2024-08-27 16:08:03.469 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : PUT "/users/9", parameters={}
2024-08-27 16:08:03.469 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-08-27 16:08:03.471 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@61e4c6b]
2024-08-27 16:08:03.473  INFO --- [nio-8080-exec-8] d.t.u.c.UserController                   : Received request to update user with ID: 9
2024-08-27 16:08:03.473  INFO --- [nio-8080-exec-8] d.t.u.s.UserService                      : Attempting to update user with ID: 9
2024-08-27 16:08:03.488 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 16:08:03.501 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 16:08:03.644 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    update
        users 
    set
        email=?,
        password=?,
        user_name=? 
    where
        id=?
2024-08-27 16:08:03.646  INFO --- [nio-8080-exec-8] d.t.u.s.UserService                      : User with ID: 9 updated successfully
2024-08-27 16:08:03.646  INFO --- [nio-8080-exec-8] d.t.u.c.UserController                   : User updated successfully with ID: 9
2024-08-27 16:08:03.646 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:08:03.646 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@32491098]
2024-08-27 16:08:03.647 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:09:15.218 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : DELETE "/users/7", parameters={}
2024-08-27 16:09:15.218 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-08-27 16:09:15.219  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : Received request to delete user with ID: 7
2024-08-27 16:09:15.219  INFO --- [nio-8080-exec-2] d.t.u.s.UserService                      : Attempting to delete user with ID: 7
2024-08-27 16:09:15.220 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 16:09:15.223 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 16:09:15.251 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        su1_0.user_id,
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key 
    from
        short_urls su1_0 
    where
        su1_0.user_id=?
2024-08-27 16:09:15.259 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=?
2024-08-27 16:09:15.266 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    delete 
    from
        subscriptions 
    where
        id=?
2024-08-27 16:09:15.269 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    delete 
    from
        users 
    where
        id=?
2024-08-27 16:09:15.270  INFO --- [nio-8080-exec-2] d.t.u.s.UserService                      : User with ID: 7 deleted successfully
2024-08-27 16:09:15.271  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : User deleted successfully with ID: 7
2024-08-27 16:09:15.271 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:09:15.271 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Nothing to write: null body
2024-08-27 16:09:15.272 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:10:08.182 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : PATCH "/users/3/role?newRole=PAID", parameters={masked}
2024-08-27 16:10:08.183 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-08-27 16:10:08.185  INFO --- [nio-8080-exec-9] d.t.u.c.UserController                   : Received request to change role for user with ID: 3 to PAID
2024-08-27 16:10:08.185  INFO --- [nio-8080-exec-9] d.t.u.s.UserService                      : Attempting to change role for user with ID: 3 to PAID
2024-08-27 16:10:08.186 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 16:10:08.191 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 16:10:08.198 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:10:08.211 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-08-27 16:10:08.216 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    update
        subscriptions 
    set
        end_date=?,
        start_date=?,
        subscription_type=?,
        user_id=? 
    where
        id=?
2024-08-27 16:10:08.217 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-08-27 16:10:08.218 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 16:10:08.221  INFO --- [nio-8080-exec-9] d.t.u.s.UserService                      : User role updated successfully with ID: 3
2024-08-27 16:10:08.221  INFO --- [nio-8080-exec-9] d.t.u.c.UserController                   : User role updated successfully with ID: 3
2024-08-27 16:10:08.222 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:10:08.222 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@6110822b]
2024-08-27 16:10:08.223 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:10:20.045 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : PATCH "/users/2/role?newRole=PAID", parameters={masked}
2024-08-27 16:10:20.045 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-08-27 16:10:20.046  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : Received request to change role for user with ID: 2 to PAID
2024-08-27 16:10:20.046  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : Attempting to change role for user with ID: 2 to PAID
2024-08-27 16:10:20.048 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 16:10:20.053 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 16:10:20.057 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:10:20.065 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-08-27 16:10:20.068 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-08-27 16:10:20.073 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-08-27 16:10:20.075 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-27 16:10:20.081  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : User role updated successfully with ID: 2
2024-08-27 16:10:20.082  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : User role updated successfully with ID: 2
2024-08-27 16:10:20.082 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:10:20.082 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@3a212782]
2024-08-27 16:10:20.085 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:15:29.886 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 16:15:29.886 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 16:15:29.887 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@492cd2c9]
2024-08-27 16:15:29.888  INFO --- [io-8080-exec-10] d.t.u.c.ShortUrlController               : Creating short URL for: http://localhost:8080/h2-console/login.do?jsessionid=381a7f29681802044dddb795eaa1ed1a
2024-08-27 16:15:29.888  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Creating short URL for user email: wasya@kamrad.betr
2024-08-27 16:15:29.890 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 16:15:29.892 ERROR --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : User not found with email: wasya@kamrad.betr
2024-08-27 16:15:29.893 DEBUG --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleShortUrlNotFoundException(ShortUrlNotFoundException)
2024-08-27 16:15:29.894 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 16:15:29.894 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["User not found with email: wasya@kamrad.betr"]
2024-08-27 16:15:29.895 DEBUG --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [de.telran.urlshortener.exception.ShortUrlNotFoundException: User not found with email: wasya@kamrad.betr]
2024-08-27 16:15:29.896 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-08-27 16:16:44.991 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 16:16:44.991 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 16:16:44.992 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@fd87f79]
2024-08-27 16:16:44.993  INFO --- [nio-8080-exec-1] d.t.u.c.ShortUrlController               : Creating short URL for: http://localhost:8080/swagger-ui/index.html#/short-url-controller
2024-08-27 16:16:44.993  INFO --- [nio-8080-exec-1] d.t.u.s.ShortUrlService                  : Creating short URL for user email: wasya@kamrad.betr
2024-08-27 16:16:44.995 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 16:16:44.996 ERROR --- [nio-8080-exec-1] d.t.u.s.ShortUrlService                  : User not found with email: wasya@kamrad.betr
2024-08-27 16:16:44.996 DEBUG --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleShortUrlNotFoundException(ShortUrlNotFoundException)
2024-08-27 16:16:44.997 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2024-08-27 16:16:44.997 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["User not found with email: wasya@kamrad.betr"]
2024-08-27 16:16:44.998 DEBUG --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [de.telran.urlshortener.exception.ShortUrlNotFoundException: User not found with email: wasya@kamrad.betr]
2024-08-27 16:16:44.998 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-08-27 16:17:43.207 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-08-27 16:17:43.207 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-08-27 16:17:43.208 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@648cedbd]
2024-08-27 16:17:43.208  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Creating short URL for: http://localhost:8080/swagger-ui/index.html#/short-url-controller
2024-08-27 16:17:43.208  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Creating short URL for user email: string@gmail.cjm
2024-08-27 16:17:43.210 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-08-27 16:17:43.213 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 16:17:43.214  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Generating short key with length: 6
2024-08-27 16:17:43.215  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Generated short key: GSXeIc
2024-08-27 16:17:43.215  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Generated short key: GSXeIc
2024-08-27 16:17:43.216 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    insert 
    into
        short_urls
        (click_count, creation_date, expiry_date, full_url, short_key, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2024-08-27 16:17:43.219  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Short URL created with ID: 2
2024-08-27 16:17:43.219  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Short URL created successfully with key: GSXeIc
2024-08-27 16:17:43.220 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:17:43.220 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@54edb458]
2024-08-27 16:17:43.221 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-08-27 16:18:45.258 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/short-urls/GSXeIc", parameters={}
2024-08-27 16:18:45.258 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 16:18:45.258  INFO --- [nio-8080-exec-2] d.t.u.c.ShortUrlController               : Fetching short URL with key: GSXeIc
2024-08-27 16:18:45.259  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Fetching short URL with key: GSXeIc
2024-08-27 16:18:45.261 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 16:18:45.262  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: GSXeIc
2024-08-27 16:18:45.264 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 16:18:45.267 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 16:18:45.268  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: GSXeIc
2024-08-27 16:18:45.268  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: GSXeIc
2024-08-27 16:18:45.268  INFO --- [nio-8080-exec-2] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@1f28dac9
2024-08-27 16:18:45.269 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:18:45.269 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@1f28dac9]
2024-08-27 16:18:45.271 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:18:46.404 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/short-urls/GSXeIc", parameters={}
2024-08-27 16:18:46.404 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 16:18:46.405  INFO --- [nio-8080-exec-3] d.t.u.c.ShortUrlController               : Fetching short URL with key: GSXeIc
2024-08-27 16:18:46.405  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Fetching short URL with key: GSXeIc
2024-08-27 16:18:46.407 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 16:18:46.409  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: GSXeIc
2024-08-27 16:18:46.413 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 16:18:46.415 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 16:18:46.417  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: GSXeIc
2024-08-27 16:18:46.417  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: GSXeIc
2024-08-27 16:18:46.417  INFO --- [nio-8080-exec-3] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@cbaec49
2024-08-27 16:18:46.418 DEBUG --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:18:46.418 DEBUG --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@cbaec49]
2024-08-27 16:18:46.419 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:18:47.261 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/short-urls/GSXeIc", parameters={}
2024-08-27 16:18:47.262 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-08-27 16:18:47.262  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Fetching short URL with key: GSXeIc
2024-08-27 16:18:47.262  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Fetching short URL with key: GSXeIc
2024-08-27 16:18:47.265 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 16:18:47.267  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: GSXeIc
2024-08-27 16:18:47.269 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-08-27 16:18:47.272 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        creation_date=?,
        expiry_date=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-08-27 16:18:47.273  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: GSXeIc
2024-08-27 16:18:47.274  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: GSXeIc
2024-08-27 16:18:47.274  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@75f0c60c
2024-08-27 16:18:47.274 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:18:47.275 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@75f0c60c]
2024-08-27 16:18:47.276 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:19:50.461 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/roles/ADMIN", parameters={}
2024-08-27 16:19:50.462 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.RoleController#getRoleByName(String)
2024-08-27 16:19:50.465 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-27 16:19:50.469 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:19:50.470 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.RoleDto.RoleResponse@5b3318b1]
2024-08-27 16:19:50.471 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-27 16:20:56.027 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : DELETE "/short-urls/1", parameters={}
2024-08-27 16:20:56.028 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#deleteShortUrl(Long)
2024-08-27 16:20:56.028  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Deleting short URL with ID: 1
2024-08-27 16:20:56.029  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Attempting to delete short URL with ID: 1
2024-08-27 16:20:56.031 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.creation_date,
        su1_0.expiry_date,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.id=?
2024-08-27 16:20:56.036 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    delete 
    from
        short_urls 
    where
        id=?
2024-08-27 16:20:56.037  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Short URL with ID: 1 deleted successfully
2024-08-27 16:20:56.037  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Short URL with ID: 1 deleted successfully
2024-08-27 16:20:56.039 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:20:56.039 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2024-08-27 16:20:56.039 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 204 NO_CONTENT
2024-08-27 16:22:29.165 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/users/1", parameters={}
2024-08-27 16:22:29.165 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-08-27 16:22:29.166  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : Received request to get user with ID: 1
2024-08-27 16:22:29.166  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : Fetching user with ID: 1
2024-08-27 16:22:29.168 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-08-27 16:22:29.174 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-08-27 16:22:29.179  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : User with ID: 1 fetched successfully
2024-08-27 16:22:29.179  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : User fetched successfully with ID: 1
2024-08-27 16:22:29.180 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-08-27 16:22:29.180 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@58d47c69]
2024-08-27 16:22:29.182 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 15:23:53.424  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 15:23:53.470  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 250860 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 15:23:53.475  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-28 15:23:54.669  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 15:23:54.753  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2024-08-28 15:23:55.486  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-28 15:23:55.499  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-28 15:23:55.501  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-28 15:23:55.502  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-28 15:23:55.563  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-28 15:23:55.564  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2039 ms
2024-08-28 15:23:55.624  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 15:23:55.912  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-08-28 15:23:55.914  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 15:23:55.929  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-08-28 15:23:56.092  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 15:23:56.172  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 15:23:56.217  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 15:23:56.494  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 15:23:56.546  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 15:23:57.775  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 15:23:57.841 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 15:23:57.856 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 15:23:57.858 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 15:23:57.861 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 15:23:57.864 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 15:23:57.867 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 15:23:57.868 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 15:23:57.869 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 15:23:57.870 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 15:23:57.871 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 15:23:57.872 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 15:23:57.873 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 15:23:57.874 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 15:23:57.875 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 15:23:57.876 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 15:23:57.877 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 15:23:57.887 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 15:23:57.889 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 15:23:57.892 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 15:23:57.896  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 15:23:58.679  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-28 15:23:58.931 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-28 15:23:59.034 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-28 15:23:59.071  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@517fb2c3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6c289070, org.springframework.security.web.context.SecurityContextHolderFilter@5687ba39, org.springframework.security.web.header.HeaderWriterFilter@3ad5f99, org.springframework.web.filter.CorsFilter@69e58566, org.springframework.security.web.authentication.logout.LogoutFilter@130bd00e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6abbdcde, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@41ad6c00, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e41e0c, org.springframework.security.web.access.ExceptionTranslationFilter@6b9b9cb9, org.springframework.security.web.access.intercept.AuthorizationFilter@738ed8d3]
2024-08-28 15:23:59.198 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-28 15:23:59.247 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-28 15:23:59.506  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-28 15:23:59.523  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-28 15:23:59.535  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.538 seconds (process running for 8.01)
2024-08-28 15:23:59.726 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:23:59.807 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 15:23:59.831 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:23:59.840 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:23:59.842 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 15:23:59.847 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:23:59.848 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 15:23:59.851 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:23:59.854 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:23:59.861 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 15:24:00.031 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 15:24:00.045 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 15:24:00.051 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 15:24:00.190 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 15:24:00.192 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 15:38:20.721  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 15:38:20.725  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-28 15:38:20.731  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-28 15:38:24.174  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 15:38:24.219  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 258467 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 15:38:24.224  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-28 15:38:25.354  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 15:38:25.437  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73 ms. Found 4 JPA repository interfaces.
2024-08-28 15:38:26.162  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-28 15:38:26.176  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-28 15:38:26.179  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-28 15:38:26.179  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-28 15:38:26.250  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-28 15:38:26.251  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1972 ms
2024-08-28 15:38:26.311  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 15:38:26.577  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-28 15:38:26.579  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 15:38:26.596  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-28 15:38:26.762  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 15:38:26.841  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 15:38:26.885  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 15:38:27.158  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 15:38:27.214  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 15:38:28.452  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 15:38:28.523 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 15:38:28.537 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 15:38:28.540 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 15:38:28.542 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 15:38:28.545 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 15:38:28.547 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 15:38:28.548 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 15:38:28.550 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 15:38:28.551 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 15:38:28.553 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 15:38:28.553 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 15:38:28.555 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 15:38:28.556 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 15:38:28.557 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 15:38:28.558 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 15:38:28.559 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 15:38:28.566 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 15:38:28.568 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 15:38:28.571 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 15:38:28.575  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 15:38:29.358  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-28 15:38:29.386  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 25a1fbe6-3d41-4096-9b36-83e981f03476

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-28 15:38:29.626 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-28 15:38:29.738 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-28 15:38:29.774  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@54dc163a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5bbeb9e3, org.springframework.security.web.context.SecurityContextHolderFilter@52238861, org.springframework.security.web.header.HeaderWriterFilter@5a35efac, org.springframework.web.filter.CorsFilter@456beb8b, org.springframework.security.web.authentication.logout.LogoutFilter@6e200307, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4582da06, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@523e019c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@191cf38f, org.springframework.security.web.access.ExceptionTranslationFilter@2a10407e, org.springframework.security.web.access.intercept.AuthorizationFilter@611ffa8d]
2024-08-28 15:38:29.902 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-28 15:38:29.949 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-28 15:38:30.207  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-28 15:38:30.224  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-28 15:38:30.236  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.495 seconds (process running for 7.955)
2024-08-28 15:38:30.409 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:38:30.484 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 15:38:30.507 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:38:30.515 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:38:30.517 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 15:38:30.521 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:38:30.522 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 15:38:30.526 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:38:30.529 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 15:38:30.535 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 15:38:30.690 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 15:38:30.706 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 15:38:30.711 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 15:38:30.849 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 15:38:30.851 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 15:38:58.694  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-28 16:01:28.524  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 16:01:28.573  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 270247 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 16:01:28.579  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-28 16:01:29.711  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 16:01:29.790  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 69 ms. Found 4 JPA repository interfaces.
2024-08-28 16:01:30.686  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-28 16:01:30.698  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-28 16:01:30.701  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-28 16:01:30.702  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-28 16:01:30.761  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-28 16:01:30.761  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2129 ms
2024-08-28 16:01:30.822  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 16:01:31.111  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-28 16:01:31.113  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 16:01:31.129  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-28 16:01:31.286  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 16:01:31.369  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 16:01:31.417  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 16:01:31.691  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 16:01:31.742  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 16:01:32.956  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 16:01:33.025 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 16:01:33.040 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:01:33.043 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:01:33.046 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 16:01:33.050 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 16:01:33.054 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 16:01:33.055 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 16:01:33.057 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 16:01:33.058 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 16:01:33.059 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 16:01:33.060 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 16:01:33.062 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 16:01:33.062 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 16:01:33.063 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 16:01:33.064 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 16:01:33.065 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 16:01:33.073 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 16:01:33.075 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 16:01:33.077 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 16:01:33.081  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:01:33.667  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/UserController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/UserService.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-08-28 16:01:33.668  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:01:33.670  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-28 16:01:33.674  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-28 16:01:33.676  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-08-28 16:01:33.692  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-28 16:01:33.719 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in de.telran.urlshortener.service.UserService required a bean of type 'org.springframework.security.crypto.password.PasswordEncoder' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.crypto.password.PasswordEncoder' in your configuration.

2024-08-28 16:02:11.886  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-28 16:02:12.082  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-28 16:02:12.594  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 16:02:12.643  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 270690 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 16:02:12.650  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-28 16:02:12.708 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-28 16:02:13.986  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 16:02:14.080  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 81 ms. Found 4 JPA repository interfaces.
2024-08-28 16:02:14.989  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 16:02:15.098  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 16:02:15.151  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 16:02:15.501  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 16:02:15.540  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 16:02:15.874  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-28 16:02:15.876  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 16:02:15.909  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 16:02:17.234  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 16:02:17.306 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 16:02:17.323 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:02:17.328 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:02:17.337 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 16:02:17.342 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 16:02:17.345 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 16:02:17.347 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 16:02:17.349 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 16:02:17.350 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 16:02:17.352 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 16:02:17.353 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 16:02:17.355 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 16:02:17.356 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 16:02:17.358 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 16:02:17.359 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 16:02:17.361 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 16:02:17.373 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 16:02:17.376 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 16:02:17.379 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 16:02:17.385  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:02:18.049  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/UserController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/UserService.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-08-28 16:02:18.050  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:02:18.053  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-28 16:02:18.057  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-28 16:02:18.073  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-28 16:02:18.107 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in de.telran.urlshortener.service.UserService required a bean of type 'org.springframework.security.crypto.password.PasswordEncoder' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.crypto.password.PasswordEncoder' in your configuration.

2024-08-28 16:02:18.116 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@9120cb5]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@69cc3370 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4e517165, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@42f3156d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@10650953, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@63648ee9, org.springframework.boot.test.context.SpringBootTestAnnotation@7e93227b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userController' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/controller/UserController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/UserService.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:241)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1193)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userService' defined in file [/home/volodymyr/url-shortener/target/classes/de/telran/urlshortener/service/UserService.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:241)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1193)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1441)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 97 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1878)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1404)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 111 more
2024-08-28 16:04:22.369  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 16:04:22.416  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 272066 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 16:04:22.421  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-28 16:04:23.573  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 16:04:23.660  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 77 ms. Found 4 JPA repository interfaces.
2024-08-28 16:04:24.390  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-28 16:04:24.411  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-28 16:04:24.414  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-28 16:04:24.414  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-28 16:04:24.472  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-28 16:04:24.473  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1999 ms
2024-08-28 16:04:24.530  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 16:04:24.798  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-28 16:04:24.800  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 16:04:24.815  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-28 16:04:24.978  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 16:04:25.064  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 16:04:25.109  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 16:04:25.398  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 16:04:25.455  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 16:04:26.709  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 16:04:26.771 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 16:04:26.786 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:04:26.789 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:04:26.791 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 16:04:26.794 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 16:04:26.797 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 16:04:26.799 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 16:04:26.801 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 16:04:26.801 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 16:04:26.802 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 16:04:26.803 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 16:04:26.804 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 16:04:26.805 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 16:04:26.806 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 16:04:26.806 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 16:04:26.807 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 16:04:26.814 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 16:04:26.816 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 16:04:26.818 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 16:04:26.822  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:04:27.606  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-28 16:04:27.631  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: f3bc915d-0c49-4f40-959c-296cbc6c8dcc

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-28 16:04:27.868 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-28 16:04:27.976 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-28 16:04:28.024  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@34d6e9a4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@515a2afd, org.springframework.security.web.context.SecurityContextHolderFilter@318beab4, org.springframework.security.web.header.HeaderWriterFilter@6a9c848, org.springframework.web.filter.CorsFilter@4822fc53, org.springframework.security.web.authentication.logout.LogoutFilter@6012bee8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@578483bd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@38447073, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6e200307, org.springframework.security.web.access.ExceptionTranslationFilter@59f36439, org.springframework.security.web.access.intercept.AuthorizationFilter@5e08ed28]
2024-08-28 16:04:28.148 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-28 16:04:28.197 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-28 16:04:28.458  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-28 16:04:28.477  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-28 16:04:28.490  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.566 seconds (process running for 8.148)
2024-08-28 16:04:28.672 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:28.750 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 16:04:28.774 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:28.783 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:28.785 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 16:04:28.789 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:28.791 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 16:04:28.794 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:28.797 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:28.804 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 16:04:28.965 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 16:04:28.980 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 16:04:28.986 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 16:04:29.123 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 16:04:29.125 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 16:04:51.616  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-28 16:04:51.775  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-28 16:04:52.316  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 16:04:52.385  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 272429 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 16:04:52.392  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-28 16:04:52.450 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6be25526
2024-08-28 16:04:53.912  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 16:04:54.048  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 124 ms. Found 4 JPA repository interfaces.
2024-08-28 16:04:54.799  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 16:04:54.881  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 16:04:54.932  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 16:04:55.264  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 16:04:55.305  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 16:04:55.617  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-28 16:04:55.620  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 16:04:55.660  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 16:04:57.027  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 16:04:57.088 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 16:04:57.103 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:04:57.106 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 16:04:57.108 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 16:04:57.112 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 16:04:57.114 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 16:04:57.116 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 16:04:57.118 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 16:04:57.118 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 16:04:57.120 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 16:04:57.120 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 16:04:57.122 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 16:04:57.123 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 16:04:57.124 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 16:04:57.124 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 16:04:57.126 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 16:04:57.133 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 16:04:57.136 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 16:04:57.138 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 16:04:57.143  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:04:57.987  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-28 16:04:58.017  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 7e6988f5-e0df-4ea5-8f9d-df5267b4a141

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-28 16:04:58.313 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-28 16:04:58.482 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-28 16:04:58.528  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6101fd7d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b22bebc, org.springframework.security.web.context.SecurityContextHolderFilter@35ffe3ac, org.springframework.security.web.header.HeaderWriterFilter@feb57b4, org.springframework.web.filter.CorsFilter@60773809, org.springframework.security.web.authentication.logout.LogoutFilter@55f29d39, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2e674698, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@270a3cef, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24c7b944, org.springframework.security.web.access.ExceptionTranslationFilter@4e7e7763, org.springframework.security.web.access.intercept.AuthorizationFilter@64f1e9f8]
2024-08-28 16:04:58.770 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-28 16:04:58.827 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-28 16:04:59.012  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-28 16:04:59.102  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.119 seconds (process running for 9.413)
2024-08-28 16:04:59.301 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:59.373 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 16:04:59.399 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:59.410 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:59.412 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 16:04:59.417 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:59.419 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 16:04:59.423 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:59.427 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 16:04:59.436 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 16:04:59.600 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 16:04:59.617 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 16:04:59.623 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 16:04:59.766 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 16:04:59.768 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 16:05:00.588 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6be25526, started on Wed Aug 28 16:04:52 CEST 2024
2024-08-28 16:05:00.596  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 16:05:00.599  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-28 16:05:00.604  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-28 19:54:13.191  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-28 19:54:13.238  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 28625 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-28 19:54:13.243  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-28 19:54:14.441  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-28 19:54:14.522  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 71 ms. Found 4 JPA repository interfaces.
2024-08-28 19:54:15.307  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-28 19:54:15.321  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-28 19:54:15.324  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-28 19:54:15.324  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-28 19:54:15.386  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-28 19:54:15.386  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2091 ms
2024-08-28 19:54:15.447  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-28 19:54:15.739  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-28 19:54:15.742  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-28 19:54:15.757  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-28 19:54:15.921  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-28 19:54:16.021  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-28 19:54:16.067  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-28 19:54:16.342  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-28 19:54:16.397  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-28 19:54:17.648  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-28 19:54:17.721 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-28 19:54:17.737 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-28 19:54:17.740 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-28 19:54:17.743 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-28 19:54:17.747 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-28 19:54:17.750 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-28 19:54:17.751 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-28 19:54:17.754 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-28 19:54:17.754 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-28 19:54:17.755 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-28 19:54:17.756 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-28 19:54:17.758 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-28 19:54:17.759 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-28 19:54:17.760 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-28 19:54:17.761 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-28 19:54:17.762 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-28 19:54:17.772 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-28 19:54:17.775 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-28 19:54:17.778 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-28 19:54:17.783  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-28 19:54:18.560  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-28 19:54:18.586  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 5bb75b6a-f656-4354-b4a6-7b367c255a8a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-28 19:54:18.833 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-28 19:54:18.945 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-28 19:54:18.982  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@517fb2c3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6c289070, org.springframework.security.web.context.SecurityContextHolderFilter@5687ba39, org.springframework.security.web.header.HeaderWriterFilter@3ad5f99, org.springframework.web.filter.CorsFilter@69e58566, org.springframework.security.web.authentication.logout.LogoutFilter@130bd00e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6abbdcde, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@41ad6c00, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e41e0c, org.springframework.security.web.access.ExceptionTranslationFilter@6b9b9cb9, org.springframework.security.web.access.intercept.AuthorizationFilter@738ed8d3]
2024-08-28 19:54:19.125 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-28 19:54:19.181 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-28 19:54:19.444  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-28 19:54:19.461  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-28 19:54:19.474  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.728 seconds (process running for 8.272)
2024-08-28 19:54:19.654 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 19:54:19.739 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 19:54:19.762 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 19:54:19.771 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 19:54:19.772 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 19:54:19.776 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 19:54:19.778 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-28 19:54:19.781 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 19:54:19.784 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-28 19:54:19.792 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 19:54:19.963 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 19:54:19.985 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 19:54:19.991 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-28 19:54:20.126 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-28 19:54:20.128 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-28 19:55:11.969  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-28 19:55:11.969  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-28 19:55:11.970 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-28 19:55:11.970 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-28 19:55:11.970 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-28 19:55:11.972 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@c7008b4
2024-08-28 19:55:11.973 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@12922d53
2024-08-28 19:55:11.973 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-28 19:55:11.974  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-08-28 19:55:11.988  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-28 19:55:12.001  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-28 19:55:12.008 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-08-28 19:55:12.011 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.047 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:12.072 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-08-28 19:55:12.074 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.082 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:12.089 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-08-28 19:55:12.090 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-08-28 19:55:12.090 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-08-28 19:55:12.090 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-08-28 19:55:12.091 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.091 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.091 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.091 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.094 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:12.100 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:12.120 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:12.134 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:12.994 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-08-28 19:55:12.995 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-08-28 19:55:12.998 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:13.033 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-08-28 19:55:13.034 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-08-28 19:55:13.060 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-08-28 19:55:13.063 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-08-28 19:55:13.074 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-08-28 19:55:13.095 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-08-28 19:55:13.096 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-08-28 19:55:13.987  INFO --- [nio-8080-exec-9] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 867 ms
2024-08-28 19:55:14.014 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-08-28 19:55:14.018 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-08-28 19:55:14.019 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
>>>>>>> swaggerDocumentation
2024-08-30 13:45:22.297  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 13:45:22.354  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 207266 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 13:45:22.360  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-30 13:45:23.626  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 13:45:23.734  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 98 ms. Found 4 JPA repository interfaces.
2024-08-30 13:45:24.635  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-30 13:45:24.655  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-30 13:45:24.658  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-30 13:45:24.658  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-08-30 13:45:24.731  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-30 13:45:24.731  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2312 ms
2024-08-30 13:45:24.817  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 13:45:25.114  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-30 13:45:25.116  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 13:45:25.133  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-30 13:45:25.422  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 13:45:25.787  INFO --- [           main] l.command                                : Logging exception.
2024-08-30 13:45:25.788  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-08-30 13:45:25.788  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-08-30 13:45:25.788  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 13:45:25.789  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-08-30 13:45:25.789  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 13:45:25.792  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 13:45:25.793  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 13:45:25.797  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 13:45:25.800  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-08-30 13:45:25.816  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 13:45:25.836 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-08-30 13:50:09.127  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 13:50:09.197  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.1 with PID 209932 (/home/volodymyr/forComunityIdea/target/classes started by volodymyr in /home/volodymyr/forComunityIdea)
2024-08-30 13:50:09.204  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-30 13:50:10.799  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 13:50:10.909  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 96 ms. Found 4 JPA repository interfaces.
2024-08-30 13:50:11.889  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-30 13:50:11.904  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-30 13:50:11.907  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-30 13:50:11.907  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-30 13:50:11.982  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-30 13:50:11.984  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2706 ms
2024-08-30 13:50:12.050  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 13:50:12.396  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-30 13:50:12.399  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 13:50:12.422  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-30 13:50:12.655  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-30 13:50:12.773  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-30 13:50:12.857  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-30 13:50:13.253  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-30 13:50:13.326  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-30 13:50:14.834  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-30 13:50:14.917 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-30 13:50:14.934 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-30 13:50:14.937 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-30 13:50:14.940 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-30 13:50:14.943 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-30 13:50:14.947 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-30 13:50:14.948 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-30 13:50:14.950 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-30 13:50:14.951 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-30 13:50:14.952 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-30 13:50:14.953 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-30 13:50:14.954 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-30 13:50:14.955 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-30 13:50:14.956 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-30 13:50:14.957 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-30 13:50:14.959 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-30 13:50:14.967 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-30 13:50:14.969 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-30 13:50:14.972 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-30 13:50:14.976  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 13:50:15.896  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-30 13:50:15.929  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: d8774f97-0e1a-49ba-b4ff-ceb08d5b50c3

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-30 13:50:16.247 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-30 13:50:16.379 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-30 13:50:16.426  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@52539624, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1001b435, org.springframework.security.web.context.SecurityContextHolderFilter@34c050a1, org.springframework.security.web.header.HeaderWriterFilter@19ea65f4, org.springframework.web.filter.CorsFilter@1dd4c691, org.springframework.security.web.authentication.logout.LogoutFilter@1e3c4c12, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@32c114d9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@73f6ffb1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@54972f9a, org.springframework.security.web.access.ExceptionTranslationFilter@21d478f3, org.springframework.security.web.access.intercept.AuthorizationFilter@4b98c80c]
2024-08-30 13:50:16.588 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-30 13:50:16.633 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-30 13:50:16.926  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-30 13:50:16.949  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-30 13:50:16.969  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.36 seconds (process running for 10.444)
2024-08-30 13:50:17.200 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 13:50:17.326 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 13:50:17.370 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 13:50:17.389 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 13:50:17.392 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 13:50:17.397 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 13:50:17.400 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 13:50:17.405 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 13:50:17.409 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 13:50:17.420 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-30 13:50:17.609 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-30 13:50:17.632 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-30 13:50:17.642 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-30 13:50:17.781 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-30 13:50:17.784 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-30 13:50:51.061  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 13:50:51.066  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 13:50:51.073  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 15:32:58.699  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 15:32:58.854  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 15:32:59.372  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 15:32:59.413  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 260777 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 15:32:59.419  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-08-30 15:32:59.461 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-08-30 15:33:00.761  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 15:33:00.879  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 106 ms. Found 4 JPA repository interfaces.
2024-08-30 15:33:01.718  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 15:33:04.061 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 115 more
2024-08-30 15:33:04.085  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
2024-08-30 15:33:04.118  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 15:33:04.151 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 96 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 98 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 104 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 115 more
2024-08-30 15:33:04.169 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@4d43a1b7]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@1182413a testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4bf3798b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39dcf4b0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@72a85671, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@274872f8, org.springframework.boot.test.context.SpringBootTestAnnotation@5b3cbcb5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 96 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 98 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 104 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 115 more
2024-08-30 15:35:30.207  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 15:35:30.356  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 15:35:30.922  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 15:35:30.968  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 262110 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 15:35:30.975  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-08-30 15:35:31.023 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@614aeccc
2024-08-30 15:35:32.346  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 15:35:32.454  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 88 ms. Found 4 JPA repository interfaces.
2024-08-30 15:35:33.310  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 15:35:35.652 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 114 more
2024-08-30 15:35:35.668  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
2024-08-30 15:35:35.705  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 15:35:35.738 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 95 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 114 more
2024-08-30 15:35:35.757 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@37c1cfa]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@69feb4d9 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5af3a0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@72cf2de5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@7b324585, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@4bef0fe3, org.springframework.boot.test.context.SpringBootTestAnnotation@4c62e3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 72 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 95 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 114 more
2024-08-30 17:30:36.280  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 17:30:36.418  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 17:30:36.944  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 17:30:36.979  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 297024 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 17:30:36.984  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-08-30 17:30:37.026 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-08-30 17:30:38.356  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 17:30:38.454  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 86 ms. Found 4 JPA repository interfaces.
2024-08-30 17:30:39.256  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 17:30:41.688 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 115 more
2024-08-30 17:30:41.712  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
2024-08-30 17:30:41.746  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 17:30:41.792 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 96 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 98 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 104 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 115 more
2024-08-30 17:30:41.818 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@17134190]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@586843bc testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4bf3798b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39dcf4b0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@72a85671, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@274872f8, org.springframework.boot.test.context.SpringBootTestAnnotation@5b3cbcb5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 96 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 98 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 104 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 115 more
2024-08-30 17:33:37.981  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 17:33:38.227  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 17:33:39.116  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 17:33:39.145  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 298662 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 17:33:39.154  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-08-30 17:33:39.207 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@614aeccc
2024-08-30 17:33:40.667  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 17:33:40.777  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 95 ms. Found 4 JPA repository interfaces.
2024-08-30 17:33:41.606  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 17:33:43.948 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 114 more
2024-08-30 17:33:43.964  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
2024-08-30 17:33:43.991  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 17:33:44.024 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 95 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 114 more
2024-08-30 17:33:44.043 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@19eea77c]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@11e17893 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5af3a0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@72cf2de5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@7b324585, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@4bef0fe3, org.springframework.boot.test.context.SpringBootTestAnnotation@4c62e3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 72 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 95 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 114 more
2024-08-30 17:36:50.304  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 17:36:50.457  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 17:36:51.058  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 17:36:51.101  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 300580 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 17:36:51.108  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-08-30 17:36:51.154 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@614aeccc
2024-08-30 17:36:52.645  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 17:36:52.759  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 102 ms. Found 4 JPA repository interfaces.
2024-08-30 17:36:53.649  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 17:36:56.000 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 114 more
2024-08-30 17:36:56.019  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
2024-08-30 17:36:56.053  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 17:36:56.088 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 95 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 114 more
2024-08-30 17:36:56.105 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@537b3b2e]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@30036a18 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5af3a0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@72cf2de5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@7b324585, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@4bef0fe3, org.springframework.boot.test.context.SpringBootTestAnnotation@4c62e3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 72 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 95 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 114 more
2024-08-30 17:42:38.321  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 17:42:38.464  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 17:42:39.029  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 17:42:39.072  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 303702 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 17:42:39.078  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-08-30 17:42:39.129 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@614aeccc
2024-08-30 17:42:40.482  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 17:42:40.581  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 86 ms. Found 4 JPA repository interfaces.
2024-08-30 17:42:41.404  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 17:42:43.742 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 114 more
2024-08-30 17:42:43.759  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
2024-08-30 17:42:43.788  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 17:42:43.823 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 95 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 114 more
2024-08-30 17:42:43.839 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@537b3b2e]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@30036a18 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5af3a0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@72cf2de5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@7b324585, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@4bef0fe3, org.springframework.boot.test.context.SpringBootTestAnnotation@4c62e3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 72 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 95 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 103 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 114 more
2024-08-30 17:47:35.076  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 17:47:35.220  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 17:47:35.797  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 17:47:35.858  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 306395 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 17:47:35.864  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "build"
2024-08-30 17:47:35.914 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5b022357
2024-08-30 17:47:37.266  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 17:47:37.372  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 93 ms. Found 4 JPA repository interfaces.
2024-08-30 17:47:38.244  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 17:47:38.575  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:20a4aa12-7164-4b6e-9316-b52791f09f66 user=SA
2024-08-30 17:47:38.594  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 17:47:38.724  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 17:47:39.179  INFO --- [           main] l.command                                : Logging exception.
2024-08-30 17:47:39.180  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-08-30 17:47:39.181  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-08-30 17:47:39.182  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 17:47:39.182  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-08-30 17:47:39.183  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 17:47:39.186  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 17:47:39.187  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 17:47:39.191  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 17:47:39.212  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 17:47:39.237 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-08-30 17:47:39.247 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@ccd000e]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@299a43d9 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5af3a0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@72cf2de5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@7b324585, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@4bef0fe3, org.springframework.boot.test.context.SpringBootTestAnnotation@4c62e3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 72 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 95 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:35)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 113 more
2024-08-30 17:53:36.752  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 17:53:36.903  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 17:53:37.500  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 17:53:37.541  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 309383 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 17:53:37.547  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "build"
2024-08-30 17:53:37.591 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@614aeccc
2024-08-30 17:53:39.025  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 17:53:39.139  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 102 ms. Found 4 JPA repository interfaces.
2024-08-30 17:53:39.981  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 17:53:40.290  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:nodb user=SA
2024-08-30 17:53:40.293  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 17:53:40.424  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 17:53:40.869  INFO --- [           main] l.command                                : Logging exception.
2024-08-30 17:53:40.870  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-08-30 17:53:40.870  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-08-30 17:53:40.871  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 17:53:40.871  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-08-30 17:53:40.872  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 17:53:40.875  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 17:53:40.875  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 17:53:40.879  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 17:53:40.896  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 17:53:40.919 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-08-30 17:53:40.927 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@6654ca0d]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@e36bc01 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5af3a0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@72cf2de5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@7b324585, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@4bef0fe3, org.springframework.boot.test.context.SpringBootTestAnnotation@4c62e3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 72 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 95 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:35)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 113 more
2024-08-30 17:55:27.085  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 17:55:27.158  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.1 with PID 310392 (/home/volodymyr/forComunityIdea/target/classes started by volodymyr in /home/volodymyr/forComunityIdea)
2024-08-30 17:55:27.166  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-08-30 17:55:28.775  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 17:55:28.887  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 100 ms. Found 4 JPA repository interfaces.
2024-08-30 17:55:29.908  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-30 17:55:29.927  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-30 17:55:29.931  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-30 17:55:29.932  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-30 17:55:30.028  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-30 17:55:30.031  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2784 ms
2024-08-30 17:55:30.127  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 17:55:30.514  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-30 17:55:30.516  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 17:55:30.536  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-08-30 17:55:30.767  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-30 17:55:30.874  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-30 17:55:30.927  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-30 17:55:31.295  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-30 17:55:31.367  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-08-30 17:55:32.759  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-30 17:55:32.824 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-08-30 17:55:32.839 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-08-30 17:55:32.843 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-08-30 17:55:32.846 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-08-30 17:55:32.849 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-08-30 17:55:32.853 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-08-30 17:55:32.854 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-08-30 17:55:32.856 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-08-30 17:55:32.857 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-08-30 17:55:32.858 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-08-30 17:55:32.859 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-08-30 17:55:32.861 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-08-30 17:55:32.862 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-08-30 17:55:32.863 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-08-30 17:55:32.864 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-08-30 17:55:32.866 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-08-30 17:55:32.874 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-08-30 17:55:32.877 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-08-30 17:55:32.879 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-08-30 17:55:32.884  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 17:55:33.954  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-30 17:55:33.979  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 2ba78697-5abd-45b6-8b35-77862a86cbf7

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-30 17:55:34.268 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-08-30 17:55:34.432 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-30 17:55:34.490  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1001b435, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1dd4c691, org.springframework.security.web.context.SecurityContextHolderFilter@7ecf4608, org.springframework.security.web.header.HeaderWriterFilter@3dfe2797, org.springframework.web.filter.CorsFilter@54972f9a, org.springframework.security.web.authentication.logout.LogoutFilter@7a8e35d1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@73f6ffb1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4505ec36, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1abb719a, org.springframework.security.web.access.ExceptionTranslationFilter@3be60847, org.springframework.security.web.access.intercept.AuthorizationFilter@a486851]
2024-08-30 17:55:34.642 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-30 17:55:34.690 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-30 17:55:35.022  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-30 17:55:35.044  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-30 17:55:35.061  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.509 seconds (process running for 10.533)
2024-08-30 17:55:35.272 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 17:55:35.358 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 17:55:35.386 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 17:55:35.399 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 17:55:35.401 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 17:55:35.406 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 17:55:35.408 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 17:55:35.412 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 17:55:35.415 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 17:55:35.423 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-30 17:55:35.594 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-30 17:55:35.610 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-30 17:55:35.616 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-30 17:55:35.725 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-30 17:55:35.727 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-30 18:02:38.380  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 18:02:38.544  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 18:02:39.184  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 18:02:39.223  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 313911 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 18:02:39.229  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-30 18:02:39.271 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@47f08b81
2024-08-30 18:02:40.603  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 18:02:40.721  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 106 ms. Found 4 JPA repository interfaces.
2024-08-30 18:02:41.792  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 18:02:42.178  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-30 18:02:42.181  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 18:02:42.290  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 18:02:42.812  INFO --- [           main] l.command                                : Logging exception.
2024-08-30 18:02:42.813  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-08-30 18:02:42.814  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-08-30 18:02:42.814  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 18:02:42.815  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-08-30 18:02:42.815  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 18:02:42.819  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 18:02:42.820  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 18:02:42.824  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 18:02:42.844  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 18:02:42.868 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-08-30 18:02:42.878 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@67a6a2d0]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@27e21083 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5af3a0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@72cf2de5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@7b324585, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@4bef0fe3, org.springframework.boot.test.context.SpringBootTestAnnotation@4c62e3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 72 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 95 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:35)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 113 more
2024-08-30 18:04:50.907  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 18:04:51.056  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 18:04:51.627  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 18:04:51.672  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 315033 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 18:04:51.678  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-30 18:04:51.725 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@47f08b81
2024-08-30 18:04:52.982  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 18:04:53.080  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 85 ms. Found 4 JPA repository interfaces.
2024-08-30 18:04:53.896  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 18:04:54.209  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-30 18:04:54.211  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 18:04:54.316  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 18:04:54.764  INFO --- [           main] l.command                                : Logging exception.
2024-08-30 18:04:54.765  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-08-30 18:04:54.765  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-08-30 18:04:54.766  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 18:04:54.766  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-08-30 18:04:54.767  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 18:04:54.771  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 18:04:54.771  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 18:04:54.776  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 18:04:54.794  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 18:04:54.819 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-08-30 18:04:54.828 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@40a28bda]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3ba46845 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5af3a0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@72cf2de5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@7b324585, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@4bef0fe3, org.springframework.boot.test.context.SpringBootTestAnnotation@4c62e3d8], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 72 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 95 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 97 more
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:35)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 113 more
2024-08-30 18:08:37.594  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 18:08:37.761  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 18:08:38.297  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 18:08:38.344  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 316900 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 18:08:38.350  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-30 18:08:38.398 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@257cc1fc
2024-08-30 18:08:39.652  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 18:08:39.748  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 83 ms. Found 4 JPA repository interfaces.
2024-08-30 18:08:40.568  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 18:08:40.854  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-30 18:08:40.858  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 18:08:40.972  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 18:08:41.365  INFO --- [           main] l.command                                : Logging exception.
2024-08-30 18:08:41.366  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-08-30 18:08:41.366  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-08-30 18:08:41.367  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 18:08:41.367  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-08-30 18:08:41.367  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 18:08:41.370  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 18:08:41.371  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 18:08:41.375  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 18:08:41.393  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 18:08:41.414 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-08-30 18:08:41.438 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@4c41a177]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@1827fc4e testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4bf3798b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39dcf4b0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@72a85671, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@274872f8, org.springframework.boot.test.context.SpringBootTestAnnotation@5b3cbcb5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 96 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 98 more
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:35)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 114 more
2024-08-30 18:10:49.216  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 18:10:49.364  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 18:10:49.904  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 18:10:49.944  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 317991 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 18:10:49.950  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-30 18:10:49.997 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@257cc1fc
2024-08-30 18:10:51.400  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 18:10:51.509  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 95 ms. Found 4 JPA repository interfaces.
2024-08-30 18:10:52.369  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 18:10:52.659  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-30 18:10:52.662  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 18:10:52.773  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 18:10:53.219  INFO --- [           main] l.command                                : Logging exception.
2024-08-30 18:10:53.220  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-08-30 18:10:53.220  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-08-30 18:10:53.221  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 18:10:53.221  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-08-30 18:10:53.222  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 18:10:53.225  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 18:10:53.226  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 18:10:53.230  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 18:10:53.246  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 18:10:53.270 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-08-30 18:10:53.278 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@38e7860c]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@42e202d7 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4bf3798b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39dcf4b0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@72a85671, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@274872f8, org.springframework.boot.test.context.SpringBootTestAnnotation@5b3cbcb5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 96 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 98 more
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:35)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 114 more
2024-08-30 18:19:06.134  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 18:19:06.286  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 18:19:06.819  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 18:19:06.892  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 322424 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 18:19:06.898  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2024-08-30 18:19:06.951 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@257cc1fc
2024-08-30 18:19:08.344  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 18:19:08.455  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 97 ms. Found 4 JPA repository interfaces.
2024-08-30 18:19:09.444  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 18:19:09.723  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-08-30 18:19:09.728  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 18:19:09.844  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 18:19:10.318  INFO --- [           main] l.command                                : Logging exception.
2024-08-30 18:19:10.319  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-08-30 18:19:10.320  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-08-30 18:19:10.320  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 18:19:10.321  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-08-30 18:19:10.322  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 18:19:10.325  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 18:19:10.326  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 18:19:10.345  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 18:19:10.366  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 18:19:10.393 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-08-30 18:19:10.402 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@5f3ddc86]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@71262020 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4bf3798b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39dcf4b0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@72a85671, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@274872f8, org.springframework.boot.test.context.SpringBootTestAnnotation@5b3cbcb5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 96 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 98 more
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:35)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 114 more
2024-08-30 18:58:05.980  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 18:58:06.135  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 18:58:06.673  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 18:58:06.703  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 341360 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 18:58:06.708  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "build"
2024-08-30 18:58:06.749 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@42e22a53
2024-08-30 18:58:08.236  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 18:58:08.353  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 100 ms. Found 4 JPA repository interfaces.
2024-08-30 18:58:09.229  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-30 18:58:09.326  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-30 18:58:09.388  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-30 18:58:09.763  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-30 18:58:09.805  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 18:58:10.117  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:nodb user=SA
2024-08-30 18:58:10.120  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 18:58:11.600  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-30 18:58:11.604  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 18:58:12.554  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-30 18:58:12.586  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 82d8d920-62f9-473a-9cce-ab687ea543cf

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-30 18:58:12.883 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-08-30 18:58:13.157 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-30 18:58:13.233  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@16117d9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@78977b59, org.springframework.security.web.context.SecurityContextHolderFilter@4a0a93ce, org.springframework.security.web.header.HeaderWriterFilter@2aadeb31, org.springframework.web.filter.CorsFilter@4bf6bc2d, org.springframework.security.web.authentication.logout.LogoutFilter@68cc6fa4, de.telran.urlshortener.security.JwtFilter@7fba30fe, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@62f63625, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@53f18591, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2c914364, org.springframework.security.web.session.SessionManagementFilter@497cf31a, org.springframework.security.web.access.ExceptionTranslationFilter@5fe19d0e, org.springframework.security.web.access.intercept.AuthorizationFilter@51d50b5f]
2024-08-30 18:58:13.548 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-30 18:58:13.602 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-30 18:58:13.981  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 7.638 seconds (process running for 9.745)
2024-08-30 18:58:14.200 DEBUG --- [           main] o.h.SQL                                  : select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?
2024-08-30 18:58:14.214  WARN --- [           main] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 42104, SQLState: 42S04
2024-08-30 18:58:14.214 ERROR --- [           main] o.h.e.j.s.SqlExceptionHelper             : Table "ROLES" not found (this database is empty); SQL statement:
select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=? [42104-224]
2024-08-30 18:58:14.229  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 18:58:14.270 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
java.lang.IllegalStateException: Failed to execute CommandLineRunner
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:789)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:770)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:330)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "ROLES" not found (this database is empty); SQL statement:
select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=? [42104-224]] [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?]; SQL [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)
	at jdk.proxy2/jdk.proxy2.$Proxy150.findByName(Unknown Source)
	at de.telran.urlshortener.config.AppConfig.run(AppConfig.java:18)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:786)
	... 93 more
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "ROLES" not found (this database is empty); SQL statement:
select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=? [42104-224]] [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:187)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:152)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.lambda$list$0(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:227)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:164)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:200)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:361)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:168)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:93)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:109)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:559)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405)
	at jdk.proxy2/jdk.proxy2.$Proxy176.getSingleResult(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 102 more
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ROLES" not found (this database is empty); SQL statement:
select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=? [42104-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8051)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at com.zaxxer.hikari.pool.ProxyConnection.prepareStatement(ProxyConnection.java:327)
	at com.zaxxer.hikari.pool.HikariProxyConnection.prepareStatement(HikariProxyConnection.java)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:150)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:177)
	... 142 more
2024-08-30 18:58:14.286 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@42e22a53, started on Fri Aug 30 18:58:06 CEST 2024
2024-08-30 18:58:14.295  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 18:58:14.299  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 18:58:14.303  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 18:58:14.313 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@731a5a39]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@65448932 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@419a20a6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1ce61929, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@21d8bcbe, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@545de5a4, org.springframework.boot.test.context.SpringBootTestAnnotation@53957eda], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.IllegalStateException: Failed to execute CommandLineRunner
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:789)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:770)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:330)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "ROLES" not found (this database is empty); SQL statement:
select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=? [42104-224]] [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?]; SQL [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)
	at jdk.proxy2/jdk.proxy2.$Proxy150.findByName(Unknown Source)
	at de.telran.urlshortener.config.AppConfig.run(AppConfig.java:18)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:786)
	... 93 more
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "ROLES" not found (this database is empty); SQL statement:
select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=? [42104-224]] [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:187)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:152)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.lambda$list$0(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:227)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:164)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:200)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:361)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:168)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:93)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:109)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:559)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405)
	at jdk.proxy2/jdk.proxy2.$Proxy176.getSingleResult(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 102 more
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ROLES" not found (this database is empty); SQL statement:
select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=? [42104-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8051)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at com.zaxxer.hikari.pool.ProxyConnection.prepareStatement(ProxyConnection.java:327)
	at com.zaxxer.hikari.pool.HikariProxyConnection.prepareStatement(HikariProxyConnection.java)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:150)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:177)
	... 142 more
2024-08-30 19:00:01.680  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 19:00:01.812  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 19:00:02.344  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 19:00:02.387  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 342407 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 19:00:02.392  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "build"
2024-08-30 19:00:02.440 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-08-30 19:00:03.763  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 19:00:03.878  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 104 ms. Found 4 JPA repository interfaces.
2024-08-30 19:00:04.728  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 19:00:05.030  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:nodb user=SA
2024-08-30 19:00:05.049  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 19:00:05.178  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 19:00:05.601  INFO --- [           main] l.command                                : Logging exception.
2024-08-30 19:00:05.602  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-08-30 19:00:05.602  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-08-30 19:00:05.603  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 19:00:05.603  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-08-30 19:00:05.604  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 19:00:05.608  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 19:00:05.608  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 19:00:05.612  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 19:00:05.632  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 19:00:05.658 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-08-30 19:00:05.667 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@4491eaeb]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6ac9b66b testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4bf3798b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39dcf4b0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@72a85671, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@274872f8, org.springframework.boot.test.context.SpringBootTestAnnotation@5b3cbcb5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 96 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 98 more
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:35)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 114 more
2024-08-30 19:00:30.150  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 19:00:30.220  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 342742 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 19:00:30.226  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "build"
2024-08-30 19:00:31.484  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 19:00:31.573  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 4 JPA repository interfaces.
2024-08-30 19:00:32.414  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-30 19:00:32.427  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-30 19:00:32.430  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-30 19:00:32.430  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-30 19:00:32.492  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-30 19:00:32.492  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2200 ms
2024-08-30 19:00:32.746  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 19:00:32.978  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:nodb user=SA
2024-08-30 19:00:32.980  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 19:00:33.072  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 19:00:33.409  INFO --- [           main] l.command                                : Logging exception.
2024-08-30 19:00:33.410  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-08-30 19:00:33.410  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-08-30 19:00:33.410  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 19:00:33.410  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-08-30 19:00:33.411  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 19:00:33.413  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 19:00:33.414  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 19:00:33.417  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 19:00:33.420  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-08-30 19:00:33.437  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 19:00:33.457 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-08-30 19:13:44.803  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 19:13:44.959  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 19:13:45.486  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 19:13:45.525  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 349153 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 19:13:45.530  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "build"
2024-08-30 19:13:45.570 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-08-30 19:13:46.922  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 19:13:47.035  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 102 ms. Found 4 JPA repository interfaces.
2024-08-30 19:13:48.064  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 19:13:48.363  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:nodb user=SA
2024-08-30 19:13:48.366  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 19:13:48.495  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 19:13:49.032  INFO --- [           main] l.command                                : Logging exception.
2024-08-30 19:13:49.033  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-08-30 19:13:49.034  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-08-30 19:13:49.035  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 19:13:49.036  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-08-30 19:13:49.036  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 19:13:49.040  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 19:13:49.040  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 19:13:49.045  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 19:13:49.065  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 19:13:49.093 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-08-30 19:13:49.101 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@5e8f0f98]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@e91facf testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4bf3798b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39dcf4b0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@72a85671, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@274872f8, org.springframework.boot.test.context.SpringBootTestAnnotation@5b3cbcb5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 96 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 98 more
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:35)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 114 more
2024-08-30 19:14:02.927  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 19:14:02.972  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 349360 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 19:14:02.977  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "build"
2024-08-30 19:14:04.108  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 19:14:04.192  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-08-30 19:14:05.019  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-30 19:14:05.032  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-30 19:14:05.037  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-30 19:14:05.038  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-30 19:14:05.097  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-30 19:14:05.098  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2072 ms
2024-08-30 19:14:05.353  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 19:14:05.597  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:nodb user=SA
2024-08-30 19:14:05.599  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 19:14:05.680  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 19:14:06.008  INFO --- [           main] l.command                                : Logging exception.
2024-08-30 19:14:06.009  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-08-30 19:14:06.009  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-08-30 19:14:06.010  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 19:14:06.010  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-08-30 19:14:06.010  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 19:14:06.013  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-08-30 19:14:06.013  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 19:14:06.017  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 19:14:06.020  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-08-30 19:14:06.036  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 19:14:06.055 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-08-30 19:17:55.152  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 19:17:55.284  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 19:17:55.798  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 19:17:55.841  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 351324 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 19:17:55.847  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "build"
2024-08-30 19:17:55.893 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-08-30 19:17:57.362  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 19:17:57.475  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 99 ms. Found 4 JPA repository interfaces.
2024-08-30 19:17:58.411  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 19:17:58.759  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:nodb user=SA
2024-08-30 19:17:58.761  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 19:17:58.885  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 19:17:59.587  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-08-30 19:17:59.999  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:18:00.160  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-08-30 19:18:00.162  INFO --- [           main] l.command                                : Using deploymentId: 5038280162
2024-08-30 19:18:00.165  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:18:00.222  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-08-30 19:18:00.239  INFO --- [           main] l.changelog                              : Table roles created
2024-08-30 19:18:00.241  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 16ms
2024-08-30 19:18:00.254  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-08-30 19:18:00.263  INFO --- [           main] l.changelog                              : Table users created
2024-08-30 19:18:00.264  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-08-30 19:18:00.273  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-08-30 19:18:00.279  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-08-30 19:18:00.288  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-08-30 19:18:00.289  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-08-30 19:18:00.296  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-08-30 19:18:00.303  INFO --- [           main] l.changelog                              : Table short_urls created
2024-08-30 19:18:00.308  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-08-30 19:18:00.309  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-08-30 19:18:00.315  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-08-30 19:18:00.319  INFO --- [           main] l.changelog                              : Table user_roles created
2024-08-30 19:18:00.324  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-08-30 19:18:00.329  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-08-30 19:18:00.335  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-08-30 19:18:00.336  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-08-30 19:18:00.349  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-08-30 19:18:00.350  INFO --- [           main] l.util                                   : Run:                          5
2024-08-30 19:18:00.350  INFO --- [           main] l.util                                   : Previously run:               0
2024-08-30 19:18:00.351  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-08-30 19:18:00.351  INFO --- [           main] l.util                                   : -------------------------------
2024-08-30 19:18:00.352  INFO --- [           main] l.util                                   : Total change sets:            5
2024-08-30 19:18:00.354  INFO --- [           main] l.util                                   : Update summary generated
2024-08-30 19:18:00.358  INFO --- [           main] l.command                                : Update command completed successfully.
2024-08-30 19:18:00.359  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-08-30 19:18:00.362  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-08-30 19:18:00.364  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 19:18:00.546  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-30 19:18:00.643  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-30 19:18:00.709  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-30 19:18:01.079  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-30 19:18:02.595  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-30 19:18:02.600  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:18:03.474  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-30 19:18:03.509  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 752d7d38-5f34-4d0f-b410-24be48202348

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-30 19:18:03.786 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-08-30 19:18:03.967 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-30 19:18:04.014  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3f679ce, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@77393f2e, org.springframework.security.web.context.SecurityContextHolderFilter@18b431ea, org.springframework.security.web.header.HeaderWriterFilter@518d4537, org.springframework.web.filter.CorsFilter@4300b54c, org.springframework.security.web.authentication.logout.LogoutFilter@4b6575fd, de.telran.urlshortener.security.JwtFilter@48682f91, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@389f4282, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7cf618f3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@67f5066e, org.springframework.security.web.session.SessionManagementFilter@45543b88, org.springframework.security.web.access.ExceptionTranslationFilter@23ec291e, org.springframework.security.web.access.intercept.AuthorizationFilter@77107573]
2024-08-30 19:18:04.315 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-30 19:18:04.365 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-30 19:18:04.663  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 9.193 seconds (process running for 11.241)
2024-08-30 19:18:04.860 DEBUG --- [           main] o.h.SQL                                  : select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?
2024-08-30 19:18:04.960 DEBUG --- [           main] o.h.SQL                                  : insert into roles (expiry_date,name,id) values (?,?,default)
2024-08-30 19:18:04.987 DEBUG --- [           main] o.h.SQL                                  : select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?
2024-08-30 19:18:05.000 DEBUG --- [           main] o.h.SQL                                  : select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?
2024-08-30 19:18:05.002 DEBUG --- [           main] o.h.SQL                                  : insert into roles (expiry_date,name,id) values (?,?,default)
2024-08-30 19:18:05.007 DEBUG --- [           main] o.h.SQL                                  : select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?
2024-08-30 19:18:05.009 DEBUG --- [           main] o.h.SQL                                  : insert into roles (expiry_date,name,id) values (?,?,default)
2024-08-30 19:18:05.013 DEBUG --- [           main] o.h.SQL                                  : select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?
2024-08-30 19:18:05.017 DEBUG --- [           main] o.h.SQL                                  : select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?
2024-08-30 19:18:05.025 DEBUG --- [           main] o.h.SQL                                  : select u1_0.id from users u1_0 where u1_0.email=? fetch first ? rows only
2024-08-30 19:18:05.193 DEBUG --- [           main] o.h.SQL                                  : insert into users (email,password,user_name,id) values (?,?,?,default)
2024-08-30 19:18:05.207 DEBUG --- [           main] o.h.SQL                                  : insert into user_roles (user_id,role_id) values (?,?)
2024-08-30 19:18:05.214 DEBUG --- [           main] o.h.SQL                                  : select u1_0.id from users u1_0 where u1_0.email=? fetch first ? rows only
2024-08-30 19:18:05.341 DEBUG --- [           main] o.h.SQL                                  : insert into users (email,password,user_name,id) values (?,?,?,default)
2024-08-30 19:18:05.343 DEBUG --- [           main] o.h.SQL                                  : insert into user_roles (user_id,role_id) values (?,?)
2024-08-30 19:18:06.211 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@70242f38, started on Fri Aug 30 19:17:55 CEST 2024
2024-08-30 19:18:06.221  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:18:06.225  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 19:18:06.230  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 19:21:46.660  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 19:21:46.798  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 19:21:47.318  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 19:21:47.360  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 353218 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 19:21:47.365  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "testdb;DB_CLOSE_DELAY=-1"
2024-08-30 19:21:47.406 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e
2024-08-30 19:21:48.681  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 19:21:48.792  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 100 ms. Found 4 JPA repository interfaces.
2024-08-30 19:21:49.606  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 19:21:49.886  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:6350bc9f-7852-47ff-b062-df61a5dfe60e user=SA
2024-08-30 19:21:49.889  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 19:21:50.042  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 19:21:50.974  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-08-30 19:21:51.354  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:21:51.543  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-08-30 19:21:51.546  INFO --- [           main] l.command                                : Using deploymentId: 5038511545
2024-08-30 19:21:51.549  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:21:51.614  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-08-30 19:21:51.630  INFO --- [           main] l.changelog                              : Table roles created
2024-08-30 19:21:51.632  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-08-30 19:21:51.647  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-08-30 19:21:51.657  INFO --- [           main] l.changelog                              : Table users created
2024-08-30 19:21:51.658  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 10ms
2024-08-30 19:21:51.667  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-08-30 19:21:51.675  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-08-30 19:21:51.686  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-08-30 19:21:51.687  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 19ms
2024-08-30 19:21:51.698  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-08-30 19:21:51.709  INFO --- [           main] l.changelog                              : Table short_urls created
2024-08-30 19:21:51.715  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-08-30 19:21:51.716  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 16ms
2024-08-30 19:21:51.724  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-08-30 19:21:51.728  INFO --- [           main] l.changelog                              : Table user_roles created
2024-08-30 19:21:51.733  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-08-30 19:21:51.737  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-08-30 19:21:51.744  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-08-30 19:21:51.744  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-08-30 19:21:51.759  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-08-30 19:21:51.760  INFO --- [           main] l.util                                   : Run:                          5
2024-08-30 19:21:51.760  INFO --- [           main] l.util                                   : Previously run:               0
2024-08-30 19:21:51.760  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-08-30 19:21:51.761  INFO --- [           main] l.util                                   : -------------------------------
2024-08-30 19:21:51.761  INFO --- [           main] l.util                                   : Total change sets:            5
2024-08-30 19:21:51.763  INFO --- [           main] l.util                                   : Update summary generated
2024-08-30 19:21:51.768  INFO --- [           main] l.command                                : Update command completed successfully.
2024-08-30 19:21:51.769  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-08-30 19:21:51.773  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-08-30 19:21:51.774  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 19:21:51.958  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-30 19:21:52.041  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-30 19:21:52.099  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-30 19:21:52.455  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-30 19:21:53.810  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-30 19:21:53.886  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:21:54.774  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-30 19:21:54.809  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b6fd166c-6897-44e0-a67a-8359d247b635

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-30 19:21:55.047 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-08-30 19:21:55.249 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-30 19:21:55.299  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2291fb1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@213f2d00, org.springframework.security.web.context.SecurityContextHolderFilter@3a72160a, org.springframework.security.web.header.HeaderWriterFilter@3f9e38d4, org.springframework.web.filter.CorsFilter@2aaf7354, org.springframework.security.web.authentication.logout.LogoutFilter@6affbed1, de.telran.urlshortener.security.JwtFilter@149e457, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1560982f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5642cd03, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1606ecbb, org.springframework.security.web.session.SessionManagementFilter@32514766, org.springframework.security.web.access.ExceptionTranslationFilter@4bdec54, org.springframework.security.web.access.intercept.AuthorizationFilter@57ce8f63]
2024-08-30 19:21:55.588 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-30 19:21:55.635 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-30 19:21:55.922  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 8.934 seconds (process running for 10.987)
2024-08-30 19:21:56.113 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:21:56.193 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 19:21:56.215 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:21:56.227 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:21:56.229 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 19:21:56.234 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:21:56.236 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 19:21:56.239 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:21:56.243 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:21:56.250 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-30 19:21:56.402 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-30 19:21:56.420 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-30 19:21:56.428 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-30 19:21:56.568 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-30 19:21:56.571 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-30 19:21:57.400 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e, started on Fri Aug 30 19:21:47 CEST 2024
2024-08-30 19:21:57.410  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:21:57.414  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 19:21:57.417  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 19:27:53.630  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 19:27:53.775  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 19:27:54.393  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 19:27:54.435  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 356274 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 19:27:54.440  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "devdb"
2024-08-30 19:27:54.495 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e
2024-08-30 19:27:55.954  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 19:27:56.063  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 94 ms. Found 4 JPA repository interfaces.
2024-08-30 19:27:56.938  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 19:27:57.238  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:9e28bcfc-a6ff-4d27-9039-030f119c505b user=SA
2024-08-30 19:27:57.241  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 19:27:57.352  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 19:27:58.074  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-08-30 19:27:58.287  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:27:58.462  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-08-30 19:27:58.465  INFO --- [           main] l.command                                : Using deploymentId: 5038878464
2024-08-30 19:27:58.468  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:27:58.525  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-08-30 19:27:58.541  INFO --- [           main] l.changelog                              : Table roles created
2024-08-30 19:27:58.543  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 15ms
2024-08-30 19:27:58.555  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-08-30 19:27:58.564  INFO --- [           main] l.changelog                              : Table users created
2024-08-30 19:27:58.566  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-08-30 19:27:58.577  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-08-30 19:27:58.585  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-08-30 19:27:58.598  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-08-30 19:27:58.599  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 20ms
2024-08-30 19:27:58.610  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-08-30 19:27:58.618  INFO --- [           main] l.changelog                              : Table short_urls created
2024-08-30 19:27:58.623  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-08-30 19:27:58.624  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-08-30 19:27:58.631  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-08-30 19:27:58.634  INFO --- [           main] l.changelog                              : Table user_roles created
2024-08-30 19:27:58.639  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-08-30 19:27:58.643  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-08-30 19:27:58.650  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-08-30 19:27:58.652  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-08-30 19:27:58.664  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-08-30 19:27:58.665  INFO --- [           main] l.util                                   : Run:                          5
2024-08-30 19:27:58.665  INFO --- [           main] l.util                                   : Previously run:               0
2024-08-30 19:27:58.666  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-08-30 19:27:58.667  INFO --- [           main] l.util                                   : -------------------------------
2024-08-30 19:27:58.667  INFO --- [           main] l.util                                   : Total change sets:            5
2024-08-30 19:27:58.669  INFO --- [           main] l.util                                   : Update summary generated
2024-08-30 19:27:58.674  INFO --- [           main] l.command                                : Update command completed successfully.
2024-08-30 19:27:58.675  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-08-30 19:27:58.679  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-08-30 19:27:58.681  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 19:27:58.897  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-30 19:27:59.017  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-30 19:27:59.103  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-30 19:27:59.474  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-30 19:28:00.831  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-30 19:28:00.889  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:28:01.778  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-30 19:28:01.810  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: d1c174af-b53f-49fd-981d-9022d29d9d18

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-30 19:28:02.063 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-08-30 19:28:02.262 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-30 19:28:02.306  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2291fb1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@213f2d00, org.springframework.security.web.context.SecurityContextHolderFilter@3a72160a, org.springframework.security.web.header.HeaderWriterFilter@3f9e38d4, org.springframework.web.filter.CorsFilter@2aaf7354, org.springframework.security.web.authentication.logout.LogoutFilter@6affbed1, de.telran.urlshortener.security.JwtFilter@149e457, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1560982f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5642cd03, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1606ecbb, org.springframework.security.web.session.SessionManagementFilter@32514766, org.springframework.security.web.access.ExceptionTranslationFilter@4bdec54, org.springframework.security.web.access.intercept.AuthorizationFilter@57ce8f63]
2024-08-30 19:28:02.566 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-30 19:28:02.615 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-30 19:28:02.969  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 8.991 seconds (process running for 11.071)
2024-08-30 19:28:03.168 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:28:03.247 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 19:28:03.273 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:28:03.289 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:28:03.292 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 19:28:03.298 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:28:03.300 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 19:28:03.305 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:28:03.309 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:28:03.318 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-30 19:28:03.463 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-30 19:28:03.477 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-30 19:28:03.484 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-30 19:28:03.599 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-30 19:28:03.602 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-30 19:28:04.484 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e, started on Fri Aug 30 19:27:54 CEST 2024
2024-08-30 19:28:04.494  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:28:04.498  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 19:28:04.501  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 19:28:41.783  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-30 19:28:42.789  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-30 19:28:42.790  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-30 19:28:42.791 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-30 19:28:42.791 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-30 19:28:42.792 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-30 19:28:42.794 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@24673720
2024-08-30 19:28:42.795 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@696d28ee
2024-08-30 19:28:42.795 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-30 19:28:42.796  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 5 ms
2024-08-30 19:28:42.799  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-30 19:28:42.808 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-08-30 19:28:42.812 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-08-30 19:28:42.826 DEBUG --- [nio-8080-exec-5] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-08-30 19:28:42.832 DEBUG --- [nio-8080-exec-5] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-08-30 19:28:42.834 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-08-30 19:28:42.846 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for GET "/error", parameters={}
2024-08-30 19:28:42.847 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-08-30 19:28:42.883 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/json, application/*+json]
2024-08-30 19:28:42.887 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Fri Aug 30 19:28:42 CEST 2024, status=404, error=Not Found, path=/favicon.ico}]
2024-08-30 19:28:42.958 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 404
2024-08-30 19:31:55.622  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 19:31:55.667  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 358307 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 19:31:55.672  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-08-30 19:31:56.905  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 19:31:56.989  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2024-08-30 19:31:57.834  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-30 19:31:57.847  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-30 19:31:57.849  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-30 19:31:57.850  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-30 19:31:57.912  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-30 19:31:57.913  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2190 ms
2024-08-30 19:31:58.176  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 19:31:58.425  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:9a6ff431-c3b3-47d6-839a-6564f2abbc86 user=SA
2024-08-30 19:31:58.427  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 19:31:58.525  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 19:31:59.119  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-08-30 19:31:59.353  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:31:59.516  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-08-30 19:31:59.519  INFO --- [           main] l.command                                : Using deploymentId: 5039119518
2024-08-30 19:31:59.522  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:31:59.569  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-08-30 19:31:59.586  INFO --- [           main] l.changelog                              : Table roles created
2024-08-30 19:31:59.588  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 18ms
2024-08-30 19:31:59.600  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-08-30 19:31:59.606  INFO --- [           main] l.changelog                              : Table users created
2024-08-30 19:31:59.606  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-08-30 19:31:59.613  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-08-30 19:31:59.618  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-08-30 19:31:59.626  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-08-30 19:31:59.627  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 12ms
2024-08-30 19:31:59.634  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-08-30 19:31:59.640  INFO --- [           main] l.changelog                              : Table short_urls created
2024-08-30 19:31:59.644  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-08-30 19:31:59.644  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-08-30 19:31:59.649  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-08-30 19:31:59.652  INFO --- [           main] l.changelog                              : Table user_roles created
2024-08-30 19:31:59.655  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-08-30 19:31:59.658  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-08-30 19:31:59.664  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-08-30 19:31:59.664  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-08-30 19:31:59.673  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-08-30 19:31:59.674  INFO --- [           main] l.util                                   : Run:                          5
2024-08-30 19:31:59.674  INFO --- [           main] l.util                                   : Previously run:               0
2024-08-30 19:31:59.674  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-08-30 19:31:59.674  INFO --- [           main] l.util                                   : -------------------------------
2024-08-30 19:31:59.675  INFO --- [           main] l.util                                   : Total change sets:            5
2024-08-30 19:31:59.676  INFO --- [           main] l.util                                   : Update summary generated
2024-08-30 19:31:59.679  INFO --- [           main] l.command                                : Update command completed successfully.
2024-08-30 19:31:59.679  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-08-30 19:31:59.682  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-08-30 19:31:59.683  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 19:31:59.787  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-30 19:31:59.868  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-30 19:31:59.916  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-30 19:32:00.208  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-30 19:32:01.505  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-30 19:32:01.564  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:32:02.445  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-30 19:32:02.482  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 93349db5-9f78-43c2-9f91-7ac82e51d6d2

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-30 19:32:02.765 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-08-30 19:32:02.924 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-30 19:32:03.001  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@47b6f580, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5eb054, org.springframework.security.web.context.SecurityContextHolderFilter@428169d, org.springframework.security.web.header.HeaderWriterFilter@45cd5c56, org.springframework.web.filter.CorsFilter@34d08905, org.springframework.security.web.authentication.logout.LogoutFilter@3787eac3, de.telran.urlshortener.security.JwtFilter@624b3544, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@434c179e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@46199519, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@57421698, org.springframework.security.web.session.SessionManagementFilter@7c3c6564, org.springframework.security.web.access.ExceptionTranslationFilter@23182d4d, org.springframework.security.web.access.intercept.AuthorizationFilter@c3972d0]
2024-08-30 19:32:03.156 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-30 19:32:03.214 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-30 19:32:03.573  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-30 19:32:03.581  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2024-08-30 19:32:03.585  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:32:03.588  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 19:32:03.598  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 19:32:03.618  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 19:32:03.649 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:287)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:467)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:256)
	at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:201)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:965)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:229)
	at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:44)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:284)
	... 13 more
Caused by: java.lang.IllegalArgumentException: standardService.connector.startFailed
	at org.apache.catalina.core.StandardService.addConnector(StandardService.java:235)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:286)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:214)
	... 15 more
Caused by: org.apache.catalina.LifecycleException: Protocol handler start failed
	at org.apache.catalina.connector.Connector.startInternal(Connector.java:1046)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.addConnector(StandardService.java:232)
	... 17 more
Caused by: java.net.BindException:   
	at java.base/sun.nio.ch.Net.bind0(Native Method)
	at java.base/sun.nio.ch.Net.bind(Net.java:565)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:344)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:301)
	at org.apache.tomcat.util.net.NioEndpoint.initServerSocket(NioEndpoint.java:247)
	at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:202)
	at org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1280)
	at org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1366)
	at org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:635)
	at org.apache.catalina.connector.Connector.startInternal(Connector.java:1043)
	... 19 more
2024-08-30 19:32:33.533  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 19:32:33.581  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 358749 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 19:32:33.587  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb;DB_CLOSE_DELAY=-1"
2024-08-30 19:32:34.739  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 19:32:34.822  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2024-08-30 19:32:35.636  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-30 19:32:35.649  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-30 19:32:35.652  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-30 19:32:35.652  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-30 19:32:35.712  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-30 19:32:35.713  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2074 ms
2024-08-30 19:32:35.956  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 19:32:36.207  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:a06ad717-1da5-4e58-b831-074a305114a4 user=SA
2024-08-30 19:32:36.209  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 19:32:36.313  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 19:32:36.875  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-08-30 19:32:37.118  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:32:37.258  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-08-30 19:32:37.260  INFO --- [           main] l.command                                : Using deploymentId: 5039157259
2024-08-30 19:32:37.262  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:32:37.303  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-08-30 19:32:37.316  INFO --- [           main] l.changelog                              : Table roles created
2024-08-30 19:32:37.317  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 12ms
2024-08-30 19:32:37.328  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-08-30 19:32:37.335  INFO --- [           main] l.changelog                              : Table users created
2024-08-30 19:32:37.336  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-08-30 19:32:37.343  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-08-30 19:32:37.349  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-08-30 19:32:37.358  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-08-30 19:32:37.359  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-08-30 19:32:37.366  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-08-30 19:32:37.372  INFO --- [           main] l.changelog                              : Table short_urls created
2024-08-30 19:32:37.375  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-08-30 19:32:37.376  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-08-30 19:32:37.382  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-08-30 19:32:37.385  INFO --- [           main] l.changelog                              : Table user_roles created
2024-08-30 19:32:37.388  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-08-30 19:32:37.392  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-08-30 19:32:37.398  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-08-30 19:32:37.399  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-08-30 19:32:37.408  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-08-30 19:32:37.409  INFO --- [           main] l.util                                   : Run:                          5
2024-08-30 19:32:37.409  INFO --- [           main] l.util                                   : Previously run:               0
2024-08-30 19:32:37.410  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-08-30 19:32:37.410  INFO --- [           main] l.util                                   : -------------------------------
2024-08-30 19:32:37.410  INFO --- [           main] l.util                                   : Total change sets:            5
2024-08-30 19:32:37.412  INFO --- [           main] l.util                                   : Update summary generated
2024-08-30 19:32:37.415  INFO --- [           main] l.command                                : Update command completed successfully.
2024-08-30 19:32:37.416  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-08-30 19:32:37.418  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-08-30 19:32:37.419  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 19:32:37.528  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-30 19:32:37.608  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-30 19:32:37.655  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-30 19:32:37.946  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-30 19:32:39.208  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-30 19:32:39.264  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:32:40.119  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-30 19:32:40.155  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b40ebe42-190b-476b-9e79-49b259cfc54a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-30 19:32:40.411 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-08-30 19:32:40.576 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-30 19:32:40.652  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2728e305, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@52813ba4, org.springframework.security.web.context.SecurityContextHolderFilter@2c1ffb9, org.springframework.security.web.header.HeaderWriterFilter@3d5a6849, org.springframework.web.filter.CorsFilter@62291850, org.springframework.security.web.authentication.logout.LogoutFilter@7c943143, de.telran.urlshortener.security.JwtFilter@5e193ef5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@388a6656, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@32b19d03, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2518245b, org.springframework.security.web.session.SessionManagementFilter@1b204439, org.springframework.security.web.access.ExceptionTranslationFilter@629fc74d, org.springframework.security.web.access.intercept.AuthorizationFilter@5eb054]
2024-08-30 19:32:40.802 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-30 19:32:40.853 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-30 19:32:41.183  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-30 19:32:41.190  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2024-08-30 19:32:41.194  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:32:41.197  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 19:32:41.200  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 19:32:41.218  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-08-30 19:32:41.237 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:287)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:467)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:256)
	at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:201)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:965)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:229)
	at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:44)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:284)
	... 13 more
Caused by: java.lang.IllegalArgumentException: standardService.connector.startFailed
	at org.apache.catalina.core.StandardService.addConnector(StandardService.java:235)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:286)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:214)
	... 15 more
Caused by: org.apache.catalina.LifecycleException: Protocol handler start failed
	at org.apache.catalina.connector.Connector.startInternal(Connector.java:1046)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.addConnector(StandardService.java:232)
	... 17 more
Caused by: java.net.BindException:   
	at java.base/sun.nio.ch.Net.bind0(Native Method)
	at java.base/sun.nio.ch.Net.bind(Net.java:565)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:344)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:301)
	at org.apache.tomcat.util.net.NioEndpoint.initServerSocket(NioEndpoint.java:247)
	at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:202)
	at org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1280)
	at org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1366)
	at org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:635)
	at org.apache.catalina.connector.Connector.startInternal(Connector.java:1043)
	... 19 more
2024-08-30 19:33:41.952  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:33:41.956  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 19:33:41.959  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 19:35:00.429  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-08-30 19:35:00.572  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-08-30 19:35:01.087  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 19:35:01.133  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 360112 (started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 19:35:01.139  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "devdb"
2024-08-30 19:35:01.193 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e
2024-08-30 19:35:02.635  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 19:35:02.733  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 85 ms. Found 4 JPA repository interfaces.
2024-08-30 19:35:03.555  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 19:35:03.883  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:c2239910-fc8d-41b6-bd75-bee740e62905 user=SA
2024-08-30 19:35:03.885  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 19:35:03.992  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 19:35:04.767  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-08-30 19:35:05.038  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:35:05.252  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-08-30 19:35:05.254  INFO --- [           main] l.command                                : Using deploymentId: 5039305253
2024-08-30 19:35:05.257  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:35:05.314  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-08-30 19:35:05.333  INFO --- [           main] l.changelog                              : Table roles created
2024-08-30 19:35:05.335  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 18ms
2024-08-30 19:35:05.349  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-08-30 19:35:05.357  INFO --- [           main] l.changelog                              : Table users created
2024-08-30 19:35:05.358  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-08-30 19:35:05.366  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-08-30 19:35:05.372  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-08-30 19:35:05.384  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-08-30 19:35:05.385  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 18ms
2024-08-30 19:35:05.395  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-08-30 19:35:05.403  INFO --- [           main] l.changelog                              : Table short_urls created
2024-08-30 19:35:05.407  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-08-30 19:35:05.408  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 13ms
2024-08-30 19:35:05.416  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-08-30 19:35:05.419  INFO --- [           main] l.changelog                              : Table user_roles created
2024-08-30 19:35:05.424  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-08-30 19:35:05.428  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-08-30 19:35:05.434  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-08-30 19:35:05.435  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 18ms
2024-08-30 19:35:05.446  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-08-30 19:35:05.447  INFO --- [           main] l.util                                   : Run:                          5
2024-08-30 19:35:05.447  INFO --- [           main] l.util                                   : Previously run:               0
2024-08-30 19:35:05.448  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-08-30 19:35:05.448  INFO --- [           main] l.util                                   : -------------------------------
2024-08-30 19:35:05.449  INFO --- [           main] l.util                                   : Total change sets:            5
2024-08-30 19:35:05.450  INFO --- [           main] l.util                                   : Update summary generated
2024-08-30 19:35:05.454  INFO --- [           main] l.command                                : Update command completed successfully.
2024-08-30 19:35:05.455  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-08-30 19:35:05.458  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-08-30 19:35:05.460  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 19:35:05.632  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-30 19:35:05.730  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-30 19:35:05.791  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-30 19:35:06.194  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-30 19:35:07.601  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-30 19:35:07.664  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:35:08.651  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-30 19:35:08.692  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: e2d6ad18-9f38-485d-9503-0f8f72504d4f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-30 19:35:08.982 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-08-30 19:35:09.173 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-30 19:35:09.226  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2aaf7354, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1606ecbb, org.springframework.security.web.context.SecurityContextHolderFilter@1560982f, org.springframework.security.web.header.HeaderWriterFilter@18a421ea, org.springframework.web.filter.CorsFilter@5c18ad5d, org.springframework.security.web.authentication.logout.LogoutFilter@6fe43257, de.telran.urlshortener.security.JwtFilter@3687f6b6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7caa5387, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7eeabaf3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@497ccf3, org.springframework.security.web.session.SessionManagementFilter@43d00636, org.springframework.security.web.access.ExceptionTranslationFilter@3f9e38d4, org.springframework.security.web.access.intercept.AuthorizationFilter@59acb725]
2024-08-30 19:35:09.515 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-30 19:35:09.565 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-30 19:35:09.894  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 9.133 seconds (process running for 11.313)
2024-08-30 19:35:10.090 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:35:10.175 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 19:35:10.200 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:35:10.213 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:35:10.216 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 19:35:10.221 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:35:10.223 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 19:35:10.228 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:35:10.233 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:35:10.243 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-30 19:35:10.425 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-30 19:35:10.445 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-30 19:35:10.451 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-30 19:35:10.563 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-30 19:35:10.565 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-30 19:35:11.465 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e, started on Fri Aug 30 19:35:01 CEST 2024
2024-08-30 19:35:11.477  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:35:11.481  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-08-30 19:35:11.485  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-08-30 19:35:21.643  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-08-30 19:35:21.689  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 360392 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-08-30 19:35:21.694  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-08-30 19:35:22.814  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-08-30 19:35:22.895  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73 ms. Found 4 JPA repository interfaces.
2024-08-30 19:35:23.726  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-08-30 19:35:23.740  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-08-30 19:35:23.742  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-08-30 19:35:23.743  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-08-30 19:35:23.803  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-08-30 19:35:23.804  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2061 ms
2024-08-30 19:35:24.075  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-08-30 19:35:24.323  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:3746bd9c-8cf3-4a7b-baf7-219f81a41a1c user=SA
2024-08-30 19:35:24.325  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-08-30 19:35:24.419  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-08-30 19:35:24.971  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-08-30 19:35:25.177  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:35:25.323  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-08-30 19:35:25.325  INFO --- [           main] l.command                                : Using deploymentId: 5039325325
2024-08-30 19:35:25.328  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-08-30 19:35:25.366  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-08-30 19:35:25.380  INFO --- [           main] l.changelog                              : Table roles created
2024-08-30 19:35:25.381  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-08-30 19:35:25.396  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-08-30 19:35:25.404  INFO --- [           main] l.changelog                              : Table users created
2024-08-30 19:35:25.405  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-08-30 19:35:25.415  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-08-30 19:35:25.422  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-08-30 19:35:25.432  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-08-30 19:35:25.433  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 16ms
2024-08-30 19:35:25.440  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-08-30 19:35:25.448  INFO --- [           main] l.changelog                              : Table short_urls created
2024-08-30 19:35:25.452  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-08-30 19:35:25.454  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-08-30 19:35:25.460  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-08-30 19:35:25.463  INFO --- [           main] l.changelog                              : Table user_roles created
2024-08-30 19:35:25.466  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-08-30 19:35:25.469  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-08-30 19:35:25.474  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-08-30 19:35:25.475  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-08-30 19:35:25.484  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-08-30 19:35:25.484  INFO --- [           main] l.util                                   : Run:                          5
2024-08-30 19:35:25.484  INFO --- [           main] l.util                                   : Previously run:               0
2024-08-30 19:35:25.485  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-08-30 19:35:25.485  INFO --- [           main] l.util                                   : -------------------------------
2024-08-30 19:35:25.485  INFO --- [           main] l.util                                   : Total change sets:            5
2024-08-30 19:35:25.486  INFO --- [           main] l.util                                   : Update summary generated
2024-08-30 19:35:25.490  INFO --- [           main] l.command                                : Update command completed successfully.
2024-08-30 19:35:25.490  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-08-30 19:35:25.493  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-08-30 19:35:25.494  INFO --- [           main] l.command                                : Command execution complete
2024-08-30 19:35:25.597  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-08-30 19:35:25.695  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-08-30 19:35:25.745  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-08-30 19:35:26.037  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-08-30 19:35:27.288  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-08-30 19:35:27.351  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-08-30 19:35:28.220  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-08-30 19:35:28.257  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 71ccefbb-0fa1-48f0-90b2-abece40218cc

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-08-30 19:35:28.529 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-08-30 19:35:28.695 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-08-30 19:35:28.771  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@52813ba4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@62291850, org.springframework.security.web.context.SecurityContextHolderFilter@1bd97254, org.springframework.security.web.header.HeaderWriterFilter@4228a2f6, org.springframework.web.filter.CorsFilter@2518245b, org.springframework.security.web.authentication.logout.LogoutFilter@705e24fb, de.telran.urlshortener.security.JwtFilter@21274afe, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@32b19d03, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3f8090db, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@45c8db36, org.springframework.security.web.session.SessionManagementFilter@434c179e, org.springframework.security.web.access.ExceptionTranslationFilter@12dab9a8, org.springframework.security.web.access.intercept.AuthorizationFilter@34d08905]
2024-08-30 19:35:28.921 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-08-30 19:35:28.971 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-08-30 19:35:29.327  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-08-30 19:35:29.344  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-08-30 19:35:29.357  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.154 seconds (process running for 9.606)
2024-08-30 19:35:29.557 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:35:29.634 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 19:35:29.656 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:35:29.665 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:35:29.667 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 19:35:29.670 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:35:29.672 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-08-30 19:35:29.676 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:35:29.679 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-08-30 19:35:29.685 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-30 19:35:29.883 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-30 19:35:29.898 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-30 19:35:29.903 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-08-30 19:35:30.035 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-08-30 19:35:30.036 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-08-30 19:35:51.747  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-08-30 19:35:51.747  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-08-30 19:35:51.747 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-08-30 19:35:51.747 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-08-30 19:35:51.748 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-08-30 19:35:51.749 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@656dc20f
2024-08-30 19:35:51.750 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@7df0bb1
2024-08-30 19:35:51.750 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-08-30 19:35:51.750  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-08-30 19:35:51.766  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-08-30 19:35:51.784  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-01 17:13:59.807  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-01 17:14:00.207  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-01 17:14:01.284  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-01 17:14:01.418  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 99588 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-01 17:14:01.435  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "devdb"
2024-09-01 17:14:01.546 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e
2024-09-01 17:14:03.947  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-01 17:14:04.097  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 134 ms. Found 4 JPA repository interfaces.
2024-09-01 17:14:05.224  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-01 17:14:05.657  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:0bbaf8ac-f965-41f4-b433-89dbfd887bff user=SA
2024-09-01 17:14:05.660  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-01 17:14:05.797  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-01 17:14:06.723  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-01 17:14:07.176  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-01 17:14:07.427  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-01 17:14:07.430  INFO --- [           main] l.command                                : Using deploymentId: 5203647429
2024-09-01 17:14:07.433  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-01 17:14:07.500  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-01 17:14:07.521  INFO --- [           main] l.changelog                              : Table roles created
2024-09-01 17:14:07.524  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 20ms
2024-09-01 17:14:07.539  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-01 17:14:07.548  INFO --- [           main] l.changelog                              : Table users created
2024-09-01 17:14:07.550  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-01 17:14:07.559  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-01 17:14:07.568  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-01 17:14:07.581  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-01 17:14:07.582  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 22ms
2024-09-01 17:14:07.594  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-01 17:14:07.606  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-01 17:14:07.611  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-01 17:14:07.612  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 17ms
2024-09-01 17:14:07.621  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-01 17:14:07.626  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-01 17:14:07.630  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-01 17:14:07.634  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-01 17:14:07.643  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-01 17:14:07.644  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 22ms
2024-09-01 17:14:07.660  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-01 17:14:07.661  INFO --- [           main] l.util                                   : Run:                          5
2024-09-01 17:14:07.662  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-01 17:14:07.662  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-01 17:14:07.663  INFO --- [           main] l.util                                   : -------------------------------
2024-09-01 17:14:07.663  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-01 17:14:07.665  INFO --- [           main] l.util                                   : Update summary generated
2024-09-01 17:14:07.670  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-01 17:14:07.671  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-01 17:14:07.675  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-01 17:14:07.677  INFO --- [           main] l.command                                : Command execution complete
2024-09-01 17:14:07.889  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-01 17:14:08.046  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-01 17:14:08.121  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-01 17:14:08.584  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-01 17:14:10.558  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-01 17:14:10.637  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-01 17:14:12.024  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-01 17:14:12.073  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 4a1fae2e-564b-47e4-ab2a-6cc49a432d7e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-01 17:14:12.469 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-01 17:14:12.722 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-01 17:14:12.789  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5b1f32e2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b65cc8b, org.springframework.security.web.context.SecurityContextHolderFilter@7ecf001f, org.springframework.security.web.header.HeaderWriterFilter@32514766, org.springframework.web.filter.CorsFilter@56da2437, org.springframework.security.web.authentication.logout.LogoutFilter@57ce8f63, de.telran.urlshortener.security.JwtFilter@3c1f2651, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6a3cb81c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@42fe9099, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7677d320, org.springframework.security.web.session.SessionManagementFilter@2abe5132, org.springframework.security.web.access.ExceptionTranslationFilter@4e1ffe54, org.springframework.security.web.access.intercept.AuthorizationFilter@5710f755]
2024-09-01 17:14:13.197 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-01 17:14:13.269 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-01 17:14:13.757  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 13.075 seconds (process running for 16.967)
2024-09-01 17:14:14.035 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:14:14.141 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-01 17:14:14.169 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:14:14.183 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:14:14.186 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-01 17:14:14.191 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:14:14.194 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-01 17:14:14.200 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:14:14.205 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:14:14.215 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-01 17:14:14.394 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-01 17:14:14.412 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-01 17:14:14.420 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-01 17:14:14.551 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-01 17:14:14.555 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-01 17:14:15.601 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e, started on Sun Sep 01 17:14:01 CEST 2024
2024-09-01 17:14:15.612  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-01 17:14:15.620  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-01 17:14:15.623  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-01 17:16:59.135  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-01 17:16:59.191  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 101036 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-01 17:16:59.197  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-01 17:17:00.488  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-01 17:17:00.579  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 80 ms. Found 4 JPA repository interfaces.
2024-09-01 17:17:01.489  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-01 17:17:01.503  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-01 17:17:01.505  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-01 17:17:01.506  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-01 17:17:01.574  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-01 17:17:01.574  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2321 ms
2024-09-01 17:17:01.845  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-01 17:17:02.110  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:b8ad5c6d-e6a8-4636-bae8-2fe4637a820c user=SA
2024-09-01 17:17:02.112  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-01 17:17:02.213  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-01 17:17:02.824  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-01 17:17:03.181  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-01 17:17:03.346  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-01 17:17:03.348  INFO --- [           main] l.command                                : Using deploymentId: 5203823347
2024-09-01 17:17:03.351  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-01 17:17:03.400  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-01 17:17:03.416  INFO --- [           main] l.changelog                              : Table roles created
2024-09-01 17:17:03.418  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 15ms
2024-09-01 17:17:03.429  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-01 17:17:03.436  INFO --- [           main] l.changelog                              : Table users created
2024-09-01 17:17:03.436  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-01 17:17:03.444  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-01 17:17:03.450  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-01 17:17:03.460  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-01 17:17:03.460  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-01 17:17:03.468  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-01 17:17:03.474  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-01 17:17:03.477  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-01 17:17:03.478  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-01 17:17:03.484  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-01 17:17:03.487  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-01 17:17:03.491  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-01 17:17:03.496  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-01 17:17:03.501  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-01 17:17:03.502  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 18ms
2024-09-01 17:17:03.512  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-01 17:17:03.513  INFO --- [           main] l.util                                   : Run:                          5
2024-09-01 17:17:03.513  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-01 17:17:03.513  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-01 17:17:03.514  INFO --- [           main] l.util                                   : -------------------------------
2024-09-01 17:17:03.514  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-01 17:17:03.515  INFO --- [           main] l.util                                   : Update summary generated
2024-09-01 17:17:03.519  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-01 17:17:03.519  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-01 17:17:03.522  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-01 17:17:03.523  INFO --- [           main] l.command                                : Command execution complete
2024-09-01 17:17:03.632  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-01 17:17:03.726  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-01 17:17:03.773  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-01 17:17:04.097  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-01 17:17:05.504  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-01 17:17:05.569  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-01 17:17:06.528  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-01 17:17:06.565  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: addf2872-9260-482d-a787-36d3736d819f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-01 17:17:06.854 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-01 17:17:07.017 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-01 17:17:07.116  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@f2e28c7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@494e7290, org.springframework.security.web.context.SecurityContextHolderFilter@589dac96, org.springframework.security.web.header.HeaderWriterFilter@1bd97254, org.springframework.web.filter.CorsFilter@e87c4cf, org.springframework.security.web.authentication.logout.LogoutFilter@52813ba4, de.telran.urlshortener.security.JwtFilter@755a7218, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4e60925d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5ed4c87, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7bb2b910, org.springframework.security.web.session.SessionManagementFilter@492d0748, org.springframework.security.web.access.ExceptionTranslationFilter@46199519, org.springframework.security.web.access.intercept.AuthorizationFilter@228c854f]
2024-09-01 17:17:07.288 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-01 17:17:07.351 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-01 17:17:07.719  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-01 17:17:07.739  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-01 17:17:07.752  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 9.163 seconds (process running for 10.924)
2024-09-01 17:17:07.963 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:17:08.063 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-01 17:17:08.088 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:17:08.098 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:17:08.100 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-01 17:17:08.104 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:17:08.105 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-01 17:17:08.109 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:17:08.112 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:17:08.119 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-01 17:17:08.300 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-01 17:17:08.317 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-01 17:17:08.323 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-01 17:17:08.452 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-01 17:17:08.454 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-01 17:18:02.592  INFO --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-01 17:18:02.592  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-01 17:18:02.592 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-01 17:18:02.593 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-01 17:18:02.593 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-01 17:18:02.594 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4235e01b
2024-09-01 17:18:02.595 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@28993a77
2024-09-01 17:18:02.596 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-01 17:18:02.596  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-09-01 17:18:02.614  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/auth/login' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-01 17:18:02.638  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/auth/login' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-01 17:18:02.643 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-01 17:18:02.645 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-01 17:18:02.753 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@521fd21d]
2024-09-01 17:18:02.776 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-01 17:18:02.793 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-01 17:18:02.803 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-01 17:18:03.062 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-01 17:18:03.064 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@237919f9]
2024-09-01 17:18:03.079 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-01 17:19:26.998 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-01 17:19:26.998 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-01 17:19:27.006 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@5d9eb50e]
2024-09-01 17:19:27.007  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-09-01 17:19:27.007  INFO --- [nio-8080-exec-3] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@string.com
2024-09-01 17:19:27.009 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-01 17:19:27.161 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-01 17:19:27.164 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-01 17:19:27.172 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-09-01 17:19:27.178 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-01 17:19:27.180  INFO --- [nio-8080-exec-3] d.t.u.s.UserService                      : User created successfully with ID: 3
2024-09-01 17:19:27.181  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-09-01 17:19:27.186 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-01 17:19:27.186 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@7e145d72]
2024-09-01 17:19:27.192 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-01 17:20:33.401 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-01 17:20:33.402 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-01 17:20:33.405 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@56a1c6e3]
2024-09-01 17:20:33.407 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-01 17:20:33.410 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-01 17:20:33.547 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-01 17:20:33.547 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@36edd88e]
2024-09-01 17:20:33.549 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-01 17:20:46.146  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-01 17:20:46.150  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-01 17:20:46.153  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 06:56:44.933  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 06:56:44.986  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 9600 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 06:56:44.991  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 06:56:46.435  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 06:56:46.529  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 82 ms. Found 4 JPA repository interfaces.
2024-09-02 06:56:47.489  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 06:56:47.507  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 06:56:47.511  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 06:56:47.511  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 06:56:47.588  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 06:56:47.591  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2542 ms
2024-09-02 06:56:47.917  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 06:56:48.214  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:03784795-aca9-4264-bb81-19a2545b64e3 user=SA
2024-09-02 06:56:48.216  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 06:56:48.319  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 06:56:48.919  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 06:56:49.267  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 06:56:49.409  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 06:56:49.411  INFO --- [           main] l.command                                : Using deploymentId: 5253009410
2024-09-02 06:56:49.414  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 06:56:49.462  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 06:56:49.478  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 06:56:49.479  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 16ms
2024-09-02 06:56:49.497  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 06:56:49.507  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 06:56:49.508  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 10ms
2024-09-02 06:56:49.519  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 06:56:49.527  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 06:56:49.538  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 06:56:49.539  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 20ms
2024-09-02 06:56:49.547  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 06:56:49.553  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 06:56:49.558  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 06:56:49.558  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-02 06:56:49.563  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 06:56:49.566  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 06:56:49.570  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 06:56:49.573  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 06:56:49.578  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 06:56:49.579  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-02 06:56:49.589  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 06:56:49.589  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 06:56:49.590  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 06:56:49.590  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 06:56:49.590  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 06:56:49.591  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 06:56:49.592  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 06:56:49.596  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 06:56:49.597  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 06:56:49.600  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 06:56:49.601  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 06:56:49.738  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 06:56:50.126  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 06:56:50.179  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 06:56:50.531  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 06:56:51.851  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 06:56:51.909  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 06:56:52.949  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 06:56:52.986  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 837cddc5-0dbe-4155-8a09-b3979eaa8d97

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 06:56:53.287 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 06:56:53.445 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 06:56:53.530  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@e00f822, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@42c7781a, org.springframework.security.web.context.SecurityContextHolderFilter@230383a7, org.springframework.security.web.header.HeaderWriterFilter@47b6f580, org.springframework.web.filter.CorsFilter@7d2d7a85, org.springframework.security.web.authentication.logout.LogoutFilter@5cb4e255, de.telran.urlshortener.security.JwtFilter@6562cc23, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@228c854f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@47c019d7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5cb3c9e6, org.springframework.security.web.session.SessionManagementFilter@53425450, org.springframework.security.web.access.ExceptionTranslationFilter@1264dbc9, org.springframework.security.web.access.intercept.AuthorizationFilter@8588a62]
2024-09-02 06:56:53.692 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 06:56:53.758 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 06:56:54.116  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 06:56:54.143  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 06:56:54.156  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 9.697 seconds (process running for 11.537)
2024-09-02 06:56:54.344 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 06:56:54.433 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 06:56:54.458 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 06:56:54.468 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 06:56:54.472 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 06:56:54.475 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 06:56:54.477 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 06:56:54.480 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 06:56:54.484 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 06:56:54.491 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 06:56:54.659 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 06:56:54.679 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 06:56:54.684 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 06:56:54.812 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 06:56:54.814 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 06:57:21.256  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 06:57:21.256  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 06:57:21.256 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 06:57:21.257 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 06:57:21.257 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 06:57:21.258 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@561e8bab
2024-09-02 06:57:21.259 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@2d28114b
2024-09-02 06:57:21.259 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 06:57:21.259  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-09-02 06:57:21.275  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 06:57:21.290  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 06:57:21.301 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 06:57:21.306 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 06:57:21.343 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 06:57:21.376 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 06:57:21.378 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 06:57:21.391 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 06:57:21.392 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 06:57:21.392 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 06:57:21.393 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 06:57:21.394 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 06:57:21.395 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 06:57:21.401 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 06:57:21.403 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 06:57:21.404 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 06:57:21.412 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 06:57:21.420 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 06:57:21.438 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 06:57:21.466 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 06:57:22.407 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 06:57:22.408 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 06:57:22.410 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 06:57:22.446 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 06:57:22.447 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 06:57:22.453 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 06:57:22.454 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 06:57:22.459 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 06:57:22.475 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 06:57:22.479 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 06:57:22.488 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 06:57:22.522 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 06:57:22.522 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 06:57:23.509  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 955 ms
2024-09-02 06:57:23.553 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 06:57:23.558 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 06:57:23.560 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 06:58:35.819 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 06:58:35.820 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 06:58:35.842 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@487efb39]
2024-09-02 06:58:35.851 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 06:58:35.860 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 06:58:35.866 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 06:58:35.980 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 06:58:35.980 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@52e5e6fc]
2024-09-02 06:58:35.981 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 06:59:50.626 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : PATCH "/users/2/role?newRole=PAID", parameters={masked}
2024-09-02 06:59:50.627 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-02 06:59:50.647 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 06:59:50.654 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PATCH "/error?newRole=PAID", parameters={masked}
2024-09-02 06:59:50.654 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 06:59:50.658 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 06:59:50.659 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 06:59:50 CEST 2024, status=403, error=Forbidden, path=/users/2/role}]
2024-09-02 06:59:50.665 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 07:01:13.456 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/users/1", parameters={}
2024-09-02 07:01:13.457 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-09-02 07:01:13.458  INFO --- [nio-8080-exec-5] d.t.u.c.UserController                   : Received request to get user with ID: 1
2024-09-02 07:01:13.459  INFO --- [nio-8080-exec-5] d.t.u.s.UserService                      : Fetching user with ID: 1
2024-09-02 07:01:13.472 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-02 07:01:13.476 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 07:01:13.478  INFO --- [nio-8080-exec-5] d.t.u.s.UserService                      : User with ID: 1 fetched successfully
2024-09-02 07:01:13.478  INFO --- [nio-8080-exec-5] d.t.u.c.UserController                   : User fetched successfully with ID: 1
2024-09-02 07:01:13.480 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:01:13.480 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@42fd2212]
2024-09-02 07:01:13.483 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:01:39.354 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : PATCH "/users/2/role?newRole=PAID", parameters={masked}
2024-09-02 07:01:39.355 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-02 07:01:39.356 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 07:01:39.362 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PATCH "/error?newRole=PAID", parameters={masked}
2024-09-02 07:01:39.363 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 07:01:39.364 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:01:39.364 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 07:01:39 CEST 2024, status=403, error=Forbidden, path=/users/2/role}]
2024-09-02 07:01:39.365 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 07:02:21.820 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/users/2", parameters={}
2024-09-02 07:02:21.821 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-09-02 07:02:21.822  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : Received request to get user with ID: 2
2024-09-02 07:02:21.822  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : Fetching user with ID: 2
2024-09-02 07:02:21.824 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-02 07:02:21.827 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 07:02:21.829  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : User with ID: 2 fetched successfully
2024-09-02 07:02:21.829  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : User fetched successfully with ID: 2
2024-09-02 07:02:21.829 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:02:21.830 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@58e22b00]
2024-09-02 07:02:21.832 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:05:10.559 ERROR --- [nio-8080-exec-9] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T05:03:35Z. Current time: 2024-09-02T05:05:10Z, a difference of 95557 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:64)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:05:10.568 ERROR --- [nio-8080-exec-9] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T05:03:35Z. Current time: 2024-09-02T05:05:10Z, a difference of 95567 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:64)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:642)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:340)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:277)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:362)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:05:33.502 ERROR --- [nio-8080-exec-8] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T05:03:35Z. Current time: 2024-09-02T05:05:33Z, a difference of 118502 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:64)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:05:33.507 ERROR --- [nio-8080-exec-8] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T05:03:35Z. Current time: 2024-09-02T05:05:33Z, a difference of 118507 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:64)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:642)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:340)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:277)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:362)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:06:10.075 ERROR --- [io-8080-exec-10] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T05:03:35Z. Current time: 2024-09-02T05:06:10Z, a difference of 155074 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:64)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:06:10.079 ERROR --- [io-8080-exec-10] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T05:03:35Z. Current time: 2024-09-02T05:06:10Z, a difference of 155078 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:06:10.080 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 07:06:10.081 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 07:06:10.082 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@2af43448]
2024-09-02 07:06:10.085 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 07:06:10.088 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 07:06:10.090 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 07:06:10.212 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:06:10.213 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@91d921d]
2024-09-02 07:06:10.213 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:07:03.497 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : PUT "/users/2", parameters={}
2024-09-02 07:07:03.498 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-02 07:07:03.501 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@7a0d2141]
2024-09-02 07:07:03.505 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 07:07:03.512 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PUT "/error", parameters={}
2024-09-02 07:07:03.513 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 07:07:03.514 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:07:03.514 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 07:07:03 CEST 2024, status=403, error=Forbidden, path=/users/2}]
2024-09-02 07:07:03.515 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 07:20:10.498 ERROR --- [nio-8080-exec-3] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T05:11:10Z. Current time: 2024-09-02T05:20:10Z, a difference of 540498 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:64)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:20:10.503 ERROR --- [nio-8080-exec-3] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T05:11:10Z. Current time: 2024-09-02T05:20:10Z, a difference of 540503 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:64)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:642)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:410)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:340)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:277)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:362)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:20:32.980 ERROR --- [nio-8080-exec-5] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T05:11:10Z. Current time: 2024-09-02T05:20:32Z, a difference of 562979 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:64)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:20:32.983 ERROR --- [nio-8080-exec-5] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T05:11:10Z. Current time: 2024-09-02T05:20:32Z, a difference of 562983 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:20:32.984 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 07:20:32.984 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 07:20:32.985 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@529a4d15]
2024-09-02 07:20:32.988 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 07:20:32.995 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 07:20:32.999 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 07:20:33.145 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:20:33.146 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@17288180]
2024-09-02 07:20:33.147 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:21:08.389 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/users/1", parameters={}
2024-09-02 07:21:08.390 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-09-02 07:21:08.390  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : Received request to get user with ID: 1
2024-09-02 07:21:08.390  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : Fetching user with ID: 1
2024-09-02 07:21:08.392 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-02 07:21:08.395 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 07:21:08.396  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : User with ID: 1 fetched successfully
2024-09-02 07:21:08.396  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : User fetched successfully with ID: 1
2024-09-02 07:21:08.397 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:21:08.397 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@5914cbcc]
2024-09-02 07:21:08.398 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:22:13.728 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-02 07:22:13.729 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-02 07:22:13.730 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@346aa6e9]
2024-09-02 07:22:13.730  INFO --- [nio-8080-exec-7] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-09-02 07:22:13.731  INFO --- [nio-8080-exec-7] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: user@example.com
2024-09-02 07:22:13.733 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 07:22:13.735  WARN --- [nio-8080-exec-7] d.t.u.s.UserService                      : Attempted to create user with already existing email: user@example.com
2024-09-02 07:22:13.735 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Failed to complete request: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
2024-09-02 07:22:13.736 ERROR --- [nio-8080-exec-7] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use] with root cause
de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:42)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:32)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at de.telran.urlshortener.controller.UserController$$SpringCGLIB$$0.createUser(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:22:13.741 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-09-02 07:22:13.741 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 07:22:13.742 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:22:13.742 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 07:22:13 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-09-02 07:22:13.743 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-09-02 07:22:59.965 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 07:22:59.966 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 07:22:59.969 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:22:59.997 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 07:22:59.997 DEBUG --- [io-8080-exec-10] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 07:22:59.998 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 07:22:59.998 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 07:22:59.999 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:22:59.999 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 07:23:00.000 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 07:23:00.000 DEBUG --- [nio-8080-exec-8] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 07:23:00.000 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 07:23:00.001 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:23:00.000 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 07:23:00.001 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 07:23:00.004 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:23:00.005 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:23:00.016 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:23:00.554 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 07:23:00.554 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 07:23:00.556 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:23:00.577 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 07:23:00.578 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 07:23:00.580 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 07:23:00.581 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 07:23:00.582 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:23:00.583 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 07:23:00.584 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 07:23:00.586 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:23:00.608 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 07:23:00.608 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 07:23:00.614 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 07:23:00.617 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 07:23:00.617 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 07:23:00.618 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 07:23:00.619 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:23:00.621 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:26:14.259 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 07:26:14.260 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 07:26:14.261 DEBUG --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@50a64a0a]
2024-09-02 07:26:14.264 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 07:26:14.269 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 07:26:14.273 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 07:26:14.412 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:26:14.413 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@1faecb6a]
2024-09-02 07:26:14.414 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:26:49.883 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-02 07:26:49.883 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-02 07:26:49.884 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@3dc4f922]
2024-09-02 07:26:49.884  INFO --- [nio-8080-exec-4] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-09-02 07:26:49.885  INFO --- [nio-8080-exec-4] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: user@example.com
2024-09-02 07:26:49.886 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 07:26:49.889  WARN --- [nio-8080-exec-4] d.t.u.s.UserService                      : Attempted to create user with already existing email: user@example.com
2024-09-02 07:26:49.890 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Failed to complete request: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
2024-09-02 07:26:49.891 ERROR --- [nio-8080-exec-4] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use] with root cause
de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:42)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:32)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at de.telran.urlshortener.controller.UserController$$SpringCGLIB$$0.createUser(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:26:49.896 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-09-02 07:26:49.897 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 07:26:49.898 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:26:49.898 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 07:26:49 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-09-02 07:26:49.899 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-09-02 07:28:09.007 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/users/1", parameters={}
2024-09-02 07:28:09.008 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-09-02 07:28:09.008  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : Received request to get user with ID: 1
2024-09-02 07:28:09.008  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : Fetching user with ID: 1
2024-09-02 07:28:09.009 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-02 07:28:09.013 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 07:28:09.016  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : User with ID: 1 fetched successfully
2024-09-02 07:28:09.016  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : User fetched successfully with ID: 1
2024-09-02 07:28:09.016 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:28:09.016 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@1c578fd2]
2024-09-02 07:28:09.017 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 07:28:20.520 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-02 07:28:20.521 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-02 07:28:20.523 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@713dc853]
2024-09-02 07:28:20.523  INFO --- [nio-8080-exec-7] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-09-02 07:28:20.523  INFO --- [nio-8080-exec-7] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: user@example.com
2024-09-02 07:28:20.525 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 07:28:20.526  WARN --- [nio-8080-exec-7] d.t.u.s.UserService                      : Attempted to create user with already existing email: user@example.com
2024-09-02 07:28:20.527 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Failed to complete request: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
2024-09-02 07:28:20.528 ERROR --- [nio-8080-exec-7] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use] with root cause
de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:42)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:32)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at de.telran.urlshortener.controller.UserController$$SpringCGLIB$$0.createUser(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:28:20.536 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-09-02 07:28:20.537 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 07:28:20.538 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:28:20.538 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 07:28:20 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-09-02 07:28:20.539 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-09-02 07:29:12.440 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-02 07:29:12.440 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-02 07:29:12.442 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@1880b723]
2024-09-02 07:29:12.442  INFO --- [nio-8080-exec-9] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-09-02 07:29:12.443  INFO --- [nio-8080-exec-9] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: user@example.com
2024-09-02 07:29:12.445 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 07:29:12.447  WARN --- [nio-8080-exec-9] d.t.u.s.UserService                      : Attempted to create user with already existing email: user@example.com
2024-09-02 07:29:12.448 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Failed to complete request: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
2024-09-02 07:29:12.449 ERROR --- [nio-8080-exec-9] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use] with root cause
de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:42)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:32)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at de.telran.urlshortener.controller.UserController$$SpringCGLIB$$0.createUser(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:29:12.456 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-09-02 07:29:12.457 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 07:29:12.457 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:29:12.458 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 07:29:12 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-09-02 07:29:12.459 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-09-02 07:59:31.621 ERROR --- [nio-8080-exec-1] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T05:31:14Z. Current time: 2024-09-02T05:59:31Z, a difference of 1697620 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:64)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:59:31.625 ERROR --- [nio-8080-exec-1] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T05:31:14Z. Current time: 2024-09-02T05:59:31Z, a difference of 1697624 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 07:59:31.626 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 07:59:31.627 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 07:59:31.628 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@31e123b7]
2024-09-02 07:59:31.631 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 07:59:31.636 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 07:59:31.637 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 07:59:31.784 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 07:59:31.785 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@28baf066]
2024-09-02 07:59:31.786 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:01:22.876 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/users/1", parameters={}
2024-09-02 08:01:22.877 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-09-02 08:01:22.877  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : Received request to get user with ID: 1
2024-09-02 08:01:22.877  INFO --- [nio-8080-exec-3] d.t.u.s.UserService                      : Fetching user with ID: 1
2024-09-02 08:01:22.879 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-02 08:01:22.887 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 08:01:22.889  INFO --- [nio-8080-exec-3] d.t.u.s.UserService                      : User with ID: 1 fetched successfully
2024-09-02 08:01:22.889  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : User fetched successfully with ID: 1
2024-09-02 08:01:22.890 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 08:01:22.890 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@89e43fc]
2024-09-02 08:01:22.892 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:01:31.199 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-02 08:01:31.200 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-02 08:01:31.201 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@4716be60]
2024-09-02 08:01:31.201  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : Received request to create user with username: wasya
2024-09-02 08:01:31.201  INFO --- [nio-8080-exec-2] d.t.u.s.UserService                      : Attempting to create user with username: wasya and email: wasya@example.com
2024-09-02 08:01:31.203 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 08:01:31.291 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 08:01:31.295 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:01:31.300 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-09-02 08:01:31.304 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 08:01:31.306  INFO --- [nio-8080-exec-2] d.t.u.s.UserService                      : User created successfully with ID: 3
2024-09-02 08:01:31.307  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-09-02 08:01:31.307 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 08:01:31.307 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@76d38a5a]
2024-09-02 08:01:31.309 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:01:46.253 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : PATCH "/users/3/role?newRole=Paid", parameters={masked}
2024-09-02 08:01:46.253 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-02 08:01:46.254 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 08:01:46.258 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PATCH "/error?newRole=Paid", parameters={masked}
2024-09-02 08:01:46.259 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 08:01:46.259 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 08:01:46.260 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 08:01:46 CEST 2024, status=403, error=Forbidden, path=/users/3/role}]
2024-09-02 08:01:46.260 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 08:03:01.010 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : PUT "/users/3", parameters={}
2024-09-02 08:03:01.011 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-02 08:03:01.012 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@79c35e94]
2024-09-02 08:03:01.012 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 08:03:01.017 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PUT "/error", parameters={}
2024-09-02 08:03:01.017 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 08:03:01.018 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 08:03:01.018 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 08:03:01 CEST 2024, status=403, error=Forbidden, path=/users/3}]
2024-09-02 08:03:01.019 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 08:03:16.475 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : DELETE "/users/3", parameters={}
2024-09-02 08:03:16.475 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-02 08:03:16.477 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 08:03:16.481 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for DELETE "/error", parameters={}
2024-09-02 08:03:16.481 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 08:03:16.482 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 08:03:16.482 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 08:03:16 CEST 2024, status=403, error=Forbidden, path=/users/3}]
2024-09-02 08:03:16.483 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 08:18:03.361  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 08:18:03.365  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 08:18:03.367  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 08:18:09.165  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 08:18:09.209  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 52366 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 08:18:09.213  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 08:18:10.332  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 08:18:10.416  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-09-02 08:18:11.276  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 08:18:11.291  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 08:18:11.294  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 08:18:11.295  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 08:18:11.362  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 08:18:11.364  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2102 ms
2024-09-02 08:18:11.622  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 08:18:11.859  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:95241113-af94-473e-ab0e-f2a2aa5992fd user=SA
2024-09-02 08:18:11.861  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 08:18:11.946  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 08:18:12.497  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 08:18:12.872  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 08:18:13.035  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 08:18:13.037  INFO --- [           main] l.command                                : Using deploymentId: 5257893037
2024-09-02 08:18:13.040  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 08:18:13.079  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 08:18:13.095  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 08:18:13.096  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 15ms
2024-09-02 08:18:13.110  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 08:18:13.118  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 08:18:13.118  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-02 08:18:13.127  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 08:18:13.133  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 08:18:13.143  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 08:18:13.144  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 16ms
2024-09-02 08:18:13.152  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 08:18:13.158  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 08:18:13.162  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 08:18:13.163  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-02 08:18:13.169  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 08:18:13.173  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 08:18:13.176  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 08:18:13.180  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 08:18:13.187  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 08:18:13.187  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 17ms
2024-09-02 08:18:13.198  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 08:18:13.199  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 08:18:13.199  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 08:18:13.200  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 08:18:13.200  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 08:18:13.200  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 08:18:13.202  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 08:18:13.206  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 08:18:13.207  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 08:18:13.210  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 08:18:13.212  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 08:18:13.331  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 08:18:13.413  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 08:18:13.456  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 08:18:13.744  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 08:18:15.036  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 08:18:15.091  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 08:18:16.047  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 08:18:16.084  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: e8874c91-3198-4315-932e-2e516ca84966

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 08:18:16.334 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 08:18:16.499 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 08:18:16.573  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7da6e22a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7db57566, org.springframework.security.web.context.SecurityContextHolderFilter@c3972d0, org.springframework.security.web.header.HeaderWriterFilter@1c619a77, org.springframework.web.filter.CorsFilter@2aabd5a0, org.springframework.security.web.authentication.logout.LogoutFilter@5a5c041f, de.telran.urlshortener.security.JwtFilter@23e61112, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@77f2807f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@47b6f580, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5cb4e255, org.springframework.security.web.session.SessionManagementFilter@7c5c53e5, org.springframework.security.web.access.ExceptionTranslationFilter@33cee31a, org.springframework.security.web.access.intercept.AuthorizationFilter@608c03e3]
2024-09-02 08:18:16.717 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 08:18:16.765 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 08:18:17.121  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 08:18:17.139  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 08:18:17.152  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.418 seconds (process running for 9.965)
2024-09-02 08:18:17.328 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:18:17.411 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 08:18:17.434 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:18:17.444 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:18:17.446 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 08:18:17.450 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:18:17.451 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 08:18:17.455 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:18:17.458 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:18:17.465 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 08:18:17.619 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 08:18:17.634 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 08:18:17.640 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 08:18:17.768 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 08:18:17.770 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 08:18:39.464  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 08:18:39.465  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 08:18:39.465 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 08:18:39.466 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 08:18:39.466 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 08:18:39.468 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5524e471
2024-09-02 08:18:39.468 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@14b3976
2024-09-02 08:18:39.469 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 08:18:39.469  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-09-02 08:18:39.484  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 08:18:39.495  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 08:18:39.503 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 08:18:39.506 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:18:39.532 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:18:39.568 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 08:18:39.569 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:18:39.570 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 08:18:39.571 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:18:39.575 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:18:39.576 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 08:18:39.576 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 08:18:39.577 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 08:18:39.577 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:18:39.577 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:18:39.578 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:18:39.581 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:18:39.582 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:18:39.588 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:18:39.610 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:18:40.270 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 08:18:40.272 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:18:40.275 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:18:40.317 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 08:18:40.319 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 08:18:40.324 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 08:18:40.325 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:18:40.327 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:18:40.339 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 08:18:40.351 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 08:18:40.358 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:18:40.386 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 08:18:40.386 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 08:18:41.124  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 720 ms
2024-09-02 08:18:41.158 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 08:18:41.175 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 08:18:41.177 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:21:52.519 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 08:21:52.519 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 08:21:52.547 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@425daf6]
2024-09-02 08:21:52.560 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 08:21:52.573 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 08:21:52.582 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 08:21:52.760 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 08:21:52.761 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@454e8381]
2024-09-02 08:21:52.763 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:22:20.455 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : PUT "/users/3", parameters={}
2024-09-02 08:22:20.456 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-02 08:22:20.458 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@1564c8b6]
2024-09-02 08:22:20.472 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 08:22:20.490 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PUT "/error", parameters={}
2024-09-02 08:22:20.490 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 08:22:20.494 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 08:22:20.495 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 08:22:20 CEST 2024, status=403, error=Forbidden, path=/users/3}]
2024-09-02 08:22:20.500 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 08:22:44.227 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-02 08:22:44.228 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-02 08:22:44.230 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@59d10057]
2024-09-02 08:22:44.231  INFO --- [nio-8080-exec-9] d.t.u.c.UserController                   : Received request to create user with username: petya
2024-09-02 08:22:44.231  INFO --- [nio-8080-exec-9] d.t.u.s.UserService                      : Attempting to create user with username: petya and email: petya@example.com
2024-09-02 08:22:44.235 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 08:22:44.377 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 08:22:44.381 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:22:44.387 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-09-02 08:22:44.394 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 08:22:44.396  INFO --- [nio-8080-exec-9] d.t.u.s.UserService                      : User created successfully with ID: 3
2024-09-02 08:22:44.396  INFO --- [nio-8080-exec-9] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-09-02 08:22:44.399 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 08:22:44.399 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@3e7faea1]
2024-09-02 08:22:44.402 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:23:08.921 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : PATCH "/users/3/role?newRole=PAID", parameters={masked}
2024-09-02 08:23:08.922 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-02 08:23:08.924 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 08:23:08.929 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PATCH "/error?newRole=PAID", parameters={masked}
2024-09-02 08:23:08.929 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 08:23:08.930 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 08:23:08.930 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 08:23:08 CEST 2024, status=403, error=Forbidden, path=/users/3/role}]
2024-09-02 08:23:08.931 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 08:23:54.823 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : DELETE "/users/3", parameters={}
2024-09-02 08:23:54.824 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#deleteUser(Long)
2024-09-02 08:23:54.828 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 08:23:54.841 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for DELETE "/error", parameters={}
2024-09-02 08:23:54.842 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 08:23:54.843 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 08:23:54.844 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 08:23:54 CEST 2024, status=403, error=Forbidden, path=/users/3}]
2024-09-02 08:23:54.845 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 08:47:42.977  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 08:47:43.031  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 68626 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 08:47:43.036  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 08:47:44.432  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 08:47:44.520  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 77 ms. Found 4 JPA repository interfaces.
2024-09-02 08:47:45.473  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 08:47:45.489  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 08:47:45.491  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 08:47:45.492  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 08:47:45.565  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 08:47:45.567  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2463 ms
2024-09-02 08:47:45.848  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 08:47:46.140  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:4635a06a-730c-46cc-bfe5-b7824060408a user=SA
2024-09-02 08:47:46.142  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 08:47:46.276  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 08:47:46.857  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 08:47:47.180  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 08:47:47.322  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 08:47:47.324  INFO --- [           main] l.command                                : Using deploymentId: 5259667323
2024-09-02 08:47:47.327  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 08:47:47.370  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 08:47:47.383  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 08:47:47.384  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-02 08:47:47.397  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 08:47:47.403  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 08:47:47.404  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-02 08:47:47.411  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 08:47:47.418  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 08:47:47.428  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 08:47:47.429  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 17ms
2024-09-02 08:47:47.437  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 08:47:47.444  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 08:47:47.448  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 08:47:47.449  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-02 08:47:47.454  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 08:47:47.457  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 08:47:47.460  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 08:47:47.463  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 08:47:47.469  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 08:47:47.469  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-02 08:47:47.478  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 08:47:47.479  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 08:47:47.479  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 08:47:47.479  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 08:47:47.480  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 08:47:47.480  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 08:47:47.481  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 08:47:47.484  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 08:47:47.485  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 08:47:47.487  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 08:47:47.489  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 08:47:47.616  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 08:47:47.725  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 08:47:47.782  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 08:47:48.138  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 08:47:49.639  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 08:47:49.701  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 08:47:50.593  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 08:47:50.632  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 6b76e0dd-1e85-4cb5-ad50-c6fac74a9ac8

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 08:47:50.917 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 08:47:51.080 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 08:47:51.169  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7db57566, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2aabd5a0, org.springframework.security.web.context.SecurityContextHolderFilter@1264dbc9, org.springframework.security.web.header.HeaderWriterFilter@7e7f72, org.springframework.web.filter.CorsFilter@5cb4e255, org.springframework.security.web.authentication.logout.LogoutFilter@7a4ea134, de.telran.urlshortener.security.JwtFilter@61b60600, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@47b6f580, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5eb054, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@16c9ec5b, org.springframework.security.web.session.SessionManagementFilter@4825aad0, org.springframework.security.web.access.ExceptionTranslationFilter@e9fa0ea, org.springframework.security.web.access.intercept.AuthorizationFilter@1979d616]
2024-09-02 08:47:51.326 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 08:47:51.379 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 08:47:51.744  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 08:47:51.763  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 08:47:51.776  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 9.292 seconds (process running for 10.91)
2024-09-02 08:47:52.007 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:47:52.082 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 08:47:52.104 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:47:52.114 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:47:52.117 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 08:47:52.120 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:47:52.122 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 08:47:52.125 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:47:52.128 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:47:52.135 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 08:47:52.290 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 08:47:52.305 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 08:47:52.311 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 08:47:52.442 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 08:47:52.444 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 08:49:24.292  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 08:49:24.295  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 08:49:24.298  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 08:49:27.066  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 08:49:27.108  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 69672 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 08:49:27.112  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 08:49:28.347  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 08:49:28.432  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 4 JPA repository interfaces.
2024-09-02 08:49:29.209  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 08:49:29.228  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 08:49:29.230  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 08:49:29.231  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 08:49:29.292  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 08:49:29.295  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2131 ms
2024-09-02 08:49:29.538  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 08:49:29.772  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:709fe1a2-77e6-4d4c-95a3-3a5714dc3c1b user=SA
2024-09-02 08:49:29.774  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 08:49:29.864  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 08:49:30.404  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 08:49:30.530  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 08:49:30.679  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 08:49:30.681  INFO --- [           main] l.command                                : Using deploymentId: 5259770680
2024-09-02 08:49:30.684  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 08:49:30.728  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 08:49:30.741  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 08:49:30.743  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-02 08:49:30.753  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 08:49:30.759  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 08:49:30.759  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 5ms
2024-09-02 08:49:30.766  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 08:49:30.771  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 08:49:30.778  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 08:49:30.779  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 12ms
2024-09-02 08:49:30.785  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 08:49:30.790  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 08:49:30.794  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 08:49:30.794  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 8ms
2024-09-02 08:49:30.799  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 08:49:30.801  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 08:49:30.805  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 08:49:30.808  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 08:49:30.813  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 08:49:30.813  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 14ms
2024-09-02 08:49:30.822  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 08:49:30.822  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 08:49:30.823  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 08:49:30.823  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 08:49:30.823  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 08:49:30.823  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 08:49:30.825  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 08:49:30.828  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 08:49:30.828  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 08:49:30.831  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 08:49:30.832  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 08:49:30.952  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 08:49:31.022  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 08:49:31.064  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 08:49:31.345  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 08:49:32.607  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 08:49:32.661  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 08:49:33.562  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 08:49:33.597  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 3aa663aa-23bb-4c1a-8770-68b01aba6177

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 08:49:33.843 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 08:49:34.005 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 08:49:34.079  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7db57566, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2aabd5a0, org.springframework.security.web.context.SecurityContextHolderFilter@1264dbc9, org.springframework.security.web.header.HeaderWriterFilter@7e7f72, org.springframework.web.filter.CorsFilter@5cb4e255, org.springframework.security.web.authentication.logout.LogoutFilter@7a4ea134, de.telran.urlshortener.security.JwtFilter@6238d5e0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@47b6f580, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5eb054, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@16c9ec5b, org.springframework.security.web.session.SessionManagementFilter@4825aad0, org.springframework.security.web.access.ExceptionTranslationFilter@e9fa0ea, org.springframework.security.web.access.intercept.AuthorizationFilter@1979d616]
2024-09-02 08:49:34.228 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 08:49:34.278 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 08:49:34.610  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 08:49:34.637  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 08:49:34.654  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.021 seconds (process running for 9.338)
2024-09-02 08:49:34.850 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:49:34.926 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 08:49:34.947 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:49:34.956 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:49:34.959 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 08:49:34.962 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:49:34.963 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 08:49:34.967 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:49:34.970 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 08:49:34.976 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 08:49:35.134 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 08:49:35.149 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 08:49:35.155 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 08:49:35.286 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 08:49:35.287 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 08:49:45.997  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 08:49:45.997  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 08:49:45.998 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 08:49:45.998 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 08:49:45.998 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 08:49:45.999 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5524e471
2024-09-02 08:49:46.000 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@14b3976
2024-09-02 08:49:46.000 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 08:49:46.000  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 2 ms
2024-09-02 08:49:46.016  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 08:49:46.031  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 08:49:46.043 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 08:49:46.047 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:49:46.081 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:49:46.119 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 08:49:46.120 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 08:49:46.120 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 08:49:46.120 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:49:46.121 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:49:46.121 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:49:46.122 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 08:49:46.123 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:49:46.120 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 08:49:46.126 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:49:46.127 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:49:46.131 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:49:46.134 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:49:46.150 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:49:46.168 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:49:46.956 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 08:49:46.958 DEBUG --- [nio-8080-exec-8] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:49:46.961 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:49:46.990 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 08:49:46.991 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 08:49:46.995 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 08:49:46.997 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 08:49:47.001 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:49:47.013 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 08:49:47.017 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 08:49:47.028 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 08:49:47.055 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 08:49:47.056 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 08:49:47.805  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 731 ms
2024-09-02 08:49:47.826 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 08:49:47.830 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 08:49:47.832 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:43:55.955 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 10:43:55.957 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 10:43:55.978 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@45805053]
2024-09-02 10:43:55.994 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 10:43:56.012 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 10:43:56.025 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 10:43:56.239 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 10:43:56.240 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@497c664f]
2024-09-02 10:43:56.243 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:44:40.083 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/users/2", parameters={}
2024-09-02 10:44:40.084 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-09-02 10:44:40.086  INFO --- [nio-8080-exec-8] d.t.u.c.UserController                   : Received request to get user with ID: 2
2024-09-02 10:44:40.086  INFO --- [nio-8080-exec-8] d.t.u.s.UserService                      : Fetching user with ID: 2
2024-09-02 10:44:40.104 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-02 10:44:40.111 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 10:44:40.114  INFO --- [nio-8080-exec-8] d.t.u.s.UserService                      : User with ID: 2 fetched successfully
2024-09-02 10:44:40.114  INFO --- [nio-8080-exec-8] d.t.u.c.UserController                   : User fetched successfully with ID: 2
2024-09-02 10:44:40.118 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 10:44:40.118 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@610a9b12]
2024-09-02 10:44:40.124 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:44:51.306 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : PUT "/users/3", parameters={}
2024-09-02 10:44:51.307 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-02 10:44:51.311 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@528a3eb7]
2024-09-02 10:44:51.340 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 10:44:51.357 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PUT "/error", parameters={}
2024-09-02 10:44:51.358 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 10:44:51.362 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 10:44:51.364 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 10:44:51 CEST 2024, status=403, error=Forbidden, path=/users/3}]
2024-09-02 10:44:51.372 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 10:45:17.268 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-02 10:45:17.269 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-02 10:45:17.271 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@24c14f6]
2024-09-02 10:45:17.273  INFO --- [nio-8080-exec-7] d.t.u.c.UserController                   : Received request to create user with username: petya
2024-09-02 10:45:17.273  INFO --- [nio-8080-exec-7] d.t.u.s.UserService                      : Attempting to create user with username: petya and email: petya@example.com
2024-09-02 10:45:17.279 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 10:45:17.439 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 10:45:17.446 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 10:45:17.456 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-09-02 10:45:17.467 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 10:45:17.475  INFO --- [nio-8080-exec-7] d.t.u.s.UserService                      : User created successfully with ID: 3
2024-09-02 10:45:17.476  INFO --- [nio-8080-exec-7] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-09-02 10:45:17.478 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 10:45:17.479 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@255d350b]
2024-09-02 10:45:17.481 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:45:48.197 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : PATCH "/users/3/role?newRole=PAID", parameters={masked}
2024-09-02 10:45:48.198 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-02 10:45:48.202 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 10:45:48.216 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PATCH "/error?newRole=PAID", parameters={masked}
2024-09-02 10:45:48.218 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 10:45:48.220 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 10:45:48.220 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 10:45:48 CEST 2024, status=403, error=Forbidden, path=/users/3/role}]
2024-09-02 10:45:48.222 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 10:54:21.642 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 10:54:21.643 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:54:21.648 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:54:21.680 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 10:54:21.681 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:54:21.682 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 10:54:21.683 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:54:21.683 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 10:54:21.684 DEBUG --- [nio-8080-exec-8] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:54:21.686 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:54:21.686 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 10:54:21.687 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:54:21.687 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 10:54:21.688 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:54:21.686 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:54:21.692 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:54:21.695 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:54:21.711 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:54:22.434 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 10:54:22.434 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:54:22.436 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:54:22.464 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 10:54:22.464 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 10:54:22.465 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 10:54:22.466 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 10:54:22.468 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:54:22.474 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 10:54:22.474 DEBUG --- [io-8080-exec-10] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:54:22.476 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:54:22.501 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 10:54:22.501 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 10:54:22.514 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 10:54:22.521 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 10:54:22.523 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:54:22.528 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 10:54:22.528 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:54:22.538 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:56:42.173 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 10:56:42.174 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 10:56:42.175 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@6bc6d03d]
2024-09-02 10:56:42.178 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 10:56:42.184 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 10:56:42.188 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 10:56:42.329 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 10:56:42.329 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@5adf14f9]
2024-09-02 10:56:42.330 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:57:18.941 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-02 10:57:18.942 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-02 10:57:18.944 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@51fb7f54]
2024-09-02 10:57:18.944  INFO --- [nio-8080-exec-7] d.t.u.c.UserController                   : Received request to create user with username: petya
2024-09-02 10:57:18.944  INFO --- [nio-8080-exec-7] d.t.u.s.UserService                      : Attempting to create user with username: petya and email: petya@example.com
2024-09-02 10:57:18.947 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 10:57:18.954  WARN --- [nio-8080-exec-7] d.t.u.s.UserService                      : Attempted to create user with already existing email: petya@example.com
2024-09-02 10:57:18.955 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Failed to complete request: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
2024-09-02 10:57:18.956 ERROR --- [nio-8080-exec-7] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use] with root cause
de.telran.urlshortener.exception.UserNameAlreadyTakenException: Email already in use
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:42)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:32)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at de.telran.urlshortener.controller.UserController$$SpringCGLIB$$0.createUser(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 10:57:18.969 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-09-02 10:57:18.969 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 10:57:18.971 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 10:57:18.971 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 10:57:18 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-09-02 10:57:18.973 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-09-02 10:57:41.971 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-02 10:57:41.971 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-02 10:57:41.972 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@17b6eda1]
2024-09-02 10:57:41.973  INFO --- [io-8080-exec-10] d.t.u.c.UserController                   : Received request to create user with username: petya
2024-09-02 10:57:41.973  INFO --- [io-8080-exec-10] d.t.u.s.UserService                      : Attempting to create user with username: petya and email: petya1@example.com
2024-09-02 10:57:41.975 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 10:57:42.120 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 10:57:42.126  WARN --- [io-8080-exec-10] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 23505, SQLState: 23505
2024-09-02 10:57:42.127 ERROR --- [io-8080-exec-10] o.h.e.j.s.SqlExceptionHelper             :      : "PUBLIC.CONSTRAINT_INDEX_4D ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 3 */ 'petya' )"
Unique index or primary key violation: "PUBLIC.CONSTRAINT_INDEX_4D ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 3 */ 'petya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]
2024-09-02 10:57:42.141 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.dao.DataIntegrityViolationException: could not execute statement [     : "PUBLIC.CONSTRAINT_INDEX_4D ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 3 */ 'petya' )"
Unique index or primary key violation: "PUBLIC.CONSTRAINT_INDEX_4D ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 3 */ 'petya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]] [insert into users (email,password,user_name,id) values (?,?,?,default)]; SQL [insert into users (email,password,user_name,id) values (?,?,?,default)]; constraint ["PUBLIC.CONSTRAINT_INDEX_4D ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 3 */ 'petya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]]
2024-09-02 10:57:42.142 ERROR --- [io-8080-exec-10] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement [     : "PUBLIC.CONSTRAINT_INDEX_4D ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 3 */ 'petya' )"
Unique index or primary key violation: "PUBLIC.CONSTRAINT_INDEX_4D ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 3 */ 'petya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]] [insert into users (email,password,user_name,id) values (?,?,?,default)]; SQL [insert into users (email,password,user_name,id) values (?,?,?,default)]; constraint ["PUBLIC.CONSTRAINT_INDEX_4D ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 3 */ 'petya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]]] with root cause
org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException:      : "PUBLIC.CONSTRAINT_INDEX_4D ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 3 */ 'petya' )"
Unique index or primary key violation: "PUBLIC.CONSTRAINT_INDEX_4D ON PUBLIC.USERS(USER_NAME NULLS FIRST) VALUES ( /* 3 */ 'petya' )"; SQL statement:
insert into users (email,password,user_name,id) values (?,?,?,default) [23505-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:520)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.index.Index.getDuplicateKeyException(Index.java:527)
	at org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)
	at org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)
	at org.h2.command.dml.Insert.insertRows(Insert.java:174)
	at org.h2.command.dml.Insert.update(Insert.java:135)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:242)
	at org.h2.command.CommandContainer.update(CommandContainer.java:163)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:216)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:174)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performInsert(GetGeneratedKeysDelegate.java:107)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorPostInsertSingleTable.execute(MutationExecutorPostInsertSingleTable.java:100)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2860)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:667)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:290)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:271)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:321)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:386)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:300)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:219)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:134)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:766)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:750)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)
	at jdk.proxy2/jdk.proxy2.$Proxy150.persist(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy150.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:618)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)
	at jdk.proxy2/jdk.proxy2.$Proxy159.save(Unknown Source)
	at de.telran.urlshortener.service.UserService.createUser(UserService.java:51)
	at de.telran.urlshortener.controller.UserController.createUser(UserController.java:32)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at de.telran.urlshortener.controller.UserController$$SpringCGLIB$$0.createUser(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:70)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 10:57:42.153 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for POST "/error", parameters={}
2024-09-02 10:57:42.153 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 10:57:42.154 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 10:57:42.154 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 10:57:42 CEST 2024, status=500, error=Internal Server Error, path=/users}]
2024-09-02 10:57:42.155 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 500
2024-09-02 10:58:08.615 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/users/2", parameters={}
2024-09-02 10:58:08.615 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-09-02 10:58:08.616  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : Received request to get user with ID: 2
2024-09-02 10:58:08.616  INFO --- [nio-8080-exec-3] d.t.u.s.UserService                      : Fetching user with ID: 2
2024-09-02 10:58:08.617 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-02 10:58:08.622 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 10:58:08.624  INFO --- [nio-8080-exec-3] d.t.u.s.UserService                      : User with ID: 2 fetched successfully
2024-09-02 10:58:08.624  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : User fetched successfully with ID: 2
2024-09-02 10:58:08.625 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 10:58:08.625 DEBUG --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@33d23f86]
2024-09-02 10:58:08.626 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:58:22.127 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/users/3", parameters={}
2024-09-02 10:58:22.128 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-09-02 10:58:22.129  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : Received request to get user with ID: 3
2024-09-02 10:58:22.129  INFO --- [nio-8080-exec-1] d.t.u.s.UserService                      : Fetching user with ID: 3
2024-09-02 10:58:22.131 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-02 10:58:22.151 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 10:58:22.154  INFO --- [nio-8080-exec-1] d.t.u.s.UserService                      : User with ID: 3 fetched successfully
2024-09-02 10:58:22.155  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : User fetched successfully with ID: 3
2024-09-02 10:58:22.156 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 10:58:22.157 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@357d849c]
2024-09-02 10:58:22.160 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:06.215 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 10:59:06.216 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:06.218 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:06.254 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 10:59:06.255 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 10:59:06.255 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 10:59:06.255 DEBUG --- [nio-8080-exec-8] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:06.255 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:06.255 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 10:59:06.256 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:06.254 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 10:59:06.255 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:06.257 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:06.259 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:06.260 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:06.259 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:06.262 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:06.274 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:07.086 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 10:59:07.086 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:07.088 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:07.114 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 10:59:07.115 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 10:59:07.116 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 10:59:07.116 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 10:59:07.117 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:07.121 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 10:59:07.122 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:07.124 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:07.149 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 10:59:07.149 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 10:59:07.156 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 10:59:07.161 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 10:59:07.162 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:07.162 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 10:59:07.164 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:07.166 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:14.335  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 10:59:14.338  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 10:59:14.340  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 10:59:20.580  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 10:59:20.635  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 132473 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 10:59:20.641  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 10:59:22.012  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 10:59:22.103  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 80 ms. Found 4 JPA repository interfaces.
2024-09-02 10:59:23.094  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 10:59:23.111  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 10:59:23.114  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 10:59:23.114  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 10:59:23.188  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 10:59:23.191  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2480 ms
2024-09-02 10:59:23.487  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 10:59:23.799  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:7e4e386c-7731-467a-9dba-271987caf662 user=SA
2024-09-02 10:59:23.801  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 10:59:23.916  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 10:59:24.594  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 10:59:24.956  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 10:59:25.112  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 10:59:25.114  INFO --- [           main] l.command                                : Using deploymentId: 5267565113
2024-09-02 10:59:25.116  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 10:59:25.157  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 10:59:25.174  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 10:59:25.176  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-02 10:59:25.192  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 10:59:25.200  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 10:59:25.201  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-02 10:59:25.210  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 10:59:25.215  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 10:59:25.224  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 10:59:25.224  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-02 10:59:25.231  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 10:59:25.237  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 10:59:25.240  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 10:59:25.241  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-02 10:59:25.246  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 10:59:25.248  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 10:59:25.252  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 10:59:25.255  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 10:59:25.261  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 10:59:25.262  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-02 10:59:25.272  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 10:59:25.273  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 10:59:25.273  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 10:59:25.274  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 10:59:25.274  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 10:59:25.274  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 10:59:25.276  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 10:59:25.279  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 10:59:25.280  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 10:59:25.283  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 10:59:25.285  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 10:59:25.409  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 10:59:25.500  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 10:59:25.545  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 10:59:25.841  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 10:59:27.232  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 10:59:27.295  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 10:59:28.251  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 10:59:28.288  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: ca43e733-5002-4620-9297-fc618b62d8ff

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 10:59:28.585 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 10:59:28.778 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 10:59:28.870  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6272936b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7da6e22a, org.springframework.security.web.context.SecurityContextHolderFilter@570cef1e, org.springframework.security.web.header.HeaderWriterFilter@e9fa0ea, org.springframework.web.filter.CorsFilter@7db57566, org.springframework.security.web.authentication.logout.LogoutFilter@423325e0, de.telran.urlshortener.security.JwtFilter@61b60600, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1264dbc9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@77f2807f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2aabd5a0, org.springframework.security.web.session.SessionManagementFilter@7da4c956, org.springframework.security.web.access.ExceptionTranslationFilter@5ca8157c, org.springframework.security.web.access.intercept.AuthorizationFilter@48bafe39]
2024-09-02 10:59:29.103 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 10:59:29.187 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 10:59:29.664  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 10:59:29.685  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 10:59:29.699  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 9.609 seconds (process running for 11.294)
2024-09-02 10:59:29.909 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 10:59:29.994 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 10:59:30.017 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 10:59:30.027 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 10:59:30.029 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 10:59:30.033 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 10:59:30.035 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 10:59:30.038 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 10:59:30.042 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 10:59:30.050 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 10:59:30.217 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 10:59:30.236 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 10:59:30.242 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 10:59:30.373 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 10:59:30.375 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 10:59:36.061  INFO --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 10:59:36.061  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 10:59:36.062 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 10:59:36.062 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 10:59:36.062 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 10:59:36.064 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5524e471
2024-09-02 10:59:36.064 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@7731fb94
2024-09-02 10:59:36.065 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 10:59:36.065  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-09-02 10:59:36.083  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 10:59:36.101  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 10:59:36.117 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 10:59:36.120 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:36.168 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:36.206 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 10:59:36.209 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:36.215 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:36.217 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 10:59:36.221 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 10:59:36.223 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 10:59:36.224 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:36.224 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:36.218 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 10:59:36.224 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:36.226 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:36.234 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:36.244 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:36.258 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:36.298 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:37.202 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 10:59:37.203 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:37.206 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:37.245 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 10:59:37.246 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 10:59:37.248 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 10:59:37.249 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 10:59:37.252 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:37.274 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 10:59:37.278 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 10:59:37.287 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 10:59:37.332 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 10:59:37.333 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 10:59:38.289  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 933 ms
2024-09-02 10:59:38.320 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 10:59:38.335 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 10:59:38.336 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:00:42.676 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 11:00:42.677 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 11:00:42.702 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@1e6cd259]
2024-09-02 11:00:42.715 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 11:00:42.727 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 11:00:42.733 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 11:00:42.909 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 11:00:42.909 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@4321048d]
2024-09-02 11:00:42.911 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:01:14.975 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-02 11:01:14.976 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-02 11:01:14.978 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@55bc5daa]
2024-09-02 11:01:14.978  INFO --- [nio-8080-exec-7] d.t.u.c.UserController                   : Received request to create user with username: petya
2024-09-02 11:01:14.978  INFO --- [nio-8080-exec-7] d.t.u.s.UserService                      : Attempting to create user with username: petya and email: petya@example.com
2024-09-02 11:01:14.981 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 11:01:15.114 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 11:01:15.117 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:01:15.125 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-09-02 11:01:15.130 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 11:01:15.132  INFO --- [nio-8080-exec-7] d.t.u.s.UserService                      : User created successfully with ID: 3
2024-09-02 11:01:15.132  INFO --- [nio-8080-exec-7] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-09-02 11:01:15.135 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 11:01:15.135 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [de.telran.urlshortener.dto.userDto.UserResponse@520a24b9]
2024-09-02 11:01:15.140 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:01:57.105 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : PATCH "/users/3/role?newRole=PAID", parameters={masked}
2024-09-02 11:01:57.105 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-02 11:01:57.124 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 11:01:57.135 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PATCH "/error?newRole=PAID", parameters={masked}
2024-09-02 11:01:57.136 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 11:01:57.139 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 11:01:57.140 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 11:01:57 CEST 2024, status=403, error=Forbidden, path=/users/3/role}]
2024-09-02 11:01:57.145 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 11:14:36.450  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 11:14:36.455  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 11:14:36.466  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 11:15:00.442  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 11:15:00.519  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 139927 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 11:15:00.526  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 11:15:02.362  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 11:15:02.492  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 117 ms. Found 4 JPA repository interfaces.
2024-09-02 11:15:03.677  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 11:15:03.693  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 11:15:03.697  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 11:15:03.698  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 11:15:03.799  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 11:15:03.804  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3170 ms
2024-09-02 11:15:04.184  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 11:15:04.553  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:ddfeeb38-895c-44d4-aa76-65f838c003d1 user=SA
2024-09-02 11:15:04.556  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 11:15:04.694  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 11:15:05.503  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 11:15:05.758  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 11:15:05.949  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 11:15:05.951  INFO --- [           main] l.command                                : Using deploymentId: 5268505950
2024-09-02 11:15:05.955  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 11:15:06.011  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 11:15:06.029  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 11:15:06.031  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 16ms
2024-09-02 11:15:06.044  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 11:15:06.053  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 11:15:06.054  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-02 11:15:06.061  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 11:15:06.066  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 11:15:06.079  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 11:15:06.079  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 18ms
2024-09-02 11:15:06.088  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 11:15:06.095  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 11:15:06.100  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 11:15:06.101  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-02 11:15:06.108  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 11:15:06.111  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 11:15:06.115  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 11:15:06.121  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 11:15:06.131  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 11:15:06.132  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 24ms
2024-09-02 11:15:06.151  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 11:15:06.152  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 11:15:06.152  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 11:15:06.153  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 11:15:06.154  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 11:15:06.155  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 11:15:06.158  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 11:15:06.163  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 11:15:06.163  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 11:15:06.167  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 11:15:06.170  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 11:15:06.354  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 11:15:06.456  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 11:15:06.527  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 11:15:06.961  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 11:15:09.093  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 11:15:09.184  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 11:15:10.416  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 11:15:10.466  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 25a97278-9110-4fd0-ac2a-11fdeed3d411

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 11:15:10.829 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 11:15:11.047 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 11:15:11.149  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5cb4e255, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@16c9ec5b, org.springframework.security.web.context.SecurityContextHolderFilter@47b6f580, org.springframework.security.web.header.HeaderWriterFilter@3787eac3, org.springframework.web.filter.CorsFilter@4001a5a1, org.springframework.security.web.authentication.logout.LogoutFilter@4dd56393, de.telran.urlshortener.security.JwtFilter@340afaf8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@34d08905, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57421698, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@34f37ed4, org.springframework.security.web.session.SessionManagementFilter@c3972d0, org.springframework.security.web.access.ExceptionTranslationFilter@7e7f72, org.springframework.security.web.access.intercept.AuthorizationFilter@7da6e22a]
2024-09-02 11:15:11.357 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 11:15:11.426 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 11:15:11.906  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 11:15:11.932  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 11:15:11.948  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 12.183 seconds (process running for 14.131)
2024-09-02 11:15:12.216 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:15:12.344 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 11:15:12.379 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:15:12.395 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:15:12.399 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 11:15:12.406 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:15:12.410 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 11:15:12.413 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:15:12.416 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:15:12.424 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 11:15:12.593 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 11:15:12.617 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 11:15:12.626 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 11:15:12.769 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 11:15:12.771 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 11:15:15.578  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 11:15:15.579  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 11:15:15.579 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 11:15:15.579 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 11:15:15.579 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 11:15:15.581 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@665fb1d8
2024-09-02 11:15:15.581 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@2e7a6dcd
2024-09-02 11:15:15.582 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 11:15:15.583  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-09-02 11:15:15.609  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 11:15:15.638  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 11:15:15.658 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 11:15:15.665 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 11:15:15.726 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:15:15.784 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 11:15:15.786 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 11:15:15.789 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 11:15:15.789 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 11:15:15.790 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 11:15:15.789 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 11:15:15.790 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 11:15:15.792 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 11:15:15.793 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 11:15:15.795 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:15:15.795 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 11:15:15.805 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:15:15.805 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:15:15.835 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:15:15.882 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:15:17.123 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 11:15:17.124 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 11:15:17.127 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:15:17.171 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 11:15:17.172 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 11:15:17.177 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 11:15:17.178 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 11:15:17.181 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:15:17.206 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 11:15:17.213 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 11:15:17.228 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:15:17.279 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 11:15:17.280 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 11:15:18.573  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 1265 ms
2024-09-02 11:15:18.612 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 11:15:18.617 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 11:15:18.619 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:17:07.568 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 11:17:07.569 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 11:17:07.597 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@67d73149]
2024-09-02 11:17:07.612 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 11:17:07.624 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 11:17:07.631 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 11:17:07.811 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 11:17:07.811 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@67c1caf3]
2024-09-02 11:17:07.813 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 11:17:57.623 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : PATCH "/users/2/role?newRole=PAID", parameters={masked}
2024-09-02 11:17:57.623 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-02 11:17:57.651 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 11:17:57.664 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PATCH "/error?newRole=PAID", parameters={masked}
2024-09-02 11:17:57.665 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 11:17:57.668 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 11:17:57.669 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 11:17:57 CEST 2024, status=403, error=Forbidden, path=/users/2/role}]
2024-09-02 11:17:57.674 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 11:38:20.431  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 11:38:20.434  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 11:38:20.437  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 11:38:25.754  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 11:38:25.798  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 152039 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 11:38:25.804  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 11:38:27.012  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 11:38:27.098  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 77 ms. Found 4 JPA repository interfaces.
2024-09-02 11:38:27.918  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 11:38:27.933  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 11:38:27.935  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 11:38:27.936  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 11:38:27.999  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 11:38:28.002  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2143 ms
2024-09-02 11:38:28.242  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 11:38:28.486  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:8f023c39-c6cf-4505-8b63-b1033662a41f user=SA
2024-09-02 11:38:28.488  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 11:38:28.579  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 11:38:29.131  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 11:38:29.357  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 11:38:29.514  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 11:38:29.516  INFO --- [           main] l.command                                : Using deploymentId: 5269909515
2024-09-02 11:38:29.519  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 11:38:29.562  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 11:38:29.577  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 11:38:29.578  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 14ms
2024-09-02 11:38:29.589  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 11:38:29.595  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 11:38:29.596  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-02 11:38:29.601  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 11:38:29.606  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 11:38:29.615  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 11:38:29.615  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 13ms
2024-09-02 11:38:29.623  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 11:38:29.629  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 11:38:29.632  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 11:38:29.633  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-02 11:38:29.638  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 11:38:29.641  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 11:38:29.644  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 11:38:29.648  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 11:38:29.653  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 11:38:29.654  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-02 11:38:29.663  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 11:38:29.663  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 11:38:29.664  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 11:38:29.664  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 11:38:29.664  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 11:38:29.665  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 11:38:29.666  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 11:38:29.669  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 11:38:29.670  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 11:38:29.672  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 11:38:29.674  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 11:38:29.778  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 11:38:29.849  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 11:38:29.894  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 11:38:30.175  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 11:38:31.473  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 11:38:31.531  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 11:38:32.415  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 11:38:32.453  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 4b1f5a78-f659-44b9-95cc-0a4891129644

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 11:38:32.730 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 11:38:32.912 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 11:38:32.988  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5cb4e255, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@16c9ec5b, org.springframework.security.web.context.SecurityContextHolderFilter@47b6f580, org.springframework.security.web.header.HeaderWriterFilter@3787eac3, org.springframework.web.filter.CorsFilter@4001a5a1, org.springframework.security.web.authentication.logout.LogoutFilter@4dd56393, de.telran.urlshortener.security.JwtFilter@340afaf8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@34d08905, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57421698, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@34f37ed4, org.springframework.security.web.session.SessionManagementFilter@c3972d0, org.springframework.security.web.access.ExceptionTranslationFilter@7e7f72, org.springframework.security.web.access.intercept.AuthorizationFilter@7da6e22a]
2024-09-02 11:38:33.146 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 11:38:33.201 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 11:38:33.555  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 11:38:33.575  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 11:38:33.588  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.295 seconds (process running for 9.739)
2024-09-02 11:38:33.765 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:38:33.831 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 11:38:33.854 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:38:33.863 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:38:33.865 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 11:38:33.869 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:38:33.870 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 11:38:33.874 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:38:33.877 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:38:33.883 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 11:38:34.036 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 11:38:34.051 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 11:38:34.057 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 11:38:34.188 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 11:38:34.190 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 11:39:10.563  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 11:39:10.564  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 11:39:10.564 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 11:39:10.564 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 11:39:10.564 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 11:39:10.566 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@665fb1d8
2024-09-02 11:39:10.566 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@2e7a6dcd
2024-09-02 11:39:10.567 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 11:39:10.567  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-09-02 11:39:10.583  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 11:39:10.599  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 11:39:10.614 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/h2-console/login.do?jsessionid=06ce7bdd592743fa64661d278935a2d7", parameters={masked}
2024-09-02 11:39:10.618 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-09-02 11:39:10.631 DEBUG --- [nio-8080-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-09-02 11:39:10.636 DEBUG --- [nio-8080-exec-1] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource h2-console/login.do.]
2024-09-02 11:39:10.638 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-09-02 11:39:13.053 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/h2-console/login.do?jsessionid=06ce7bdd592743fa64661d278935a2d7", parameters={masked}
2024-09-02 11:39:13.054 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-09-02 11:39:13.055 DEBUG --- [nio-8080-exec-2] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-09-02 11:39:13.056 DEBUG --- [nio-8080-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource h2-console/login.do.]
2024-09-02 11:39:13.056 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-09-02 11:39:16.879 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/h2-console/login.do?jsessionid=06ce7bdd592743fa64661d278935a2d7", parameters={masked}
2024-09-02 11:39:16.880 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-09-02 11:39:16.882 DEBUG --- [nio-8080-exec-3] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-09-02 11:39:16.882 DEBUG --- [nio-8080-exec-3] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource h2-console/login.do.]
2024-09-02 11:39:16.883 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-09-02 11:39:18.103 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/h2-console/login.do?jsessionid=06ce7bdd592743fa64661d278935a2d7", parameters={masked}
2024-09-02 11:39:18.104 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-09-02 11:39:18.105 DEBUG --- [nio-8080-exec-4] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-09-02 11:39:18.106 DEBUG --- [nio-8080-exec-4] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource h2-console/login.do.]
2024-09-02 11:39:18.106 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-09-02 11:39:19.738 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/h2-console/login.do?jsessionid=06ce7bdd592743fa64661d278935a2d7", parameters={masked}
2024-09-02 11:39:19.739 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-09-02 11:39:19.740 DEBUG --- [nio-8080-exec-5] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-09-02 11:39:19.741 DEBUG --- [nio-8080-exec-5] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource h2-console/login.do.]
2024-09-02 11:39:19.741 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-09-02 11:39:20.466 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/h2-console/login.do?jsessionid=06ce7bdd592743fa64661d278935a2d7", parameters={masked}
2024-09-02 11:39:20.467 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-09-02 11:39:20.468 DEBUG --- [nio-8080-exec-6] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-09-02 11:39:20.469 DEBUG --- [nio-8080-exec-6] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource h2-console/login.do.]
2024-09-02 11:39:20.470 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-09-02 11:39:28.204 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/h2-console/login.do?jsessionid=06ce7bdd592743fa64661d278935a2d7", parameters={masked}
2024-09-02 11:39:28.204 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-09-02 11:39:28.206 DEBUG --- [nio-8080-exec-7] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-09-02 11:39:28.206 DEBUG --- [nio-8080-exec-7] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource h2-console/login.do.]
2024-09-02 11:39:28.207 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 404 NOT_FOUND
2024-09-02 11:48:00.642  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 11:48:00.645  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 11:48:00.648  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 11:48:04.178  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 11:48:04.219  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 157104 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 11:48:04.224  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 11:48:05.480  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 11:48:05.564  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-09-02 11:48:06.376  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 11:48:06.389  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 11:48:06.391  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 11:48:06.392  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 11:48:06.451  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 11:48:06.453  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2177 ms
2024-09-02 11:48:06.522  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 11:48:08.853 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.getConnectionUrl(H2ConsoleAutoConfiguration.java:94)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395)
	at java.base/java.util.stream.Sink$ChainedReference.end(Sink.java:261)
	at java.base/java.util.stream.Sink$ChainedReference.end(Sink.java:261)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:575)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:260)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:616)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:622)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:627)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.logDataSources(H2ConsoleAutoConfiguration.java:86)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.lambda$h2Console$0(H2ConsoleAutoConfiguration.java:69)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.withThreadContextClassLoader(H2ConsoleAutoConfiguration.java:78)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.h2Console(H2ConsoleAutoConfiguration.java:69)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:643)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1166)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:210)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:201)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans(ServletContextInitializerBeans.java:96)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:85)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4850)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:917)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:488)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:104)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:501)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:610)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 84 more
2024-09-02 11:48:09.064  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 11:48:11.313 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 37 more
2024-09-02 11:48:11.318  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
2024-09-02 11:48:11.321  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-09-02 11:48:11.348  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-02 11:48:11.380 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 18 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 20 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 26 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 37 more
2024-09-02 11:49:05.601  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 11:49:05.639  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 157683 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 11:49:05.644  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 11:49:06.907  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 11:49:06.990  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2024-09-02 11:49:07.790  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 11:49:07.803  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 11:49:07.805  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 11:49:07.806  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 11:49:07.868  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 11:49:07.870  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2174 ms
2024-09-02 11:49:08.125  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 11:49:08.368  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:48f84acc-a2b4-47fd-9ae3-e903f9310f8a user=SA
2024-09-02 11:49:08.370  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 11:49:08.453  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 11:49:08.995  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 11:49:09.180  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 11:49:09.335  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 11:49:09.336  INFO --- [           main] l.command                                : Using deploymentId: 5270549336
2024-09-02 11:49:09.339  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 11:49:09.377  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 11:49:09.390  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 11:49:09.391  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-02 11:49:09.401  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 11:49:09.406  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 11:49:09.406  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 5ms
2024-09-02 11:49:09.412  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 11:49:09.416  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 11:49:09.424  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 11:49:09.424  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 12ms
2024-09-02 11:49:09.431  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 11:49:09.436  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 11:49:09.439  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 11:49:09.440  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-02 11:49:09.445  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 11:49:09.448  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 11:49:09.451  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 11:49:09.454  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 11:49:09.459  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 11:49:09.460  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-02 11:49:09.469  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 11:49:09.469  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 11:49:09.469  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 11:49:09.470  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 11:49:09.470  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 11:49:09.470  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 11:49:09.471  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 11:49:09.475  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 11:49:09.475  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 11:49:09.478  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 11:49:09.479  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 11:49:09.593  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 11:49:09.676  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 11:49:09.718  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 11:49:09.995  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 11:49:11.278  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 11:49:11.335  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 11:49:12.258  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 11:49:12.294  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 76e6762f-e988-4bba-87e6-426c44f3c99c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 11:49:12.579 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 11:49:12.733 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 11:49:12.806  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7db57566, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2aabd5a0, org.springframework.security.web.context.SecurityContextHolderFilter@1264dbc9, org.springframework.security.web.header.HeaderWriterFilter@7e7f72, org.springframework.web.filter.CorsFilter@5cb4e255, org.springframework.security.web.authentication.logout.LogoutFilter@7a4ea134, de.telran.urlshortener.security.JwtFilter@6238d5e0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@47b6f580, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5eb054, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@16c9ec5b, org.springframework.security.web.session.SessionManagementFilter@4825aad0, org.springframework.security.web.access.ExceptionTranslationFilter@e9fa0ea, org.springframework.security.web.access.intercept.AuthorizationFilter@1979d616]
2024-09-02 11:49:12.957 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 11:49:13.007 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 11:49:13.367  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 11:49:13.385  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 11:49:13.398  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.221 seconds (process running for 9.474)
2024-09-02 11:49:13.581 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:49:13.671 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 11:49:13.692 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:49:13.701 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:49:13.703 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 11:49:13.706 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:49:13.708 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 11:49:13.711 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:49:13.715 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:49:13.721 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 11:49:13.909 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 11:49:13.926 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 11:49:13.934 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 11:49:14.093 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 11:49:14.095 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 11:50:40.900  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 11:50:40.903  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 11:50:40.905  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 11:50:44.044  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 11:50:44.086  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 158534 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 11:50:44.090  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 11:50:45.279  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 11:50:45.363  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-09-02 11:50:46.163  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 11:50:46.177  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 11:50:46.179  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 11:50:46.180  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 11:50:46.247  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 11:50:46.249  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2107 ms
2024-09-02 11:50:46.489  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 11:50:46.724  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:3e9eae29-8b13-47ed-ba9a-c325041783ed user=SA
2024-09-02 11:50:46.726  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 11:50:46.815  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 11:50:47.368  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 11:50:47.635  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 11:50:47.782  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 11:50:47.784  INFO --- [           main] l.command                                : Using deploymentId: 5270647784
2024-09-02 11:50:47.787  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 11:50:47.830  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 11:50:47.843  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 11:50:47.844  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-02 11:50:47.856  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 11:50:47.862  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 11:50:47.863  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-02 11:50:47.870  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 11:50:47.876  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 11:50:47.885  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 11:50:47.886  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-02 11:50:47.894  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 11:50:47.899  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 11:50:47.902  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 11:50:47.903  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-02 11:50:47.908  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 11:50:47.911  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 11:50:47.914  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 11:50:47.917  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 11:50:47.923  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 11:50:47.924  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-02 11:50:47.933  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 11:50:47.933  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 11:50:47.933  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 11:50:47.934  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 11:50:47.934  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 11:50:47.934  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 11:50:47.936  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 11:50:47.939  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 11:50:47.939  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 11:50:47.942  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 11:50:47.943  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 11:50:48.048  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 11:50:48.144  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 11:50:48.190  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 11:50:48.469  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 11:50:49.798  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 11:50:49.862  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 11:50:50.735  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 11:50:50.771  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: ce95f6c6-955b-4511-9261-289449b32cef

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 11:50:51.033 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 11:50:51.194 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 11:50:51.274  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5bbd8118, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@74974165, org.springframework.security.web.context.SecurityContextHolderFilter@62291850, org.springframework.security.web.header.HeaderWriterFilter@3c511385, org.springframework.web.filter.CorsFilter@4f20ff8e, org.springframework.security.web.authentication.logout.LogoutFilter@5765cd21, de.telran.urlshortener.security.JwtFilter@3f048c86, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@45c8db36, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1e4f8430, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@391cc6cf, org.springframework.security.web.session.SessionManagementFilter@57421698, org.springframework.security.web.access.ExceptionTranslationFilter@7c943143, org.springframework.security.web.access.intercept.AuthorizationFilter@34f37ed4]
2024-09-02 11:50:51.426 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 11:50:51.482 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 11:50:51.829  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 11:50:51.857  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 11:50:51.874  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.262 seconds (process running for 9.691)
2024-09-02 11:50:52.071 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:50:52.143 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 11:50:52.165 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:50:52.177 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:50:52.181 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 11:50:52.185 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:50:52.186 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 11:50:52.190 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:50:52.194 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 11:50:52.201 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 11:50:52.364 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 11:50:52.380 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 11:50:52.387 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 11:50:52.515 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 11:50:52.517 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 11:54:10.396  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 11:54:10.399  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 11:54:10.402  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 11:54:13.662  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 11:54:13.710  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 160380 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 11:54:13.715  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 11:54:14.932  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 11:54:15.026  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 82 ms. Found 4 JPA repository interfaces.
2024-09-02 11:54:15.832  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 11:54:15.846  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 11:54:15.849  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 11:54:15.849  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 11:54:15.914  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 11:54:15.917  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2151 ms
2024-09-02 11:54:15.988  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 11:54:18.314 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.getConnectionUrl(H2ConsoleAutoConfiguration.java:94)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395)
	at java.base/java.util.stream.Sink$ChainedReference.end(Sink.java:261)
	at java.base/java.util.stream.Sink$ChainedReference.end(Sink.java:261)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:575)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:260)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:616)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:622)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:627)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.logDataSources(H2ConsoleAutoConfiguration.java:86)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.lambda$h2Console$0(H2ConsoleAutoConfiguration.java:69)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.withThreadContextClassLoader(H2ConsoleAutoConfiguration.java:78)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.h2Console(H2ConsoleAutoConfiguration.java:69)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:643)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1166)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:210)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:201)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans(ServletContextInitializerBeans.java:96)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:85)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4850)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:917)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:488)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:104)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:501)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:610)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 84 more
2024-09-02 11:54:18.535  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 11:54:20.787 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 37 more
2024-09-02 11:54:20.791  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
2024-09-02 11:54:20.795  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-09-02 11:54:20.813  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-02 11:54:20.833 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 18 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 20 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:  : "java.net.ConnectException:   : localhost"
Connection is broken: "java.net.ConnectException:   : localhost" [90067-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:442)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:330)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 26 more
Caused by: java.net.ConnectException:   
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:135)
	at org.h2.util.NetUtils.createSocket(NetUtils.java:99)
	at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:130)
	at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:438)
	... 37 more
2024-09-02 11:56:39.248  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 11:56:39.291  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 161707 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 11:56:39.296  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 11:56:40.509  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 11:56:40.594  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-09-02 11:56:41.380  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 11:56:41.395  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 11:56:41.397  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 11:56:41.398  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 11:56:41.461  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 11:56:41.463  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2116 ms
2024-09-02 11:56:41.710  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 11:56:41.950  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:98101836-af4f-401d-b074-7c79dd7f8121 user=SA
2024-09-02 11:56:41.952  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 11:56:42.044  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 11:56:42.359  INFO --- [           main] l.command                                : Logging exception.
2024-09-02 11:56:42.360  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-09-02 11:56:42.360  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-09-02 11:56:42.360  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
2024-09-02 11:56:42.361  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-09-02 11:56:42.361  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 11:56:42.363  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
2024-09-02 11:56:42.364  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 11:56:42.367  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 11:56:42.370  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-09-02 11:56:42.386  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-02 11:56:42.405 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 18 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 20 more
Caused by: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
	at liquibase.parser.core.xml.XMLChangeLogSAXParser.parseToNode(XMLChangeLogSAXParser.java:114)
	at liquibase.parser.core.xml.AbstractChangeLogParser.parse(AbstractChangeLogParser.java:15)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 36 more
2024-09-02 12:00:06.918  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:00:06.959  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 163597 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:00:06.964  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 12:00:08.193  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:00:08.280  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 77 ms. Found 4 JPA repository interfaces.
2024-09-02 12:00:09.096  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:00:09.110  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:00:09.112  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:00:09.113  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:00:09.175  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:00:09.177  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2162 ms
2024-09-02 12:00:09.442  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:00:09.688  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:ff5965eb-2fb1-4067-bf76-3cd9cf0d9d87 user=SA
2024-09-02 12:00:09.690  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:00:09.784  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:00:10.333  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:00:10.749  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:00:10.898  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:00:10.899  INFO --- [           main] l.command                                : Using deploymentId: 5271210899
2024-09-02 12:00:10.902  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:00:10.945  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:00:10.962  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:00:10.964  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-02 12:00:10.978  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:00:10.987  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:00:10.988  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-02 12:00:10.995  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:00:11.002  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:00:11.014  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:00:11.014  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 18ms
2024-09-02 12:00:11.022  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:00:11.029  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:00:11.033  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:00:11.034  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-02 12:00:11.039  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:00:11.041  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:00:11.045  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:00:11.048  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:00:11.053  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:00:11.054  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-02 12:00:11.063  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:00:11.063  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:00:11.064  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:00:11.064  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:00:11.064  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:00:11.064  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:00:11.066  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:00:11.069  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:00:11.069  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:00:11.072  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:00:11.073  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:00:11.182  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:00:11.285  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:00:11.326  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:00:11.604  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:00:12.900  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:00:12.960  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:00:13.830  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:00:13.867  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: bc931797-090d-4b73-8080-508a754c1852

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:00:14.148 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:00:14.313 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:00:14.395  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@42c7781a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d2d7a85, org.springframework.security.web.context.SecurityContextHolderFilter@6222a343, org.springframework.security.web.header.HeaderWriterFilter@5eb054, org.springframework.web.filter.CorsFilter@5cb3c9e6, org.springframework.security.web.authentication.logout.LogoutFilter@16c9ec5b, de.telran.urlshortener.security.JwtFilter@255d9277, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@47c019d7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7861a433, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@55fbebba, org.springframework.security.web.session.SessionManagementFilter@314e240c, org.springframework.security.web.access.ExceptionTranslationFilter@77f2807f, org.springframework.security.web.access.intercept.AuthorizationFilter@572d1f18]
2024-09-02 12:00:14.550 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:00:14.603 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:00:14.967  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:00:14.995  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:00:15.012  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.534 seconds (process running for 10.061)
2024-09-02 12:00:15.211 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:00:15.292 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:00:15.314 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:00:15.323 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:00:15.325 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:00:15.328 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:00:15.330 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:00:15.334 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:00:15.337 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:00:15.344 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:00:15.516 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:00:15.538 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:00:15.545 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:00:15.689 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:00:15.691 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:04:01.019  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:04:01.025  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:04:01.034  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:04:03.751  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:04:03.795  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 165651 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:04:03.800  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 12:04:04.993  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:04:05.086  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 83 ms. Found 4 JPA repository interfaces.
2024-09-02 12:04:05.909  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:04:05.924  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:04:05.926  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:04:05.927  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:04:05.989  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:04:05.991  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2140 ms
2024-09-02 12:04:06.067  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:04:06.328  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:195232d7-e7d2-4dd8-a67d-5c9be455757d user=SA
2024-09-02 12:04:06.330  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:04:06.344  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:195232d7-e7d2-4dd8-a67d-5c9be455757d'
2024-09-02 12:04:06.603  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:04:07.133  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:04:07.285  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:04:07.441  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:04:07.443  INFO --- [           main] l.command                                : Using deploymentId: 5271447442
2024-09-02 12:04:07.446  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:04:07.488  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:04:07.501  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:04:07.502  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 12ms
2024-09-02 12:04:07.511  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:04:07.516  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:04:07.517  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-02 12:04:07.523  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:04:07.527  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:04:07.534  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:04:07.535  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 12ms
2024-09-02 12:04:07.541  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:04:07.546  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:04:07.549  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:04:07.550  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 8ms
2024-09-02 12:04:07.554  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:04:07.556  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:04:07.559  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:04:07.562  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:04:07.567  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:04:07.568  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 14ms
2024-09-02 12:04:07.577  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:04:07.577  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:04:07.577  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:04:07.577  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:04:07.578  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:04:07.578  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:04:07.579  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:04:07.582  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:04:07.583  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:04:07.585  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:04:07.586  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:04:07.691  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:04:07.761  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:04:07.801  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:04:08.065  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:04:09.387  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:04:09.450  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:04:10.316  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:04:10.351  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: cacd201e-acef-4068-beee-c6dba0827f73

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:04:10.602 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:04:10.758 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:04:10.836  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5aa7bb86, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6ddccee4, org.springframework.security.web.context.SecurityContextHolderFilter@7a4ea134, org.springframework.security.web.header.HeaderWriterFilter@230383a7, org.springframework.web.filter.CorsFilter@39000894, org.springframework.security.web.authentication.logout.LogoutFilter@e00f822, de.telran.urlshortener.security.JwtFilter@710ae6a7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4dd56393, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7793eaca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4f5080ea, org.springframework.security.web.session.SessionManagementFilter@61c1be2f, org.springframework.security.web.access.ExceptionTranslationFilter@314e240c, org.springframework.security.web.access.intercept.AuthorizationFilter@77d80294]
2024-09-02 12:04:10.987 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:04:11.037 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:04:11.382  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:04:11.400  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:04:11.413  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.009 seconds (process running for 9.145)
2024-09-02 12:04:11.593 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:04:11.667 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:04:11.688 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:04:11.697 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:04:11.701 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:04:11.704 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:04:11.705 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:04:11.709 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:04:11.712 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:04:11.718 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:04:11.874 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:04:11.888 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:04:11.894 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:04:12.103 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:04:12.105 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:04:22.035  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:04:23.024  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:04:23.025  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:04:23.025 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:04:23.025 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:04:23.026 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:04:23.027 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@53b10e9a
2024-09-02 12:04:23.028 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@5c7a699b
2024-09-02 12:04:23.029 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:04:23.029  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-09-02 12:04:23.032  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:05:52.384  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:05:52.390  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:05:52.393  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:05:55.822  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:05:55.872  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 166698 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:05:55.877  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 12:05:57.087  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:05:57.172  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-09-02 12:05:57.991  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:05:58.004  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:05:58.006  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:05:58.007  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:05:58.068  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:05:58.070  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2136 ms
2024-09-02 12:05:58.136  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:05:58.404  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:0b68f14e-3306-4e25-9127-e90850f51261 user=SA
2024-09-02 12:05:58.406  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:05:58.421  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:0b68f14e-3306-4e25-9127-e90850f51261'
2024-09-02 12:05:58.699  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:05:59.227  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:05:59.522  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:05:59.675  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:05:59.677  INFO --- [           main] l.command                                : Using deploymentId: 5271559676
2024-09-02 12:05:59.680  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:05:59.718  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:05:59.731  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:05:59.733  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 12ms
2024-09-02 12:05:59.745  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:05:59.752  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:05:59.753  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-02 12:05:59.761  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:05:59.767  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:05:59.778  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:05:59.779  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 18ms
2024-09-02 12:05:59.787  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:05:59.795  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:05:59.798  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:05:59.800  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-02 12:05:59.804  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:05:59.807  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:05:59.811  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:05:59.815  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:05:59.820  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:05:59.821  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-02 12:05:59.830  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:05:59.830  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:05:59.830  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:05:59.831  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:05:59.831  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:05:59.831  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:05:59.832  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:05:59.836  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:05:59.836  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:05:59.839  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:05:59.840  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:05:59.946  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:06:00.031  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:06:00.082  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:06:00.366  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:06:01.664  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:06:01.721  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:06:02.617  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:06:02.655  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 79d8f42d-c76e-4f10-a66e-aeee0d7489c0

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:06:02.918 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:06:03.087 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:06:03.168  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2c855eb7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3a6ae0f0, org.springframework.security.web.context.SecurityContextHolderFilter@f2e28c7, org.springframework.security.web.header.HeaderWriterFilter@52813ba4, org.springframework.web.filter.CorsFilter@7854f2a2, org.springframework.security.web.authentication.logout.LogoutFilter@16dc12cf, de.telran.urlshortener.security.JwtFilter@489f62a3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@e87c4cf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7bb2b910, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@72f86029, org.springframework.security.web.session.SessionManagementFilter@228c854f, org.springframework.security.web.access.ExceptionTranslationFilter@57421698, org.springframework.security.web.access.intercept.AuthorizationFilter@7d2d7a85]
2024-09-02 12:06:03.323 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:06:03.379 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:06:03.744  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:06:03.762  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:06:03.774  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.44 seconds (process running for 9.909)
2024-09-02 12:06:03.952 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:06:04.033 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:06:04.055 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:06:04.065 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:06:04.067 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:06:04.070 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:06:04.072 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:06:04.075 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:06:04.078 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:06:04.085 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:06:04.244 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:06:04.263 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:06:04.270 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:06:04.423 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:06:04.426 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:06:10.129  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.jsp' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:06:10.517  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:06:10.517  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:06:10.518 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:06:10.518 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:06:10.518 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:06:10.521 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@561e8bab
2024-09-02 12:06:10.522 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@2d28114b
2024-09-02 12:06:10.522 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:06:10.523  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 5 ms
2024-09-02 12:06:10.525  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:11:40.656  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:11:40.659  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:11:40.661  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:11:43.499  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:11:43.541  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 169674 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:11:43.545  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 12:11:44.743  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:11:44.833  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 4 JPA repository interfaces.
2024-09-02 12:11:45.654  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:11:45.667  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:11:45.669  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:11:45.670  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:11:45.730  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:11:45.732  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2138 ms
2024-09-02 12:11:45.800  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:11:46.915 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.getConnectionUrl(H2ConsoleAutoConfiguration.java:94)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395)
	at java.base/java.util.stream.Sink$ChainedReference.end(Sink.java:261)
	at java.base/java.util.stream.Sink$ChainedReference.end(Sink.java:261)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:575)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:260)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:616)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:622)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:627)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.logDataSources(H2ConsoleAutoConfiguration.java:86)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.lambda$h2Console$0(H2ConsoleAutoConfiguration.java:69)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.withThreadContextClassLoader(H2ConsoleAutoConfiguration.java:78)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.h2Console(H2ConsoleAutoConfiguration.java:69)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:643)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1166)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:210)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:201)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans(ServletContextInitializerBeans.java:96)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:85)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4850)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:917)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:488)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:104)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:501)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:610)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
2024-09-02 12:11:47.098  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:11:48.100 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
2024-09-02 12:11:48.104  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
2024-09-02 12:11:48.107  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-09-02 12:11:48.124  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-02 12:11:48.144 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 18 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 20 more
Caused by: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 26 more
2024-09-02 12:13:38.974  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:13:39.009  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 170738 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:13:39.012  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 12:13:39.945  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:13:40.014  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 61 ms. Found 4 JPA repository interfaces.
2024-09-02 12:13:40.686  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:13:40.696  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:13:40.697  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:13:40.698  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:13:40.741  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:13:40.743  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1691 ms
2024-09-02 12:13:40.792  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:13:40.993  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:b95576c0-872b-4143-ab71-6bd14f511687 user=SA
2024-09-02 12:13:40.996  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:13:41.015  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:b95576c0-872b-4143-ab71-6bd14f511687'
2024-09-02 12:13:41.208  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:13:41.626  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:13:41.960  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:13:42.067  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:13:42.069  INFO --- [           main] l.command                                : Using deploymentId: 5272022068
2024-09-02 12:13:42.071  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:13:42.103  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:13:42.113  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:13:42.114  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 10ms
2024-09-02 12:13:42.121  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:13:42.125  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:13:42.126  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 4ms
2024-09-02 12:13:42.130  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:13:42.134  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:13:42.140  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:13:42.141  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 11ms
2024-09-02 12:13:42.154  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:13:42.159  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:13:42.162  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:13:42.162  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 7ms
2024-09-02 12:13:42.166  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:13:42.169  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:13:42.173  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:13:42.178  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:13:42.184  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:13:42.185  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 17ms
2024-09-02 12:13:42.196  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:13:42.196  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:13:42.196  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:13:42.197  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:13:42.197  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:13:42.197  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:13:42.199  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:13:42.203  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:13:42.204  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:13:42.206  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:13:42.207  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:13:42.316  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:13:42.369  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:13:42.416  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:13:42.645  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:13:43.703  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:13:43.761  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:13:44.671  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:13:44.709  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 27d68a61-9c4c-475a-8ff6-528d18b80cdd

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:13:44.984 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:13:45.138 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:13:45.213  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@470b7fcf, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6ad2a8db, org.springframework.security.web.context.SecurityContextHolderFilter@7db57566, org.springframework.security.web.header.HeaderWriterFilter@7a4ea134, org.springframework.web.filter.CorsFilter@52f8effb, org.springframework.security.web.authentication.logout.LogoutFilter@5aa7bb86, de.telran.urlshortener.security.JwtFilter@64f32e9e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5cb4e255, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@16c9ec5b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@59bdd277, org.springframework.security.web.session.SessionManagementFilter@1979d616, org.springframework.security.web.access.ExceptionTranslationFilter@423325e0, org.springframework.security.web.access.intercept.AuthorizationFilter@7b2adbde]
2024-09-02 12:13:45.367 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:13:45.417 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:13:45.780  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:13:45.798  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:13:45.811  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 7.189 seconds (process running for 8.296)
2024-09-02 12:13:45.984 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:13:46.071 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:13:46.094 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:13:46.104 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:13:46.106 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:13:46.109 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:13:46.110 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:13:46.114 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:13:46.117 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:13:46.123 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:13:46.286 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:13:46.305 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:13:46.313 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:13:46.441 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:13:46.443 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:13:54.174  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:13:54.600  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:13:54.601  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:13:54.601 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:13:54.602 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:13:54.602 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:13:54.605 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3287cf03
2024-09-02 12:13:54.606 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@529a2d6f
2024-09-02 12:13:54.607 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:13:54.607  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 6 ms
2024-09-02 12:13:54.609  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:24:42.962  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:24:42.967  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:24:42.970  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:24:46.094  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:24:46.142  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 176637 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:24:46.147  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb;DB_CLOSE_ON_EXIT=FALSE;AUTO_SERVER=TRUE"
2024-09-02 12:24:47.352  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:24:47.436  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2024-09-02 12:24:48.278  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:24:48.291  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:24:48.294  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:24:48.294  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:24:48.355  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:24:48.357  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2158 ms
2024-09-02 12:24:48.424  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:24:48.674  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:2fa90be3-07d2-4a5a-ad10-c4ea70821446 user=SA
2024-09-02 12:24:48.676  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:24:48.691  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:2fa90be3-07d2-4a5a-ad10-c4ea70821446'
2024-09-02 12:24:48.956  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:24:49.491  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:24:49.832  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:24:49.977  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:24:49.979  INFO --- [           main] l.command                                : Using deploymentId: 5272689979
2024-09-02 12:24:49.982  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:24:50.022  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:24:50.035  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:24:50.037  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-02 12:24:50.048  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:24:50.055  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:24:50.055  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-02 12:24:50.062  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:24:50.068  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:24:50.078  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:24:50.079  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 16ms
2024-09-02 12:24:50.087  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:24:50.094  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:24:50.097  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:24:50.098  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-02 12:24:50.103  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:24:50.106  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:24:50.110  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:24:50.114  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:24:50.119  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:24:50.120  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-02 12:24:50.130  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:24:50.130  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:24:50.130  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:24:50.131  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:24:50.131  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:24:50.131  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:24:50.133  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:24:50.136  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:24:50.137  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:24:50.140  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:24:50.141  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:24:50.237  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:24:50.314  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:24:50.370  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:24:50.645  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:24:51.909  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:24:51.966  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:24:52.835  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:24:52.870  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b4d80523-60c5-406c-aad1-90a81aef2c32

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:24:53.135 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:24:53.297 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:24:53.378  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7b2adbde, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d7c8a2, org.springframework.security.web.context.SecurityContextHolderFilter@1979d616, org.springframework.security.web.header.HeaderWriterFilter@61c1be2f, org.springframework.web.filter.CorsFilter@1683b9ba, org.springframework.security.web.authentication.logout.LogoutFilter@77d80294, de.telran.urlshortener.security.JwtFilter@6c6c2a73, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7da6e22a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7db57566, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@470b7fcf, org.springframework.security.web.session.SessionManagementFilter@63c31664, org.springframework.security.web.access.ExceptionTranslationFilter@3fc4e667, org.springframework.security.web.access.intercept.AuthorizationFilter@5824b485]
2024-09-02 12:24:53.529 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:24:53.582 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:24:53.915  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:24:53.944  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:24:53.961  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.296 seconds (process running for 9.706)
2024-09-02 12:24:54.161 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:24:54.236 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:24:54.258 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:24:54.267 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:24:54.269 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:24:54.272 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:24:54.274 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:24:54.277 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:24:54.280 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:24:54.287 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:24:54.454 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:24:54.471 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:24:54.477 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:24:54.607 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:24:54.609 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:25:05.394  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:25:05.769  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:25:05.770  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:25:05.770 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:25:05.771 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:25:05.771 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:25:05.774 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1f02ce3
2024-09-02 12:25:05.775 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@412bb41f
2024-09-02 12:25:05.776 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:25:05.776  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 6 ms
2024-09-02 12:25:05.779  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:26:27.020  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:26:27.024  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:26:27.028  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:26:29.611  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:26:29.642  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 177615 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:26:29.646  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb;DB_CLOSE_ON_EXIT=FALSE;AUTO_SERVER=TRUE"
2024-09-02 12:26:30.571  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:26:30.639  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 60 ms. Found 4 JPA repository interfaces.
2024-09-02 12:26:31.287  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:26:31.297  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:26:31.299  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:26:31.299  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:26:31.343  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:26:31.345  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1661 ms
2024-09-02 12:26:31.390  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:26:31.614  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:df66ba80-33c4-47df-b752-d60c43042cb6 user=SA
2024-09-02 12:26:31.616  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:26:31.629  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:df66ba80-33c4-47df-b752-d60c43042cb6'
2024-09-02 12:26:31.831  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:26:32.231  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:26:32.328  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:26:32.431  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:26:32.433  INFO --- [           main] l.command                                : Using deploymentId: 5272792432
2024-09-02 12:26:32.435  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:26:32.472  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:26:32.485  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:26:32.486  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 12ms
2024-09-02 12:26:32.495  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:26:32.499  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:26:32.500  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 4ms
2024-09-02 12:26:32.505  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:26:32.510  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:26:32.516  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:26:32.517  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 11ms
2024-09-02 12:26:32.522  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:26:32.526  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:26:32.529  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:26:32.529  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 7ms
2024-09-02 12:26:32.533  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:26:32.535  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:26:32.537  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:26:32.540  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:26:32.544  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:26:32.545  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 12ms
2024-09-02 12:26:32.552  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:26:32.552  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:26:32.552  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:26:32.553  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:26:32.553  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:26:32.553  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:26:32.554  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:26:32.556  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:26:32.557  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:26:32.559  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:26:32.560  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:26:32.633  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:26:32.698  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:26:32.751  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:26:32.973  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:26:33.898  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:26:33.955  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:26:34.818  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:26:34.856  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b0fad4da-2273-4993-ab54-8584264eeab7

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:26:35.135 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:26:35.297 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:26:35.384  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1683b9ba, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@470b7fcf, org.springframework.security.web.context.SecurityContextHolderFilter@7da6e22a, org.springframework.security.web.header.HeaderWriterFilter@5a5c041f, org.springframework.web.filter.CorsFilter@6ad2a8db, org.springframework.security.web.authentication.logout.LogoutFilter@1a2d9177, de.telran.urlshortener.security.JwtFilter@7b211077, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2aabd5a0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5cb4e255, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@52f8effb, org.springframework.security.web.session.SessionManagementFilter@608c03e3, org.springframework.security.web.access.ExceptionTranslationFilter@61c1be2f, org.springframework.security.web.access.intercept.AuthorizationFilter@7734ddb8]
2024-09-02 12:26:35.534 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:26:35.586 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:26:35.948  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:26:35.976  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:26:35.993  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.715 seconds (process running for 7.896)
2024-09-02 12:26:36.209 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:26:36.286 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:26:36.309 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:26:36.320 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:26:36.322 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:26:36.326 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:26:36.327 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:26:36.331 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:26:36.334 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:26:36.340 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:26:36.498 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:26:36.516 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:26:36.523 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:26:36.652 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:26:36.654 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:26:41.298  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/test.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:26:41.682  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:26:41.683  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:26:41.683 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:26:41.684 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:26:41.684 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:26:41.686 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@136a2e3b
2024-09-02 12:26:41.687 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@1cb09347
2024-09-02 12:26:41.687 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:26:41.687  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-09-02 12:26:41.690  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:27:53.377  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:27:53.381  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:27:53.384  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:27:56.399  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:27:56.443  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 178500 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:27:56.448  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb;DB_CLOSE_ON_EXIT=FALSE;AUTO_SERVER=TRUE"
2024-09-02 12:27:57.671  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:27:57.754  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73 ms. Found 4 JPA repository interfaces.
2024-09-02 12:27:58.557  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:27:58.570  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:27:58.573  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:27:58.573  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:27:58.639  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:27:58.641  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2139 ms
2024-09-02 12:27:58.711  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:27:58.976  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:ef401d70-230e-4081-a82f-a3874d6b059b user=SA
2024-09-02 12:27:58.979  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:27:58.994  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:ef401d70-230e-4081-a82f-a3874d6b059b'
2024-09-02 12:27:59.267  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:27:59.801  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:28:00.106  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:28:00.245  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:28:00.247  INFO --- [           main] l.command                                : Using deploymentId: 5272880246
2024-09-02 12:28:00.249  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:28:00.287  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:28:00.301  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:28:00.302  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-02 12:28:00.313  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:28:00.320  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:28:00.321  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-02 12:28:00.328  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:28:00.334  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:28:00.343  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:28:00.344  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 16ms
2024-09-02 12:28:00.351  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:28:00.357  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:28:00.361  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:28:00.362  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-02 12:28:00.368  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:28:00.370  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:28:00.374  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:28:00.378  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:28:00.384  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:28:00.385  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 17ms
2024-09-02 12:28:00.396  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:28:00.397  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:28:00.397  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:28:00.397  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:28:00.397  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:28:00.398  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:28:00.399  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:28:00.402  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:28:00.403  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:28:00.405  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:28:00.407  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:28:00.504  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:28:00.580  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:28:00.631  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:28:00.908  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:28:02.203  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:28:02.269  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:28:03.143  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:28:03.187  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 844f2680-081c-4395-936e-8546c46d9a85

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:28:03.468 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:28:03.637 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:28:03.717  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5824b485, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c2b8df7, org.springframework.security.web.context.SecurityContextHolderFilter@63c31664, org.springframework.security.web.header.HeaderWriterFilter@5a4ceb1, org.springframework.web.filter.CorsFilter@7734ddb8, org.springframework.security.web.authentication.logout.LogoutFilter@740ef827, de.telran.urlshortener.security.JwtFilter@590013c7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@608c03e3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1979d616, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7b2adbde, org.springframework.security.web.session.SessionManagementFilter@1a262e93, org.springframework.security.web.access.ExceptionTranslationFilter@e87c4cf, org.springframework.security.web.access.intercept.AuthorizationFilter@1a91d15f]
2024-09-02 12:28:03.875 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:28:03.927 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:28:04.275  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:28:04.292  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:28:04.305  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.368 seconds (process running for 9.805)
2024-09-02 12:28:04.479 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:28:04.553 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:28:04.574 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:28:04.583 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:28:04.586 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:28:04.589 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:28:04.591 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:28:04.595 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:28:04.598 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:28:04.604 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:28:04.756 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:28:04.770 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:28:04.776 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:28:04.907 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:28:04.909 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:28:11.799  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:28:12.134  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:28:12.135  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:28:12.136 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:28:12.136 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:28:12.137 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:28:12.140 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1f4dce67
2024-09-02 12:28:12.141 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@74f1e112
2024-09-02 12:28:12.141 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:28:12.142  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 6 ms
2024-09-02 12:28:12.144  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:30:11.900  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:30:11.906  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:30:11.912  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:30:15.051  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:30:15.094  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 179751 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:30:15.099  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb"
2024-09-02 12:30:16.279  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:30:16.364  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2024-09-02 12:30:17.174  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:30:17.195  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:30:17.198  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:30:17.198  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:30:17.261  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:30:17.263  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2111 ms
2024-09-02 12:30:17.332  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:30:17.603  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:1ded9935-1b72-47ce-8f87-0283258426c0 user=SA
2024-09-02 12:30:17.605  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:30:17.621  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:1ded9935-1b72-47ce-8f87-0283258426c0'
2024-09-02 12:30:17.910  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:30:18.445  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:30:18.755  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:30:18.890  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:30:18.891  INFO --- [           main] l.command                                : Using deploymentId: 5273018891
2024-09-02 12:30:18.894  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:30:18.934  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:30:18.946  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:30:18.947  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 12ms
2024-09-02 12:30:18.957  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:30:18.963  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:30:18.964  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-02 12:30:18.972  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:30:18.978  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:30:18.989  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:30:18.990  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 17ms
2024-09-02 12:30:18.998  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:30:19.005  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:30:19.010  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:30:19.010  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-02 12:30:19.017  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:30:19.020  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:30:19.024  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:30:19.029  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:30:19.036  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:30:19.037  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 19ms
2024-09-02 12:30:19.050  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:30:19.050  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:30:19.051  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:30:19.051  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:30:19.052  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:30:19.052  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:30:19.054  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:30:19.058  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:30:19.058  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:30:19.061  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:30:19.062  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:30:19.169  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:30:19.248  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:30:19.298  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:30:19.584  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:30:20.858  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:30:20.916  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:30:21.802  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:30:21.838  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 287674f5-bffc-49a1-8052-284f7b02b328

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:30:22.100 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:30:22.263 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:30:22.343  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1683b9ba, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@470b7fcf, org.springframework.security.web.context.SecurityContextHolderFilter@7da6e22a, org.springframework.security.web.header.HeaderWriterFilter@5a5c041f, org.springframework.web.filter.CorsFilter@6ad2a8db, org.springframework.security.web.authentication.logout.LogoutFilter@1a2d9177, de.telran.urlshortener.security.JwtFilter@7b211077, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2aabd5a0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5cb4e255, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@52f8effb, org.springframework.security.web.session.SessionManagementFilter@608c03e3, org.springframework.security.web.access.ExceptionTranslationFilter@61c1be2f, org.springframework.security.web.access.intercept.AuthorizationFilter@7734ddb8]
2024-09-02 12:30:22.502 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:30:22.557 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:30:22.922  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:30:22.950  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:30:22.967  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.365 seconds (process running for 9.812)
2024-09-02 12:30:23.154 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:30:23.236 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:30:23.258 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:30:23.267 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:30:23.269 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:30:23.272 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:30:23.273 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:30:23.276 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:30:23.279 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:30:23.286 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:30:23.441 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:30:23.456 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:30:23.463 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:30:23.593 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:30:23.595 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:30:27.274  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.jsp' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:30:27.669  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:30:27.670  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:30:27.671 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:30:27.671 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:30:27.671 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:30:27.674 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@136a2e3b
2024-09-02 12:30:27.675 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@1cb09347
2024-09-02 12:30:27.676 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:30:27.676  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 6 ms
2024-09-02 12:30:27.679  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:31:09.628  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:31:09.632  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:31:09.634  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:31:12.739  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:31:12.784  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 180294 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:31:12.789  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb;DB_CLOSE_DELAY=-1"
2024-09-02 12:31:14.012  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:31:14.101  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 4 JPA repository interfaces.
2024-09-02 12:31:14.905  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:31:14.920  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:31:14.922  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:31:14.923  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:31:14.983  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:31:14.986  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2145 ms
2024-09-02 12:31:15.055  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:31:15.317  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:5fb646a0-f038-4d04-af9e-ba40e59f10b3 user=SA
2024-09-02 12:31:15.319  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:31:15.335  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:5fb646a0-f038-4d04-af9e-ba40e59f10b3'
2024-09-02 12:31:15.601  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:31:16.152  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:31:16.366  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:31:16.508  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:31:16.509  INFO --- [           main] l.command                                : Using deploymentId: 5273076509
2024-09-02 12:31:16.512  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:31:16.550  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:31:16.563  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:31:16.564  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 12ms
2024-09-02 12:31:16.574  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:31:16.581  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:31:16.582  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-02 12:31:16.588  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:31:16.594  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:31:16.603  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:31:16.604  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-02 12:31:16.611  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:31:16.632  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:31:16.635  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:31:16.636  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 24ms
2024-09-02 12:31:16.641  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:31:16.644  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:31:16.648  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:31:16.652  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:31:16.658  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:31:16.658  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-02 12:31:16.668  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:31:16.668  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:31:16.669  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:31:16.669  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:31:16.669  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:31:16.670  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:31:16.671  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:31:16.674  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:31:16.675  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:31:16.678  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:31:16.679  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:31:16.781  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:31:16.857  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:31:16.903  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:31:17.175  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:31:18.460  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:31:18.518  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:31:19.411  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:31:19.450  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 4105714d-fed3-41d1-bb76-d7f6b3d458ce

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:31:19.712 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:31:19.869 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:31:19.949  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@77d80294, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@74940388, org.springframework.security.web.context.SecurityContextHolderFilter@61c1be2f, org.springframework.security.web.header.HeaderWriterFilter@53425450, org.springframework.web.filter.CorsFilter@1a2d9177, org.springframework.security.web.authentication.logout.LogoutFilter@8588a62, de.telran.urlshortener.security.JwtFilter@25d911a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5a5c041f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7a4ea134, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5aa7bb86, org.springframework.security.web.session.SessionManagementFilter@5a4ceb1, org.springframework.security.web.access.ExceptionTranslationFilter@340ef431, org.springframework.security.web.access.intercept.AuthorizationFilter@740ef827]
2024-09-02 12:31:20.103 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:31:20.155 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:31:20.493  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:31:20.510  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:31:20.523  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.224 seconds (process running for 9.662)
2024-09-02 12:31:20.692 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:31:20.772 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:31:20.797 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:31:20.808 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:31:20.810 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:31:20.813 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:31:20.815 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:31:20.818 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:31:20.821 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:31:20.828 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:31:20.981 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:31:20.996 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:31:21.003 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:31:21.138 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:31:21.140 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:31:28.919  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:31:29.291  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:31:29.292  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:31:29.293 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:31:29.293 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:31:29.294 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:31:29.296 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@56d9ef05
2024-09-02 12:31:29.297 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@42b4cce1
2024-09-02 12:31:29.298 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:31:29.299  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 6 ms
2024-09-02 12:31:29.302  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:32:56.041  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:32:56.046  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:32:56.050  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:32:58.507  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:32:58.539  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 181295 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:32:58.542  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb;DB_CLOSE_DELAY=-1"
2024-09-02 12:32:59.455  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:32:59.523  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 61 ms. Found 4 JPA repository interfaces.
2024-09-02 12:33:00.202  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:33:00.212  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:33:00.214  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:33:00.214  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:33:00.257  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:33:00.258  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1677 ms
2024-09-02 12:33:00.307  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:33:00.529  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:c7bf2b9c-7610-4eb2-b9da-97dfbc2ac775 user=SA
2024-09-02 12:33:00.531  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:33:00.544  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:c7bf2b9c-7610-4eb2-b9da-97dfbc2ac775'
2024-09-02 12:33:00.731  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:33:01.146  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:33:01.347  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:33:01.460  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:33:01.461  INFO --- [           main] l.command                                : Using deploymentId: 5273181461
2024-09-02 12:33:01.463  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:33:01.491  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:33:01.500  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:33:01.501  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 9ms
2024-09-02 12:33:01.508  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:33:01.511  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:33:01.512  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 4ms
2024-09-02 12:33:01.516  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:33:01.519  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:33:01.525  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:33:01.525  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 9ms
2024-09-02 12:33:01.530  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:33:01.533  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:33:01.536  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:33:01.536  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 6ms
2024-09-02 12:33:01.539  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:33:01.542  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:33:01.544  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:33:01.546  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:33:01.551  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:33:01.551  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 11ms
2024-09-02 12:33:01.559  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:33:01.559  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:33:01.560  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:33:01.560  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:33:01.561  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:33:01.561  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:33:01.562  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:33:01.566  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:33:01.566  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:33:01.568  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:33:01.570  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:33:01.674  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:33:01.718  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:33:01.749  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:33:01.974  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:33:02.890  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:33:02.929  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:33:03.544  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:33:03.568  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 6757fb42-6cad-42b5-9382-939864595538

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:33:03.730 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:33:03.864 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:33:03.915  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@52f8effb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@59bdd277, org.springframework.security.web.context.SecurityContextHolderFilter@5cb4e255, org.springframework.security.web.header.HeaderWriterFilter@4dd56393, org.springframework.web.filter.CorsFilter@45543b88, org.springframework.security.web.authentication.logout.LogoutFilter@39000894, de.telran.urlshortener.security.JwtFilter@64f32e9e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4001a5a1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@34f37ed4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3a3fc789, org.springframework.security.web.session.SessionManagementFilter@7da6e22a, org.springframework.security.web.access.ExceptionTranslationFilter@7a4ea134, org.springframework.security.web.access.intercept.AuthorizationFilter@1683b9ba]
2024-09-02 12:33:04.019 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:33:04.070 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:33:04.423  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:33:04.442  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:33:04.455  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.281 seconds (process running for 7.446)
2024-09-02 12:33:04.645 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:33:04.728 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:33:04.750 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:33:04.759 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:33:04.761 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:33:04.765 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:33:04.766 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:33:04.770 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:33:04.773 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:33:04.779 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:33:04.943 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:33:04.960 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:33:04.967 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:33:05.097 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:33:05.098 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:33:12.495  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:33:12.860  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:33:12.861  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:33:12.861 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:33:12.861 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:33:12.862 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:33:12.864 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@f511a8e
2024-09-02 12:33:12.865 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4a28b6d0
2024-09-02 12:33:12.866 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:33:12.866  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 5 ms
2024-09-02 12:33:12.869  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:33:53.716  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:33:53.721  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:33:53.723  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:33:56.906  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:33:56.948  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 181861 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:33:56.953  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb"
2024-09-02 12:33:58.439  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:33:58.522  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2024-09-02 12:33:59.313  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:33:59.327  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:33:59.330  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:33:59.331  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:33:59.392  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:33:59.394  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2382 ms
2024-09-02 12:33:59.463  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:33:59.725  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:8f6a0497-c704-42bc-bb3b-28f7db0834d1 user=SA
2024-09-02 12:33:59.728  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:33:59.743  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:8f6a0497-c704-42bc-bb3b-28f7db0834d1'
2024-09-02 12:34:00.008  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:34:00.565  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:34:00.868  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:34:01.018  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:34:01.020  INFO --- [           main] l.command                                : Using deploymentId: 5273241019
2024-09-02 12:34:01.023  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:34:01.062  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:34:01.076  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:34:01.078  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 14ms
2024-09-02 12:34:01.090  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:34:01.096  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:34:01.097  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-02 12:34:01.105  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:34:01.110  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:34:01.119  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:34:01.121  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-02 12:34:01.128  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:34:01.133  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:34:01.137  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:34:01.137  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-02 12:34:01.142  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:34:01.144  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:34:01.147  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:34:01.151  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:34:01.157  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:34:01.157  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-02 12:34:01.166  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:34:01.166  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:34:01.167  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:34:01.167  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:34:01.167  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:34:01.168  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:34:01.169  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:34:01.172  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:34:01.173  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:34:01.175  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:34:01.176  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:34:01.279  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:34:01.356  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:34:01.403  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:34:01.688  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:34:02.999  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:34:03.057  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:34:03.932  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:34:03.970  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b89bec67-f9d4-4a08-875c-6bf1928ae27e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:34:04.232 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:34:04.395 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:34:04.474  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5aa7bb86, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6ddccee4, org.springframework.security.web.context.SecurityContextHolderFilter@7a4ea134, org.springframework.security.web.header.HeaderWriterFilter@230383a7, org.springframework.web.filter.CorsFilter@39000894, org.springframework.security.web.authentication.logout.LogoutFilter@e00f822, de.telran.urlshortener.security.JwtFilter@bb6f3f7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4dd56393, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7793eaca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4f5080ea, org.springframework.security.web.session.SessionManagementFilter@61c1be2f, org.springframework.security.web.access.ExceptionTranslationFilter@314e240c, org.springframework.security.web.access.intercept.AuthorizationFilter@77d80294]
2024-09-02 12:34:04.626 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:34:04.681 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:34:05.046  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:34:05.064  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:34:05.077  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.6 seconds (process running for 10.035)
2024-09-02 12:34:05.270 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:34:05.348 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:34:05.371 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:34:05.380 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:34:05.383 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:34:05.386 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:34:05.388 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:34:05.391 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:34:05.394 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:34:05.401 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:34:05.558 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:34:05.571 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:34:05.577 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:34:05.706 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:34:05.708 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:34:09.178  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/test.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:34:09.554  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:34:09.554  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:34:09.555 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:34:09.555 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:34:09.555 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:34:09.558 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2116e9cf
2024-09-02 12:34:09.559 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@5c7a699b
2024-09-02 12:34:09.560 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:34:09.560  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 6 ms
2024-09-02 12:34:09.563  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:34:41.369  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:34:41.373  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:34:41.376  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:34:44.856  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:34:44.885  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 182330 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:34:44.890  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb"
2024-09-02 12:34:46.131  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:34:46.220  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 4 JPA repository interfaces.
2024-09-02 12:34:47.062  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:34:47.075  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:34:47.078  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:34:47.078  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:34:47.138  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:34:47.140  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2198 ms
2024-09-02 12:34:47.205  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:34:47.479  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:2af4b609-1b17-4351-b8b8-c8a9a9e32aad user=SA
2024-09-02 12:34:47.481  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:34:47.496  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:2af4b609-1b17-4351-b8b8-c8a9a9e32aad'
2024-09-02 12:34:47.761  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:34:48.321  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:34:48.594  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:34:48.732  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:34:48.734  INFO --- [           main] l.command                                : Using deploymentId: 5273288733
2024-09-02 12:34:48.737  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:34:48.776  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:34:48.789  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:34:48.790  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 12ms
2024-09-02 12:34:48.800  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:34:48.809  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:34:48.810  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-02 12:34:48.819  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:34:48.826  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:34:48.839  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:34:48.840  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 21ms
2024-09-02 12:34:48.858  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:34:48.865  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:34:48.870  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:34:48.871  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-02 12:34:48.877  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:34:48.880  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:34:48.885  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:34:48.890  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:34:48.897  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:34:48.897  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-09-02 12:34:48.907  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:34:48.907  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:34:48.907  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:34:48.908  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:34:48.908  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:34:48.908  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:34:48.909  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:34:48.913  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:34:48.913  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:34:48.916  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:34:48.917  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:34:49.022  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:34:49.125  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:34:49.170  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:34:49.463  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:34:50.731  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:34:50.789  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:34:51.663  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:34:51.701  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: f9dc5e13-e9c7-4c0c-a3ad-40c11edcb9e2

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:34:51.982 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:34:52.142 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:34:52.221  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4c2b8df7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7734ddb8, org.springframework.security.web.context.SecurityContextHolderFilter@48bafe39, org.springframework.security.web.header.HeaderWriterFilter@3fc4e667, org.springframework.web.filter.CorsFilter@7b2adbde, org.springframework.security.web.authentication.logout.LogoutFilter@198eeb36, de.telran.urlshortener.security.JwtFilter@64f32e9e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1979d616, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6272936b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6d7c8a2, org.springframework.security.web.session.SessionManagementFilter@720b52a7, org.springframework.security.web.access.ExceptionTranslationFilter@7bb2b910, org.springframework.security.web.access.intercept.AuthorizationFilter@518d4537]
2024-09-02 12:34:52.377 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:34:52.429 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:34:52.804  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:34:52.822  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:34:52.835  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.421 seconds (process running for 9.948)
2024-09-02 12:34:53.018 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:34:53.102 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:34:53.123 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:34:53.133 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:34:53.135 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:34:53.138 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:34:53.139 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:34:53.143 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:34:53.146 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:34:53.152 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:34:53.307 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:34:53.325 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:34:53.333 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:34:53.464 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:34:53.465 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:35:00.637  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.jsp' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:35:00.970  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:35:00.971  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:35:00.972 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:35:00.972 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:35:00.972 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:35:00.975 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7f0977d6
2024-09-02 12:35:00.976 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@3b87c881
2024-09-02 12:35:00.977 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:35:00.978  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 7 ms
2024-09-02 12:35:00.980  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:50:06.636  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-02 12:50:06.814  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-02 12:50:07.426  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:50:07.466  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 189918 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:50:07.473  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "testdb"
2024-09-02 12:50:07.530 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e
2024-09-02 12:50:09.144  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:50:09.238  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 81 ms. Found 4 JPA repository interfaces.
2024-09-02 12:50:10.179  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:50:10.482  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:648228e2-6e9f-447e-bde1-e659c3326ada user=SA
2024-09-02 12:50:10.485  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:50:10.608  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:50:11.349  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:50:11.561  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:50:11.726  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:50:11.729  INFO --- [           main] l.command                                : Using deploymentId: 5274211728
2024-09-02 12:50:11.731  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:50:11.777  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:50:11.793  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:50:11.794  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 15ms
2024-09-02 12:50:11.810  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:50:11.819  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:50:11.820  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-02 12:50:11.828  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:50:11.836  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:50:11.848  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:50:11.849  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 20ms
2024-09-02 12:50:11.858  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:50:11.868  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:50:11.872  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:50:11.873  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 14ms
2024-09-02 12:50:11.879  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:50:11.882  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:50:11.903  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:50:11.908  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:50:11.913  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:50:11.914  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 34ms
2024-09-02 12:50:11.925  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:50:11.925  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:50:11.926  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:50:11.926  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:50:11.927  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:50:11.927  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:50:11.929  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:50:11.933  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:50:11.933  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:50:11.936  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:50:11.938  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:50:12.099  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:50:12.185  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:50:12.247  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:50:12.607  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:50:14.102  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:50:14.162  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:50:15.224  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:50:15.270  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 9d1deff7-85c2-4484-af38-19d024359148

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:50:15.635 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:50:15.890 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:50:15.962  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@743167c7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d5a4e59, org.springframework.security.web.context.SecurityContextHolderFilter@2fb006dc, org.springframework.security.web.header.HeaderWriterFilter@2251cc2e, org.springframework.web.filter.CorsFilter@5710f755, org.springframework.security.web.authentication.logout.LogoutFilter@640c2749, de.telran.urlshortener.security.JwtFilter@27ca8a5a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2abe5132, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@12fbc568, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b78c34b, org.springframework.security.web.session.SessionManagementFilter@7caa5387, org.springframework.security.web.access.ExceptionTranslationFilter@20307cb9, org.springframework.security.web.access.intercept.AuthorizationFilter@5c18ad5d]
2024-09-02 12:50:16.331 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:50:16.388 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:50:16.706  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:648228e2-6e9f-447e-bde1-e659c3326ada'
2024-09-02 12:50:16.843  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 9.778 seconds (process running for 12.387)
2024-09-02 12:50:17.096 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:50:17.187 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:50:17.216 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:50:17.230 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:50:17.233 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:50:17.238 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:50:17.241 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:50:17.247 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:50:17.252 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:50:17.262 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:50:17.464 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:50:17.482 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:50:17.487 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:50:17.599 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:50:17.601 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:50:18.513 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e, started on Mon Sep 02 12:50:07 CEST 2024
2024-09-02 12:50:18.529  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:50:18.534  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:50:18.538  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:50:26.493  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:50:26.500  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:50:26.535  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:50:31.635  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:50:31.680  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 190195 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:50:31.685  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb"
2024-09-02 12:50:32.901  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:50:32.987  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 4 JPA repository interfaces.
2024-09-02 12:50:33.788  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:50:33.804  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:50:33.806  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:50:33.807  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:50:33.869  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:50:33.871  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2128 ms
2024-09-02 12:50:33.937  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:50:34.191  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:4d3410fc-ea92-4763-9dcd-ea735bb5f97b user=SA
2024-09-02 12:50:34.193  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:50:34.208  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:4d3410fc-ea92-4763-9dcd-ea735bb5f97b'
2024-09-02 12:50:34.482  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:50:35.011  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:50:35.353  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:50:35.497  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:50:35.499  INFO --- [           main] l.command                                : Using deploymentId: 5274235498
2024-09-02 12:50:35.502  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:50:35.541  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:50:35.554  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:50:35.555  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 12ms
2024-09-02 12:50:35.566  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:50:35.572  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:50:35.573  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-02 12:50:35.580  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:50:35.585  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:50:35.595  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:50:35.596  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-02 12:50:35.602  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:50:35.609  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:50:35.612  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:50:35.613  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-02 12:50:35.617  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:50:35.620  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:50:35.623  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:50:35.626  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:50:35.631  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:50:35.632  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 14ms
2024-09-02 12:50:35.641  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:50:35.641  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:50:35.642  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:50:35.642  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:50:35.642  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:50:35.642  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:50:35.644  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:50:35.647  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:50:35.647  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:50:35.649  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:50:35.651  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:50:35.755  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:50:35.834  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:50:35.883  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:50:36.167  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:50:37.456  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:50:37.518  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:50:38.373  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:50:38.417  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 13a86a22-e911-4d12-9767-ff3d47ff3d94

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:50:38.664 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:50:38.828 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:50:38.908  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5824b485, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c2b8df7, org.springframework.security.web.context.SecurityContextHolderFilter@63c31664, org.springframework.security.web.header.HeaderWriterFilter@5a4ceb1, org.springframework.web.filter.CorsFilter@7734ddb8, org.springframework.security.web.authentication.logout.LogoutFilter@740ef827, de.telran.urlshortener.security.JwtFilter@590013c7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@608c03e3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1979d616, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7b2adbde, org.springframework.security.web.session.SessionManagementFilter@1a262e93, org.springframework.security.web.access.ExceptionTranslationFilter@e87c4cf, org.springframework.security.web.access.intercept.AuthorizationFilter@1a91d15f]
2024-09-02 12:50:39.063 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:50:39.116 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:50:39.448  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:50:39.472  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:50:39.485  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.278 seconds (process running for 9.746)
2024-09-02 12:50:39.658 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:50:39.732 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:50:39.754 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:50:39.763 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:50:39.765 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:50:39.769 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:50:39.770 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:50:39.774 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:50:39.777 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:50:39.783 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:50:39.938 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:50:39.953 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:50:39.960 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:50:40.090 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:50:40.091 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:50:52.312  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:50:52.748  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:50:52.749  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:50:52.750 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:50:52.750 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:50:52.751 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:50:52.753 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1f4dce67
2024-09-02 12:50:52.754 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@74f1e112
2024-09-02 12:50:52.755 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:50:52.756  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 5 ms
2024-09-02 12:50:52.758  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:51:41.346  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:51:41.351  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:51:41.357  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:51:44.493  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:51:44.527  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 190929 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:51:44.533  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb"
2024-09-02 12:51:45.746  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:51:45.832  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 77 ms. Found 4 JPA repository interfaces.
2024-09-02 12:51:46.665  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:51:46.679  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:51:46.681  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:51:46.682  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:51:46.746  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:51:46.749  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2156 ms
2024-09-02 12:51:46.819  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:51:47.096  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:9f3ed0ee-8c94-4172-86e1-c3796505a7a4 user=SA
2024-09-02 12:51:47.099  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:51:47.113  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:9f3ed0ee-8c94-4172-86e1-c3796505a7a4'
2024-09-02 12:51:47.379  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:51:47.900  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:51:48.256  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:51:48.408  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:51:48.409  INFO --- [           main] l.command                                : Using deploymentId: 5274308409
2024-09-02 12:51:48.412  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:51:48.450  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:51:48.463  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:51:48.464  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-02 12:51:48.476  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:51:48.482  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:51:48.483  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-02 12:51:48.491  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:51:48.498  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:51:48.508  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:51:48.509  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 17ms
2024-09-02 12:51:48.517  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:51:48.524  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:51:48.528  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:51:48.529  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-02 12:51:48.534  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:51:48.536  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:51:48.539  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:51:48.543  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:51:48.548  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:51:48.548  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 14ms
2024-09-02 12:51:48.557  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:51:48.557  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:51:48.558  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:51:48.558  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:51:48.558  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:51:48.559  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:51:48.560  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:51:48.563  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:51:48.564  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:51:48.566  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:51:48.568  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:51:48.669  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:51:48.756  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:51:48.808  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:51:49.097  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:51:50.420  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:51:50.477  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:51:51.380  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:51:51.416  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 153b05ef-cee9-4da1-ac70-0fd3ca930cf8

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:51:51.680 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:51:51.840 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:51:51.924  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1a91d15f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@518d4537, org.springframework.security.web.context.SecurityContextHolderFilter@1a262e93, org.springframework.security.web.header.HeaderWriterFilter@494e7290, org.springframework.web.filter.CorsFilter@1a42da0a, org.springframework.security.web.authentication.logout.LogoutFilter@3a6ae0f0, de.telran.urlshortener.security.JwtFilter@2fee69a1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5765cd21, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@63c31664, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5824b485, org.springframework.security.web.session.SessionManagementFilter@7793eaca, org.springframework.security.web.access.ExceptionTranslationFilter@7861a433, org.springframework.security.web.access.intercept.AuthorizationFilter@4f5080ea]
2024-09-02 12:51:52.074 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:51:52.124 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:51:52.485  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:51:52.502  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:51:52.514  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.474 seconds (process running for 9.943)
2024-09-02 12:51:52.691 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:51:52.773 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:51:52.797 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:51:52.806 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:51:52.808 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:51:52.811 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:51:52.813 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:51:52.817 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:51:52.820 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:51:52.827 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:51:52.991 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:51:53.010 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:51:53.016 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:51:53.145 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:51:53.147 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:52:22.635  INFO --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:52:22.635  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:52:22.636 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:52:22.636 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:52:22.636 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:52:22.637 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@36f2bfe6
2024-09-02 12:52:22.638 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@54e63f7c
2024-09-02 12:52:22.638 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:52:22.638  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed initialization in 2 ms
2024-09-02 12:52:22.654  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:52:22.669  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:52:22.681 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 12:52:22.684 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 12:52:22.718 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 12:52:22.750 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 12:52:22.751 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 12:52:22.755 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 12:52:22.806 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 12:52:22.810 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 12:52:22.812 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 12:52:22.813 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 12:52:22.814 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 12:52:22.814 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 12:52:22.816 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 12:52:22.816 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 12:52:22.824 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 12:52:22.826 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 12:52:22.847 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 12:52:22.894 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 12:52:23.795 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 12:52:23.796 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 12:52:23.799 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 12:52:23.835 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 12:52:23.836 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 12:52:23.861 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 12:52:23.866 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 12:52:23.878 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 12:52:23.902 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 12:52:23.903 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 12:52:24.799  INFO --- [nio-8080-exec-9] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 871 ms
2024-09-02 12:52:24.831 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 12:52:24.836 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 12:52:24.837 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 12:53:08.760 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 12:53:08.760 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 12:53:08.788 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@2c12f754]
2024-09-02 12:53:08.802 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 12:53:08.813 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 12:53:08.820 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 12:53:08.988 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 12:53:08.989 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@14951be5]
2024-09-02 12:53:08.990 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 12:54:01.118 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : PATCH "/users/2/role?newRole=PAID", parameters={masked}
2024-09-02 12:54:01.119 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-02 12:54:01.134 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 12:54:01.144 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PATCH "/error?newRole=PAID", parameters={masked}
2024-09-02 12:54:01.145 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 12:54:01.149 DEBUG --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 12:54:01.149 DEBUG --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 12:54:01 CEST 2024, status=403, error=Forbidden, path=/users/2/role}]
2024-09-02 12:54:01.155 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 12:57:07.235  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:57:07.237  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:57:07.239  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:57:11.299  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:57:11.328  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 193766 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:57:11.331  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 12:57:12.200  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:57:12.288  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 81 ms. Found 4 JPA repository interfaces.
2024-09-02 12:57:13.134  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:57:13.148  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:57:13.151  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:57:13.151  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:57:13.214  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:57:13.216  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1849 ms
2024-09-02 12:57:13.291  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:57:13.560  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dba77465-3c13-4f99-bce8-b48dff36b6fb user=SA
2024-09-02 12:57:13.563  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:57:13.579  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dba77465-3c13-4f99-bce8-b48dff36b6fb'
2024-09-02 12:57:13.851  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:57:14.387  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:57:14.653  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:57:14.791  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:57:14.792  INFO --- [           main] l.command                                : Using deploymentId: 5274634792
2024-09-02 12:57:14.806  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:57:14.845  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:57:14.859  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:57:14.860  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 14ms
2024-09-02 12:57:14.872  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:57:14.879  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:57:14.880  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-02 12:57:14.887  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:57:14.894  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:57:14.902  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:57:14.903  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-02 12:57:14.910  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:57:14.915  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:57:14.919  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:57:14.920  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-02 12:57:14.924  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:57:14.927  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:57:14.930  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:57:14.933  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:57:14.938  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:57:14.939  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 14ms
2024-09-02 12:57:14.948  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:57:14.948  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:57:14.949  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:57:14.949  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:57:14.949  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:57:14.949  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:57:14.951  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:57:14.954  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:57:14.954  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:57:14.957  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:57:14.959  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:57:15.061  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:57:15.134  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:57:15.199  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:57:15.469  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:57:16.764  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:57:16.829  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:57:17.730  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:57:17.767  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 01bffa52-a1b9-45c2-abf3-2955100b7ea0

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:57:18.041 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:57:18.197 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:57:18.277  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1a42da0a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5824b485, org.springframework.security.web.context.SecurityContextHolderFilter@5765cd21, org.springframework.security.web.header.HeaderWriterFilter@7bb2b910, org.springframework.web.filter.CorsFilter@4c2b8df7, org.springframework.security.web.authentication.logout.LogoutFilter@72f86029, de.telran.urlshortener.security.JwtFilter@6a4af081, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@48bafe39, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@608c03e3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7734ddb8, org.springframework.security.web.session.SessionManagementFilter@7c09037a, org.springframework.security.web.access.ExceptionTranslationFilter@494e7290, org.springframework.security.web.access.intercept.AuthorizationFilter@23ec291e]
2024-09-02 12:57:18.448 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:57:18.508 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:57:18.892  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:57:18.917  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:57:18.932  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 7.957 seconds (process running for 9.097)
2024-09-02 12:57:19.200 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:57:19.305 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:57:19.339 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:57:19.355 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:57:19.358 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:57:19.363 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:57:19.366 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:57:19.372 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:57:19.377 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:57:19.388 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:57:19.567 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:57:19.580 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:57:19.585 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:57:19.714 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:57:19.715 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:57:27.794  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:57:27.821  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:57:27.822  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:57:27.822 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:57:27.822 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:57:27.822 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:57:27.824 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@35f34ccc
2024-09-02 12:57:27.824 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@3b87c881
2024-09-02 12:57:27.824 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:57:27.825  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-09-02 12:57:27.825  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for ERROR dispatch to '/error' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:58:22.013  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:58:22.018  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:58:22.022  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:58:26.970  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:58:27.019  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 194620 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:58:27.025  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 12:58:28.249  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:58:28.334  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 4 JPA repository interfaces.
2024-09-02 12:58:29.153  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:58:29.167  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:58:29.231  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:58:29.232  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:58:29.295  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:58:29.298  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2209 ms
2024-09-02 12:58:29.368  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:58:29.643  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:78ea5a46-f3ba-4e2f-bb0e-960392b153e9 user=SA
2024-09-02 12:58:29.645  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:58:29.662  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:78ea5a46-f3ba-4e2f-bb0e-960392b153e9'
2024-09-02 12:58:29.938  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:58:30.450  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:58:30.741  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:58:30.890  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:58:30.892  INFO --- [           main] l.command                                : Using deploymentId: 5274710891
2024-09-02 12:58:30.894  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:58:30.937  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:58:30.951  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:58:30.953  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-02 12:58:30.965  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:58:30.971  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:58:30.972  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-02 12:58:30.979  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:58:30.985  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:58:30.996  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:58:30.997  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 16ms
2024-09-02 12:58:31.005  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:58:31.012  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:58:31.015  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:58:31.016  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-02 12:58:31.022  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:58:31.025  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:58:31.029  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:58:31.032  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:58:31.037  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:58:31.038  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-02 12:58:31.047  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:58:31.048  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:58:31.048  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:58:31.048  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:58:31.049  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:58:31.049  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:58:31.050  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:58:31.054  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:58:31.054  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:58:31.057  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:58:31.058  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:58:31.162  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:58:31.257  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:58:31.305  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:58:31.600  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:58:32.897  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:58:32.956  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:58:33.839  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:58:33.875  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: f3df6b6b-aa44-448e-bd78-4293ff808569

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:58:34.139 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:58:34.300 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:58:34.381  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1a2d9177, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5aa7bb86, org.springframework.security.web.context.SecurityContextHolderFilter@5a5c041f, org.springframework.security.web.header.HeaderWriterFilter@7222e168, org.springframework.web.filter.CorsFilter@6ddccee4, org.springframework.security.web.authentication.logout.LogoutFilter@28e12bc5, de.telran.urlshortener.security.JwtFilter@36df4c26, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@16124894, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4dd56393, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@39000894, org.springframework.security.web.session.SessionManagementFilter@f55ecec, org.springframework.security.web.access.ExceptionTranslationFilter@53425450, org.springframework.security.web.access.intercept.AuthorizationFilter@4690cb47]
2024-09-02 12:58:34.535 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:58:34.586 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:58:34.955  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:58:34.974  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:58:34.986  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.442 seconds (process running for 9.952)
2024-09-02 12:58:35.156 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:58:35.247 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:58:35.269 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:58:35.278 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:58:35.282 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:58:35.285 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:58:35.287 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:58:35.290 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:58:35.293 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:58:35.299 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:58:35.468 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:58:35.484 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:58:35.489 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:58:35.618 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:58:35.619 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:58:42.531  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:58:42.563  INFO --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 12:58:42.564  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 12:58:42.564 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 12:58:42.564 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 12:58:42.564 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 12:58:42.566 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@36f2bfe6
2024-09-02 12:58:42.567 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@77984827
2024-09-02 12:58:42.567 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 12:58:42.567  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-09-02 12:58:42.568  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for ERROR dispatch to '/error' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 12:59:06.513  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:59:06.518  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 12:59:06.522  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 12:59:11.688  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 12:59:11.736  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 195125 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 12:59:11.742  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 12:59:12.990  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 12:59:13.075  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 4 JPA repository interfaces.
2024-09-02 12:59:13.891  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 12:59:13.905  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 12:59:13.907  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 12:59:13.908  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 12:59:13.971  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 12:59:13.973  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2177 ms
2024-09-02 12:59:14.044  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 12:59:14.306  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:835b35f7-6286-472e-ac9c-653e665258cc user=SA
2024-09-02 12:59:14.308  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 12:59:14.322  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:835b35f7-6286-472e-ac9c-653e665258cc'
2024-09-02 12:59:14.579  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 12:59:15.107  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 12:59:15.271  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:59:15.415  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 12:59:15.417  INFO --- [           main] l.command                                : Using deploymentId: 5274755417
2024-09-02 12:59:15.420  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 12:59:15.458  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 12:59:15.471  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 12:59:15.472  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 12ms
2024-09-02 12:59:15.482  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 12:59:15.488  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 12:59:15.488  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 5ms
2024-09-02 12:59:15.495  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 12:59:15.500  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 12:59:15.508  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 12:59:15.508  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 12ms
2024-09-02 12:59:15.515  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 12:59:15.520  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 12:59:15.523  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 12:59:15.524  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-02 12:59:15.528  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 12:59:15.531  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 12:59:15.534  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 12:59:15.538  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 12:59:15.543  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 12:59:15.543  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 14ms
2024-09-02 12:59:15.552  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 12:59:15.552  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 12:59:15.552  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 12:59:15.553  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 12:59:15.553  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 12:59:15.553  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 12:59:15.554  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 12:59:15.557  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 12:59:15.558  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 12:59:15.560  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 12:59:15.561  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 12:59:15.665  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 12:59:15.740  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 12:59:15.783  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 12:59:16.061  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 12:59:17.382  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 12:59:17.440  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 12:59:18.334  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 12:59:18.372  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 9a48e9ca-daa1-4bad-8785-4ae1e9de33b7

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 12:59:18.640 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 12:59:18.795 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 12:59:18.869  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@74940388, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1a2d9177, org.springframework.security.web.context.SecurityContextHolderFilter@423325e0, org.springframework.security.web.header.HeaderWriterFilter@314e240c, org.springframework.web.filter.CorsFilter@5aa7bb86, org.springframework.security.web.authentication.logout.LogoutFilter@572d1f18, de.telran.urlshortener.security.JwtFilter@489f62a3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7a4ea134, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@16124894, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6ddccee4, org.springframework.security.web.session.SessionManagementFilter@3fc4e667, org.springframework.security.web.access.ExceptionTranslationFilter@50d02417, org.springframework.security.web.access.intercept.AuthorizationFilter@198eeb36]
2024-09-02 12:59:19.022 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 12:59:19.075 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 12:59:19.419  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 12:59:19.437  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 12:59:19.450  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.194 seconds (process running for 9.697)
2024-09-02 12:59:19.626 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:59:19.706 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:59:19.728 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:59:19.738 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:59:19.742 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:59:19.745 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:59:19.747 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 12:59:19.750 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:59:19.754 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 12:59:19.760 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:59:19.914 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:59:19.931 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 12:59:19.937 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 12:59:20.066 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 12:59:20.068 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 13:06:26.404  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 13:06:26.419  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 13:06:26.421  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 13:15:04.447  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 13:15:04.488  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 203091 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 13:15:04.493  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 13:15:05.683  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 13:15:05.764  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 71 ms. Found 4 JPA repository interfaces.
2024-09-02 13:15:06.572  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 13:15:06.592  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 13:15:06.595  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 13:15:06.596  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 13:15:06.659  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 13:15:06.661  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2110 ms
2024-09-02 13:15:06.727  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 13:15:06.991  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:07cf396f-c689-48e4-8fba-023fac65c793 user=SA
2024-09-02 13:15:06.993  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 13:15:07.008  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:07cf396f-c689-48e4-8fba-023fac65c793'
2024-09-02 13:15:07.268  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 13:15:07.803  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 13:15:08.147  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 13:15:08.294  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 13:15:08.296  INFO --- [           main] l.command                                : Using deploymentId: 5275708295
2024-09-02 13:15:08.299  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 13:15:08.337  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 13:15:08.352  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 13:15:08.353  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 14ms
2024-09-02 13:15:08.366  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 13:15:08.373  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 13:15:08.374  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-02 13:15:08.382  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 13:15:08.389  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 13:15:08.399  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 13:15:08.400  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 17ms
2024-09-02 13:15:08.408  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 13:15:08.414  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 13:15:08.417  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 13:15:08.418  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-02 13:15:08.423  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 13:15:08.426  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 13:15:08.430  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 13:15:08.433  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 13:15:08.439  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 13:15:08.439  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-02 13:15:08.449  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 13:15:08.450  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 13:15:08.450  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 13:15:08.450  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 13:15:08.451  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 13:15:08.451  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 13:15:08.452  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 13:15:08.456  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 13:15:08.457  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 13:15:08.459  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 13:15:08.461  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 13:15:08.576  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 13:15:08.667  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 13:15:08.713  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 13:15:08.983  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 13:15:10.268  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 13:15:10.324  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 13:15:11.191  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 13:15:11.227  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: be5e93ee-8346-432f-a04a-611471c0dba3

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 13:15:11.483 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 13:15:11.637 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 13:15:11.713  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7b2adbde, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d7c8a2, org.springframework.security.web.context.SecurityContextHolderFilter@1979d616, org.springframework.security.web.header.HeaderWriterFilter@61c1be2f, org.springframework.web.filter.CorsFilter@1683b9ba, org.springframework.security.web.authentication.logout.LogoutFilter@77d80294, de.telran.urlshortener.security.JwtFilter@6a4af081, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7da6e22a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7db57566, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@470b7fcf, org.springframework.security.web.session.SessionManagementFilter@63c31664, org.springframework.security.web.access.ExceptionTranslationFilter@3fc4e667, org.springframework.security.web.access.intercept.AuthorizationFilter@5824b485]
2024-09-02 13:15:11.862 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 13:15:11.912 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 13:15:12.293  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 13:15:12.311  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 13:15:12.325  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.314 seconds (process running for 9.766)
2024-09-02 13:15:12.521 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 13:15:12.596 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 13:15:12.618 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 13:15:12.628 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 13:15:12.631 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 13:15:12.634 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 13:15:12.636 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 13:15:12.639 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 13:15:12.642 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 13:15:12.649 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 13:15:12.802 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 13:15:12.817 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 13:15:12.823 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 13:15:12.951 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 13:15:12.953 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 13:15:50.340  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 13:15:50.341  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 13:15:50.341 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 13:15:50.341 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 13:15:50.341 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 13:15:50.342 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@62a5e4c7
2024-09-02 13:15:50.342 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@412bb41f
2024-09-02 13:15:50.343 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 13:15:50.343  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 2 ms
2024-09-02 13:15:50.355  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 13:15:50.365  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 13:15:50.376 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 13:15:50.378 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 13:15:50.406 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 13:15:50.444 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 13:15:50.446 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 13:15:50.450 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 13:15:50.474 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 13:15:50.477 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 13:15:50.480 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 13:15:50.482 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 13:15:50.481 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 13:15:50.484 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 13:15:50.487 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 13:15:50.492 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 13:15:50.499 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 13:15:50.500 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 13:15:50.518 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 13:15:50.540 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 13:15:51.048 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 13:15:51.049 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 13:15:51.052 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 13:15:51.082 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 13:15:51.082 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 13:15:51.085 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 13:15:51.087 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 13:15:51.090 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 13:15:51.104 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 13:15:51.108 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 13:15:51.114 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 13:15:51.138 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 13:15:51.139 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 13:15:51.920  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 761 ms
2024-09-02 13:15:51.941 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 13:15:51.944 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 13:15:51.945 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 13:16:44.812 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 13:16:44.813 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 13:16:44.837 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@6af9ba43]
2024-09-02 13:16:44.852 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 13:16:44.864 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 13:16:44.870 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 13:16:45.051 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 13:16:45.051 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@64885864]
2024-09-02 13:16:45.053 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 13:17:38.231 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : PATCH "/users/2/role?newRole=PAID", parameters={masked}
2024-09-02 13:17:38.232 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-02 13:17:38.248 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 13:17:38.261 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PATCH "/error?newRole=PAID", parameters={masked}
2024-09-02 13:17:38.261 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 13:17:38.264 DEBUG --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 13:17:38.264 DEBUG --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 13:17:38 CEST 2024, status=403, error=Forbidden, path=/users/2/role}]
2024-09-02 13:17:38.270 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 13:25:10.696  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 13:25:10.702  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 13:25:10.707  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 13:25:15.922  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 13:25:15.964  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 208145 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 13:25:15.969  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 13:25:17.175  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 13:25:17.260  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-09-02 13:25:18.066  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 13:25:18.080  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 13:25:18.083  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 13:25:18.083  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 13:25:18.148  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 13:25:18.151  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2125 ms
2024-09-02 13:25:18.224  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 13:25:18.502  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:732560d7-4e99-4fb8-a486-36585c567b8b user=SA
2024-09-02 13:25:18.504  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 13:25:18.520  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:732560d7-4e99-4fb8-a486-36585c567b8b'
2024-09-02 13:25:18.788  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 13:25:19.347  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 13:25:19.694  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 13:25:19.835  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 13:25:19.836  INFO --- [           main] l.command                                : Using deploymentId: 5276319836
2024-09-02 13:25:19.839  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 13:25:19.880  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 13:25:19.894  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 13:25:19.895  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-02 13:25:19.908  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 13:25:19.915  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 13:25:19.916  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-02 13:25:19.925  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 13:25:19.931  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 13:25:19.942  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 13:25:19.943  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 16ms
2024-09-02 13:25:19.950  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 13:25:19.975  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 13:25:19.979  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 13:25:19.980  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 29ms
2024-09-02 13:25:19.984  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 13:25:19.987  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 13:25:19.991  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 13:25:19.994  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 13:25:19.999  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 13:25:19.999  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 14ms
2024-09-02 13:25:20.009  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 13:25:20.009  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 13:25:20.009  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 13:25:20.010  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 13:25:20.010  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 13:25:20.010  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 13:25:20.012  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 13:25:20.015  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 13:25:20.015  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 13:25:20.018  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 13:25:20.019  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 13:25:20.127  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 13:25:20.217  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 13:25:20.261  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 13:25:20.545  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 13:25:21.826  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 13:25:21.885  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 13:25:22.754  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 13:25:22.790  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 23d40d1c-0777-40ed-afac-2f7e5a4826a6

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 13:25:23.061 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 13:25:23.249 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 13:25:23.333  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7cf618f3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@45745de6, org.springframework.security.web.context.SecurityContextHolderFilter@4f20ff8e, org.springframework.security.web.header.HeaderWriterFilter@48bafe39, org.springframework.web.filter.CorsFilter@7f9ebcfe, org.springframework.security.web.authentication.logout.LogoutFilter@4c2b8df7, de.telran.urlshortener.security.JwtFilter@64f32e9e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@e9e25b5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@404cc16a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3d577add, org.springframework.security.web.session.SessionManagementFilter@16dc12cf, org.springframework.security.web.access.ExceptionTranslationFilter@5765cd21, org.springframework.security.web.access.intercept.AuthorizationFilter@18b431ea]
2024-09-02 13:25:23.484 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 13:25:23.535 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 13:25:23.896  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 13:25:23.912  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 13:25:23.925  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.445 seconds (process running for 9.878)
2024-09-02 13:25:24.099 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 13:25:24.186 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 13:25:24.208 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 13:25:24.217 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 13:25:24.219 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 13:25:24.222 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 13:25:24.224 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 13:25:24.227 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 13:25:24.230 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 13:25:24.237 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 13:25:24.397 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 13:25:24.413 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 13:25:24.420 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 13:25:24.550 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 13:25:24.552 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 14:12:01.524  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-02 14:12:01.689  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-02 14:12:02.350  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 14:12:02.414  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 231123 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 14:12:02.430  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "devdb"
2024-09-02 14:12:02.525 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e
2024-09-02 14:12:04.460  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 14:12:04.584  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 109 ms. Found 4 JPA repository interfaces.
2024-09-02 14:12:05.586  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 14:12:05.883  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:4d4d858c-d79f-4139-a800-2b1dec7cc2b0 user=SA
2024-09-02 14:12:05.886  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 14:12:06.026  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 14:12:06.865  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 14:12:07.338  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 14:12:07.492  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 14:12:07.494  INFO --- [           main] l.command                                : Using deploymentId: 5279127493
2024-09-02 14:12:07.497  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 14:12:07.540  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 14:12:07.555  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 14:12:07.556  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 15ms
2024-09-02 14:12:07.568  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 14:12:07.574  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 14:12:07.575  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-02 14:12:07.582  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 14:12:07.588  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 14:12:07.597  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 14:12:07.598  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-02 14:12:07.623  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 14:12:07.632  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 14:12:07.636  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 14:12:07.637  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 13ms
2024-09-02 14:12:07.643  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 14:12:07.648  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 14:12:07.652  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 14:12:07.657  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 14:12:07.663  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 14:12:07.664  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-09-02 14:12:07.676  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 14:12:07.676  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 14:12:07.677  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 14:12:07.677  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 14:12:07.678  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 14:12:07.678  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 14:12:07.680  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 14:12:07.684  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 14:12:07.684  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 14:12:07.688  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 14:12:07.689  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 14:12:07.825  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 14:12:07.900  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 14:12:07.946  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 14:12:08.250  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 14:12:09.644  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 14:12:09.705  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 14:12:10.719  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 14:12:10.756  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 0eece3d9-da23-453b-90d9-46a147aa4c88

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 14:12:11.066 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 14:12:11.352 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 14:12:11.418  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@12a719ed, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@79dd79eb, org.springframework.security.web.context.SecurityContextHolderFilter@6fe43257, org.springframework.security.web.header.HeaderWriterFilter@5cc088a8, org.springframework.web.filter.CorsFilter@368617cd, org.springframework.security.web.authentication.logout.LogoutFilter@3ea3b20d, de.telran.urlshortener.security.JwtFilter@4ee41c66, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1a35343e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7f994055, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7ae88df1, org.springframework.security.web.session.SessionManagementFilter@3d2be0df, org.springframework.security.web.access.ExceptionTranslationFilter@657f1fc3, org.springframework.security.web.access.intercept.AuthorizationFilter@2c48eb31]
2024-09-02 14:12:11.715 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 14:12:11.771 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 14:12:11.999  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:4d4d858c-d79f-4139-a800-2b1dec7cc2b0'
2024-09-02 14:12:12.149  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 10.22 seconds (process running for 12.887)
2024-09-02 14:12:12.366 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 14:12:12.458 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 14:12:12.484 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 14:12:12.497 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 14:12:12.499 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 14:12:12.504 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 14:12:12.506 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 14:12:12.510 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 14:12:12.513 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 14:12:12.521 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 14:12:12.688 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 14:12:12.704 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 14:12:12.711 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 14:12:12.828 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 14:12:12.830 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 14:12:13.633 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e, started on Mon Sep 02 14:12:02 CEST 2024
2024-09-02 14:12:13.644  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 14:12:13.649  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 14:12:13.657  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 14:19:56.173  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 14:19:56.215  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 234788 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 14:19:56.220  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 14:19:57.431  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 14:19:57.518  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 78 ms. Found 4 JPA repository interfaces.
2024-09-02 14:19:58.321  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 14:19:58.334  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 14:19:58.337  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 14:19:58.337  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 14:19:58.400  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 14:19:58.402  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2131 ms
2024-09-02 14:19:58.475  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 14:19:58.741  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:28ad4163-5650-4f28-bf0a-bfb99d9ed9dd user=SA
2024-09-02 14:19:58.743  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 14:19:58.759  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:28ad4163-5650-4f28-bf0a-bfb99d9ed9dd'
2024-09-02 14:19:59.025  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 14:19:59.565  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 14:19:59.731  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 14:19:59.870  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 14:19:59.872  INFO --- [           main] l.command                                : Using deploymentId: 5279599871
2024-09-02 14:19:59.875  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 14:19:59.914  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 14:19:59.928  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 14:19:59.929  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 14ms
2024-09-02 14:19:59.939  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 14:19:59.945  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 14:19:59.945  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-02 14:19:59.952  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 14:19:59.957  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 14:19:59.965  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 14:19:59.965  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 13ms
2024-09-02 14:19:59.972  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 14:19:59.977  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 14:19:59.980  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 14:19:59.981  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-02 14:19:59.986  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 14:19:59.988  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 14:19:59.991  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 14:19:59.994  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 14:20:00.000  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 14:20:00.000  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 14ms
2024-09-02 14:20:00.009  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 14:20:00.009  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 14:20:00.010  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 14:20:00.010  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 14:20:00.010  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 14:20:00.010  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 14:20:00.012  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 14:20:00.015  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 14:20:00.015  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 14:20:00.018  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 14:20:00.019  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 14:20:00.130  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 14:20:00.210  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 14:20:00.253  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 14:20:00.524  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 14:20:01.793  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 14:20:01.849  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 14:20:02.735  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 14:20:02.772  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 6bd1938d-4644-478a-b212-3e246fdceed4

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 14:20:03.049 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 14:20:03.204 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 14:20:03.281  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@198eeb36, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4690cb47, org.springframework.security.web.context.SecurityContextHolderFilter@3fc4e667, org.springframework.security.web.header.HeaderWriterFilter@340ef431, org.springframework.web.filter.CorsFilter@77d80294, org.springframework.security.web.authentication.logout.LogoutFilter@e9e25b5, de.telran.urlshortener.security.JwtFilter@6e068ac9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@61c1be2f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@423325e0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@74940388, org.springframework.security.web.session.SessionManagementFilter@e87c4cf, org.springframework.security.web.access.ExceptionTranslationFilter@45c8db36, org.springframework.security.web.access.intercept.AuthorizationFilter@7854f2a2]
2024-09-02 14:20:03.431 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 14:20:03.481 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 14:20:03.840  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 14:20:03.857  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 14:20:03.870  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.14 seconds (process running for 9.542)
2024-09-02 14:20:04.062 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 14:20:04.136 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 14:20:04.158 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 14:20:04.168 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 14:20:04.170 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 14:20:04.173 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 14:20:04.175 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 14:20:04.178 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 14:20:04.181 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 14:20:04.188 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 14:20:04.344 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 14:20:04.362 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 14:20:04.368 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 14:20:04.502 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 14:20:04.504 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 14:20:44.705  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 14:20:44.706  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 14:20:44.706 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 14:20:44.706 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 14:20:44.706 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 14:20:44.708 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@77510da
2024-09-02 14:20:44.709 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@2aef651
2024-09-02 14:20:44.709 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 14:20:44.709  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-09-02 14:20:44.726  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 14:20:44.741  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 14:20:44.755 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 14:20:44.759 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 14:20:44.795 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 14:20:44.827 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 14:20:44.829 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 14:20:44.833 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 14:20:44.864 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 14:20:44.865 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 14:20:44.869 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 14:20:44.869 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 14:20:44.871 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 14:20:44.880 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 14:20:44.881 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 14:20:44.880 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 14:20:44.885 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 14:20:44.889 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 14:20:44.919 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 14:20:44.946 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 14:20:45.655 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 14:20:45.656 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 14:20:45.660 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 14:20:45.697 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 14:20:45.698 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 14:20:45.704 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 14:20:45.705 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 14:20:45.711 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 14:20:45.733 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 14:20:45.741 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 14:20:45.754 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 14:20:45.793 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 14:20:45.795 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 14:20:46.710  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 889 ms
2024-09-02 14:20:46.740 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 14:20:46.744 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 14:20:46.745 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 14:21:03.725 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 14:21:03.726 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 14:21:03.746 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@4cdfd580]
2024-09-02 14:21:03.757 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 14:21:03.768 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 14:21:03.774 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 14:21:03.952 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 14:21:03.953 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@7d50f518]
2024-09-02 14:21:03.954 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 14:22:05.777 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : PATCH "/users/2/role?newRole=PAID", parameters={masked}
2024-09-02 14:22:05.778 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-02 14:22:05.804 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Failed to complete request: org.springframework.security.access.AccessDeniedException: Access Denied
2024-09-02 14:22:05.819 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : "ERROR" dispatch for PATCH "/error?newRole=PAID", parameters={masked}
2024-09-02 14:22:05.819 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-09-02 14:22:05.822 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 14:22:05.823 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{timestamp=Mon Sep 02 14:22:05 CEST 2024, status=403, error=Forbidden, path=/users/2/role}]
2024-09-02 14:22:05.828 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Exiting from "ERROR" dispatch, status 403
2024-09-02 17:01:11.978 ERROR --- [nio-8080-exec-9] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T12:26:03Z. Current time: 2024-09-02T15:01:11Z, a difference of 9308977 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:67)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 17:01:11.982 ERROR --- [nio-8080-exec-9] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-02T12:26:03Z. Current time: 2024-09-02T15:01:11Z, a difference of 9308982 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:91)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:66)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:67)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-02 17:01:11.984 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 17:01:11.985 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 17:01:11.986 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@7d615f50]
2024-09-02 17:01:11.989 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 17:01:11.993 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 17:01:11.998 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 17:01:12.123 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 17:01:12.124 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@395add71]
2024-09-02 17:01:12.124 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:01:40.900 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/users/1", parameters={}
2024-09-02 17:01:40.901 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-09-02 17:01:40.902  INFO --- [nio-8080-exec-8] d.t.u.c.UserController                   : Received request to get user with ID: 1
2024-09-02 17:01:40.902  INFO --- [nio-8080-exec-8] d.t.u.s.UserService                      : Fetching user with ID: 1
2024-09-02 17:01:40.913 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-02 17:01:40.916 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 17:01:40.917  INFO --- [nio-8080-exec-8] d.t.u.s.UserService                      : User with ID: 1 fetched successfully
2024-09-02 17:01:40.918  INFO --- [nio-8080-exec-8] d.t.u.c.UserController                   : User fetched successfully with ID: 1
2024-09-02 17:01:40.920 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 17:01:40.920 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userDto.UserResponse@8344538]
2024-09-02 17:01:40.921 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:12:14.036  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 17:12:14.041  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 17:12:14.043  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 17:12:20.069  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 17:12:20.116  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 274133 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 17:12:20.121  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 17:12:21.327  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 17:12:21.409  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73 ms. Found 4 JPA repository interfaces.
2024-09-02 17:12:22.211  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 17:12:22.223  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 17:12:22.226  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 17:12:22.226  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 17:12:22.289  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 17:12:22.292  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2113 ms
2024-09-02 17:12:22.365  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 17:12:22.651  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:ed528adb-bd3a-49d6-ad16-225ceda77aaf user=SA
2024-09-02 17:12:22.654  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 17:12:22.669  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:ed528adb-bd3a-49d6-ad16-225ceda77aaf'
2024-09-02 17:12:22.939  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 17:12:23.478  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 17:12:23.852  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 17:12:23.987  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 17:12:23.989  INFO --- [           main] l.command                                : Using deploymentId: 5289943988
2024-09-02 17:12:23.991  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 17:12:24.030  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 17:12:24.043  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 17:12:24.044  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 12ms
2024-09-02 17:12:24.054  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 17:12:24.061  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 17:12:24.062  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-02 17:12:24.070  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 17:12:24.076  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 17:12:24.086  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 17:12:24.087  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 16ms
2024-09-02 17:12:24.095  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 17:12:24.102  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 17:12:24.106  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 17:12:24.107  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-02 17:12:24.113  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 17:12:24.117  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 17:12:24.121  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 17:12:24.126  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 17:12:24.133  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 17:12:24.134  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 19ms
2024-09-02 17:12:24.146  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 17:12:24.147  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 17:12:24.147  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 17:12:24.147  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 17:12:24.148  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 17:12:24.148  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 17:12:24.149  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 17:12:24.153  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 17:12:24.153  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 17:12:24.156  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 17:12:24.157  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 17:12:24.287  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 17:12:24.402  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 17:12:24.444  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 17:12:24.728  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 17:12:26.003  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 17:12:26.059  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 17:12:26.945  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 17:12:26.981  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: fe9d6b02-527b-420e-ab34-f51b57834b24

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 17:12:27.234 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 17:12:27.397 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 17:12:27.491  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5aa7bb86, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6ddccee4, org.springframework.security.web.context.SecurityContextHolderFilter@7a4ea134, org.springframework.security.web.header.HeaderWriterFilter@230383a7, org.springframework.web.filter.CorsFilter@39000894, org.springframework.security.web.authentication.logout.LogoutFilter@e00f822, de.telran.urlshortener.security.JwtFilter@710ae6a7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4dd56393, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7793eaca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4f5080ea, org.springframework.security.web.session.SessionManagementFilter@61c1be2f, org.springframework.security.web.access.ExceptionTranslationFilter@314e240c, org.springframework.security.web.access.intercept.AuthorizationFilter@77d80294]
2024-09-02 17:12:27.638 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 17:12:27.689 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 17:12:28.042  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 17:12:28.060  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 17:12:28.074  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.479 seconds (process running for 9.966)
2024-09-02 17:12:28.299 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 17:12:28.394 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 17:12:28.418 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 17:12:28.427 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 17:12:28.429 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 17:12:28.432 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 17:12:28.434 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 17:12:28.437 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 17:12:28.440 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 17:12:28.446 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 17:12:28.601 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 17:12:28.617 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 17:12:28.623 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 17:12:28.753 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 17:12:28.755 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 17:12:45.298  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 17:12:45.299  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 17:12:45.299 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 17:12:45.300 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 17:12:45.300 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 17:12:45.301 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@53b10e9a
2024-09-02 17:12:45.302 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@5c7a699b
2024-09-02 17:12:45.302 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 17:12:45.303  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-09-02 17:12:45.319  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 17:12:45.335  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 17:12:45.348 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 17:12:45.352 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 17:12:45.388 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:12:45.430 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 17:12:45.431 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 17:12:45.436 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:12:45.478 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 17:12:45.476 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 17:12:45.479 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 17:12:45.479 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 17:12:45.481 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 17:12:45.483 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 17:12:45.485 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:12:45.486 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 17:12:45.488 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 17:12:45.495 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:12:45.517 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:12:45.549 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:12:46.232 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 17:12:46.233 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 17:12:46.236 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:12:46.292 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 17:12:46.292 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 17:12:46.294 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 17:12:46.296 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 17:12:46.315 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:12:46.324 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 17:12:46.328 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 17:12:46.344 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:12:46.398 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 17:12:46.399 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 17:12:47.293  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 871 ms
2024-09-02 17:12:47.324 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 17:12:47.327 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 17:12:47.329 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:13:03.889 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 17:13:03.889 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 17:13:03.911 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@5769066d]
2024-09-02 17:13:03.924 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 17:13:03.936 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 17:13:03.942 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-02 17:13:04.108 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 17:13:04.109 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@3460653d]
2024-09-02 17:13:04.111 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:13:49.525 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : PATCH "/users/2/role?newRole=PAID", parameters={masked}
2024-09-02 17:13:49.525 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-02 17:13:49.544  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : Received request to change role for user with ID: 2 to PAID
2024-09-02 17:13:49.545  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : Attempting to change role for user with ID: 2 to PAID
2024-09-02 17:13:49.559 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-02 17:13:49.562 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 17:13:49.565 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 17:13:49.571 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-09-02 17:13:49.577 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-09-02 17:13:49.582 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-09-02 17:13:49.584 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 17:13:49.590  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : User role updated successfully with ID: 2
2024-09-02 17:13:49.590  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : User role updated successfully with ID: 2
2024-09-02 17:13:49.593 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 17:13:49.593 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userDto.UserResponse@3257a026]
2024-09-02 17:13:49.596 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:16:45.514 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-02 17:16:45.515 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-02 17:16:45.515 DEBUG --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@45bfe3e5]
2024-09-02 17:16:45.517 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-02 17:16:45.528 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 17:16:45.619 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 17:16:45.619 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@7a332bfe]
2024-09-02 17:16:45.620 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:17:28.002 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/users/2", parameters={}
2024-09-02 17:17:28.003 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#getUserById(Long)
2024-09-02 17:17:28.004  INFO --- [nio-8080-exec-9] d.t.u.c.UserController                   : Received request to get user with ID: 2
2024-09-02 17:17:28.004  INFO --- [nio-8080-exec-9] d.t.u.s.UserService                      : Fetching user with ID: 2
2024-09-02 17:17:28.006 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-02 17:17:28.009 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 17:17:28.012  INFO --- [nio-8080-exec-9] d.t.u.s.UserService                      : User with ID: 2 fetched successfully
2024-09-02 17:17:28.013  INFO --- [nio-8080-exec-9] d.t.u.c.UserController                   : User fetched successfully with ID: 2
2024-09-02 17:17:28.014 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 17:17:28.014 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userDto.UserResponse@19090a05]
2024-09-02 17:17:28.015 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 17:19:50.725 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : PUT "/users/2", parameters={}
2024-09-02 17:19:50.725 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#updateUser(Long, UserRequest)
2024-09-02 17:19:50.727 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@79a724a2]
2024-09-02 17:19:50.728  INFO --- [io-8080-exec-10] d.t.u.c.UserController                   : Received request to update user with ID: 2
2024-09-02 17:19:50.729  INFO --- [io-8080-exec-10] d.t.u.s.UserService                      : Attempting to update user with ID: 2
2024-09-02 17:19:50.730 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-02 17:19:50.732 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-02 17:19:50.841 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    update
        users 
    set
        email=?,
        password=?,
        user_name=? 
    where
        id=?
2024-09-02 17:19:50.843  INFO --- [io-8080-exec-10] d.t.u.s.UserService                      : User with ID: 2 updated successfully
2024-09-02 17:19:50.843  INFO --- [io-8080-exec-10] d.t.u.c.UserController                   : User updated successfully with ID: 2
2024-09-02 17:19:50.844 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-02 17:19:50.844 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userDto.UserResponse@331bf97e]
2024-09-02 17:19:50.845 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 18:34:40.296  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-02 18:34:40.439  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-02 18:34:40.991  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 18:34:41.037  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 316306 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 18:34:41.043  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "devdb"
2024-09-02 18:34:41.091 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e
2024-09-02 18:34:42.508  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 18:34:42.651  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 128 ms. Found 4 JPA repository interfaces.
2024-09-02 18:34:43.465  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 18:34:43.775  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:46b09feb-ff8a-4eeb-8890-a34cea57721f user=SA
2024-09-02 18:34:43.778  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 18:34:43.936  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 18:34:44.702  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 18:34:45.151  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 18:34:45.348  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 18:34:45.351  INFO --- [           main] l.command                                : Using deploymentId: 5294885350
2024-09-02 18:34:45.355  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 18:34:45.423  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 18:34:45.443  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 18:34:45.445  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 19ms
2024-09-02 18:34:45.468  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 18:34:45.479  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 18:34:45.480  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 10ms
2024-09-02 18:34:45.490  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 18:34:45.500  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 18:34:45.514  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 18:34:45.514  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 23ms
2024-09-02 18:34:45.525  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 18:34:45.534  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 18:34:45.542  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 18:34:45.543  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 16ms
2024-09-02 18:34:45.552  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 18:34:45.557  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 18:34:45.561  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 18:34:45.567  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 18:34:45.575  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 18:34:45.576  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 22ms
2024-09-02 18:34:45.593  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 18:34:45.593  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 18:34:45.594  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 18:34:45.594  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 18:34:45.595  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 18:34:45.595  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 18:34:45.597  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 18:34:45.601  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 18:34:45.602  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 18:34:45.606  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 18:34:45.609  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 18:34:45.774  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 18:34:45.884  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 18:34:45.940  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 18:34:46.273  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 18:34:47.690  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 18:34:47.748  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 18:34:48.664  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 18:34:48.696  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 1aa6e426-e772-429c-a37d-ab7f2cf809dc

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 18:34:48.948 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 18:34:49.169 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 18:34:49.220  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@71f9f8ba, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7685912e, org.springframework.security.web.context.SecurityContextHolderFilter@657f1fc3, org.springframework.security.web.header.HeaderWriterFilter@1560982f, org.springframework.web.filter.CorsFilter@3ea3b20d, org.springframework.security.web.authentication.logout.LogoutFilter@2aaf7354, de.telran.urlshortener.security.JwtFilter@4f74edbf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5cc088a8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@25777ab6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@17856f0, org.springframework.security.web.session.SessionManagementFilter@6a3cb81c, org.springframework.security.web.access.ExceptionTranslationFilter@3a72160a, org.springframework.security.web.access.intercept.AuthorizationFilter@56da2437]
2024-09-02 18:34:49.523 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 18:34:49.579 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 18:34:49.777  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:46b09feb-ff8a-4eeb-8890-a34cea57721f'
2024-09-02 18:34:49.880  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 9.215 seconds (process running for 11.302)
2024-09-02 18:34:50.083 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 18:34:50.163 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 18:34:50.186 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 18:34:50.196 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 18:34:50.199 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 18:34:50.203 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 18:34:50.205 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 18:34:50.209 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 18:34:50.213 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 18:34:50.220 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 18:34:50.386 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 18:34:50.403 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 18:34:50.409 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 18:34:50.523 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 18:34:50.525 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 18:34:51.579 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@31da6b2e, started on Mon Sep 02 18:34:41 CEST 2024
2024-09-02 18:34:51.588  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 18:34:51.591  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-02 18:34:51.593  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-02 18:35:04.167  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-02 18:35:04.225  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 316560 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-02 18:35:04.230  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-02 18:35:05.598  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-02 18:35:05.691  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 82 ms. Found 4 JPA repository interfaces.
2024-09-02 18:35:06.565  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-02 18:35:06.578  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-02 18:35:06.581  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-02 18:35:06.581  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-02 18:35:06.640  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-02 18:35:06.642  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2351 ms
2024-09-02 18:35:06.712  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-02 18:35:06.969  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:c272c0da-164e-4125-b0e4-b804719a07a9 user=SA
2024-09-02 18:35:06.971  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-02 18:35:06.987  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:c272c0da-164e-4125-b0e4-b804719a07a9'
2024-09-02 18:35:07.248  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-02 18:35:07.791  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-02 18:35:08.137  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 18:35:08.308  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-02 18:35:08.310  INFO --- [           main] l.command                                : Using deploymentId: 5294908309
2024-09-02 18:35:08.312  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-02 18:35:08.362  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-02 18:35:08.381  INFO --- [           main] l.changelog                              : Table roles created
2024-09-02 18:35:08.382  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 18ms
2024-09-02 18:35:08.395  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-02 18:35:08.403  INFO --- [           main] l.changelog                              : Table users created
2024-09-02 18:35:08.403  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-02 18:35:08.411  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-02 18:35:08.417  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-02 18:35:08.426  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-02 18:35:08.427  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-02 18:35:08.434  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-02 18:35:08.439  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-02 18:35:08.443  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-02 18:35:08.444  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-02 18:35:08.449  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-02 18:35:08.452  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-02 18:35:08.455  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-02 18:35:08.459  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-02 18:35:08.464  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-02 18:35:08.465  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-02 18:35:08.474  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-02 18:35:08.474  INFO --- [           main] l.util                                   : Run:                          5
2024-09-02 18:35:08.475  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-02 18:35:08.475  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-02 18:35:08.475  INFO --- [           main] l.util                                   : -------------------------------
2024-09-02 18:35:08.476  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-02 18:35:08.477  INFO --- [           main] l.util                                   : Update summary generated
2024-09-02 18:35:08.480  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-02 18:35:08.481  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-02 18:35:08.484  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-02 18:35:08.485  INFO --- [           main] l.command                                : Command execution complete
2024-09-02 18:35:08.593  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-02 18:35:08.671  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-02 18:35:08.718  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-02 18:35:09.003  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-02 18:35:10.394  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-02 18:35:10.455  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-02 18:35:11.364  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-02 18:35:11.403  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 74fb31e0-0cc6-4ade-afa2-322e7b6166f8

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-02 18:35:11.666 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-02 18:35:11.817 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-02 18:35:11.890  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6ad2a8db, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@52f8effb, org.springframework.security.web.context.SecurityContextHolderFilter@2aabd5a0, org.springframework.security.web.header.HeaderWriterFilter@16124894, org.springframework.web.filter.CorsFilter@59bdd277, org.springframework.security.web.authentication.logout.LogoutFilter@6ddccee4, de.telran.urlshortener.security.JwtFilter@7b211077, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@16c9ec5b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4001a5a1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@45543b88, org.springframework.security.web.session.SessionManagementFilter@6272936b, org.springframework.security.web.access.ExceptionTranslationFilter@5a5c041f, org.springframework.security.web.access.intercept.AuthorizationFilter@6d7c8a2]
2024-09-02 18:35:12.042 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-02 18:35:12.095 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-02 18:35:12.441  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-02 18:35:12.458  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-02 18:35:12.470  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.765 seconds (process running for 10.167)
2024-09-02 18:35:12.658 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 18:35:12.736 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 18:35:12.759 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 18:35:12.771 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 18:35:12.773 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 18:35:12.776 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 18:35:12.778 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-02 18:35:12.781 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 18:35:12.785 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-02 18:35:12.792 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 18:35:12.955 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 18:35:12.973 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 18:35:12.979 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-02 18:35:13.119 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-02 18:35:13.121 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-02 18:35:25.389  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-02 18:35:25.389  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-02 18:35:25.390 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-02 18:35:25.390 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-02 18:35:25.390 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-02 18:35:25.392 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@62325b44
2024-09-02 18:35:25.393 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@7ba5d307
2024-09-02 18:35:25.393 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-02 18:35:25.393  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-09-02 18:35:25.410  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 18:35:25.426  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-02 18:35:25.437 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-02 18:35:25.441 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 18:35:25.477 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 18:35:25.511 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-02 18:35:25.512 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 18:35:25.517 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 18:35:25.561 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-02 18:35:25.572 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-02 18:35:25.564 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-02 18:35:25.564 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-02 18:35:25.577 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 18:35:25.578 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 18:35:25.578 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 18:35:25.578 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 18:35:25.581 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 18:35:25.590 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 18:35:25.619 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 18:35:25.638 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 18:35:26.303 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 18:35:26.304 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 18:35:26.306 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 18:35:26.334 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-02 18:35:26.335 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-02 18:35:26.338 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-02 18:35:26.339 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-02 18:35:26.342 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 18:35:26.359 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-02 18:35:26.365 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-02 18:35:26.375 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-02 18:35:26.413 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-02 18:35:26.413 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-02 18:35:27.333  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 899 ms
2024-09-02 18:35:27.363 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-02 18:35:27.367 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-02 18:35:27.369 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-03 07:19:14.064  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 07:19:14.113  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 17521 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 07:19:14.118  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "devdb"
2024-09-03 07:19:15.344  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 07:19:15.429  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-09-03 07:19:16.309  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 07:19:16.323  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 07:19:16.325  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 07:19:16.326  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 07:19:16.394  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 07:19:16.395  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2226 ms
2024-09-03 07:19:16.470  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 07:19:16.932  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:fc4b016d-ae6e-4cdd-ba30-598db5947b6e user=SA
2024-09-03 07:19:16.935  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 07:19:16.950  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:fc4b016d-ae6e-4cdd-ba30-598db5947b6e'
2024-09-03 07:19:17.255  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 07:19:17.845  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-03 07:19:18.183  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 07:19:18.330  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-03 07:19:18.332  INFO --- [           main] l.command                                : Using deploymentId: 5340758331
2024-09-03 07:19:18.334  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 07:19:18.378  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::1::shemchuk
2024-09-03 07:19:18.393  INFO --- [           main] l.changelog                              : Table roles created
2024-09-03 07:19:18.394  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::1::shemchuk ran successfully in 15ms
2024-09-03 07:19:18.410  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::2::shemchuk
2024-09-03 07:19:18.419  INFO --- [           main] l.changelog                              : Table users created
2024-09-03 07:19:18.420  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-03 07:19:18.430  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::3::shemchuk
2024-09-03 07:19:18.437  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-03 07:19:18.449  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-03 07:19:18.450  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::3::shemchuk ran successfully in 19ms
2024-09-03 07:19:18.458  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::4::shemchuk
2024-09-03 07:19:18.464  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-03 07:19:18.467  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-03 07:19:18.467  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-03 07:19:18.472  INFO --- [           main] l.ui                                     : Running Changeset: db/migrations/db.changelog-1.0.xml::5::shemchuk
2024-09-03 07:19:18.475  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-03 07:19:18.478  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-03 07:19:18.482  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-03 07:19:18.487  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-03 07:19:18.488  INFO --- [           main] l.changelog                              : ChangeSet db/migrations/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-03 07:19:18.497  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 07:19:18.498  INFO --- [           main] l.util                                   : Run:                          5
2024-09-03 07:19:18.498  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-03 07:19:18.498  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 07:19:18.499  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 07:19:18.499  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 07:19:18.500  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 07:19:18.504  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-03 07:19:18.504  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-03 07:19:18.507  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 07:19:18.508  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 07:19:18.652  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 07:19:18.802  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 07:19:18.850  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 07:19:19.193  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 07:19:20.578  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 07:19:20.643  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 07:19:21.573  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 07:19:21.610  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 0479dcaa-5714-4900-b5d9-6f9478ac2445

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 07:19:21.919 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 07:19:22.072 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 07:19:22.149  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@42c7781a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d2d7a85, org.springframework.security.web.context.SecurityContextHolderFilter@6222a343, org.springframework.security.web.header.HeaderWriterFilter@5eb054, org.springframework.web.filter.CorsFilter@5cb3c9e6, org.springframework.security.web.authentication.logout.LogoutFilter@16c9ec5b, de.telran.urlshortener.security.JwtFilter@76828577, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@47c019d7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7861a433, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@55fbebba, org.springframework.security.web.session.SessionManagementFilter@314e240c, org.springframework.security.web.access.ExceptionTranslationFilter@77f2807f, org.springframework.security.web.access.intercept.AuthorizationFilter@572d1f18]
2024-09-03 07:19:22.315 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 07:19:22.371 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 07:19:22.754  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 07:19:22.773  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 07:19:22.786  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 9.205 seconds (process running for 11.463)
2024-09-03 07:19:22.961 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 07:19:23.058 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 07:19:23.081 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 07:19:23.090 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 07:19:23.092 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 07:19:23.095 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 07:19:23.096 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 07:19:23.099 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 07:19:23.102 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 07:19:23.109 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 07:19:23.283 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-03 07:19:23.300 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-03 07:19:23.306 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 07:19:23.435 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-03 07:19:23.437 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-03 07:19:29.712  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 07:19:30.756  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 07:19:30.756  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 07:19:30.758 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 07:19:30.758 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 07:19:30.758 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 07:19:30.761 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4ad0465c
2024-09-03 07:19:30.769 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@55aabc72
2024-09-03 07:19:30.769 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 07:19:30.770  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 12 ms
2024-09-03 07:19:30.772  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 07:21:48.756  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 07:21:48.767  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 07:21:48.770  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 07:21:52.615  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 07:21:52.661  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 19035 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 07:21:52.667  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 07:21:53.909  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 07:21:53.990  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2024-09-03 07:21:54.766  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 07:21:54.780  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 07:21:54.782  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 07:21:54.783  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 07:21:54.841  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 07:21:54.842  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2119 ms
2024-09-03 07:21:55.095  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 07:21:56.200 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
2024-09-03 07:21:56.205  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
2024-09-03 07:21:56.208  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-09-03 07:21:56.224  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-03 07:21:56.242 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 18 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 20 more
Caused by: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 26 more
2024-09-03 07:22:34.007  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 07:22:34.029  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 19521 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 07:22:34.034  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 07:22:35.258  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 07:22:35.339  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2024-09-03 07:22:36.151  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 07:22:36.164  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 07:22:36.166  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 07:22:36.166  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 07:22:36.226  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 07:22:36.227  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2143 ms
2024-09-03 07:22:36.483  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 07:22:37.586 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
2024-09-03 07:22:37.590  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
2024-09-03 07:22:37.594  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-09-03 07:22:37.612  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-03 07:22:37.633 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 18 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 20 more
Caused by: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 26 more
2024-09-03 07:28:04.540  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 07:28:04.591  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 22556 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 07:28:04.596  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 07:28:05.791  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 07:28:05.873  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2024-09-03 07:28:06.691  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 07:28:06.704  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 07:28:06.706  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 07:28:06.707  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 07:28:06.767  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 07:28:06.768  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2119 ms
2024-09-03 07:28:06.838  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 07:28:07.956 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.getConnectionUrl(H2ConsoleAutoConfiguration.java:94)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395)
	at java.base/java.util.stream.Sink$ChainedReference.end(Sink.java:261)
	at java.base/java.util.stream.Sink$ChainedReference.end(Sink.java:261)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:575)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:260)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:616)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:622)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:627)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.logDataSources(H2ConsoleAutoConfiguration.java:86)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.lambda$h2Console$0(H2ConsoleAutoConfiguration.java:69)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.withThreadContextClassLoader(H2ConsoleAutoConfiguration.java:78)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.h2Console(H2ConsoleAutoConfiguration.java:69)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:643)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1166)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:210)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:201)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans(ServletContextInitializerBeans.java:96)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:85)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4850)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:917)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:488)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:104)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:501)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:610)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
2024-09-03 07:28:08.137  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 07:28:09.139 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
2024-09-03 07:28:09.142  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
2024-09-03 07:28:09.146  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-09-03 07:28:09.162  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-03 07:28:09.181 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 18 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 20 more
Caused by: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 26 more
2024-09-03 07:58:22.556  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 07:58:22.609  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 38144 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 07:58:22.615  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 07:58:23.844  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 07:58:23.953  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 99 ms. Found 4 JPA repository interfaces.
2024-09-03 07:58:24.731  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 07:58:24.744  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 07:58:24.746  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 07:58:24.747  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 07:58:24.811  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 07:58:24.811  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2143 ms
2024-09-03 07:58:24.881  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 07:58:26.011 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.getConnectionUrl(H2ConsoleAutoConfiguration.java:94)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:395)
	at java.base/java.util.stream.Sink$ChainedReference.end(Sink.java:261)
	at java.base/java.util.stream.Sink$ChainedReference.end(Sink.java:261)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:575)
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:260)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:616)
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:622)
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:627)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.logDataSources(H2ConsoleAutoConfiguration.java:86)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.lambda$h2Console$0(H2ConsoleAutoConfiguration.java:69)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.withThreadContextClassLoader(H2ConsoleAutoConfiguration.java:78)
	at org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration.h2Console(H2ConsoleAutoConfiguration.java:69)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:643)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1166)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:210)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:201)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans(ServletContextInitializerBeans.java:96)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:85)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4850)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:845)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:866)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:240)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:433)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:917)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:488)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:104)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:501)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:218)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:610)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
2024-09-03 07:58:26.186  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 07:58:27.187 ERROR --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Exception during pool initialization.
org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
2024-09-03 07:58:27.191  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
2024-09-03 07:58:27.195  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-09-03 07:58:27.224  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-03 07:58:27.255 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 18 more
Caused by: liquibase.exception.DatabaseException: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:251)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 20 more
Caused by: org.h2.jdbc.JdbcSQLFeatureNotSupportedException:    : "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE"
Feature not supported: "AUTO_SERVER=TRUE && DB_CLOSE_ON_EXIT=FALSE" [50100-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:568)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getUnsupportedException(DbException.java:287)
	at org.h2.engine.Database.<init>(Database.java:280)
	at org.h2.engine.Engine.openSession(Engine.java:92)
	at org.h2.engine.Engine.openSession(Engine.java:222)
	at org.h2.engine.Engine.createSession(Engine.java:201)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:343)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:125)
	at org.h2.Driver.connect(Driver.java:59)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:246)
	... 26 more
2024-09-03 08:03:54.543  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 08:03:54.553  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 41620 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 08:03:54.556  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 08:03:55.482  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 08:03:55.542  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 53 ms. Found 4 JPA repository interfaces.
2024-09-03 08:03:56.150  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 08:03:56.159  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 08:03:56.161  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 08:03:56.162  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 08:03:56.201  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 08:03:56.201  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1606 ms
2024-09-03 08:03:56.246  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 08:03:56.537  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 08:03:56.539  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 08:03:56.550  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 08:03:56.732  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 08:03:56.972  INFO --- [           main] l.command                                : Logging exception.
2024-09-03 08:03:56.973  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-09-03 08:03:56.973  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-09-03 08:03:56.973  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
2024-09-03 08:03:56.973  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-09-03 08:03:56.974  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 08:03:56.975  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
2024-09-03 08:03:56.976  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 08:03:56.993  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 08:03:56.996  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-09-03 08:03:57.008  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-03 08:03:57.021 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 18 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 20 more
Caused by: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
	at liquibase.parser.core.xml.XMLChangeLogSAXParser.parseToNode(XMLChangeLogSAXParser.java:114)
	at liquibase.parser.core.xml.AbstractChangeLogParser.parse(AbstractChangeLogParser.java:15)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 36 more
2024-09-03 08:07:14.172  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 08:07:14.224  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 43372 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 08:07:14.230  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 08:07:15.408  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 08:07:15.489  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2024-09-03 08:07:16.294  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 08:07:16.306  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 08:07:16.309  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 08:07:16.309  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 08:07:16.371  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 08:07:16.372  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2088 ms
2024-09-03 08:07:16.439  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 08:07:16.806  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 08:07:16.809  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 08:07:16.824  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 08:07:17.089  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 08:07:17.412  INFO --- [           main] l.command                                : Logging exception.
2024-09-03 08:07:17.413  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-09-03 08:07:17.413  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-09-03 08:07:17.413  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
2024-09-03 08:07:17.414  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-09-03 08:07:17.414  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 08:07:17.417  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
2024-09-03 08:07:17.417  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 08:07:17.513  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 08:07:17.517  INFO --- [           main] o.a.c.c.StandardService                  : Stopping service [Tomcat]
2024-09-03 08:07:17.533  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-03 08:07:17.552 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 18 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 20 more
Caused by: liquibase.exception.ChangeLogParseException: ERROR: The file 'classpath:/db/changelog/db.changelog-master.xml' was not found.
The file property cannot be configured with a fully qualified path, but must be a relative path on the property,
and any local or remote base of the path set on the search path.
	at liquibase.parser.core.xml.XMLChangeLogSAXParser.parseToNode(XMLChangeLogSAXParser.java:114)
	at liquibase.parser.core.xml.AbstractChangeLogParser.parse(AbstractChangeLogParser.java:15)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 36 more
2024-09-03 08:18:44.150  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-03 08:18:44.301  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-03 08:18:44.867  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 08:18:44.918  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 49388 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 08:18:44.925  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-03 08:18:46.444  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 08:18:46.550  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 90 ms. Found 4 JPA repository interfaces.
2024-09-03 08:18:47.417  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 08:18:47.899  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 08:18:47.902  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 08:18:48.013  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 08:18:48.761  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-03 08:18:48.963  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 08:18:49.146  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-03 08:18:49.149  INFO --- [           main] l.command                                : Using deploymentId: 5344329148
2024-09-03 08:18:49.153  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 08:18:49.224  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-03 08:18:49.244  INFO --- [           main] l.changelog                              : Table roles created
2024-09-03 08:18:49.247  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 19ms
2024-09-03 08:18:49.262  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-03 08:18:49.272  INFO --- [           main] l.changelog                              : Table users created
2024-09-03 08:18:49.273  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 10ms
2024-09-03 08:18:49.282  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-03 08:18:49.291  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-03 08:18:49.303  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-03 08:18:49.304  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 21ms
2024-09-03 08:18:49.314  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-03 08:18:49.324  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-03 08:18:49.328  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-03 08:18:49.329  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 14ms
2024-09-03 08:18:49.336  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-03 08:18:49.340  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-03 08:18:49.345  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-03 08:18:49.350  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-03 08:18:49.356  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-03 08:18:49.357  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-09-03 08:18:49.372  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 08:18:49.372  INFO --- [           main] l.util                                   : Run:                          5
2024-09-03 08:18:49.372  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-03 08:18:49.373  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 08:18:49.373  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 08:18:49.373  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 08:18:49.375  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 08:18:49.378  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-03 08:18:49.379  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-03 08:18:49.382  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 08:18:49.384  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 08:18:49.581  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 08:18:49.693  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 08:18:49.764  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 08:18:50.160  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 08:18:50.259  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 08:18:51.552  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 08:18:51.613  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 08:18:52.556  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 08:18:52.588  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 1a2cf122-997d-4c27-ac9a-38bdb026c42e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 08:18:53.061  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7d25d10e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3979ff82, org.springframework.security.web.context.SecurityContextHolderFilter@5146ae5e, org.springframework.security.web.header.HeaderWriterFilter@6a4bd9e4, org.springframework.web.filter.CorsFilter@77524169, org.springframework.security.web.authentication.logout.LogoutFilter@14c8dfb9, de.telran.urlshortener.security.JwtFilter@2ca3a203, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@439c706, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@17e427b6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@74161ed7, org.springframework.security.web.session.SessionManagementFilter@4eff65ce, org.springframework.security.web.access.ExceptionTranslationFilter@1dfadb7, org.springframework.security.web.access.intercept.AuthorizationFilter@4190b111]
2024-09-03 08:18:53.627  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 08:18:53.731  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 9.218 seconds (process running for 11.249)
2024-09-03 08:18:55.286  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 08:18:55.290  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 08:18:55.294  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 08:19:08.272  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 08:19:08.321  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 49669 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 08:19:08.326  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 08:19:09.509  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 08:19:09.599  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 80 ms. Found 4 JPA repository interfaces.
2024-09-03 08:19:10.398  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 08:19:10.411  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 08:19:10.413  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 08:19:10.414  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 08:19:10.477  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 08:19:10.478  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2099 ms
2024-09-03 08:19:10.546  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 08:19:10.914  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 08:19:10.916  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 08:19:10.932  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 08:19:11.188  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 08:19:12.285  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 08:19:12.356  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 08:19:12.359  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 08:19:12.371  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 08:19:12.371  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 08:19:12.371  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 08:19:12.372  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 08:19:12.372  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 08:19:12.372  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 08:19:12.373  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 08:19:12.400  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 08:19:12.402  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 08:19:12.514  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 08:19:12.592  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 08:19:12.644  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 08:19:12.969  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 08:19:13.026  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 08:19:14.231  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 08:19:14.295  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 08:19:15.161  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 08:19:15.198  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 37a34f1e-5753-42ac-a662-988b4258444f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 08:19:15.682  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6f1b0ead, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4487dce, org.springframework.security.web.context.SecurityContextHolderFilter@2a0a178f, org.springframework.security.web.header.HeaderWriterFilter@3846ba32, org.springframework.web.filter.CorsFilter@3aafa1c1, org.springframework.security.web.authentication.logout.LogoutFilter@708f4d81, de.telran.urlshortener.security.JwtFilter@4efb13f1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@12db2921, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@f6e9c18, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@192f807, org.springframework.security.web.session.SessionManagementFilter@5a14a8c1, org.springframework.security.web.access.ExceptionTranslationFilter@2771e501, org.springframework.security.web.access.intercept.AuthorizationFilter@388a6656]
2024-09-03 08:19:16.237  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 08:19:16.255  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 08:19:16.268  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.426 seconds (process running for 9.947)
2024-09-03 08:19:32.047  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.jsp' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 08:19:32.470  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 08:19:32.471  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 08:19:32.476  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-09-03 08:19:32.485  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 08:28:26.770  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 08:28:26.776  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 08:28:26.783  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 08:28:30.271  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 08:28:30.321  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 54494 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 08:28:30.327  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 08:28:31.594  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 08:28:31.680  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 4 JPA repository interfaces.
2024-09-03 08:28:32.492  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 08:28:32.504  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 08:28:32.507  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 08:28:32.507  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 08:28:32.570  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 08:28:32.570  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2187 ms
2024-09-03 08:28:32.647  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 08:28:33.045  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 08:28:33.047  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 08:28:33.062  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 08:28:33.323  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 08:28:34.031  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 08:28:34.096  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 08:28:34.099  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 08:28:34.110  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 08:28:34.110  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 08:28:34.110  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 08:28:34.110  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 08:28:34.111  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 08:28:34.111  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 08:28:34.112  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 08:28:34.136  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 08:28:34.138  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 08:28:34.243  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 08:28:34.347  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 08:28:34.391  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 08:28:34.667  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 08:28:34.719  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 08:28:35.914  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 08:28:35.977  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 08:28:36.844  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 08:28:36.880  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 47a271d3-b260-4a20-b59c-21c74821f418

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 08:28:37.386  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@712a5de4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@364c4ba9, org.springframework.security.web.context.SecurityContextHolderFilter@1f6af096, org.springframework.security.web.header.HeaderWriterFilter@2140582, org.springframework.web.filter.CorsFilter@2008dfa7, org.springframework.security.web.authentication.logout.LogoutFilter@2e856aa4, de.telran.urlshortener.security.JwtFilter@56835f2f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2fc698a9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4823f3b8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@492d0748, org.springframework.security.web.session.SessionManagementFilter@12db2921, org.springframework.security.web.access.ExceptionTranslationFilter@56957f08, org.springframework.security.web.access.intercept.AuthorizationFilter@3aafa1c1]
2024-09-03 08:28:37.976  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 08:28:37.992  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 08:28:38.005  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.158 seconds (process running for 9.651)
2024-09-03 08:28:50.175  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 08:28:50.558  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 08:28:50.559  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 08:28:50.563  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-09-03 08:28:50.566  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 09:16:47.522  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 09:16:47.589  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 80426 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 09:16:47.596  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 09:16:48.845  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 09:16:48.930  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-09-03 09:16:49.767  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 09:16:49.779  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 09:16:49.782  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 09:16:49.782  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 09:16:49.844  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 09:16:49.844  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2177 ms
2024-09-03 09:16:49.915  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 09:16:53.574  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 09:16:53.577  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 09:16:53.592  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 09:16:53.911  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 09:16:54.902  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 09:16:54.977  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 09:16:54.980  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 09:16:54.991  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 09:16:54.992  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 09:16:54.992  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 09:16:54.992  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 09:16:54.992  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 09:16:54.993  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 09:16:54.994  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 09:16:55.022  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 09:16:55.024  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 09:16:55.141  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 09:16:55.251  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 09:16:55.300  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 09:16:55.604  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 09:16:55.666  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 09:16:56.936  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 09:16:56.992  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 09:16:57.877  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 09:16:57.913  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 33fc8708-20ea-4748-bbdc-189ff267b420

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 09:16:58.430  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@744d0cfb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7c943143, org.springframework.security.web.context.SecurityContextHolderFilter@12dab9a8, org.springframework.security.web.header.HeaderWriterFilter@5563a63f, org.springframework.web.filter.CorsFilter@705e24fb, org.springframework.security.web.authentication.logout.LogoutFilter@589dac96, de.telran.urlshortener.security.JwtFilter@4cfcac13, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4228a2f6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5e91b051, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3c511385, org.springframework.security.web.session.SessionManagementFilter@45cd5c56, org.springframework.security.web.access.ExceptionTranslationFilter@85446a, org.springframework.security.web.access.intercept.AuthorizationFilter@3787eac3]
2024-09-03 09:16:59.003  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 09:16:59.021  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 09:16:59.034  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 12.097 seconds (process running for 13.659)
2024-09-03 09:17:21.158  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 09:17:22.065  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 09:17:22.066  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 09:17:22.072  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-09-03 09:17:22.076  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 12:29:00.182  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 12:29:00.186  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 12:29:00.188  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 12:29:03.862  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 12:29:03.892  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 98106 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 12:29:03.897  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 12:29:05.088  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 12:29:05.171  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2024-09-03 12:29:05.984  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 12:29:05.997  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 12:29:05.999  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 12:29:06.000  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 12:29:06.063  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 12:29:06.063  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2114 ms
2024-09-03 12:29:06.135  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 12:29:06.513  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 12:29:06.515  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 12:29:06.530  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 12:29:06.804  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 12:29:07.586  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 12:29:07.654  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 12:29:07.657  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 12:29:07.668  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 12:29:07.669  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 12:29:07.669  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 12:29:07.669  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 12:29:07.669  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 12:29:07.670  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 12:29:07.671  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 12:29:07.697  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 12:29:07.699  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 12:29:07.809  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 12:29:07.891  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 12:29:07.934  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 12:29:08.212  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 12:29:08.275  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 12:29:09.485  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 12:29:09.525  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 12:29:10.115  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 12:29:10.138  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 231f4ee0-5022-40a5-bf7b-84d0e21ab0cd

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 12:29:10.464  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@36cbe0fe, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@712a5de4, org.springframework.security.web.context.SecurityContextHolderFilter@75225415, org.springframework.security.web.header.HeaderWriterFilter@5b0fc8c2, org.springframework.web.filter.CorsFilter@364c4ba9, org.springframework.security.web.authentication.logout.LogoutFilter@7655dc27, de.telran.urlshortener.security.JwtFilter@1c72189f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@54b3407b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2fc698a9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2008dfa7, org.springframework.security.web.session.SessionManagementFilter@55a7f0af, org.springframework.security.web.access.ExceptionTranslationFilter@685280dd, org.springframework.security.web.access.intercept.AuthorizationFilter@4487dce]
2024-09-03 12:29:10.847  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 12:29:10.868  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 12:29:10.877  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 7.438 seconds (process running for 8.952)
2024-09-03 12:29:36.571  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 12:29:37.478  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 12:29:37.479  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 12:29:37.481  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 2 ms
2024-09-03 12:29:37.484  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 12:35:49.241  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 12:35:49.244  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 12:35:49.246  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 12:35:52.795  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 12:35:52.825  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 101863 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 12:35:52.829  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 12:35:53.684  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 12:35:53.746  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 4 JPA repository interfaces.
2024-09-03 12:35:54.423  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 12:35:54.435  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 12:35:54.436  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 12:35:54.437  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 12:35:54.479  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 12:35:54.480  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1616 ms
2024-09-03 12:35:54.527  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 12:35:54.826  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 12:35:54.828  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 12:35:54.839  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 12:35:55.005  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 12:35:55.606  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 12:35:55.661  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 12:35:55.663  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 12:35:55.672  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 12:35:55.672  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 12:35:55.672  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 12:35:55.672  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 12:35:55.672  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 12:35:55.672  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 12:35:55.674  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 12:35:55.691  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 12:35:55.693  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 12:35:55.760  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 12:35:55.803  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 12:35:55.845  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 12:35:56.063  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 12:35:56.104  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 12:35:56.987  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 12:35:57.029  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 12:35:57.685  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 12:35:57.712  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 13d1bf6b-4e90-4c3a-9ef2-ae70ca816bd9

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 12:35:57.890 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 12:35:58.031 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 12:35:58.083  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7da4c956, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7c5c53e5, org.springframework.security.web.context.SecurityContextHolderFilter@77376e83, org.springframework.security.web.header.HeaderWriterFilter@26c75b91, org.springframework.web.filter.CorsFilter@4825aad0, org.springframework.security.web.authentication.logout.LogoutFilter@16908f89, de.telran.urlshortener.security.JwtFilter@44bbb7c6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@23cf78f9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@30b35687, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@570cef1e, org.springframework.security.web.session.SessionManagementFilter@4228a2f6, org.springframework.security.web.access.ExceptionTranslationFilter@3d8c3d0a, org.springframework.security.web.access.intercept.AuthorizationFilter@705e24fb]
2024-09-03 12:35:58.231 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 12:35:58.269 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 12:35:58.507  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 12:35:58.529  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 12:35:58.538  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 6.088 seconds (process running for 7.29)
2024-09-03 12:35:58.660 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:35:58.675 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:35:58.678 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:35:58.680 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:35:58.683 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:35:58.685 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:35:58.690 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 12:35:58.693 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 12:37:58.902  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 12:37:58.905  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 12:37:58.908  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 12:38:01.925  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 12:38:01.968  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 104174 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 12:38:01.974  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 12:38:03.235  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 12:38:03.319  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2024-09-03 12:38:04.142  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 12:38:04.156  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 12:38:04.159  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 12:38:04.159  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 12:38:04.219  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 12:38:04.220  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2197 ms
2024-09-03 12:38:04.297  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 12:38:04.678  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 12:38:04.680  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 12:38:04.696  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 12:38:04.947  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 12:38:05.626  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 12:38:05.694  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 12:38:05.697  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 12:38:05.708  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 12:38:05.708  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 12:38:05.708  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 12:38:05.709  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 12:38:05.709  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 12:38:05.709  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 12:38:05.710  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 12:38:05.736  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 12:38:05.738  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 12:38:05.859  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 12:38:05.936  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 12:38:05.977  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 12:38:06.262  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 12:38:06.314  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 12:38:07.527  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 12:38:07.584  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 12:38:08.450  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 12:38:08.486  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: a9428672-8819-4cc2-9575-594f6f872f32

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 12:38:08.752 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 12:38:08.912 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 12:38:08.986  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@589dac96, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@792bf78a, org.springframework.security.web.context.SecurityContextHolderFilter@5563a63f, org.springframework.security.web.header.HeaderWriterFilter@7b5afde5, org.springframework.web.filter.CorsFilter@4e60925d, org.springframework.security.web.authentication.logout.LogoutFilter@1bd97254, de.telran.urlshortener.security.JwtFilter@39ace1a7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@28068327, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3d8c3d0a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5ed4c87, org.springframework.security.web.session.SessionManagementFilter@4823f3b8, org.springframework.security.web.access.ExceptionTranslationFilter@45accb5, org.springframework.security.web.access.intercept.AuthorizationFilter@492d0748]
2024-09-03 12:38:09.131 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 12:38:09.183 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 12:38:09.513  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 12:38:09.530  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 12:38:09.542  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.058 seconds (process running for 9.259)
2024-09-03 12:38:09.722 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:38:09.747 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:38:09.750 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:38:09.753 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:38:09.756 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:38:09.760 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:38:09.766 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 12:38:09.770 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 12:38:23.356  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 12:38:23.674  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 12:38:23.674  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 12:38:23.674 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 12:38:23.674 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 12:38:23.675 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 12:38:23.677 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@147c00c7
2024-09-03 12:38:23.678 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@50a2034c
2024-09-03 12:38:23.679 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 12:38:23.680  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 5 ms
2024-09-03 12:38:23.683  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 12:58:00.756  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 12:58:00.760  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 12:58:00.762  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 12:58:06.039  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 12:58:06.085  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 114539 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 12:58:06.091  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 12:58:07.294  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 12:58:07.379  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 4 JPA repository interfaces.
2024-09-03 12:58:08.188  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 12:58:08.200  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 12:58:08.203  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 12:58:08.203  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 12:58:08.266  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 12:58:08.266  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2123 ms
2024-09-03 12:58:08.334  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 12:58:08.714  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 12:58:08.716  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 12:58:08.732  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 12:58:09.006  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 12:58:09.839  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 12:58:09.908  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 12:58:09.910  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 12:58:09.922  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 12:58:09.922  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 12:58:09.923  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 12:58:09.923  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 12:58:09.923  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 12:58:09.923  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 12:58:09.925  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 12:58:09.951  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 12:58:09.953  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 12:58:10.064  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 12:58:10.172  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 12:58:10.214  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 12:58:10.491  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 12:58:10.551  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 12:58:11.763  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 12:58:11.820  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 12:58:12.707  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 12:58:12.746  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: bd879be2-da3c-4d3a-94cb-03a593cd9533

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 12:58:13.023 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 12:58:13.192 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 12:58:13.271  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3787eac3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@27a57c66, org.springframework.security.web.context.SecurityContextHolderFilter@45cd5c56, org.springframework.security.web.header.HeaderWriterFilter@4823f3b8, org.springframework.web.filter.CorsFilter@5453020f, org.springframework.security.web.authentication.logout.LogoutFilter@492d0748, de.telran.urlshortener.security.JwtFilter@7845b21a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@629fc74d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@12dab9a8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@744d0cfb, org.springframework.security.web.session.SessionManagementFilter@3e1f6318, org.springframework.security.web.access.ExceptionTranslationFilter@54b3407b, org.springframework.security.web.access.intercept.AuthorizationFilter@1c619a77]
2024-09-03 12:58:13.423 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 12:58:13.478 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 12:58:13.832  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 12:58:13.852  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 12:58:13.864  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.231 seconds (process running for 9.51)
2024-09-03 12:58:14.074 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:58:14.102 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:58:14.105 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:58:14.109 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:58:14.112 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:58:14.115 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:58:14.122 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 12:58:14.126 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 12:58:18.844  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.jsp' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 12:58:19.214  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 12:58:19.214  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 12:58:19.215 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 12:58:19.215 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 12:58:19.215 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 12:58:19.218 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@23e0ef68
2024-09-03 12:58:19.219 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@72412c3d
2024-09-03 12:58:19.219 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 12:58:19.220  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 5 ms
2024-09-03 12:58:19.222  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 12:59:33.076  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 12:59:33.082  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 12:59:33.086  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 12:59:36.755  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 12:59:36.798  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 115464 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 12:59:36.803  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 12:59:37.988  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 12:59:38.070  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73 ms. Found 4 JPA repository interfaces.
2024-09-03 12:59:38.884  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 12:59:38.897  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 12:59:38.900  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 12:59:38.900  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 12:59:38.963  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 12:59:38.964  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2110 ms
2024-09-03 12:59:39.040  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 12:59:39.465  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 12:59:39.467  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 12:59:39.481  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 12:59:39.746  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 12:59:40.457  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 12:59:40.525  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 12:59:40.528  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 12:59:40.540  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 12:59:40.540  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 12:59:40.540  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 12:59:40.540  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 12:59:40.541  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 12:59:40.541  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 12:59:40.542  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 12:59:40.570  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 12:59:40.572  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 12:59:40.683  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 12:59:40.765  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 12:59:40.810  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 12:59:41.102  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 12:59:41.154  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 12:59:42.377  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 12:59:42.439  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 12:59:43.388  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 12:59:43.425  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 005de669-3302-42c7-887e-f1fd0c020eab

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 12:59:43.687 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 12:59:43.852 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 12:59:43.928  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@712a5de4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@364c4ba9, org.springframework.security.web.context.SecurityContextHolderFilter@1f6af096, org.springframework.security.web.header.HeaderWriterFilter@2140582, org.springframework.web.filter.CorsFilter@2008dfa7, org.springframework.security.web.authentication.logout.LogoutFilter@2e856aa4, de.telran.urlshortener.security.JwtFilter@56835f2f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2fc698a9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4823f3b8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@492d0748, org.springframework.security.web.session.SessionManagementFilter@12db2921, org.springframework.security.web.access.ExceptionTranslationFilter@56957f08, org.springframework.security.web.access.intercept.AuthorizationFilter@3aafa1c1]
2024-09-03 12:59:44.228 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 12:59:44.367 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 12:59:44.795  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 12:59:44.818  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 12:59:44.832  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.525 seconds (process running for 9.996)
2024-09-03 12:59:45.003 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:59:45.028 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:59:45.032 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:59:45.035 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:59:45.038 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:59:45.042 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 12:59:45.049 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 12:59:45.053 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 13:00:04.168  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 13:00:04.831  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 13:00:04.832  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 13:00:04.833 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 13:00:04.833 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 13:00:04.833 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 13:00:04.834 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@104972a0
2024-09-03 13:00:04.835 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@190ec769
2024-09-03 13:00:04.835 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 13:00:04.836  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-09-03 13:00:04.838  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 13:01:35.664  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 13:01:35.668  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 13:01:35.677  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 13:01:39.268  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 13:01:39.319  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 116718 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 13:01:39.325  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 13:01:40.567  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 13:01:40.648  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2024-09-03 13:01:41.465  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 13:01:41.477  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 13:01:41.480  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 13:01:41.480  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 13:01:41.539  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 13:01:41.539  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2157 ms
2024-09-03 13:01:41.611  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 13:01:42.006  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 13:01:42.008  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 13:01:42.024  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 13:01:42.283  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 13:01:43.122  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 13:01:43.181  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 13:01:43.183  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 13:01:43.194  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 13:01:43.194  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 13:01:43.194  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 13:01:43.194  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 13:01:43.195  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 13:01:43.195  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 13:01:43.196  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 13:01:43.220  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 13:01:43.222  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 13:01:43.346  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 13:01:43.440  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 13:01:43.483  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 13:01:43.775  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 13:01:43.827  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 13:01:45.046  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 13:01:45.103  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 13:01:45.979  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 13:01:46.015  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b081fdd5-4873-4ebe-a2b8-42be2e5ee947

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 13:01:46.299 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 13:01:46.461 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 13:01:46.538  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3f8090db, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6f1b0ead, org.springframework.security.web.context.SecurityContextHolderFilter@693676d, org.springframework.security.web.header.HeaderWriterFilter@3a7abd4, org.springframework.web.filter.CorsFilter@4487dce, org.springframework.security.web.authentication.logout.LogoutFilter@77376e83, de.telran.urlshortener.security.JwtFilter@7e2bc2f4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@55a7f0af, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@12db2921, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3aafa1c1, org.springframework.security.web.session.SessionManagementFilter@7b5afde5, org.springframework.security.web.access.ExceptionTranslationFilter@30b91493, org.springframework.security.web.access.intercept.AuthorizationFilter@1bd97254]
2024-09-03 13:01:46.692 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 13:01:46.748 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 13:01:47.132  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 13:01:47.150  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 13:01:47.163  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.341 seconds (process running for 9.81)
2024-09-03 13:01:47.351 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:01:47.382 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:01:47.386 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:01:47.390 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:01:47.394 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:01:47.398 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:01:47.405 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 13:01:47.410 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 13:02:00.383  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 13:02:01.300  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 13:02:01.301  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 13:02:01.301 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 13:02:01.302 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 13:02:01.302 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 13:02:01.304 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1ca6323c
2024-09-03 13:02:01.305 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@35abfeba
2024-09-03 13:02:01.306 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 13:02:01.306  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 5 ms
2024-09-03 13:02:01.310  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 13:04:12.074  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 13:04:12.079  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 13:04:12.081  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 13:04:15.938  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 13:04:15.986  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 118258 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 13:04:15.992  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 13:04:17.178  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 13:04:17.257  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 69 ms. Found 4 JPA repository interfaces.
2024-09-03 13:04:18.073  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 13:04:18.086  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 13:04:18.088  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 13:04:18.089  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 13:04:18.149  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 13:04:18.150  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2105 ms
2024-09-03 13:04:18.222  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 13:04:18.640  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 13:04:18.642  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 13:04:18.658  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 13:04:18.956  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 13:04:19.823  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 13:04:19.899  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 13:04:19.903  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 13:04:19.914  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 13:04:19.915  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 13:04:19.915  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 13:04:19.916  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 13:04:19.916  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 13:04:19.916  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 13:04:19.918  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 13:04:19.948  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 13:04:19.951  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 13:04:20.069  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 13:04:20.148  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 13:04:20.193  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 13:04:20.503  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 13:04:20.561  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 13:04:21.867  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 13:04:21.927  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 13:04:22.991  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 13:04:23.046  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 47a47119-003f-4ca8-8b4a-caf4203682ea

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 13:04:23.339 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 13:04:23.520 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 13:04:23.603  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4e60925d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5ed4c87, org.springframework.security.web.context.SecurityContextHolderFilter@28068327, org.springframework.security.web.header.HeaderWriterFilter@879f852, org.springframework.web.filter.CorsFilter@30a1b9b0, org.springframework.security.web.authentication.logout.LogoutFilter@32b19d03, de.telran.urlshortener.security.JwtFilter@598657cd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@751636da, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@26c75b91, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@16908f89, org.springframework.security.web.session.SessionManagementFilter@4efb7c99, org.springframework.security.web.access.ExceptionTranslationFilter@7b5afde5, org.springframework.security.web.access.intercept.AuthorizationFilter@3e0eb917]
2024-09-03 13:04:23.753 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 13:04:23.806 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 13:04:24.154  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 13:04:24.172  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 13:04:24.184  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.84 seconds (process running for 10.31)
2024-09-03 13:04:24.355 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:04:24.382 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:04:24.386 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:04:24.390 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:04:24.394 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:04:24.399 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:04:24.407 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 13:04:24.411 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 13:04:27.171  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 13:04:28.039  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 13:04:28.040  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 13:04:28.041 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 13:04:28.041 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 13:04:28.041 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 13:04:28.043 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@248227db
2024-09-03 13:04:28.044 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@397a70d8
2024-09-03 13:04:28.045 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 13:04:28.045  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 5 ms
2024-09-03 13:04:28.047  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 13:11:42.463  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 13:11:42.466  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 13:11:42.469  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 13:11:46.332  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 13:11:46.374  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 122286 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 13:11:46.379  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 13:11:47.574  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 13:11:47.656  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2024-09-03 13:11:48.488  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 13:11:48.501  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 13:11:48.504  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 13:11:48.504  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 13:11:48.568  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 13:11:48.569  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2138 ms
2024-09-03 13:11:48.646  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 13:11:49.039  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 13:11:49.041  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 13:11:49.056  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 13:11:49.319  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 13:11:50.141  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 13:11:50.203  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 13:11:50.206  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 13:11:50.217  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 13:11:50.217  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 13:11:50.217  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 13:11:50.217  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 13:11:50.218  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 13:11:50.218  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 13:11:50.219  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 13:11:50.244  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 13:11:50.246  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 13:11:50.367  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 13:11:50.454  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 13:11:50.499  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 13:11:50.787  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 13:11:50.843  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 13:11:52.079  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 13:11:52.139  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 13:11:53.021  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 13:11:53.058  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 5bf48603-4773-4ddf-94f8-e463638ef00f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 13:11:53.328 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 13:11:53.515 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 13:11:53.598  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@192f807, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@36cbe0fe, org.springframework.security.web.context.SecurityContextHolderFilter@f6e9c18, org.springframework.security.web.header.HeaderWriterFilter@56957f08, org.springframework.web.filter.CorsFilter@712a5de4, org.springframework.security.web.authentication.logout.LogoutFilter@7c3c6564, de.telran.urlshortener.security.JwtFilter@bd4ee01, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1f6af096, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@54b3407b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@364c4ba9, org.springframework.security.web.session.SessionManagementFilter@2a0a178f, org.springframework.security.web.access.ExceptionTranslationFilter@40a32c25, org.springframework.security.web.access.intercept.AuthorizationFilter@6f1b0ead]
2024-09-03 13:11:53.750 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 13:11:53.806 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 13:11:54.169  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 13:11:54.185  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 13:11:54.198  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.304 seconds (process running for 9.791)
2024-09-03 13:11:54.370 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:11:54.400 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:11:54.404 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:11:54.408 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:11:54.411 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:11:54.416 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:11:54.424 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 13:11:54.429 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 13:12:18.671  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 13:12:19.081  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 13:12:19.082  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 13:12:19.082 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 13:12:19.083 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 13:12:19.083 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 13:12:19.087 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6eed5b68
2024-09-03 13:12:19.088 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@673ce246
2024-09-03 13:12:19.089 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 13:12:19.090  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 7 ms
2024-09-03 13:12:19.092  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 13:29:03.189  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 13:29:03.191  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 13:29:03.193  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 13:29:06.597  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 13:29:06.631  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 131056 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 13:29:06.634  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 13:29:07.776  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 13:29:07.862  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 4 JPA repository interfaces.
2024-09-03 13:29:08.465  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 13:29:08.474  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 13:29:08.475  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 13:29:08.476  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 13:29:08.516  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 13:29:08.517  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1843 ms
2024-09-03 13:29:08.563  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 13:29:08.835  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 13:29:08.836  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 13:29:08.847  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 13:29:09.010  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 13:29:09.716  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 13:29:09.764  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 13:29:09.767  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 13:29:09.776  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 13:29:09.777  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 13:29:09.777  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 13:29:09.777  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 13:29:09.777  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 13:29:09.777  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 13:29:09.778  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 13:29:09.800  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 13:29:09.801  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 13:29:09.879  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 13:29:09.929  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 13:29:09.975  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 13:29:10.241  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 13:29:10.309  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 13:29:11.541  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 13:29:11.595  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 13:29:12.454  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 13:29:12.490  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: cdfe7bc9-b5a5-47e8-95eb-09f0136a95f7

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 13:29:12.746 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 13:29:12.899 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 13:29:12.970  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3e0eb917, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@589dac96, org.springframework.security.web.context.SecurityContextHolderFilter@4efb7c99, org.springframework.security.web.header.HeaderWriterFilter@1b32aaca, org.springframework.web.filter.CorsFilter@792bf78a, org.springframework.security.web.authentication.logout.LogoutFilter@2c1ffb9, de.telran.urlshortener.security.JwtFilter@7e2bc2f4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@20a3118, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@28068327, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4e60925d, org.springframework.security.web.session.SessionManagementFilter@2fc698a9, org.springframework.security.web.access.ExceptionTranslationFilter@2640f5ea, org.springframework.security.web.access.intercept.AuthorizationFilter@2008dfa7]
2024-09-03 13:29:13.118 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 13:29:13.169 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 13:29:13.516  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 13:29:13.534  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 13:29:13.546  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 7.296 seconds (process running for 8.676)
2024-09-03 13:29:13.723 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:29:13.749 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:29:13.752 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:29:13.755 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:29:13.759 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:29:13.763 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 13:29:13.769 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 13:29:13.773 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 13:29:31.802  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 13:29:32.704  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 13:29:32.705  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 13:29:32.705 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 13:29:32.706 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 13:29:32.706 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 13:29:32.709 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@104972a0
2024-09-03 13:29:32.711 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@50a2034c
2024-09-03 13:29:32.711 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 13:29:32.712  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 7 ms
2024-09-03 13:29:32.715  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 15:23:48.325  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 15:23:48.330  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 15:23:48.332  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 15:23:51.342  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 15:23:51.373  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 151538 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 15:23:51.376  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 15:23:52.269  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 15:23:52.328  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 53 ms. Found 4 JPA repository interfaces.
2024-09-03 15:23:52.972  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 15:23:52.982  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 15:23:52.984  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 15:23:52.984  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 15:23:53.029  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 15:23:53.030  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1617 ms
2024-09-03 15:23:53.082  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 15:23:53.409  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 15:23:53.411  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 15:23:53.420  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 15:23:53.594  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 15:23:54.537  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 15:23:54.608  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 15:23:54.610  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 15:23:54.622  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 15:23:54.622  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 15:23:54.623  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 15:23:54.623  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 15:23:54.623  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 15:23:54.623  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 15:23:54.625  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 15:23:54.651  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 15:23:54.652  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 15:23:54.766  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 15:23:54.848  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 15:23:54.893  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 15:23:55.186  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 15:23:55.242  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 15:23:56.446  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 15:23:56.504  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 15:23:57.386  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 15:23:57.423  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: ee44cc41-d981-4ed6-a8d1-34bf4f833478

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 15:23:57.700 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 15:23:57.862 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 15:23:57.940  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@47b6f580, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5eb054, org.springframework.security.web.context.SecurityContextHolderFilter@428169d, org.springframework.security.web.header.HeaderWriterFilter@45cd5c56, org.springframework.web.filter.CorsFilter@34d08905, org.springframework.security.web.authentication.logout.LogoutFilter@3787eac3, de.telran.urlshortener.security.JwtFilter@cec590c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@434c179e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@46199519, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@57421698, org.springframework.security.web.session.SessionManagementFilter@7c3c6564, org.springframework.security.web.access.ExceptionTranslationFilter@23182d4d, org.springframework.security.web.access.intercept.AuthorizationFilter@c3972d0]
2024-09-03 15:23:58.089 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 15:23:58.139 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 15:23:58.527  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 15:23:58.545  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 15:23:58.557  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 7.56 seconds (process running for 8.736)
2024-09-03 15:23:58.728 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:23:58.754 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:23:58.757 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:23:58.760 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:23:58.764 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:23:58.768 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:23:58.777 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 15:23:58.782 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 15:24:07.607  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 15:24:08.149  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 15:24:08.150  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 15:24:08.150 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 15:24:08.150 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 15:24:08.150 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 15:24:08.151 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7c3920a7
2024-09-03 15:24:08.152 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4f93816d
2024-09-03 15:24:08.152 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 15:24:08.152  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 2 ms
2024-09-03 15:24:08.154  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 15:28:45.812  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 15:28:45.817  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 15:28:45.819  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 15:28:49.611  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 15:28:49.656  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 154219 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 15:28:49.662  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 15:28:50.838  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 15:28:50.920  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73 ms. Found 4 JPA repository interfaces.
2024-09-03 15:28:51.716  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 15:28:51.729  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 15:28:51.732  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 15:28:51.732  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 15:28:51.795  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 15:28:51.796  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2082 ms
2024-09-03 15:28:51.866  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 15:28:52.242  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 15:28:52.244  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 15:28:52.259  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 15:28:52.526  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 15:28:53.404  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 15:28:53.466  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 15:28:53.468  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 15:28:53.478  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 15:28:53.479  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 15:28:53.479  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 15:28:53.479  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 15:28:53.479  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 15:28:53.480  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 15:28:53.481  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 15:28:53.505  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 15:28:53.507  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 15:28:53.608  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 15:28:53.685  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 15:28:53.739  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 15:28:54.029  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 15:28:54.089  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 15:28:55.151  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 15:28:55.191  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 15:28:55.830  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 15:28:55.854  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 816dce0b-b662-4790-b1f9-0cfe888323ea

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 15:28:56.026 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 15:28:56.157 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 15:28:56.205  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@30a1b9b0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@16908f89, org.springframework.security.web.context.SecurityContextHolderFilter@751636da, org.springframework.security.web.header.HeaderWriterFilter@2a0a178f, org.springframework.web.filter.CorsFilter@5ca8157c, org.springframework.security.web.authentication.logout.LogoutFilter@6f1b0ead, de.telran.urlshortener.security.JwtFilter@5c25d0d1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3a44ebd5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@667ce5fa, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@33cee31a, org.springframework.security.web.session.SessionManagementFilter@20a3118, org.springframework.security.web.access.ExceptionTranslationFilter@879f852, org.springframework.security.web.access.intercept.AuthorizationFilter@792bf78a]
2024-09-03 15:28:56.309 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 15:28:56.346 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 15:28:56.589  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 15:28:56.602  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 15:28:56.611  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 7.489 seconds (process running for 8.961)
2024-09-03 15:28:56.762 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:28:56.778 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:28:56.780 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:28:56.783 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:28:56.785 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:28:56.788 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:28:56.793 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 15:28:56.796 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 15:29:06.577  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 15:29:07.105  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 15:29:07.106  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 15:29:07.106 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 15:29:07.107 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 15:29:07.107 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 15:29:07.109 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@fb69ab1
2024-09-03 15:29:07.110 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@1f9ec3e7
2024-09-03 15:29:07.110 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 15:29:07.111  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 5 ms
2024-09-03 15:29:07.113  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 15:29:45.866  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 15:29:45.871  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 15:29:45.874  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 15:29:49.389  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 15:29:49.443  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 154954 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 15:29:49.449  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 15:29:50.664  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 15:29:50.746  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73 ms. Found 4 JPA repository interfaces.
2024-09-03 15:29:51.576  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 15:29:51.588  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 15:29:51.591  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 15:29:51.591  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 15:29:51.650  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 15:29:51.650  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2145 ms
2024-09-03 15:29:51.716  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 15:29:52.107  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 15:29:52.109  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 15:29:52.125  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 15:29:52.397  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 15:29:53.230  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 15:29:53.296  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 15:29:53.298  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 15:29:53.309  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 15:29:53.309  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 15:29:53.310  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 15:29:53.310  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 15:29:53.310  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 15:29:53.311  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 15:29:53.312  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 15:29:53.336  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 15:29:53.338  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 15:29:53.446  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 15:29:53.525  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 15:29:53.578  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 15:29:53.865  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 15:29:53.919  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 15:29:55.170  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 15:29:55.234  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 15:29:56.118  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 15:29:56.155  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 66144a86-90db-4c79-8325-b0cef1114186

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 15:29:56.431 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 15:29:56.597 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 15:29:56.677  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@23cf78f9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@30b35687, org.springframework.security.web.context.SecurityContextHolderFilter@40a32c25, org.springframework.security.web.header.HeaderWriterFilter@542adcfa, org.springframework.web.filter.CorsFilter@7c3c6564, org.springframework.security.web.authentication.logout.LogoutFilter@667ce5fa, de.telran.urlshortener.security.JwtFilter@66298fe9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56957f08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5b0fc8c2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7655dc27, org.springframework.security.web.session.SessionManagementFilter@2771e501, org.springframework.security.web.access.ExceptionTranslationFilter@4c752425, org.springframework.security.web.access.intercept.AuthorizationFilter@19c145d2]
2024-09-03 15:29:56.831 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 15:29:56.887 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 15:29:57.236  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 15:29:57.256  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 15:29:57.269  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.38 seconds (process running for 9.833)
2024-09-03 15:29:57.468 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:29:57.510 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:29:57.515 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:29:57.518 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:29:57.522 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:29:57.526 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:29:57.533 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 15:29:57.537 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 15:37:17.132  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 15:37:17.134  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 15:37:17.136  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 15:37:20.048  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 15:37:20.079  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 159008 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 15:37:20.083  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "jdbc:h2:mem:testdb"
2024-09-03 15:37:20.939  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 15:37:20.999  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 53 ms. Found 4 JPA repository interfaces.
2024-09-03 15:37:21.723  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 15:37:21.733  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 15:37:21.735  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 15:37:21.735  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 15:37:21.779  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 15:37:21.779  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1661 ms
2024-09-03 15:37:21.830  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 15:37:22.019  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:0d511f11-0f8f-4cfc-8506-b002375d0614 user=SA
2024-09-03 15:37:22.021  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 15:37:22.032  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:0d511f11-0f8f-4cfc-8506-b002375d0614'
2024-09-03 15:37:22.206  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 15:37:22.629  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-03 15:37:22.965  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 15:37:23.100  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-03 15:37:23.102  INFO --- [           main] l.command                                : Using deploymentId: 5370643101
2024-09-03 15:37:23.104  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 15:37:23.144  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-03 15:37:23.158  INFO --- [           main] l.changelog                              : Table roles created
2024-09-03 15:37:23.159  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-03 15:37:23.169  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-03 15:37:23.177  INFO --- [           main] l.changelog                              : Table users created
2024-09-03 15:37:23.178  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-03 15:37:23.186  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-03 15:37:23.191  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-03 15:37:23.201  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-03 15:37:23.202  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-03 15:37:23.210  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-03 15:37:23.217  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-03 15:37:23.221  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-03 15:37:23.222  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-03 15:37:23.228  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-03 15:37:23.231  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-03 15:37:23.235  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-03 15:37:23.239  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-03 15:37:23.245  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-03 15:37:23.245  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 17ms
2024-09-03 15:37:23.256  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 15:37:23.256  INFO --- [           main] l.util                                   : Run:                          5
2024-09-03 15:37:23.256  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-03 15:37:23.257  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 15:37:23.257  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 15:37:23.257  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 15:37:23.259  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 15:37:23.262  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-03 15:37:23.263  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-03 15:37:23.265  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 15:37:23.267  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 15:37:23.392  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 15:37:23.479  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 15:37:23.522  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 15:37:23.797  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 15:37:23.849  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 15:37:25.033  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 15:37:25.037  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 15:37:25.894  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 15:37:25.932  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: dc8a7573-0669-42ae-9d9b-5b284d2fb28b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 15:37:26.198 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 15:37:26.364 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 15:37:26.444  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@64df3f4b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@54a98439, org.springframework.security.web.context.SecurityContextHolderFilter@5b1e5366, org.springframework.security.web.header.HeaderWriterFilter@592efd6, org.springframework.web.filter.CorsFilter@4b20b431, org.springframework.security.web.authentication.logout.LogoutFilter@15d04c41, de.telran.urlshortener.security.JwtFilter@6c6c2a73, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@386cc1c4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2e3c5ecc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@46875fae, org.springframework.security.web.session.SessionManagementFilter@cb29b75, org.springframework.security.web.access.ExceptionTranslationFilter@1da9f44c, org.springframework.security.web.access.intercept.AuthorizationFilter@654ab198]
2024-09-03 15:37:26.606 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 15:37:26.660 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 15:37:27.004  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 15:37:27.022  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 15:37:27.035  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 7.385 seconds (process running for 8.552)
2024-09-03 15:37:27.224 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:37:27.308 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 15:37:27.327 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:37:27.337 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:37:27.340 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 15:37:27.343 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:37:27.345 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 15:37:27.348 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:37:27.351 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:37:27.358 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 15:37:27.514 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-03 15:37:27.528 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-03 15:37:27.534 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 15:37:27.663 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-03 15:37:27.665 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-03 15:37:36.603  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 15:37:37.374  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 15:37:37.374  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 15:37:37.375 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 15:37:37.375 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 15:37:37.375 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 15:37:37.379 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3aaeb65b
2024-09-03 15:37:37.380 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4dd56393
2024-09-03 15:37:37.381 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 15:37:37.381  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 6 ms
2024-09-03 15:37:37.384  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 15:42:17.879  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 15:42:17.883  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 15:42:17.885  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 15:42:21.195  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 15:42:21.248  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 161707 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 15:42:21.254  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "jdbc:h2:mem:testdb"
2024-09-03 15:42:22.456  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 15:42:22.541  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 4 JPA repository interfaces.
2024-09-03 15:42:23.358  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 15:42:23.371  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 15:42:23.374  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 15:42:23.374  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 15:42:23.436  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 15:42:23.437  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2128 ms
2024-09-03 15:42:23.504  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 15:42:23.770  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:ab20b2ea-df5a-4ade-b748-7daca7ae9ad8 user=SA
2024-09-03 15:42:23.772  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 15:42:23.787  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:ab20b2ea-df5a-4ade-b748-7daca7ae9ad8'
2024-09-03 15:42:24.061  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 15:42:24.623  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-03 15:42:24.937  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 15:42:25.083  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-03 15:42:25.085  INFO --- [           main] l.command                                : Using deploymentId: 5370945084
2024-09-03 15:42:25.088  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 15:42:25.130  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-03 15:42:25.145  INFO --- [           main] l.changelog                              : Table roles created
2024-09-03 15:42:25.146  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 14ms
2024-09-03 15:42:25.158  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-03 15:42:25.167  INFO --- [           main] l.changelog                              : Table users created
2024-09-03 15:42:25.168  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-03 15:42:25.177  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-03 15:42:25.185  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-03 15:42:25.197  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-03 15:42:25.198  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 20ms
2024-09-03 15:42:25.207  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-03 15:42:25.214  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-03 15:42:25.217  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-03 15:42:25.218  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-03 15:42:25.223  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-03 15:42:25.226  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-03 15:42:25.230  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-03 15:42:25.233  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-03 15:42:25.239  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-03 15:42:25.239  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-03 15:42:25.248  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 15:42:25.249  INFO --- [           main] l.util                                   : Run:                          5
2024-09-03 15:42:25.249  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-03 15:42:25.249  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 15:42:25.250  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 15:42:25.250  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 15:42:25.251  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 15:42:25.254  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-03 15:42:25.255  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-03 15:42:25.257  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 15:42:25.258  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 15:42:25.387  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 15:42:25.472  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 15:42:25.515  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 15:42:25.808  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 15:42:25.860  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 15:42:27.064  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 15:42:27.068  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 15:42:27.953  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 15:42:27.990  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 589d9afc-6c7d-4e25-afcb-0001c154fbbb

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 15:42:28.261 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 15:42:28.414 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 15:42:28.490  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@18bd3135, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2b1f0667, org.springframework.security.web.context.SecurityContextHolderFilter@71ed3bc8, org.springframework.security.web.header.HeaderWriterFilter@410c1f44, org.springframework.web.filter.CorsFilter@6000ca67, org.springframework.security.web.authentication.logout.LogoutFilter@790bd0e, de.telran.urlshortener.security.JwtFilter@37b1149b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@f714749, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@25f3207e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@27e25c2f, org.springframework.security.web.session.SessionManagementFilter@1ac8f29c, org.springframework.security.web.access.ExceptionTranslationFilter@21f8aa9c, org.springframework.security.web.access.intercept.AuthorizationFilter@423e35f0]
2024-09-03 15:42:28.643 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 15:42:28.697 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 15:42:29.067  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 15:42:29.084  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 15:42:29.097  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.357 seconds (process running for 9.841)
2024-09-03 15:42:29.287 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:42:29.381 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 15:42:29.402 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:42:29.412 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:42:29.414 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 15:42:29.417 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:42:29.419 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 15:42:29.422 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:42:29.425 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 15:42:29.431 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 15:42:29.590 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-03 15:42:29.608 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-03 15:42:29.615 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 15:42:29.744 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-03 15:42:29.746 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-03 15:42:38.789  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 15:42:39.165  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 15:42:39.165  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 15:42:39.166 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 15:42:39.166 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 15:42:39.166 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 15:42:39.168 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@368617cd
2024-09-03 15:42:39.169 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@57421698
2024-09-03 15:42:39.170 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 15:42:39.170  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 5 ms
2024-09-03 15:42:39.173  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 16:08:11.132  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-03 16:08:11.296  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-03 16:08:11.848  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 16:08:11.895  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 17.0.12 with PID 174961 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 16:08:11.904  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "jdbc:h2:mem:testdb"
2024-09-03 16:08:11.974 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5754de72
2024-09-03 16:08:13.360  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 16:08:13.491  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 118 ms. Found 4 JPA repository interfaces.
2024-09-03 16:08:14.508  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 16:08:14.899  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:6e249b16-c774-4fea-a1cf-14b7d0f14acc user=SA
2024-09-03 16:08:14.901  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 16:08:15.030  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 16:08:15.851  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-03 16:08:16.092  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 16:08:16.279  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-03 16:08:16.282  INFO --- [           main] l.command                                : Using deploymentId: 5372496281
2024-09-03 16:08:16.285  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 16:08:16.343  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-03 16:08:16.364  INFO --- [           main] l.changelog                              : Table roles created
2024-09-03 16:08:16.366  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 21ms
2024-09-03 16:08:16.379  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-03 16:08:16.388  INFO --- [           main] l.changelog                              : Table users created
2024-09-03 16:08:16.389  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-03 16:08:16.396  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-03 16:08:16.403  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-03 16:08:16.413  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-03 16:08:16.414  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 17ms
2024-09-03 16:08:16.422  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-03 16:08:16.429  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-03 16:08:16.433  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-03 16:08:16.434  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-03 16:08:16.440  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-03 16:08:16.443  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-03 16:08:16.447  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-03 16:08:16.451  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-03 16:08:16.457  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-03 16:08:16.458  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-03 16:08:16.477  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 16:08:16.477  INFO --- [           main] l.util                                   : Run:                          5
2024-09-03 16:08:16.478  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-03 16:08:16.478  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 16:08:16.478  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 16:08:16.479  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 16:08:16.480  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 16:08:16.486  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-03 16:08:16.487  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-03 16:08:16.492  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 16:08:16.493  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 16:08:16.669  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 16:08:16.773  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 16:08:16.841  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 16:08:17.161  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 16:08:17.226  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 16:08:18.564  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 16:08:18.569  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 16:08:19.639  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 16:08:19.679  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 95f1a035-301b-4365-a819-1a818b0c1c3f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 16:08:19.967 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 16:08:20.184 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 16:08:20.248  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4b9b57d9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2762bd70, org.springframework.security.web.context.SecurityContextHolderFilter@2a6dfbb2, org.springframework.security.web.header.HeaderWriterFilter@7cf618f3, org.springframework.web.filter.CorsFilter@b94c22d, org.springframework.security.web.authentication.logout.LogoutFilter@67f5066e, de.telran.urlshortener.security.JwtFilter@42d65ffc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3dab9366, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@33ccc8cd, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5fb4870b, org.springframework.security.web.session.SessionManagementFilter@609a996f, org.springframework.security.web.access.ExceptionTranslationFilter@7c58c10f, org.springframework.security.web.access.intercept.AuthorizationFilter@4c24063c]
2024-09-03 16:08:20.542 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 16:08:20.590 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 16:08:20.797  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:6e249b16-c774-4fea-a1cf-14b7d0f14acc'
2024-09-03 16:08:20.899  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 9.406 seconds (process running for 11.564)
2024-09-03 16:08:21.092 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 16:08:21.190 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 16:08:21.214 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 16:08:21.226 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 16:08:21.229 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 16:08:21.233 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 16:08:21.235 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 16:08:21.240 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 16:08:21.243 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 16:08:21.250 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 16:08:21.418 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-03 16:08:21.432 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-03 16:08:21.438 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 16:08:21.576 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-03 16:08:21.578 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-03 16:08:22.371 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@5754de72, started on Tue Sep 03 16:08:11 CEST 2024
2024-09-03 16:08:22.381  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 16:08:22.385  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 16:08:22.388  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 16:59:41.470  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 16:59:41.474  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 16:59:41.476  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 16:59:44.177 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
java.lang.IllegalStateException: Location 'file:./config/*/application-jdbc:h2:file:./data/db.yaml' must end with '*/'
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.context.config.LocationResourceLoader.validatePattern(LocationResourceLoader.java:134)
	at org.springframework.boot.context.config.LocationResourceLoader.getResources(LocationResourceLoader.java:95)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolvePattern(StandardConfigDataLocationResolver.java:317)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolve(StandardConfigDataLocationResolver.java:303)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolve(StandardConfigDataLocationResolver.java:254)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolveProfileSpecific(StandardConfigDataLocationResolver.java:150)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.lambda$resolve$2(ConfigDataLocationResolvers.java:107)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:113)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:106)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:94)
	at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:106)
	at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:98)
	at org.springframework.boot.context.config.ConfigDataImporter.resolveAndLoad(ConfigDataImporter.java:86)
	at org.springframework.boot.context.config.ConfigDataEnvironmentContributors.withProcessedImports(ConfigDataEnvironmentContributors.java:115)
	at org.springframework.boot.context.config.ConfigDataEnvironment.processWithProfiles(ConfigDataEnvironment.java:313)
	at org.springframework.boot.context.config.ConfigDataEnvironment.processAndApply(ConfigDataEnvironment.java:234)
	at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:96)
	at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:89)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:137)
	at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)
	at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)
	at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:366)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
2024-09-03 17:00:55.222 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
java.lang.IllegalStateException: Location 'file:./config/*/application-jdbc:h2:file:./dev.yaml' must end with '*/'
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.context.config.LocationResourceLoader.validatePattern(LocationResourceLoader.java:134)
	at org.springframework.boot.context.config.LocationResourceLoader.getResources(LocationResourceLoader.java:95)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolvePattern(StandardConfigDataLocationResolver.java:317)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolve(StandardConfigDataLocationResolver.java:303)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolve(StandardConfigDataLocationResolver.java:254)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolveProfileSpecific(StandardConfigDataLocationResolver.java:150)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.lambda$resolve$2(ConfigDataLocationResolvers.java:107)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:113)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:106)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:94)
	at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:106)
	at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:98)
	at org.springframework.boot.context.config.ConfigDataImporter.resolveAndLoad(ConfigDataImporter.java:86)
	at org.springframework.boot.context.config.ConfigDataEnvironmentContributors.withProcessedImports(ConfigDataEnvironmentContributors.java:115)
	at org.springframework.boot.context.config.ConfigDataEnvironment.processWithProfiles(ConfigDataEnvironment.java:313)
	at org.springframework.boot.context.config.ConfigDataEnvironment.processAndApply(ConfigDataEnvironment.java:234)
	at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:96)
	at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:89)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:137)
	at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)
	at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)
	at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:366)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
2024-09-03 17:01:22.701 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
java.lang.IllegalStateException: Location 'file:./config/*/application-jdbc:h2:file:./dev.yaml' must end with '*/'
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.context.config.LocationResourceLoader.validatePattern(LocationResourceLoader.java:134)
	at org.springframework.boot.context.config.LocationResourceLoader.getResources(LocationResourceLoader.java:95)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolvePattern(StandardConfigDataLocationResolver.java:317)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolve(StandardConfigDataLocationResolver.java:303)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolve(StandardConfigDataLocationResolver.java:254)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolveProfileSpecific(StandardConfigDataLocationResolver.java:150)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.lambda$resolve$2(ConfigDataLocationResolvers.java:107)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:113)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:106)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:94)
	at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:106)
	at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:98)
	at org.springframework.boot.context.config.ConfigDataImporter.resolveAndLoad(ConfigDataImporter.java:86)
	at org.springframework.boot.context.config.ConfigDataEnvironmentContributors.withProcessedImports(ConfigDataEnvironmentContributors.java:115)
	at org.springframework.boot.context.config.ConfigDataEnvironment.processWithProfiles(ConfigDataEnvironment.java:313)
	at org.springframework.boot.context.config.ConfigDataEnvironment.processAndApply(ConfigDataEnvironment.java:234)
	at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:96)
	at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:89)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:137)
	at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)
	at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)
	at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:366)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
2024-09-03 17:02:04.718 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
java.lang.IllegalStateException: Location 'file:./config/*/application-jdbc:h2:file:./dev.yaml' must end with '*/'
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.context.config.LocationResourceLoader.validatePattern(LocationResourceLoader.java:134)
	at org.springframework.boot.context.config.LocationResourceLoader.getResources(LocationResourceLoader.java:95)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolvePattern(StandardConfigDataLocationResolver.java:317)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolve(StandardConfigDataLocationResolver.java:303)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolve(StandardConfigDataLocationResolver.java:254)
	at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolveProfileSpecific(StandardConfigDataLocationResolver.java:150)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.lambda$resolve$2(ConfigDataLocationResolvers.java:107)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:113)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:106)
	at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:94)
	at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:106)
	at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:98)
	at org.springframework.boot.context.config.ConfigDataImporter.resolveAndLoad(ConfigDataImporter.java:86)
	at org.springframework.boot.context.config.ConfigDataEnvironmentContributors.withProcessedImports(ConfigDataEnvironmentContributors.java:115)
	at org.springframework.boot.context.config.ConfigDataEnvironment.processWithProfiles(ConfigDataEnvironment.java:313)
	at org.springframework.boot.context.config.ConfigDataEnvironment.processAndApply(ConfigDataEnvironment.java:234)
	at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:96)
	at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:89)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:137)
	at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)
	at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)
	at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:366)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
2024-09-03 17:06:25.581  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 17:06:25.625  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 204386 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 17:06:25.630  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-03 17:06:26.822  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 17:06:26.904  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73 ms. Found 4 JPA repository interfaces.
2024-09-03 17:06:27.717  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 17:06:27.729  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 17:06:27.732  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 17:06:27.732  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 17:06:27.792  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 17:06:27.792  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2112 ms
2024-09-03 17:06:27.861  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 17:06:28.234  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-03 17:06:28.236  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 17:06:28.252  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-03 17:06:28.524  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 17:06:29.410  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 17:06:29.473  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-03 17:06:29.476  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 17:06:29.486  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 17:06:29.487  INFO --- [           main] l.util                                   : Run:                          0
2024-09-03 17:06:29.487  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-03 17:06:29.487  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 17:06:29.487  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 17:06:29.488  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 17:06:29.489  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 17:06:29.514  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 17:06:29.516  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 17:06:29.625  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 17:06:29.704  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 17:06:29.757  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 17:06:30.042  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 17:06:30.105  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 17:06:31.346  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 17:06:31.409  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 17:06:32.295  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 17:06:32.334  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 406499bd-6164-449a-8e79-0b026c5b2a0b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 17:06:32.602 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 17:06:32.756 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 17:06:32.832  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@16908f89, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5ca8157c, org.springframework.security.web.context.SecurityContextHolderFilter@26c75b91, org.springframework.security.web.header.HeaderWriterFilter@55a7f0af, org.springframework.web.filter.CorsFilter@33cee31a, org.springframework.security.web.authentication.logout.LogoutFilter@4487dce, de.telran.urlshortener.security.JwtFilter@39ace1a7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@667ce5fa, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2298af09, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@e9fa0ea, org.springframework.security.web.session.SessionManagementFilter@28068327, org.springframework.security.web.access.ExceptionTranslationFilter@693676d, org.springframework.security.web.access.intercept.AuthorizationFilter@4e60925d]
2024-09-03 17:06:32.978 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 17:06:33.033 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 17:06:33.400  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 17:06:33.430  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 17:06:33.446  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.33 seconds (process running for 9.774)
2024-09-03 17:06:33.622 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 17:06:33.648 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 17:06:33.651 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 17:06:33.654 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 17:06:33.657 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 17:06:33.659 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 17:06:33.665 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 17:06:33.669 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 17:07:14.941  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 17:07:14.945  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-03 17:07:14.947  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-03 17:07:18.266  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-03 17:07:18.313  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 204958 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-03 17:07:18.318  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "test"
2024-09-03 17:07:19.598  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-03 17:07:19.692  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 84 ms. Found 4 JPA repository interfaces.
2024-09-03 17:07:20.553  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-03 17:07:20.566  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-03 17:07:20.569  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-03 17:07:20.569  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-03 17:07:20.633  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-03 17:07:20.633  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2255 ms
2024-09-03 17:07:20.708  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-03 17:07:20.990  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-03 17:07:20.993  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-03 17:07:21.008  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-03 17:07:21.271  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-03 17:07:21.821  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-03 17:07:21.947  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 17:07:22.112  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-03 17:07:22.113  INFO --- [           main] l.command                                : Using deploymentId: 5376042113
2024-09-03 17:07:22.117  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-03 17:07:22.155  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-03 17:07:22.168  INFO --- [           main] l.changelog                              : Table roles created
2024-09-03 17:07:22.169  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 11ms
2024-09-03 17:07:22.178  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-03 17:07:22.184  INFO --- [           main] l.changelog                              : Table users created
2024-09-03 17:07:22.184  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-03 17:07:22.191  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-03 17:07:22.196  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-03 17:07:22.203  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-03 17:07:22.204  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 13ms
2024-09-03 17:07:22.210  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-03 17:07:22.215  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-03 17:07:22.218  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-03 17:07:22.219  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 8ms
2024-09-03 17:07:22.223  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-03 17:07:22.226  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-03 17:07:22.230  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-03 17:07:22.233  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-03 17:07:22.238  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-03 17:07:22.239  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 14ms
2024-09-03 17:07:22.247  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-03 17:07:22.248  INFO --- [           main] l.util                                   : Run:                          5
2024-09-03 17:07:22.248  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-03 17:07:22.248  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-03 17:07:22.249  INFO --- [           main] l.util                                   : -------------------------------
2024-09-03 17:07:22.249  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-03 17:07:22.250  INFO --- [           main] l.util                                   : Update summary generated
2024-09-03 17:07:22.253  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-03 17:07:22.254  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 5
2024-09-03 17:07:22.256  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-03 17:07:22.257  INFO --- [           main] l.command                                : Command execution complete
2024-09-03 17:07:22.373  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-03 17:07:22.463  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-03 17:07:22.508  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-03 17:07:22.805  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-03 17:07:22.858  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-03 17:07:24.064  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-03 17:07:24.085 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-03 17:07:24.088 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-03 17:07:24.090 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-03 17:07:24.091 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-03 17:07:24.092 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-03 17:07:24.100 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-03 17:07:24.112 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-03 17:07:24.114 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-03 17:07:24.117 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-03 17:07:24.118 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-03 17:07:24.121 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-03 17:07:24.123 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-03 17:07:24.124 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-03 17:07:24.126 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-03 17:07:24.132  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-03 17:07:24.994  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-03 17:07:25.033  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 16eb7749-cfbb-4994-a720-bfe928c8ae4c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-03 17:07:25.308 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-03 17:07:25.473 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-03 17:07:25.549  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3bc00359, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@30b91493, org.springframework.security.web.context.SecurityContextHolderFilter@3c62bae5, org.springframework.security.web.header.HeaderWriterFilter@5118c7fb, org.springframework.web.filter.CorsFilter@2771e501, org.springframework.security.web.authentication.logout.LogoutFilter@199549a5, de.telran.urlshortener.security.JwtFilter@d969452, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1a18e18d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5b628249, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3a7abd4, org.springframework.security.web.session.SessionManagementFilter@ba77dc6, org.springframework.security.web.access.ExceptionTranslationFilter@7fec354, org.springframework.security.web.access.intercept.AuthorizationFilter@2c64e2d0]
2024-09-03 17:07:25.696 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-03 17:07:25.747 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-03 17:07:26.116  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-03 17:07:26.133  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-03 17:07:26.146  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.301 seconds (process running for 9.801)
2024-09-03 17:07:26.314 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 17:07:26.422 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 17:07:26.444 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 17:07:26.453 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 17:07:26.455 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 17:07:26.459 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 17:07:26.460 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-03 17:07:26.464 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 17:07:26.467 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-03 17:07:26.474 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 17:07:26.624 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-03 17:07:26.642 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-03 17:07:26.648 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-03 17:07:26.785 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-03 17:07:26.787 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-03 17:07:46.233  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-03 17:07:46.966  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-03 17:07:46.967  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-03 17:07:46.967 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-03 17:07:46.967 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-03 17:07:46.968 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-03 17:07:46.969 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6321e29b
2024-09-03 17:07:46.970 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@37c5a3c7
2024-09-03 17:07:46.971 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-03 17:07:46.971  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-09-03 17:07:46.975  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-05 06:58:27.796  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 06:58:27.961  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 06:58:28.555  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 06:58:28.611  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 12034 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 06:58:28.618  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 06:58:28.673 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-09-05 06:58:30.374  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 06:58:30.476  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 86 ms. Found 4 JPA repository interfaces.
2024-09-05 06:58:31.504  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 06:58:32.012  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-05 06:58:32.015  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 06:58:32.128  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 06:58:33.220  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 06:58:33.287  INFO --- [           main] l.changelog                              : Change failed validation!
2024-09-05 06:58:33.292  INFO --- [           main] l.command                                : Logging exception.
2024-09-05 06:58:33.293  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-09-05 06:58:33.293  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ValidationFailedException
2024-09-05 06:58:33.294  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  Validation Failed:
     1 changesets check sum
          db/changelog/db.changelog-1.0.xml::4::shemchuk was: 9:090d85430e9f3df72ddba3fd5520cec2 but is now: 9:3a4f2b27c47a768398ab8b63be22e29a

2024-09-05 06:58:33.294  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-09-05 06:58:33.295  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 06:58:33.297  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/db.changelog-1.0.xml::4::shemchuk was: 9:090d85430e9f3df72ddba3fd5520cec2 but is now: 9:3a4f2b27c47a768398ab8b63be22e29a

2024-09-05 06:58:33.297  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 06:58:33.347  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 06:58:33.363  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-05 06:58:33.386 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/db.changelog-1.0.xml::4::shemchuk was: 9:090d85430e9f3df72ddba3fd5520cec2 but is now: 9:3a4f2b27c47a768398ab8b63be22e29a

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/db.changelog-1.0.xml::4::shemchuk was: 9:090d85430e9f3df72ddba3fd5520cec2 but is now: 9:3a4f2b27c47a768398ab8b63be22e29a

	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 96 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/db.changelog-1.0.xml::4::shemchuk was: 9:090d85430e9f3df72ddba3fd5520cec2 but is now: 9:3a4f2b27c47a768398ab8b63be22e29a

	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 98 more
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/db.changelog-1.0.xml::4::shemchuk was: 9:090d85430e9f3df72ddba3fd5520cec2 but is now: 9:3a4f2b27c47a768398ab8b63be22e29a

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:358)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 114 more
2024-09-05 06:58:33.403 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@1d0dad12]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@186dcb05 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4bf3798b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39dcf4b0, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@72a85671, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@274872f8, org.springframework.boot.test.context.SpringBootTestAnnotation@5b3cbcb5], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/db.changelog-1.0.xml::4::shemchuk was: 9:090d85430e9f3df72ddba3fd5520cec2 but is now: 9:3a4f2b27c47a768398ab8b63be22e29a

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/db.changelog-1.0.xml::4::shemchuk was: 9:090d85430e9f3df72ddba3fd5520cec2 but is now: 9:3a4f2b27c47a768398ab8b63be22e29a

	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 96 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/db.changelog-1.0.xml::4::shemchuk was: 9:090d85430e9f3df72ddba3fd5520cec2 but is now: 9:3a4f2b27c47a768398ab8b63be22e29a

	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 98 more
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/db.changelog-1.0.xml::4::shemchuk was: 9:090d85430e9f3df72ddba3fd5520cec2 but is now: 9:3a4f2b27c47a768398ab8b63be22e29a

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:358)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 114 more
2024-09-05 07:09:44.578  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 07:09:44.726  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 07:09:45.327  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 07:09:45.378  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 17529 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 07:09:45.384  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 07:09:45.432 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-09-05 07:09:46.917  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 07:09:47.020  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 90 ms. Found 4 JPA repository interfaces.
2024-09-05 07:09:47.859  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 07:09:48.416  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-05 07:09:48.420  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 07:09:48.541  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 07:09:49.644  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 07:09:49.732  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 07:09:49.735  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 07:09:49.751  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 07:09:49.752  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 07:09:49.752  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-05 07:09:49.753  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 07:09:49.753  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 07:09:49.754  INFO --- [           main] l.util                                   : Total change sets:            5
2024-09-05 07:09:49.756  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 07:09:49.789  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 07:09:49.792  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 07:09:49.999  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 07:09:50.139  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 07:09:50.197  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 07:09:50.550  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 07:09:50.631  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 07:09:52.035  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 07:09:52.091  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 07:09:53.204  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 07:09:53.237  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b8af5d53-350b-4498-9273-06fd9ccee5e9

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 07:09:53.514 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 07:09:53.738 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 07:09:53.792  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@55105271, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@126a8548, org.springframework.security.web.context.SecurityContextHolderFilter@6c07666f, org.springframework.security.web.header.HeaderWriterFilter@1ff584d7, org.springframework.web.filter.CorsFilter@54a2ff94, org.springframework.security.web.authentication.logout.LogoutFilter@2620f935, de.telran.urlshortener.security.JwtFilter@81198ed, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4bdec54, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@68fd0fba, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3d2be0df, org.springframework.security.web.session.SessionManagementFilter@e7c3ba2, org.springframework.security.web.access.ExceptionTranslationFilter@6bb2b8d4, org.springframework.security.web.access.intercept.AuthorizationFilter@16fa28eb]
2024-09-05 07:09:54.174 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 07:09:54.223 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 07:09:54.468  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 07:09:54.602  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 9.676 seconds (process running for 11.863)
2024-09-05 07:09:54.855 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:09:54.888 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:09:54.892 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:09:54.896 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:09:54.900 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:09:54.904 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:09:54.912 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 07:09:54.917 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 07:09:55.889 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@70242f38, started on Thu Sep 05 07:09:45 CEST 2024
2024-09-05 07:09:55.901  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 07:09:55.905  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 07:09:55.913  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 07:15:15.212  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 07:15:15.344  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 07:15:15.885  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 07:15:15.934  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 20515 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 07:15:15.939  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 07:15:15.985 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-09-05 07:15:17.482  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 07:15:17.591  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 94 ms. Found 4 JPA repository interfaces.
2024-09-05 07:15:18.560  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 07:15:19.052  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-05 07:15:19.055  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 07:15:19.151  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 07:15:20.123  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 07:15:20.240  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 07:15:20.242  INFO --- [           main] l.command                                : Using deploymentId: 5513320242
2024-09-05 07:15:20.245  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 07:15:20.256  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 07:15:20.278  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 07:15:20.290  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 07:15:20.291  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 32ms
2024-09-05 07:15:20.311  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 07:15:20.311  INFO --- [           main] l.util                                   : Run:                          1
2024-09-05 07:15:20.311  INFO --- [           main] l.util                                   : Previously run:               5
2024-09-05 07:15:20.312  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 07:15:20.312  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 07:15:20.313  INFO --- [           main] l.util                                   : Total change sets:            6
2024-09-05 07:15:20.314  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 07:15:20.318  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 07:15:20.319  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 1
2024-09-05 07:15:20.322  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 07:15:20.324  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 07:15:20.482  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 07:15:20.590  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 07:15:20.671  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 07:15:21.078  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 07:15:21.176  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 07:15:22.464  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 07:15:22.524  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 07:15:23.451  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 07:15:23.485  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 82baa6d9-46bf-4bd2-9612-46b33978ab70

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 07:15:23.743 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 07:15:23.958 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 07:15:24.006  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@55a8f92d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@78b3f926, org.springframework.security.web.context.SecurityContextHolderFilter@ab5c335, org.springframework.security.web.header.HeaderWriterFilter@6970687e, org.springframework.web.filter.CorsFilter@1ec690bd, org.springframework.security.web.authentication.logout.LogoutFilter@10c95d9b, de.telran.urlshortener.security.JwtFilter@2ff4d61b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2ef89e43, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7bd76b79, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6e4d660, org.springframework.security.web.session.SessionManagementFilter@4723445c, org.springframework.security.web.access.ExceptionTranslationFilter@7a2d676e, org.springframework.security.web.access.intercept.AuthorizationFilter@18d6ac02]
2024-09-05 07:15:24.401 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 07:15:24.473 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 07:15:24.733  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 07:15:24.834  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 9.304 seconds (process running for 11.491)
2024-09-05 07:15:25.053 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:15:25.080 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:15:25.084 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:15:25.088 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:15:25.091 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:15:25.095 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:15:25.103 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 07:15:25.107 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 07:15:26.086 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@70242f38, started on Thu Sep 05 07:15:15 CEST 2024
2024-09-05 07:15:26.097  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 07:15:26.100  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 07:15:26.106  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 07:30:13.034  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 07:30:13.188  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 07:30:13.744  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 07:30:13.789  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 28192 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 07:30:13.796  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 07:30:13.847 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-09-05 07:30:15.477  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 07:30:15.615  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 123 ms. Found 4 JPA repository interfaces.
2024-09-05 07:30:16.603  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 07:30:17.081  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-05 07:30:17.084  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 07:30:17.182  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 07:30:18.363  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 07:30:18.478  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 07:30:18.480  INFO --- [           main] l.command                                : Using deploymentId: 5514218480
2024-09-05 07:30:18.483  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 07:30:18.496  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 07:30:18.524  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 07:30:18.525  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 28ms
2024-09-05 07:30:18.547  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 07:30:18.548  INFO --- [           main] l.util                                   : Run:                          1
2024-09-05 07:30:18.548  INFO --- [           main] l.util                                   : Previously run:               6
2024-09-05 07:30:18.549  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 07:30:18.549  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 07:30:18.550  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 07:30:18.552  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 07:30:18.556  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 07:30:18.556  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 1
2024-09-05 07:30:18.559  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 07:30:18.561  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 07:30:18.757  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 07:30:18.872  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 07:30:18.943  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 07:30:19.293  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 07:30:19.401  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 07:30:20.731  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 07:30:20.793  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 07:30:21.854  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 07:30:21.897  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 7db2073f-daf7-4fd0-af33-5ce3eee6ce7f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 07:30:22.252 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 07:30:22.526 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 07:30:22.609  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@78405f00, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@295f115d, org.springframework.security.web.context.SecurityContextHolderFilter@4664cd32, org.springframework.security.web.header.HeaderWriterFilter@3653bb61, org.springframework.web.filter.CorsFilter@a6cb2c9, org.springframework.security.web.authentication.logout.LogoutFilter@ab5af13, de.telran.urlshortener.security.JwtFilter@3c48bbf3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@73c25e8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3545bfea, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3c32f3d8, org.springframework.security.web.session.SessionManagementFilter@44835de9, org.springframework.security.web.access.ExceptionTranslationFilter@4ec1192f, org.springframework.security.web.access.intercept.AuthorizationFilter@73344f4a]
2024-09-05 07:30:22.962 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 07:30:23.006 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 07:30:23.215  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 07:30:23.353  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 9.962 seconds (process running for 12.185)
2024-09-05 07:30:23.563 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:30:23.588 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:30:23.591 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:30:23.594 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:30:23.597 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:30:23.601 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:30:23.608 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 07:30:23.612 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 07:30:24.548 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@70242f38, started on Thu Sep 05 07:30:13 CEST 2024
2024-09-05 07:30:24.563  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 07:30:24.580  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 07:30:24.591  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 07:30:49.650  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 07:30:49.697  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 28593 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 07:30:49.702  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-05 07:30:50.879  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 07:30:50.960  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 71 ms. Found 4 JPA repository interfaces.
2024-09-05 07:30:51.768  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-05 07:30:51.781  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-05 07:30:51.783  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-05 07:30:51.784  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-05 07:30:51.843  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-05 07:30:51.844  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2091 ms
2024-09-05 07:30:51.909  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 07:30:52.308  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-05 07:30:52.310  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 07:30:52.326  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 07:30:52.592  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 07:30:53.274  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 07:30:53.342  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 07:30:53.345  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 07:30:53.359  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 07:30:53.359  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 07:30:53.359  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 07:30:53.360  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 07:30:53.360  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 07:30:53.360  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 07:30:53.361  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 07:30:53.388  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 07:30:53.390  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 07:30:53.512  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 07:30:53.615  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 07:30:53.661  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 07:30:53.986  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 07:30:54.049  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 07:30:55.383  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 07:30:55.442  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 07:30:56.366  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 07:30:56.404  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: fb160aa3-713a-432a-ac5a-71f977cd9a8a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 07:30:56.695 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 07:30:56.859 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 07:30:56.942  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7222e168, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@230383a7, org.springframework.security.web.context.SecurityContextHolderFilter@712a5de4, org.springframework.security.web.header.HeaderWriterFilter@2e856aa4, org.springframework.web.filter.CorsFilter@6222a343, org.springframework.security.web.authentication.logout.LogoutFilter@77f2807f, de.telran.urlshortener.security.JwtFilter@7845b21a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2008dfa7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@492d0748, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@228c854f, org.springframework.security.web.session.SessionManagementFilter@3aafa1c1, org.springframework.security.web.access.ExceptionTranslationFilter@7c3c6564, org.springframework.security.web.access.intercept.AuthorizationFilter@50d02417]
2024-09-05 07:30:57.142 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 07:30:57.224 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 07:30:57.578  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-05 07:30:57.599  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-05 07:30:57.614  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.42 seconds (process running for 10.004)
2024-09-05 07:30:57.797 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:30:57.823 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:30:57.827 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:30:57.831 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:30:57.834 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:30:57.838 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:30:57.845 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 07:30:57.850 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 07:31:09.293  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-05 07:31:09.293  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-05 07:31:09.293 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-05 07:31:09.294 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-05 07:31:09.294 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-05 07:31:09.296 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7334dcbe
2024-09-05 07:31:09.297 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@79fc6651
2024-09-05 07:31:09.297 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-05 07:31:09.297  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-09-05 07:31:09.313  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-05 07:31:09.328  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-05 07:31:09.340 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-05 07:31:09.344 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 07:31:09.380 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 07:31:09.424 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-05 07:31:09.426 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 07:31:09.433 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 07:31:09.487 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-05 07:31:09.488 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 07:31:09.489 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-05 07:31:09.490 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 07:31:09.499 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-05 07:31:09.500 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 07:31:09.503 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 07:31:09.507 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-05 07:31:09.509 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 07:31:09.519 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 07:31:09.530 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 07:31:09.569 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 07:31:10.427 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-05 07:31:10.428 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 07:31:10.431 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 07:31:10.472 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-05 07:31:10.473 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-05 07:31:10.477 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-05 07:31:10.478 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 07:31:10.480 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 07:31:10.500 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-05 07:31:10.504 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-05 07:31:10.521 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 07:31:10.562 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-05 07:31:10.563 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-05 07:31:11.554  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 967 ms
2024-09-05 07:31:11.584 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-05 07:31:11.587 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-05 07:31:11.589 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 07:55:25.210  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 07:55:25.370  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 07:55:26.049  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 07:55:26.117  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 40993 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 07:55:26.124  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 07:55:26.178 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-09-05 07:55:27.609  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 07:55:27.732  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 110 ms. Found 4 JPA repository interfaces.
2024-09-05 07:55:28.480  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 07:55:28.675  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:file:./dev user=SA
2024-09-05 07:55:28.680  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 07:55:28.793  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 07:55:30.118  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 07:55:30.233  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 07:55:30.239  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 07:55:30.258  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 07:55:30.258  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 07:55:30.259  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 07:55:30.259  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 07:55:30.259  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 07:55:30.260  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 07:55:30.261  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 07:55:30.295  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 07:55:30.298  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 07:55:30.464  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 07:55:30.563  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 07:55:30.611  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 07:55:30.942  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 07:55:31.008  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 07:55:32.345  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 07:55:32.427  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 07:55:33.358  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 07:55:33.390  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 72fbb03c-783e-4eb7-b504-d54c72d9c94b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 07:55:33.639 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 07:55:33.845 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 07:55:33.888  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6a9861de, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6deb2b19, org.springframework.security.web.context.SecurityContextHolderFilter@223e51e4, org.springframework.security.web.header.HeaderWriterFilter@4756c8f3, org.springframework.web.filter.CorsFilter@6d86d1ad, org.springframework.security.web.authentication.logout.LogoutFilter@3ea4dcc5, de.telran.urlshortener.security.JwtFilter@3204146d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@b768e4d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@ab7ac41, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@780e6b63, org.springframework.security.web.session.SessionManagementFilter@1934a7c1, org.springframework.security.web.access.ExceptionTranslationFilter@322f6283, org.springframework.security.web.access.intercept.AuthorizationFilter@4ba99bb7]
2024-09-05 07:55:34.179 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 07:55:34.227 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 07:55:34.462  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 07:55:34.607  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 9.003 seconds (process running for 11.494)
2024-09-05 07:55:34.807 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:55:34.832 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:55:34.836 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:55:34.840 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:55:34.845 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:55:34.850 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:55:34.858 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 07:55:34.862 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 07:55:35.723 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@70242f38, started on Thu Sep 05 07:55:26 CEST 2024
2024-09-05 07:55:35.733  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 07:55:35.738  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 07:55:35.752  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 07:55:44.463  INFO --- [ionShutdownHook] o.a.c.h.Http11NioProtocol                : Stopping ProtocolHandler ["http-nio-8080"]
2024-09-05 07:55:44.484  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 07:55:44.492  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 07:55:44.525  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 07:55:51.433  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 07:55:51.481  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 41293 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 07:55:51.487  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-05 07:55:52.670  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 07:55:52.751  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2024-09-05 07:55:53.565  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-05 07:55:53.578  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-05 07:55:53.580  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-05 07:55:53.581  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-05 07:55:53.643  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-05 07:55:53.643  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2099 ms
2024-09-05 07:55:53.716  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 07:55:54.097  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-05 07:55:54.100  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 07:55:54.114  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 07:55:54.366  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 07:55:55.190  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 07:55:55.259  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 07:55:55.262  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 07:55:55.273  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 07:55:55.274  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 07:55:55.274  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 07:55:55.274  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 07:55:55.275  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 07:55:55.275  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 07:55:55.276  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 07:55:55.301  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 07:55:55.303  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 07:55:55.423  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 07:55:55.499  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 07:55:55.541  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 07:55:55.814  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 07:55:55.864  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 07:55:57.033  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 07:55:57.086  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 07:55:57.960  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 07:55:57.996  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 4a4a4a70-6f6b-4b88-8809-9095cb4c2cf5

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 07:55:58.252 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 07:55:58.408 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 07:55:58.489  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@47b6f580, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5eb054, org.springframework.security.web.context.SecurityContextHolderFilter@428169d, org.springframework.security.web.header.HeaderWriterFilter@45cd5c56, org.springframework.web.filter.CorsFilter@34d08905, org.springframework.security.web.authentication.logout.LogoutFilter@3787eac3, de.telran.urlshortener.security.JwtFilter@67eeb310, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@434c179e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@46199519, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@57421698, org.springframework.security.web.session.SessionManagementFilter@7c3c6564, org.springframework.security.web.access.ExceptionTranslationFilter@23182d4d, org.springframework.security.web.access.intercept.AuthorizationFilter@c3972d0]
2024-09-05 07:55:58.641 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 07:55:58.694 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 07:55:59.106  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-05 07:55:59.124  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-05 07:55:59.137  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.128 seconds (process running for 9.599)
2024-09-05 07:55:59.315 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:55:59.343 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:55:59.347 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:55:59.351 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:55:59.355 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:55:59.358 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 07:55:59.366 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 07:55:59.370 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 08:00:29.031  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/h2-console/login.do' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-05 08:00:29.773  INFO --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-05 08:00:29.775  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-05 08:00:29.775 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-05 08:00:29.775 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-05 08:00:29.775 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-05 08:00:29.777 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3da76d3a
2024-09-05 08:00:29.777 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4c683777
2024-09-05 08:00:29.779 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-05 08:00:29.780  INFO --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed initialization in 4 ms
2024-09-05 08:00:29.781  WARN --- [nio-8080-exec-5] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/favicon.ico' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-05 08:00:53.655  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 08:00:53.659  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 08:00:53.662  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 08:05:05.151  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 08:05:05.212  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 47333 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 08:05:05.221  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-05 08:05:06.502  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 08:05:06.609  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 97 ms. Found 4 JPA repository interfaces.
2024-09-05 08:05:07.521  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-05 08:05:07.534  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-05 08:05:07.537  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-05 08:05:07.537  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-05 08:05:07.599  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-05 08:05:07.599  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2304 ms
2024-09-05 08:05:07.673  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 08:05:07.890  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:file:./dev user=SA
2024-09-05 08:05:07.893  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 08:05:07.914  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 08:05:08.248  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 08:05:09.033  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 08:05:09.128  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 08:05:09.132  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 08:05:09.145  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 08:05:09.145  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 08:05:09.146  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 08:05:09.146  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 08:05:09.146  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 08:05:09.146  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 08:05:09.148  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 08:05:09.179  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 08:05:09.182  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 08:05:09.303  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 08:05:09.400  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 08:05:09.443  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 08:05:09.773  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 08:05:09.837  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 08:05:11.133  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 08:05:11.203  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 08:05:12.140  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 08:05:12.180  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 56148283-8699-4acd-b552-f4e8cbd1a94e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 08:05:12.488 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 08:05:12.698 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 08:05:12.788  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7e9b68c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3d41881, org.springframework.security.web.context.SecurityContextHolderFilter@1e8fd198, org.springframework.security.web.header.HeaderWriterFilter@d012e18, org.springframework.web.filter.CorsFilter@3f04349b, org.springframework.security.web.authentication.logout.LogoutFilter@18213a65, de.telran.urlshortener.security.JwtFilter@5e67a490, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1631a614, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@892f1fa, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@14ca4b4d, org.springframework.security.web.session.SessionManagementFilter@5c91b751, org.springframework.security.web.access.ExceptionTranslationFilter@6da76bb1, org.springframework.security.web.access.intercept.AuthorizationFilter@19dc9dda]
2024-09-05 08:05:12.994 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 08:05:13.074 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 08:05:13.428  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-05 08:05:13.446  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-05 08:05:13.459  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.915 seconds (process running for 10.663)
2024-09-05 08:05:13.642 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 08:05:13.682 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 08:05:13.689 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 08:05:13.693 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 08:05:13.698 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 08:05:13.703 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 08:05:13.711 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 08:05:13.716 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 08:06:49.441  INFO --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-05 08:06:49.441  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-05 08:06:49.441 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-05 08:06:49.448 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-05 08:06:49.448 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-05 08:06:49.449 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@74ee8f57
2024-09-05 08:06:49.450 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@7a68818c
2024-09-05 08:06:49.450 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-05 08:06:49.450  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed initialization in 9 ms
2024-09-05 08:06:49.465  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/users' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-05 08:06:49.485  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/users' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-05 08:06:49.490 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-05 08:06:49.493 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-05 08:06:49.590 DEBUG --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@19979ae6]
2024-09-05 08:06:49.599  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : Received request to create user with username: opanas
2024-09-05 08:06:49.599  INFO --- [nio-8080-exec-2] d.t.u.s.UserService                      : Attempting to create user with username: opanas and email: opanas@string.com
2024-09-05 08:06:49.602 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 08:06:49.826 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 08:06:49.854 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 08:06:49.862 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 08:06:49.868 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 08:06:49.872  INFO --- [nio-8080-exec-2] d.t.u.s.UserService                      : User created successfully with ID: 3
2024-09-05 08:06:49.872  INFO --- [nio-8080-exec-2] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-09-05 08:06:49.893 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 08:06:49.894 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userDto.UserResponse@6a34d762]
2024-09-05 08:06:49.914 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-09-05 08:07:41.945 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-05 08:07:41.946 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-05 08:07:41.952 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@4a088130]
2024-09-05 08:07:41.962 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-05 08:07:41.974 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-05 08:07:42.188 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    update
        users 
    set
        email=?,
        password=?,
        refresh_token=?,
        user_name=? 
    where
        id=?
2024-09-05 08:07:42.202 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 08:07:42.203 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@aa3dcf]
2024-09-05 08:07:42.206 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 08:09:13.172 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-09-05 08:09:13.172 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-09-05 08:09:13.176 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@124196a3]
2024-09-05 08:09:13.176  INFO --- [nio-8080-exec-4] d.t.u.c.ShortUrlController               : Creating short URL for: https://github.com/schemchuk/url-shortener
2024-09-05 08:09:13.177  INFO --- [nio-8080-exec-4] d.t.u.s.ShortUrlService                  : Creating short URL for user email: opanas@string.com
2024-09-05 08:09:13.179 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-05 08:09:13.184 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-05 08:09:13.189  INFO --- [nio-8080-exec-4] d.t.u.s.ShortUrlService                  : Generating short key with length: 6
2024-09-05 08:09:13.189  INFO --- [nio-8080-exec-4] d.t.u.s.ShortUrlService                  : Generated short key: X4rRd6
2024-09-05 08:09:13.190  INFO --- [nio-8080-exec-4] d.t.u.s.ShortUrlService                  : Generated short key: X4rRd6
2024-09-05 08:09:13.195 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    insert 
    into
        short_urls
        (click_count, full_url, short_key, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 08:09:13.199  INFO --- [nio-8080-exec-4] d.t.u.s.ShortUrlService                  : Short URL created with ID: 1
2024-09-05 08:09:13.200  INFO --- [nio-8080-exec-4] d.t.u.c.ShortUrlController               : Short URL created successfully with key: X4rRd6
2024-09-05 08:09:13.203 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 08:09:13.203 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@56c7a1bf]
2024-09-05 08:09:13.205 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-09-05 08:09:40.824 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/short-urls/X4rRd6", parameters={}
2024-09-05 08:09:40.825 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-09-05 08:09:40.831  INFO --- [nio-8080-exec-5] d.t.u.c.ShortUrlController               : Fetching short URL with key: X4rRd6
2024-09-05 08:09:40.832  INFO --- [nio-8080-exec-5] d.t.u.s.ShortUrlService                  : Fetching short URL with key: X4rRd6
2024-09-05 08:09:40.834 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 08:09:40.843  INFO --- [nio-8080-exec-5] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: X4rRd6
2024-09-05 08:09:40.845 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 08:09:40.849 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-09-05 08:09:40.851  INFO --- [nio-8080-exec-5] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: X4rRd6
2024-09-05 08:09:40.851  INFO --- [nio-8080-exec-5] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: X4rRd6
2024-09-05 08:09:40.851  INFO --- [nio-8080-exec-5] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@733d695b
2024-09-05 08:09:40.852 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 08:09:40.852 DEBUG --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@733d695b]
2024-09-05 08:09:40.855 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 08:09:45.984 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/short-urls/X4rRd6", parameters={}
2024-09-05 08:09:45.985 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-09-05 08:09:45.986  INFO --- [nio-8080-exec-6] d.t.u.c.ShortUrlController               : Fetching short URL with key: X4rRd6
2024-09-05 08:09:45.986  INFO --- [nio-8080-exec-6] d.t.u.s.ShortUrlService                  : Fetching short URL with key: X4rRd6
2024-09-05 08:09:45.988 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 08:09:45.991  INFO --- [nio-8080-exec-6] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: X4rRd6
2024-09-05 08:09:45.994 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 08:09:45.998 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-09-05 08:09:46.001  INFO --- [nio-8080-exec-6] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: X4rRd6
2024-09-05 08:09:46.002  INFO --- [nio-8080-exec-6] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: X4rRd6
2024-09-05 08:09:46.002  INFO --- [nio-8080-exec-6] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@7166f5ca
2024-09-05 08:09:46.003 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 08:09:46.003 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@7166f5ca]
2024-09-05 08:09:46.004 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 08:09:46.901 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/short-urls/X4rRd6", parameters={}
2024-09-05 08:09:46.903 DEBUG --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-09-05 08:09:46.904  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Fetching short URL with key: X4rRd6
2024-09-05 08:09:46.904  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Fetching short URL with key: X4rRd6
2024-09-05 08:09:46.908 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 08:09:46.912  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: X4rRd6
2024-09-05 08:09:46.914 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 08:09:46.918 DEBUG --- [nio-8080-exec-7] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-09-05 08:09:46.920  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: X4rRd6
2024-09-05 08:09:46.921  INFO --- [nio-8080-exec-7] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: X4rRd6
2024-09-05 08:09:46.921  INFO --- [nio-8080-exec-7] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@7fa13072
2024-09-05 08:09:46.921 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 08:09:46.922 DEBUG --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@7fa13072]
2024-09-05 08:09:46.923 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 08:10:08.956 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/r/X4rRd6", parameters={}
2024-09-05 08:10:08.957 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.RedirectController#redirectToFullUrl(String)
2024-09-05 08:10:08.961 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 08:10:08.969 DEBUG --- [nio-8080-exec-8] o.s.w.s.v.RedirectView                   : View [RedirectView], model {}
2024-09-05 08:10:08.970 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 302 FOUND
2024-09-05 09:23:21.578  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 09:23:21.589  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 09:23:21.600  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 09:43:17.875  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 09:43:18.024  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 09:43:18.537  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 09:43:18.586  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 96009 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 09:43:18.592  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 09:43:18.642 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-09-05 09:43:19.892  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 09:43:19.993  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 89 ms. Found 4 JPA repository interfaces.
2024-09-05 09:43:21.024  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 09:43:21.472  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-05 09:43:21.475  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 09:43:21.568  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 09:43:22.623  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 09:43:22.701  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 09:43:22.704  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 09:43:22.718  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 09:43:22.718  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 09:43:22.718  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 09:43:22.719  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 09:43:22.719  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 09:43:22.719  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 09:43:22.721  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 09:43:22.751  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 09:43:22.753  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 09:43:22.896  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 09:43:22.993  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 09:43:23.045  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 09:43:23.387  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 09:43:23.472  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 09:43:24.873  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 09:43:24.939  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 09:43:25.904  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 09:43:25.944  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 78bbc138-2636-4969-b507-488e24aad481

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 09:43:26.230 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 09:43:26.448 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 09:43:26.499  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5bc150e9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@28fa0ff8, org.springframework.security.web.context.SecurityContextHolderFilter@2291fb1, org.springframework.security.web.header.HeaderWriterFilter@6affbed1, org.springframework.web.filter.CorsFilter@726e780a, org.springframework.security.web.authentication.logout.LogoutFilter@323fa578, de.telran.urlshortener.security.JwtFilter@6b78cbee, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2aaf7354, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1606ecbb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4698ae6, org.springframework.security.web.session.SessionManagementFilter@57ce8f63, org.springframework.security.web.access.ExceptionTranslationFilter@54a2ff94, org.springframework.security.web.access.intercept.AuthorizationFilter@a6f34f5]
2024-09-05 09:43:26.764 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 09:43:26.820 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 09:43:27.021  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 09:43:27.174  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 8.972 seconds (process running for 10.943)
2024-09-05 09:43:27.351 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:43:27.376 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:43:27.380 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:43:27.384 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:43:27.389 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:43:27.393 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:43:27.402 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 09:43:27.407 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 09:43:28.196 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@70242f38, started on Thu Sep 05 09:43:18 CEST 2024
2024-09-05 09:43:28.215  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 09:43:28.219  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 09:43:28.222  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 09:49:02.711  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 09:49:02.866  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 09:49:03.461  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 09:49:03.507  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 98829 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 09:49:03.513  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 09:49:03.564 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-09-05 09:49:04.947  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 09:49:05.065  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 105 ms. Found 4 JPA repository interfaces.
2024-09-05 09:49:05.945  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 09:49:06.383  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-05 09:49:06.385  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 09:49:06.478  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 09:49:07.380  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 09:49:07.459  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 09:49:07.462  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 09:49:07.476  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 09:49:07.477  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 09:49:07.477  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 09:49:07.477  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 09:49:07.478  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 09:49:07.478  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 09:49:07.480  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 09:49:07.514  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 09:49:07.516  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 09:49:07.654  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 09:49:07.779  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 09:49:07.835  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 09:49:08.204  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 09:49:08.308  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 09:49:09.692  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 09:49:09.767  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 09:49:10.746  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 09:49:10.782  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 1a92b4d2-cde3-4fb4-af54-3584f1f37438

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 09:49:11.039 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 09:49:11.263 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 09:49:11.321  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@28fa0ff8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@726e780a, org.springframework.security.web.context.SecurityContextHolderFilter@213f2d00, org.springframework.security.web.header.HeaderWriterFilter@2cf93603, org.springframework.web.filter.CorsFilter@4698ae6, org.springframework.security.web.authentication.logout.LogoutFilter@6d543ec2, de.telran.urlshortener.security.JwtFilter@e870ac9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1606ecbb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5c18ad5d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@557ed49a, org.springframework.security.web.session.SessionManagementFilter@1d92d132, org.springframework.security.web.access.ExceptionTranslationFilter@3d2be0df, org.springframework.security.web.access.intercept.AuthorizationFilter@1b6824c1]
2024-09-05 09:49:11.611 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 09:49:11.664 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 09:49:11.849  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 09:49:11.962  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 8.865 seconds (process running for 11.228)
2024-09-05 09:49:12.152 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:49:12.176 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:49:12.180 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:49:12.184 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:49:12.187 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:49:12.191 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:49:12.199 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 09:49:12.204 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 09:49:12.998 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@70242f38, started on Thu Sep 05 09:49:03 CEST 2024
2024-09-05 09:49:13.009  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 09:49:13.014  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 09:49:13.017  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 09:49:26.742  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 09:49:26.791  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 99090 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 09:49:26.797  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-05 09:49:28.004  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 09:49:28.090  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 4 JPA repository interfaces.
2024-09-05 09:49:28.900  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-05 09:49:28.912  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-05 09:49:28.915  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-05 09:49:28.915  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-05 09:49:28.972  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-05 09:49:28.973  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2123 ms
2024-09-05 09:49:29.044  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 09:49:29.423  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-05 09:49:29.425  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 09:49:29.439  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 09:49:29.686  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 09:49:30.440  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 09:49:30.512  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 09:49:30.515  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 09:49:30.527  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 09:49:30.528  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 09:49:30.528  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 09:49:30.528  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 09:49:30.528  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 09:49:30.529  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 09:49:30.530  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 09:49:30.555  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 09:49:30.557  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 09:49:30.672  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 09:49:30.745  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 09:49:30.786  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 09:49:31.051  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 09:49:31.101  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 09:49:32.290  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 09:49:32.356  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 09:49:33.228  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 09:49:33.265  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 10e7fb11-9984-4440-bf16-1cb462f3f865

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 09:49:33.517 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 09:49:33.672 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 09:49:33.746  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3787eac3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@27a57c66, org.springframework.security.web.context.SecurityContextHolderFilter@45cd5c56, org.springframework.security.web.header.HeaderWriterFilter@4823f3b8, org.springframework.web.filter.CorsFilter@5453020f, org.springframework.security.web.authentication.logout.LogoutFilter@492d0748, de.telran.urlshortener.security.JwtFilter@39ace1a7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@629fc74d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@12dab9a8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@744d0cfb, org.springframework.security.web.session.SessionManagementFilter@3e1f6318, org.springframework.security.web.access.ExceptionTranslationFilter@54b3407b, org.springframework.security.web.access.intercept.AuthorizationFilter@1c619a77]
2024-09-05 09:49:33.903 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 09:49:33.957 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 09:49:34.301  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-05 09:49:34.319  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-05 09:49:34.333  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.018 seconds (process running for 9.515)
2024-09-05 09:49:34.545 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:49:34.571 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:49:34.574 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:49:34.577 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:49:34.580 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:49:34.583 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:49:34.589 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 09:49:34.593 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 09:50:05.498  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-05 09:50:05.499  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-05 09:50:05.499 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-05 09:50:05.499 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-05 09:50:05.499 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-05 09:50:05.501 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5b71ccf2
2024-09-05 09:50:05.501 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@62bcfa01
2024-09-05 09:50:05.502 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-05 09:50:05.502  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-09-05 09:50:05.521  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-05 09:50:05.541  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-05 09:50:05.557 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-05 09:50:05.561 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 09:50:05.612 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:50:05.654 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-05 09:50:05.656 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 09:50:05.661 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:50:05.682 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-05 09:50:05.684 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 09:50:05.689 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:50:05.705 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-05 09:50:05.709 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-05 09:50:05.712 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 09:50:05.713 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-05 09:50:05.714 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 09:50:05.710 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 09:50:05.722 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:50:05.755 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:50:05.816 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:50:06.483 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-05 09:50:06.484 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 09:50:06.487 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:50:06.519 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-05 09:50:06.520 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-05 09:50:06.523 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-05 09:50:06.524 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 09:50:06.528 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:50:06.544 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-05 09:50:06.550 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-05 09:50:06.559 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:50:06.589 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-05 09:50:06.590 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-05 09:50:07.561  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 944 ms
2024-09-05 09:50:07.593 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-05 09:50:07.597 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-05 09:50:07.598 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:51:50.018 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-05 09:51:50.019 DEBUG --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-05 09:51:50.068 DEBUG --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@7bca01f]
2024-09-05 09:51:50.098 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-05 09:51:50.129 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-05 09:51:50.144 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-05 09:51:50.500 DEBUG --- [nio-8080-exec-4] o.h.SQL                                  : 
    update
        users 
    set
        email=?,
        password=?,
        refresh_token=?,
        user_name=? 
    where
        id=?
2024-09-05 09:51:50.514 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 09:51:50.514 DEBUG --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@12eaa030]
2024-09-05 09:51:50.517 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:52:37.728 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : PATCH "/users/3/role?newRole=PAID", parameters={masked}
2024-09-05 09:52:37.729 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#changeUserRole(Long, String)
2024-09-05 09:52:37.751  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : Received request to change role for user with ID: 3 to PAID
2024-09-05 09:52:37.751  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : Attempting to change role for user with ID: 3 to PAID
2024-09-05 09:52:37.758 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        users u1_0 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2024-09-05 09:52:37.761 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-05 09:52:37.765 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 09:52:37.771 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        s1_0.user_id 
    from
        subscriptions s1_0 
    where
        s1_0.user_id=?
2024-09-05 09:52:37.778 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    update
        subscriptions 
    set
        end_date=?,
        start_date=?,
        subscription_type=?,
        user_id=? 
    where
        id=?
2024-09-05 09:52:37.781 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    delete 
    from
        user_roles 
    where
        user_id=? 
        and role_id=?
2024-09-05 09:52:37.783 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 09:52:37.788  INFO --- [nio-8080-exec-6] d.t.u.s.UserService                      : User role updated successfully with ID: 3
2024-09-05 09:52:37.788  INFO --- [nio-8080-exec-6] d.t.u.c.UserController                   : User role updated successfully with ID: 3
2024-09-05 09:52:37.790 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 09:52:37.790 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userDto.UserResponse@5a5d6245]
2024-09-05 09:52:37.793 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:53:52.899 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-09-05 09:53:52.900 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-09-05 09:53:52.903 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@1228b7d6]
2024-09-05 09:53:52.903  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Creating short URL for: https://skilldesk.starta.university/progress
2024-09-05 09:53:52.904  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Creating short URL for user email: admin@example.com
2024-09-05 09:53:52.910 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-05 09:53:52.918 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-05 09:53:52.921 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2024-09-05 09:53:52.925  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Generating short key with length: 6
2024-09-05 09:53:52.927  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Generated short key: xEZuaW
2024-09-05 09:53:52.928  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Generated short key: xEZuaW
2024-09-05 09:53:52.944 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    insert 
    into
        short_urls
        (click_count, full_url, short_key, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 09:53:52.953  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Short URL created with ID: 2
2024-09-05 09:53:52.953  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Short URL created successfully with key: xEZuaW
2024-09-05 09:53:52.955 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 09:53:52.955 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@13e97c3b]
2024-09-05 09:53:52.957 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-09-05 09:54:24.790 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/short-urls/xEZuaW", parameters={}
2024-09-05 09:54:24.792 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-09-05 09:54:24.793  INFO --- [nio-8080-exec-8] d.t.u.c.ShortUrlController               : Fetching short URL with key: xEZuaW
2024-09-05 09:54:24.794  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Fetching short URL with key: xEZuaW
2024-09-05 09:54:24.803 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 09:54:24.820  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: xEZuaW
2024-09-05 09:54:24.822 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 09:54:24.824 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-09-05 09:54:24.826  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: xEZuaW
2024-09-05 09:54:24.826  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: xEZuaW
2024-09-05 09:54:24.826  INFO --- [nio-8080-exec-8] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@eb09e76
2024-09-05 09:54:24.827 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 09:54:24.827 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@eb09e76]
2024-09-05 09:54:24.829 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:54:27.068 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/short-urls/xEZuaW", parameters={}
2024-09-05 09:54:27.068 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-09-05 09:54:27.069  INFO --- [io-8080-exec-10] d.t.u.c.ShortUrlController               : Fetching short URL with key: xEZuaW
2024-09-05 09:54:27.070  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Fetching short URL with key: xEZuaW
2024-09-05 09:54:27.072 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 09:54:27.074  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: xEZuaW
2024-09-05 09:54:27.076 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 09:54:27.080 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-09-05 09:54:27.083  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: xEZuaW
2024-09-05 09:54:27.083  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: xEZuaW
2024-09-05 09:54:27.084  INFO --- [io-8080-exec-10] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@49c24a3a
2024-09-05 09:54:27.085 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 09:54:27.085 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@49c24a3a]
2024-09-05 09:54:27.087 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 09:55:26.568 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/r/xEZuaW", parameters={}
2024-09-05 09:55:26.569 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.RedirectController#redirectToFullUrl(String)
2024-09-05 09:55:26.573 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 09:55:26.577 DEBUG --- [nio-8080-exec-1] o.s.w.s.v.RedirectView                   : View [RedirectView], model {}
2024-09-05 09:55:26.578 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 302 FOUND
2024-09-05 11:32:48.664  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 11:32:48.694  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 152408 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 11:32:48.697  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "dev"
2024-09-05 11:32:49.669  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 11:32:49.732  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 56 ms. Found 4 JPA repository interfaces.
2024-09-05 11:32:50.752  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-05 11:32:50.765  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-05 11:32:50.768  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-05 11:32:50.768  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-05 11:32:50.832  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-05 11:32:50.832  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2094 ms
2024-09-05 11:32:50.907  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 11:32:51.260  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-05 11:32:51.262  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 11:32:51.278  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 11:32:51.554  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 11:32:52.238  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 11:32:52.524  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 11:32:52.681  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 11:32:52.683  INFO --- [           main] l.command                                : Using deploymentId: 5528772683
2024-09-05 11:32:52.686  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 11:32:52.728  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 11:32:52.739  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 11:32:52.740  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 11ms
2024-09-05 11:32:52.752  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 11:32:52.759  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 11:32:52.760  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-05 11:32:52.767  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 11:32:52.773  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 11:32:52.783  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 11:32:52.784  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 17ms
2024-09-05 11:32:52.790  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 11:32:52.795  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 11:32:52.799  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 11:32:52.799  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-05 11:32:52.804  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 11:32:52.807  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 11:32:52.810  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 11:32:52.813  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 11:32:52.816  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 11:32:52.817  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 13ms
2024-09-05 11:32:52.820  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 11:32:52.834  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 11:32:52.843  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 11:32:52.844  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 22ms
2024-09-05 11:32:52.847  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 11:32:52.857  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 11:32:52.858  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 11ms
2024-09-05 11:32:52.867  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 11:32:52.867  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 11:32:52.867  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 11:32:52.868  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 11:32:52.868  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 11:32:52.868  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 11:32:52.869  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 11:32:52.872  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 11:32:52.873  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 11:32:52.876  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 11:32:52.877  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 11:32:52.985  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 11:32:53.068  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 11:32:53.110  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 11:32:53.383  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 11:32:53.434  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 11:32:54.614  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 11:32:54.679  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 11:32:55.531  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 11:32:55.568  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: f509c7ec-c926-41f4-a9e0-f29cabb3c5bf

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 11:32:55.830 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 11:32:55.985 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 11:32:56.068  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@b549c4a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@72412c3d, org.springframework.security.web.context.SecurityContextHolderFilter@69ee825c, org.springframework.security.web.header.HeaderWriterFilter@5fb4870b, org.springframework.web.filter.CorsFilter@457f43a2, org.springframework.security.web.authentication.logout.LogoutFilter@22bd6b0a, de.telran.urlshortener.security.JwtFilter@c262f2f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@444958a4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@19aa9540, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4016d5fe, org.springframework.security.web.session.SessionManagementFilter@47fe4c3e, org.springframework.security.web.access.ExceptionTranslationFilter@2762bd70, org.springframework.security.web.access.intercept.AuthorizationFilter@4f86cd50]
2024-09-05 11:32:56.218 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 11:32:56.271 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 11:32:56.640  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-05 11:32:56.659  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-05 11:32:56.672  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.388 seconds (process running for 9.544)
2024-09-05 11:32:56.848 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 11:32:56.934 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 11:32:56.952 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 11:32:56.962 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 11:32:56.964 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 11:32:56.967 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 11:32:56.969 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 11:32:56.973 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 11:32:56.976 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 11:32:56.983 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 11:32:57.141 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 11:32:57.155 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 11:32:57.161 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 11:32:57.289 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 11:32:57.291 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 11:33:22.843  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-05 11:33:22.843  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-05 11:33:22.843 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-05 11:33:22.844 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-05 11:33:22.844 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-05 11:33:22.845 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7f5ba1bf
2024-09-05 11:33:22.846 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@557ed49a
2024-09-05 11:33:22.846 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-05 11:33:22.846  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 3 ms
2024-09-05 11:33:22.857  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-05 11:33:22.869  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-05 11:33:22.882 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-05 11:33:22.884 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 11:33:22.920 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:33:22.947 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-05 11:33:22.947 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-05 11:33:22.947 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-05 11:33:22.948 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 11:33:22.947 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-05 11:33:22.948 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 11:33:22.948 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 11:33:22.952 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 11:33:22.954 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-05 11:33:22.954 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:33:22.955 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:33:22.955 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 11:33:22.959 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:33:22.972 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:33:22.990 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:33:23.547 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-05 11:33:23.548 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 11:33:23.550 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:33:23.576 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-05 11:33:23.577 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-05 11:33:23.583 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-05 11:33:23.584 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-05 11:33:23.586 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:33:23.595 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-05 11:33:23.600 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-05 11:33:23.607 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:33:23.635 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-05 11:33:23.636 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-05 11:33:24.352  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 699 ms
2024-09-05 11:33:24.376 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-05 11:33:24.379 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 115, 101, 11 (truncated)...]
2024-09-05 11:33:24.380 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:34:16.379 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : POST "/users", parameters={}
2024-09-05 11:34:16.379 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.UserController#createUser(UserRequest)
2024-09-05 11:34:16.398 DEBUG --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.userDto.UserRequest@2df771ba]
2024-09-05 11:34:16.401  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : Received request to create user with username: opanas
2024-09-05 11:34:16.401  INFO --- [nio-8080-exec-1] d.t.u.s.UserService                      : Attempting to create user with username: opanas and email: opanas@string.com
2024-09-05 11:34:16.404 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 11:34:16.537 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 11:34:16.541 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 11:34:16.549 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        subscriptions
        (end_date, start_date, subscription_type, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 11:34:16.555 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 11:34:16.557  INFO --- [nio-8080-exec-1] d.t.u.s.UserService                      : User created successfully with ID: 3
2024-09-05 11:34:16.557  INFO --- [nio-8080-exec-1] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-09-05 11:34:16.561 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 11:34:16.562 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.userDto.UserResponse@46227168]
2024-09-05 11:34:16.567 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-09-05 11:35:02.197 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : POST "/api/auth/login", parameters={}
2024-09-05 11:35:02.198 DEBUG --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.AuthController#login(JwtRequest)
2024-09-05 11:35:02.200 DEBUG --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.JwtDto.JwtRequest@309d276b]
2024-09-05 11:35:02.211 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-05 11:35:02.225 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-05 11:35:02.460 DEBUG --- [nio-8080-exec-6] o.h.SQL                                  : 
    update
        users 
    set
        email=?,
        password=?,
        refresh_token=?,
        user_name=? 
    where
        id=?
2024-09-05 11:35:02.467 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 11:35:02.468 DEBUG --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.JwtDto.JwtResponse@3b05ddd]
2024-09-05 11:35:02.474 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:36:19.072 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : POST "/short-urls", parameters={}
2024-09-05 11:36:19.073 DEBUG --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#createShortUrl(ShortUrlRequest)
2024-09-05 11:36:19.075 DEBUG --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [de.telran.urlshortener.dto.urlDto.ShortUrlRequest@59ad3152]
2024-09-05 11:36:19.075  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Creating short URL for: https://github.com/schemchuk/url-shortener
2024-09-05 11:36:19.075  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Creating short URL for user email: opanas@string.com
2024-09-05 11:36:19.077 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        u1_0.user_name 
    from
        users u1_0 
    where
        u1_0.email=?
2024-09-05 11:36:19.079 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    select
        s1_0.id,
        s1_0.end_date,
        s1_0.start_date,
        s1_0.subscription_type,
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.refresh_token,
        r1_0.user_id,
        r1_1.id,
        r1_1.expiry_date,
        r1_1.name,
        u1_0.user_name 
    from
        subscriptions s1_0 
    left join
        users u1_0 
            on u1_0.id=s1_0.user_id 
    left join
        (user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id) 
        on u1_0.id=r1_0.user_id 
    where
        s1_0.user_id=?
2024-09-05 11:36:19.082  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Generating short key with length: 6
2024-09-05 11:36:19.082  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Generated short key: o1ybbZ
2024-09-05 11:36:19.082  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Generated short key: o1ybbZ
2024-09-05 11:36:19.086 DEBUG --- [nio-8080-exec-9] o.h.SQL                                  : 
    insert 
    into
        short_urls
        (click_count, full_url, short_key, user_id, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 11:36:19.089  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Short URL created with ID: 1
2024-09-05 11:36:19.089  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Short URL created successfully with key: o1ybbZ
2024-09-05 11:36:19.090 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 11:36:19.091 DEBUG --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@5b4346c0]
2024-09-05 11:36:19.092 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 201 CREATED
2024-09-05 11:36:44.655 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/short-urls/o1ybbZ", parameters={}
2024-09-05 11:36:44.655 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-09-05 11:36:44.657  INFO --- [nio-8080-exec-8] d.t.u.c.ShortUrlController               : Fetching short URL with key: o1ybbZ
2024-09-05 11:36:44.657  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Fetching short URL with key: o1ybbZ
2024-09-05 11:36:44.661 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 11:36:44.671  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: o1ybbZ
2024-09-05 11:36:44.673 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 11:36:44.676 DEBUG --- [nio-8080-exec-8] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-09-05 11:36:44.677  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: o1ybbZ
2024-09-05 11:36:44.677  INFO --- [nio-8080-exec-8] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: o1ybbZ
2024-09-05 11:36:44.677  INFO --- [nio-8080-exec-8] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@6f4f1654
2024-09-05 11:36:44.678 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 11:36:44.678 DEBUG --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@6f4f1654]
2024-09-05 11:36:44.680 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:36:45.713 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/short-urls/o1ybbZ", parameters={}
2024-09-05 11:36:45.714 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-09-05 11:36:45.715  INFO --- [io-8080-exec-10] d.t.u.c.ShortUrlController               : Fetching short URL with key: o1ybbZ
2024-09-05 11:36:45.715  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Fetching short URL with key: o1ybbZ
2024-09-05 11:36:45.717 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 11:36:45.719  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: o1ybbZ
2024-09-05 11:36:45.721 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 11:36:45.723 DEBUG --- [io-8080-exec-10] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-09-05 11:36:45.726  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: o1ybbZ
2024-09-05 11:36:45.726  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: o1ybbZ
2024-09-05 11:36:45.726  INFO --- [io-8080-exec-10] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@a3f03ac
2024-09-05 11:36:45.727 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 11:36:45.727 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@a3f03ac]
2024-09-05 11:36:45.728 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:36:46.406 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/short-urls/o1ybbZ", parameters={}
2024-09-05 11:36:46.406 DEBUG --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-09-05 11:36:46.407  INFO --- [nio-8080-exec-1] d.t.u.c.ShortUrlController               : Fetching short URL with key: o1ybbZ
2024-09-05 11:36:46.407  INFO --- [nio-8080-exec-1] d.t.u.s.ShortUrlService                  : Fetching short URL with key: o1ybbZ
2024-09-05 11:36:46.408 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 11:36:46.409  INFO --- [nio-8080-exec-1] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: o1ybbZ
2024-09-05 11:36:46.411 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 11:36:46.412 DEBUG --- [nio-8080-exec-1] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-09-05 11:36:46.413  INFO --- [nio-8080-exec-1] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: o1ybbZ
2024-09-05 11:36:46.413  INFO --- [nio-8080-exec-1] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: o1ybbZ
2024-09-05 11:36:46.413  INFO --- [nio-8080-exec-1] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@131b9e33
2024-09-05 11:36:46.413 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 11:36:46.413 DEBUG --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@131b9e33]
2024-09-05 11:36:46.414 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:36:46.996 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/short-urls/o1ybbZ", parameters={}
2024-09-05 11:36:46.996 DEBUG --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-09-05 11:36:46.996  INFO --- [nio-8080-exec-3] d.t.u.c.ShortUrlController               : Fetching short URL with key: o1ybbZ
2024-09-05 11:36:46.997  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Fetching short URL with key: o1ybbZ
2024-09-05 11:36:46.998 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 11:36:47.000  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: o1ybbZ
2024-09-05 11:36:47.001 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 11:36:47.003 DEBUG --- [nio-8080-exec-3] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-09-05 11:36:47.004  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: o1ybbZ
2024-09-05 11:36:47.004  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: o1ybbZ
2024-09-05 11:36:47.004  INFO --- [nio-8080-exec-3] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@2c8fd168
2024-09-05 11:36:47.005 DEBUG --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 11:36:47.005 DEBUG --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@2c8fd168]
2024-09-05 11:36:47.006 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:36:47.642 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/short-urls/o1ybbZ", parameters={}
2024-09-05 11:36:47.643 DEBUG --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.ShortUrlController#getShortUrlByKey(String)
2024-09-05 11:36:47.643  INFO --- [nio-8080-exec-2] d.t.u.c.ShortUrlController               : Fetching short URL with key: o1ybbZ
2024-09-05 11:36:47.643  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Fetching short URL with key: o1ybbZ
2024-09-05 11:36:47.646 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 11:36:47.648  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: o1ybbZ
2024-09-05 11:36:47.650 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 11:36:47.653 DEBUG --- [nio-8080-exec-2] o.h.SQL                                  : 
    update
        short_urls 
    set
        click_count=?,
        full_url=?,
        short_key=?,
        user_id=? 
    where
        id=?
2024-09-05 11:36:47.655  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: o1ybbZ
2024-09-05 11:36:47.655  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: o1ybbZ
2024-09-05 11:36:47.655  INFO --- [nio-8080-exec-2] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@1a4ae969
2024-09-05 11:36:47.655 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2024-09-05 11:36:47.655 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [de.telran.urlshortener.dto.urlDto.ShortUrlResponse@1a4ae969]
2024-09-05 11:36:47.656 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-05 11:37:07.399 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/r/o1ybbZ", parameters={}
2024-09-05 11:37:07.400 DEBUG --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to de.telran.urlshortener.controller.RedirectController#redirectToFullUrl(String)
2024-09-05 11:37:07.404 DEBUG --- [nio-8080-exec-5] o.h.SQL                                  : 
    select
        su1_0.id,
        su1_0.click_count,
        su1_0.full_url,
        su1_0.short_key,
        su1_0.user_id 
    from
        short_urls su1_0 
    where
        su1_0.short_key=?
2024-09-05 11:37:07.415 DEBUG --- [nio-8080-exec-5] o.s.w.s.v.RedirectView                   : View [RedirectView], model {}
2024-09-05 11:37:07.416 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 302 FOUND
2024-09-05 12:01:27.471  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 12:01:27.631  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 12:01:28.152  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 12:01:28.204  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 167047 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 12:01:28.210  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 12:01:28.253 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@70242f38
2024-09-05 12:01:29.698  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 12:01:29.811  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 98 ms. Found 4 JPA repository interfaces.
2024-09-05 12:01:30.644  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 12:01:30.826  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:file:./dev user=SA
2024-09-05 12:01:30.828  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 12:01:30.958  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 12:01:32.260  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 12:01:32.343  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 12:01:32.347  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 12:01:32.364  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 12:01:32.364  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 12:01:32.365  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 12:01:32.365  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 12:01:32.365  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 12:01:32.366  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 12:01:32.367  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 12:01:32.402  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 12:01:32.405  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 12:01:32.548  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 12:01:32.633  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 12:01:32.682  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 12:01:33.024  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 12:01:33.104  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 12:01:34.449  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 12:01:34.513  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 12:01:35.439  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 12:01:35.471  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 504d3632-9279-4e5c-a97e-73331e6664f8

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 12:01:35.731 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 12:01:35.994 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 12:01:36.048  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5ceb6796, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2aa176de, org.springframework.security.web.context.SecurityContextHolderFilter@3a7be6e6, org.springframework.security.web.header.HeaderWriterFilter@28b36817, org.springframework.web.filter.CorsFilter@3208e15, org.springframework.security.web.authentication.logout.LogoutFilter@22bf4d9d, de.telran.urlshortener.security.JwtFilter@36a59d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ec5c4e2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1934a7c1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4ba99bb7, org.springframework.security.web.session.SessionManagementFilter@33012e6f, org.springframework.security.web.access.ExceptionTranslationFilter@15961527, org.springframework.security.web.access.intercept.AuthorizationFilter@2f4b2ee3]
2024-09-05 12:01:36.303 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 12:01:36.361 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 12:01:36.589  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 12:01:36.717  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 8.881 seconds (process running for 11.059)
2024-09-05 12:01:36.910 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 12:01:36.935 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 12:01:36.940 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 12:01:36.944 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 12:01:36.948 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 12:01:36.952 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 12:01:36.960 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 12:01:36.965 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 12:01:37.777 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@70242f38, started on Thu Sep 05 12:01:28 CEST 2024
2024-09-05 12:01:37.786  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 12:01:37.789  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 12:01:37.801  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 12:07:07.168  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 12:07:07.384  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-05 12:07:07.887  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 12:07:07.950  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 169951 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 12:07:07.955  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "dev"
2024-09-05 12:07:08.636  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 12:07:08.755  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 105 ms. Found 4 JPA repository interfaces.
2024-09-05 12:07:08.856  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-05 12:07:09.163  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:4ecaf001-8e83-40ea-aa53-5b781ed5dc5f;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-05 12:07:09.671  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 12:07:10.440  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 12:07:10.716  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 12:07:10.917  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 12:07:10.920  INFO --- [           main] l.command                                : Using deploymentId: 5530830919
2024-09-05 12:07:10.923  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 12:07:10.982  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 12:07:11.001  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 12:07:11.003  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 19ms
2024-09-05 12:07:11.019  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 12:07:11.028  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 12:07:11.029  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 12:07:11.037  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 12:07:11.044  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 12:07:11.056  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 12:07:11.057  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 19ms
2024-09-05 12:07:11.066  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 12:07:11.077  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 12:07:11.082  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 12:07:11.083  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 15ms
2024-09-05 12:07:11.090  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 12:07:11.094  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 12:07:11.099  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 12:07:11.103  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 12:07:11.110  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 12:07:11.111  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-09-05 12:07:11.116  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 12:07:11.137  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 12:07:11.151  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 12:07:11.152  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 35ms
2024-09-05 12:07:11.159  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 12:07:11.178  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 12:07:11.179  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 19ms
2024-09-05 12:07:11.194  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 12:07:11.195  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 12:07:11.196  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 12:07:11.196  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 12:07:11.197  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 12:07:11.198  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 12:07:11.199  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 12:07:11.206  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 12:07:11.206  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 12:07:11.210  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 12:07:11.212  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 12:07:11.356  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 12:07:11.439  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 12:07:11.487  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 12:07:11.792  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 12:07:11.859  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 12:07:13.116  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 12:07:13.173  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 12:07:14.090  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 6.604 seconds (process running for 9.114)
2024-09-05 12:07:14.889 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 12:07:14.941  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:02:32.408  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 16:02:32.617  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-05 16:02:33.207  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 16:02:33.273  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 283918 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 16:02:33.278  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "dev"
2024-09-05 16:02:34.104  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 16:02:34.226  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 109 ms. Found 4 JPA repository interfaces.
2024-09-05 16:02:34.512  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-05 16:02:34.807  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:6370e039-2ef1-40ab-b8e0-8d626a1efae7;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-05 16:02:35.274  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 16:02:35.958  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 16:02:36.150  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:02:36.341  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 16:02:36.343  INFO --- [           main] l.command                                : Using deploymentId: 5544956342
2024-09-05 16:02:36.346  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:02:36.397  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 16:02:36.413  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 16:02:36.415  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-05 16:02:36.428  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 16:02:36.435  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 16:02:36.436  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-05 16:02:36.444  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 16:02:36.451  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 16:02:36.461  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 16:02:36.462  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 17ms
2024-09-05 16:02:36.470  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 16:02:36.478  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 16:02:36.482  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 16:02:36.483  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-05 16:02:36.490  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 16:02:36.494  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 16:02:36.497  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 16:02:36.501  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 16:02:36.507  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 16:02:36.508  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-05 16:02:36.512  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 16:02:36.528  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 16:02:36.537  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 16:02:36.538  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 25ms
2024-09-05 16:02:36.543  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 16:02:36.557  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 16:02:36.558  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 13ms
2024-09-05 16:02:36.579  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 16:02:36.580  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 16:02:36.580  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 16:02:36.580  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 16:02:36.581  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 16:02:36.581  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 16:02:36.583  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 16:02:36.587  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 16:02:36.587  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 16:02:36.590  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 16:02:36.592  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 16:02:36.721  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 16:02:36.801  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 16:02:36.858  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 16:02:37.209  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 16:02:37.272  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 16:02:38.642  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 16:02:38.705  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:02:39.382  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 6.643 seconds (process running for 9.011)
2024-09-05 16:02:40.338 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:02:40.472 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 16:02:40.481  WARN --- [           main] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 23502, SQLState: 23502
2024-09-05 16:02:40.481 ERROR --- [           main] o.h.e.j.s.SqlExceptionHelper             :  NULL     "PASSWORD"
NULL not allowed for column "PASSWORD"; SQL statement:
insert into users (email,password,refresh_token,user_name,id) values (?,?,?,?,default) [23502-224]
2024-09-05 16:02:40.530  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 16:02:40.567  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-05 16:02:40.664  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 283918 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 16:02:40.666  INFO --- [           main] d.t.u.c.UserControllerTest               : No active profile set, falling back to 1 default profile: "default"
2024-09-05 16:02:40.670 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@27311c99
2024-09-05 16:02:41.505  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 16:02:41.523  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 4 JPA repository interfaces.
2024-09-05 16:02:42.663  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 16:02:42.693  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn6: url=jdbc:h2:mem:testdb user=SA
2024-09-05 16:02:42.697  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 16:02:42.725  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 16:02:42.848  INFO --- [           main] l.command                                : Logging exception.
2024-09-05 16:02:42.849  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-09-05 16:02:42.850  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-09-05 16:02:42.850  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-09-05 16:02:42.851  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-09-05 16:02:42.852  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 16:02:42.854  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-09-05 16:02:42.855  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 16:02:42.859  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 16:02:42.884  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-05 16:02:42.930 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-09-05 16:02:42.943 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.controller.UserControllerTest@358caf3a]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@1d07fb2 testClass = de.telran.urlshortener.controller.UserControllerTest, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["spring.config.name=application-test", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@46f5030f key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4c36250e, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@299266e2, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d549595c, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@36b6802f, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@7a56812e, org.springframework.boot.test.context.SpringBootTestAnnotation@22da922e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$before$2(ClassBasedTestDescriptor.java:204)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:203)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:85)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:148)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 66 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 89 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 91 more
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:35)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 107 more
2024-09-05 16:02:43.013  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 16:02:43.051  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 16:02:43.232  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 283918 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 16:02:43.234  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 16:02:43.240 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5e1d6ace
2024-09-05 16:02:43.961  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 16:02:44.001  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 4 JPA repository interfaces.
2024-09-05 16:02:44.303  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-2 - Starting...
2024-09-05 16:02:44.449  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-2 - Added connection conn13: url=jdbc:h2:file:./dev user=SA
2024-09-05 16:02:44.449  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-2 - Start completed.
2024-09-05 16:02:44.453  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 16:02:44.693  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:02:44.745  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 16:02:44.748  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:02:44.756  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 16:02:44.757  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 16:02:44.758  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 16:02:44.758  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 16:02:44.759  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 16:02:44.759  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 16:02:44.760  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 16:02:44.764  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 16:02:44.765  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 16:02:44.837  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 16:02:44.843  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 16:02:44.851  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 16:02:44.854  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 16:02:45.077  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 16:02:45.091  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:02:45.909  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 16:02:45.950  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 8e655cc8-c5dd-460c-a216-6eb9a6d006a3

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 16:02:46.280 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 16:02:46.569 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 16:02:46.665  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@389d371a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@554a76fd, org.springframework.security.web.context.SecurityContextHolderFilter@710959b3, org.springframework.security.web.header.HeaderWriterFilter@2558c3fb, org.springframework.web.filter.CorsFilter@1ee1c0cc, org.springframework.security.web.authentication.logout.LogoutFilter@7ba8b91c, de.telran.urlshortener.security.JwtFilter@7288afd8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@13987842, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f5513df, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2184c27b, org.springframework.security.web.session.SessionManagementFilter@7784ff80, org.springframework.security.web.access.ExceptionTranslationFilter@384d40a5, org.springframework.security.web.access.intercept.AuthorizationFilter@78067cc4]
2024-09-05 16:02:47.013 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 16:02:47.070 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 16:02:47.310  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 16:02:47.415  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 4.352 seconds (process running for 17.044)
2024-09-05 16:02:47.504 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:02:47.521 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:02:47.536 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:02:47.542 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:02:47.547 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:02:47.552 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:02:47.559 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:02:47.570 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:02:47.623  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:02:47.627 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@5e1d6ace, started on Thu Sep 05 16:02:43 CEST 2024
2024-09-05 16:02:47.634  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:02:47.636  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-2 - Shutdown initiated...
2024-09-05 16:02:47.639  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-2 - Shutdown completed.
2024-09-05 16:05:33.088  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 16:05:33.274  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-05 16:05:33.792  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 16:05:33.870  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 285407 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 16:05:33.875  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "dev"
2024-09-05 16:05:34.529  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 16:05:34.631  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 89 ms. Found 4 JPA repository interfaces.
2024-09-05 16:05:34.721  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-05 16:05:35.004  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:0c9330ed-4cef-4457-84db-03578e2027c0;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-05 16:05:35.494  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 16:05:36.294  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 16:05:36.662  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:05:36.854  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 16:05:36.856  INFO --- [           main] l.command                                : Using deploymentId: 5545136855
2024-09-05 16:05:36.859  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:05:36.915  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 16:05:36.933  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 16:05:36.935  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-05 16:05:36.949  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 16:05:36.958  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 16:05:36.959  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 16:05:36.967  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 16:05:36.975  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 16:05:36.987  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 16:05:36.989  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 20ms
2024-09-05 16:05:36.999  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 16:05:37.007  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 16:05:37.011  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 16:05:37.012  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-05 16:05:37.019  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 16:05:37.023  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 16:05:37.027  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 16:05:37.032  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 16:05:37.038  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 16:05:37.040  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 19ms
2024-09-05 16:05:37.045  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 16:05:37.064  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 16:05:37.077  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 16:05:37.078  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 32ms
2024-09-05 16:05:37.084  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 16:05:37.103  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 16:05:37.104  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 19ms
2024-09-05 16:05:37.119  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 16:05:37.120  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 16:05:37.121  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 16:05:37.122  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 16:05:37.122  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 16:05:37.123  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 16:05:37.125  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 16:05:37.131  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 16:05:37.131  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 16:05:37.136  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 16:05:37.138  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 16:05:37.279  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 16:05:37.374  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 16:05:37.441  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 16:05:37.770  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 16:05:37.833  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 16:05:39.132  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 16:05:39.196  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:05:39.986  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 6.629 seconds (process running for 8.72)
2024-09-05 16:05:40.858 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:05:40.972 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 16:05:40.982  WARN --- [           main] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 23502, SQLState: 23502
2024-09-05 16:05:40.982 ERROR --- [           main] o.h.e.j.s.SqlExceptionHelper             :  NULL     "PASSWORD"
NULL not allowed for column "PASSWORD"; SQL statement:
insert into users (email,password,refresh_token,user_name,id) values (?,?,?,?,default) [23502-224]
2024-09-05 16:05:41.106  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 16:05:41.220  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.controller.UserControllerTest
2024-09-05 16:05:41.299  INFO --- [           main] d.t.u.c.UserControllerTest               : Starting UserControllerTest using Java 21.0.2 with PID 285407 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 16:05:41.301  INFO --- [           main] d.t.u.c.UserControllerTest               : No active profile set, falling back to 1 default profile: "default"
2024-09-05 16:05:41.304 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1c12f0f4
2024-09-05 16:05:42.272  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 16:05:42.298  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 4 JPA repository interfaces.
2024-09-05 16:05:43.520  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 16:05:43.543  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn6: url=jdbc:h2:mem:testdb user=SA
2024-09-05 16:05:43.547  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 16:05:43.571  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 16:05:43.697  INFO --- [           main] l.command                                : Logging exception.
2024-09-05 16:05:43.698  INFO --- [           main] l.ui                                     : ERROR: Exception Details
2024-09-05 16:05:43.699  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Class:  ChangeLogParseException
2024-09-05 16:05:43.699  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-09-05 16:05:43.700  INFO --- [           main] l.ui                                     : ERROR: Exception Primary Source:  4.27.0
2024-09-05 16:05:43.701  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 16:05:43.703  WARN --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2024-09-05 16:05:43.704  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 16:05:43.709  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 16:05:43.733  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-05 16:05:43.776 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2024-09-05 16:05:43.791 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.controller.UserControllerTest@75564689]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6f36c42 testClass = de.telran.urlshortener.controller.UserControllerTest, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["spring.config.name=application-test", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@26753687 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@cdc3aae, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4c36250e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@76e4865e, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@7e93e396, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@7cc586a8, org.springframework.boot.test.context.SpringBootTestAnnotation@22da922e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$before$2(ClassBasedTestDescriptor.java:204)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:203)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:85)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:148)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 66 more
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 89 more
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.command.CommandScope.execute(CommandScope.java:257)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Liquibase.runInScope(Liquibase.java:1436)
	at liquibase.Liquibase.update(Liquibase.java:234)
	at liquibase.Liquibase.update(Liquibase.java:212)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297)
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249)
	at liquibase.Scope.lambda$child$0(Scope.java:190)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:168)
	at liquibase.Scope.child(Scope.java:256)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242)
	... 91 more
Caused by: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
	at liquibase.parser.core.yaml.YamlChangeLogParser.parse(YamlChangeLogParser.java:35)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129)
	at liquibase.Scope.child(Scope.java:199)
	at liquibase.Scope.child(Scope.java:175)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87)
	at liquibase.command.CommandScope.execute(CommandScope.java:219)
	... 107 more
2024-09-05 16:05:43.825  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 16:05:43.852  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 16:05:43.998  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 285407 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 16:05:44.000  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 16:05:44.004 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7b9661d4
2024-09-05 16:05:44.681  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 16:05:44.711  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 29 ms. Found 4 JPA repository interfaces.
2024-09-05 16:05:44.948  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-2 - Starting...
2024-09-05 16:05:45.100  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-2 - Added connection conn13: url=jdbc:h2:file:./dev user=SA
2024-09-05 16:05:45.101  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-2 - Start completed.
2024-09-05 16:05:45.104  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 16:05:45.354  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:05:45.410  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 16:05:45.413  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:05:45.422  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 16:05:45.422  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 16:05:45.423  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 16:05:45.424  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 16:05:45.424  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 16:05:45.424  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 16:05:45.425  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 16:05:45.429  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 16:05:45.430  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 16:05:45.505  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 16:05:45.511  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 16:05:45.519  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 16:05:45.522  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 16:05:45.762  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 16:05:45.775  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:05:46.525  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 16:05:46.575  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 01182b40-44f6-4f86-bedb-2357644704a5

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 16:05:46.937 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 16:05:47.146 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 16:05:47.224  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3b59d246, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3fbf4614, org.springframework.security.web.context.SecurityContextHolderFilter@19b0f61c, org.springframework.security.web.header.HeaderWriterFilter@3e755a96, org.springframework.web.filter.CorsFilter@64ca0be0, org.springframework.security.web.authentication.logout.LogoutFilter@5b3847f5, de.telran.urlshortener.security.JwtFilter@731ccdfc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4c963d59, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2dfc833b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@550fe9d7, org.springframework.security.web.session.SessionManagementFilter@6c551798, org.springframework.security.web.access.ExceptionTranslationFilter@15a806a2, org.springframework.security.web.access.intercept.AuthorizationFilter@11c94cf7]
2024-09-05 16:05:47.572 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 16:05:47.623 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 16:05:47.824  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 16:05:47.905  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 4.042 seconds (process running for 16.639)
2024-09-05 16:05:47.981 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:05:47.997 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:05:48.001 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:05:48.004 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:05:48.007 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:05:48.011 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:05:48.015 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:05:48.020 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:05:48.070  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:05:48.074 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7b9661d4, started on Thu Sep 05 16:05:44 CEST 2024
2024-09-05 16:05:48.084  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:05:48.086  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-2 - Shutdown initiated...
2024-09-05 16:05:48.089  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-2 - Shutdown completed.
2024-09-05 16:07:16.003  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 16:07:16.148  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 16:07:16.729  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 16:07:16.778  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 286343 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 16:07:16.784  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 16:07:16.832 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@614aeccc
2024-09-05 16:07:18.311  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 16:07:18.419  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 94 ms. Found 4 JPA repository interfaces.
2024-09-05 16:07:19.326  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 16:07:19.949  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn1: url=jdbc:h2:file:./dev user=SA
2024-09-05 16:07:19.953  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 16:07:20.094  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 16:07:21.156  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:07:21.233  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 16:07:21.235  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:07:21.249  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 16:07:21.250  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 16:07:21.250  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 16:07:21.251  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 16:07:21.251  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 16:07:21.251  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 16:07:21.253  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 16:07:21.284  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 16:07:21.287  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 16:07:21.454  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 16:07:21.542  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 16:07:21.596  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 16:07:21.965  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 16:07:22.053  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 16:07:23.357  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 16:07:23.417  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:07:24.369  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 16:07:24.400  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 6cb2bcc2-395d-446e-a8f4-2f4b936efd27

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 16:07:24.681 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 16:07:24.928 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 16:07:24.978  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2a6dfbb2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1e085e71, org.springframework.security.web.context.SecurityContextHolderFilter@72f86029, org.springframework.security.web.header.HeaderWriterFilter@4f20ff8e, org.springframework.web.filter.CorsFilter@3dab9366, org.springframework.security.web.authentication.logout.LogoutFilter@7cf618f3, de.telran.urlshortener.security.JwtFilter@79690a0a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@198eeb36, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4690cb47, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@33ccc8cd, org.springframework.security.web.session.SessionManagementFilter@2c855eb7, org.springframework.security.web.access.ExceptionTranslationFilter@5bbd8118, org.springframework.security.web.access.intercept.AuthorizationFilter@609a996f]
2024-09-05 16:07:25.370 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 16:07:25.423 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 16:07:25.680  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 16:07:25.799  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 9.434 seconds (process running for 11.897)
2024-09-05 16:07:26.019 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:07:26.047 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:07:26.052 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:07:26.057 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:07:26.061 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:07:26.065 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:07:26.074 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:07:26.079 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:07:26.752 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@614aeccc, started on Thu Sep 05 16:07:16 CEST 2024
2024-09-05 16:07:26.765  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:07:26.770  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 16:07:26.774  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 16:07:50.397  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 16:07:50.602  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-05 16:07:51.175  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 16:07:51.244  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 286737 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 16:07:51.250  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "dev"
2024-09-05 16:07:52.014  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 16:07:52.127  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 100 ms. Found 4 JPA repository interfaces.
2024-09-05 16:07:52.231  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-05 16:07:52.560  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:b96a7179-5f9c-4dd2-969e-bffb8108db91;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-05 16:07:53.061  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 16:07:53.798  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 16:07:53.951  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:07:54.137  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 16:07:54.139  INFO --- [           main] l.command                                : Using deploymentId: 5545274138
2024-09-05 16:07:54.141  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:07:54.195  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 16:07:54.213  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 16:07:54.214  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-05 16:07:54.226  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 16:07:54.234  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 16:07:54.235  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 16:07:54.243  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 16:07:54.249  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 16:07:54.259  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 16:07:54.260  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 16ms
2024-09-05 16:07:54.270  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 16:07:54.280  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 16:07:54.285  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 16:07:54.286  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 16ms
2024-09-05 16:07:54.294  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 16:07:54.299  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 16:07:54.304  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 16:07:54.309  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 16:07:54.317  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 16:07:54.318  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 22ms
2024-09-05 16:07:54.323  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 16:07:54.355  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 16:07:54.368  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 16:07:54.370  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 34ms
2024-09-05 16:07:54.377  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 16:07:54.400  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 16:07:54.401  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 23ms
2024-09-05 16:07:54.419  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 16:07:54.420  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 16:07:54.421  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 16:07:54.422  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 16:07:54.423  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 16:07:54.424  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 16:07:54.427  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 16:07:54.433  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 16:07:54.434  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 16:07:54.441  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 16:07:54.444  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 16:07:54.583  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 16:07:54.684  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 16:07:54.735  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 16:07:55.248  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 16:07:55.315  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 16:07:56.639  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 16:07:56.700  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:07:57.596  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 6.883 seconds (process running for 9.069)
2024-09-05 16:07:58.472 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:07:58.583 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 16:07:58.591  WARN --- [           main] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 23502, SQLState: 23502
2024-09-05 16:07:58.591 ERROR --- [           main] o.h.e.j.s.SqlExceptionHelper             :  NULL     "PASSWORD"
NULL not allowed for column "PASSWORD"; SQL statement:
insert into users (email,password,refresh_token,user_name,id) values (?,?,?,?,default) [23502-224]
2024-09-05 16:07:58.634  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 16:07:58.650  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 16:07:58.770  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 286737 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 16:07:58.772  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 16:07:58.776 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4fd8aefe
2024-09-05 16:07:59.579  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 16:07:59.596  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 4 JPA repository interfaces.
2024-09-05 16:08:00.034  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 16:08:00.173  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn7: url=jdbc:h2:file:./dev user=SA
2024-09-05 16:08:00.176  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 16:08:00.192  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 16:08:00.323  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:08:00.364  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 16:08:00.366  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:08:00.373  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 16:08:00.374  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 16:08:00.374  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 16:08:00.375  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 16:08:00.376  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 16:08:00.376  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 16:08:00.377  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 16:08:00.382  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 16:08:00.383  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 16:08:00.440  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 16:08:00.444  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 16:08:00.450  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 16:08:00.452  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 16:08:00.631  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 16:08:00.644  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:08:01.196  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 16:08:01.228  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: e4fdd008-65fc-4661-be6d-6c8ea27be79d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 16:08:01.528 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 16:08:01.763 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 16:08:01.814  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@42e1bfe1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@399dc033, org.springframework.security.web.context.SecurityContextHolderFilter@531f6879, org.springframework.security.web.header.HeaderWriterFilter@6fbfd6ed, org.springframework.web.filter.CorsFilter@6ffc12a3, org.springframework.security.web.authentication.logout.LogoutFilter@4cee91b, de.telran.urlshortener.security.JwtFilter@26a2106e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1b3aa246, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1abc3085, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4bdc0fb0, org.springframework.security.web.session.SessionManagementFilter@3bafa95b, org.springframework.security.web.access.ExceptionTranslationFilter@462ccaa8, org.springframework.security.web.access.intercept.AuthorizationFilter@5b84007e]
2024-09-05 16:08:02.101 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 16:08:02.165 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 16:08:02.341  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 16:08:02.425  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 3.758 seconds (process running for 13.898)
2024-09-05 16:08:02.484 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:08:02.500 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:08:02.504 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:08:02.507 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:08:02.511 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:08:02.515 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:08:02.520 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:08:02.525 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:08:02.579  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:08:02.582 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4fd8aefe, started on Thu Sep 05 16:07:58 CEST 2024
2024-09-05 16:08:02.588  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:08:02.590  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 16:08:02.592  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 16:08:48.167  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 16:08:48.389  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-05 16:08:48.894  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 16:08:48.963  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 287274 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 16:08:48.968  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "dev"
2024-09-05 16:08:49.697  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 16:08:49.805  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 94 ms. Found 4 JPA repository interfaces.
2024-09-05 16:08:49.916  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-05 16:08:50.260  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:14ab719d-794c-45a4-ab46-41815d9ad686;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-05 16:08:50.835  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 16:08:51.648  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 16:08:51.834  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:08:52.026  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 16:08:52.028  INFO --- [           main] l.command                                : Using deploymentId: 5545332027
2024-09-05 16:08:52.030  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:08:52.085  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 16:08:52.101  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 16:08:52.102  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 16ms
2024-09-05 16:08:52.114  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 16:08:52.121  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 16:08:52.122  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-05 16:08:52.129  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 16:08:52.135  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 16:08:52.145  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 16:08:52.146  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-05 16:08:52.153  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 16:08:52.160  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 16:08:52.164  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 16:08:52.165  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-05 16:08:52.171  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 16:08:52.174  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 16:08:52.178  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 16:08:52.183  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 16:08:52.189  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 16:08:52.190  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 19ms
2024-09-05 16:08:52.195  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 16:08:52.210  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 16:08:52.221  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 16:08:52.222  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 26ms
2024-09-05 16:08:52.226  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 16:08:52.243  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 16:08:52.244  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 17ms
2024-09-05 16:08:52.261  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 16:08:52.262  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 16:08:52.263  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 16:08:52.264  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 16:08:52.266  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 16:08:52.266  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 16:08:52.269  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 16:08:52.274  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 16:08:52.275  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 16:08:52.279  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 16:08:52.281  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 16:08:52.424  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 16:08:52.545  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 16:08:52.616  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 16:08:52.998  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 16:08:53.073  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 16:08:54.484  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 16:08:54.550  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:08:55.376  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 6.889 seconds (process running for 9.416)
2024-09-05 16:08:56.088 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:08:56.215 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 16:08:56.224  WARN --- [           main] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 23502, SQLState: 23502
2024-09-05 16:08:56.224 ERROR --- [           main] o.h.e.j.s.SqlExceptionHelper             :  NULL     "PASSWORD"
NULL not allowed for column "PASSWORD"; SQL statement:
insert into users (email,password,refresh_token,user_name,id) values (?,?,?,?,default) [23502-224]
2024-09-05 16:08:56.275  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:42:11.604  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 16:42:11.827  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-05 16:42:12.348  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 16:42:12.435  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 304420 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 16:42:12.441  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "dev"
2024-09-05 16:42:13.216  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 16:42:13.335  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 106 ms. Found 4 JPA repository interfaces.
2024-09-05 16:42:13.459  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-05 16:42:13.766  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:9f997c34-159e-4af0-a727-9f03f800d835;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-05 16:42:14.317  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 16:42:15.095  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 16:42:15.610  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:42:15.801  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 16:42:15.804  INFO --- [           main] l.command                                : Using deploymentId: 5547335803
2024-09-05 16:42:15.807  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:42:15.869  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 16:42:15.889  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 16:42:15.891  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 20ms
2024-09-05 16:42:15.906  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 16:42:15.914  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 16:42:15.915  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 16:42:15.938  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 16:42:15.944  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 16:42:15.954  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 16:42:15.955  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-05 16:42:15.962  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 16:42:15.970  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 16:42:15.974  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 16:42:15.975  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-05 16:42:15.982  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 16:42:15.987  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 16:42:15.990  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 16:42:15.994  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 16:42:16.002  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 16:42:16.003  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-09-05 16:42:16.008  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 16:42:16.026  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 16:42:16.037  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 16:42:16.038  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 29ms
2024-09-05 16:42:16.043  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 16:42:16.058  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 16:42:16.059  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 15ms
2024-09-05 16:42:16.071  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 16:42:16.071  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 16:42:16.072  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 16:42:16.072  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 16:42:16.073  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 16:42:16.073  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 16:42:16.075  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 16:42:16.080  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 16:42:16.081  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 16:42:16.085  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 16:42:16.087  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 16:42:16.267  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 16:42:16.352  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 16:42:16.414  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 16:42:16.778  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 16:42:16.851  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 16:42:18.433  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 16:42:18.490  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:42:19.410  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 7.491 seconds (process running for 9.797)
2024-09-05 16:42:20.262 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 16:42:20.365 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 16:42:20.372  WARN --- [           main] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 23502, SQLState: 23502
2024-09-05 16:42:20.373 ERROR --- [           main] o.h.e.j.s.SqlExceptionHelper             :  NULL     "PASSWORD"
NULL not allowed for column "PASSWORD"; SQL statement:
insert into users (email,password,refresh_token,user_name,id) values (?,?,?,?,default) [23502-224]
2024-09-05 16:42:20.410  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 16:42:20.427  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 16:42:20.518  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 304420 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 16:42:20.520  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 16:42:20.526 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@64e6cdad
2024-09-05 16:42:21.332  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 16:42:21.354  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 4 JPA repository interfaces.
2024-09-05 16:42:21.826  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 16:42:21.983  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn7: url=jdbc:h2:file:./dev user=SA
2024-09-05 16:42:21.986  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 16:42:22.003  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 16:42:22.127  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:42:22.156  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 16:42:22.158  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 16:42:22.162  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 16:42:22.163  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 16:42:22.163  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 16:42:22.163  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 16:42:22.163  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 16:42:22.164  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 16:42:22.164  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 16:42:22.167  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 16:42:22.167  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 16:42:22.213  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 16:42:22.216  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 16:42:22.220  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 16:42:22.222  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 16:42:22.359  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 16:42:22.368  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:42:22.891  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 16:42:22.932  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 5c4a4480-f228-4c5d-bbe3-cc801ee9ed5b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 16:42:23.212 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 16:42:23.392 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 16:42:23.446  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7ef9c234, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@580581b4, org.springframework.security.web.context.SecurityContextHolderFilter@511936ad, org.springframework.security.web.header.HeaderWriterFilter@48c63936, org.springframework.web.filter.CorsFilter@33c9910e, org.springframework.security.web.authentication.logout.LogoutFilter@2b811d1c, de.telran.urlshortener.security.JwtFilter@2d1ef2fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@54b45cfe, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@462ccaa8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@40ea5cd3, org.springframework.security.web.session.SessionManagementFilter@7b6bcbee, org.springframework.security.web.access.ExceptionTranslationFilter@105f875f, org.springframework.security.web.access.intercept.AuthorizationFilter@402cdec9]
2024-09-05 16:42:23.809 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 16:42:23.855 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 16:42:24.042  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 16:42:24.116  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 3.67 seconds (process running for 14.503)
2024-09-05 16:42:24.179 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 16:42:24.201  WARN --- [           main] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 90098, SQLState: 90098
2024-09-05 16:42:24.201 ERROR --- [           main] o.h.e.j.s.SqlExceptionHelper             :    
The database has been closed [90098-224]
2024-09-05 16:42:24.206  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-05 16:42:24.230 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
java.lang.IllegalStateException: Failed to execute CommandLineRunner
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:789)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:770)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:330)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.dao.DataAccessResourceFailureException: JDBC exception executing SQL [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?] [   
The database has been closed [90098-224]] [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:274)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)
	at jdk.proxy2/jdk.proxy2.$Proxy149.findByName(Unknown Source)
	at de.telran.urlshortener.config.AppConfig.run(AppConfig.java:18)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:786)
	... 93 more
Caused by: org.hibernate.exception.JDBCConnectionException: JDBC exception executing SQL [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?] [   
The database has been closed [90098-224]] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:258)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:164)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:200)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:361)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:168)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:93)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:109)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:559)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405)
	at jdk.proxy2/jdk.proxy2.$Proxy219.getSingleResult(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 102 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:    
The database has been closed [90098-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionLocal.getTransaction(SessionLocal.java:1610)
	at org.h2.engine.SessionLocal.startStatementWithinTransaction(SessionLocal.java:1631)
	at org.h2.command.Command.executeQuery(Command.java:186)
	at org.h2.jdbc.JdbcPreparedStatement.executeQuery(JdbcPreparedStatement.java:131)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:240)
	... 139 more
Caused by: org.h2.mvstore.MVStoreException: java.lang.AssertionError: 61440 != 57344 [2.2.224/3]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.FileStore.storeBuffer(FileStore.java:1529)
	at org.h2.mvstore.FileStore.lambda$serializeAndStore$3(FileStore.java:1432)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.AssertionError: 61440 != 57344
	at org.h2.mvstore.RandomAccessStore.shrinkStoreIfPossible(RandomAccessStore.java:679)
	at org.h2.mvstore.RandomAccessStore.writeChunk(RandomAccessStore.java:377)
	at org.h2.mvstore.RandomAccessStore.writeChunk(RandomAccessStore.java:28)
	at org.h2.mvstore.FileStore.storeBuffer(FileStore.java:1524)
	... 6 more
2024-09-05 16:42:24.236 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@64e6cdad, started on Thu Sep 05 16:42:20 CEST 2024
2024-09-05 16:42:24.245  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 16:42:24.248  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 16:42:24.252  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 16:42:24.260 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@1925be93]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@59f1c295 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a8ab068, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bab2585, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@25a81f28, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@60cf80e7, org.springframework.boot.test.context.SpringBootTestAnnotation@592b6e7d], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.IllegalStateException: Failed to execute CommandLineRunner
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:789)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:770)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:330)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.dao.DataAccessResourceFailureException: JDBC exception executing SQL [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?] [   
The database has been closed [90098-224]] [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:274)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)
	at jdk.proxy2/jdk.proxy2.$Proxy149.findByName(Unknown Source)
	at de.telran.urlshortener.config.AppConfig.run(AppConfig.java:18)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:786)
	... 93 more
Caused by: org.hibernate.exception.JDBCConnectionException: JDBC exception executing SQL [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?] [   
The database has been closed [90098-224]] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:258)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:164)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:200)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:361)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:168)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:93)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:109)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:559)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405)
	at jdk.proxy2/jdk.proxy2.$Proxy219.getSingleResult(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 102 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:    
The database has been closed [90098-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionLocal.getTransaction(SessionLocal.java:1610)
	at org.h2.engine.SessionLocal.startStatementWithinTransaction(SessionLocal.java:1631)
	at org.h2.command.Command.executeQuery(Command.java:186)
	at org.h2.jdbc.JdbcPreparedStatement.executeQuery(JdbcPreparedStatement.java:131)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:240)
	... 139 more
Caused by: org.h2.mvstore.MVStoreException: java.lang.AssertionError: 61440 != 57344 [2.2.224/3]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.FileStore.storeBuffer(FileStore.java:1529)
	at org.h2.mvstore.FileStore.lambda$serializeAndStore$3(FileStore.java:1432)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.AssertionError: 61440 != 57344
	at org.h2.mvstore.RandomAccessStore.shrinkStoreIfPossible(RandomAccessStore.java:679)
	at org.h2.mvstore.RandomAccessStore.writeChunk(RandomAccessStore.java:377)
	at org.h2.mvstore.RandomAccessStore.writeChunk(RandomAccessStore.java:28)
	at org.h2.mvstore.FileStore.storeBuffer(FileStore.java:1524)
	... 6 more
2024-09-05 16:42:24.305  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:22:34.709  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 17:22:34.914  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-05 17:22:35.478  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 17:22:35.550  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 325020 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 17:22:35.557  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "dev"
2024-09-05 17:22:36.295  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 17:22:36.397  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 91 ms. Found 4 JPA repository interfaces.
2024-09-05 17:22:36.485  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-05 17:22:36.828  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:fc9d7f12-81e9-4d5e-b8bb-61fb0f4853f1;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-05 17:22:37.388  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 17:22:38.164  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 17:22:38.491  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:22:38.698  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 17:22:38.701  INFO --- [           main] l.command                                : Using deploymentId: 5549758700
2024-09-05 17:22:38.704  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:22:38.762  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 17:22:38.781  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 17:22:38.783  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 18ms
2024-09-05 17:22:38.797  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 17:22:38.805  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 17:22:38.806  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-05 17:22:38.814  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 17:22:38.821  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 17:22:38.833  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 17:22:38.834  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 19ms
2024-09-05 17:22:38.843  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 17:22:38.852  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 17:22:38.856  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 17:22:38.858  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 14ms
2024-09-05 17:22:38.865  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 17:22:38.869  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 17:22:38.873  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 17:22:38.878  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 17:22:38.884  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 17:22:38.886  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-09-05 17:22:38.891  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 17:22:38.912  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 17:22:38.930  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 17:22:38.931  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 39ms
2024-09-05 17:22:38.937  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 17:22:38.958  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 17:22:38.959  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 20ms
2024-09-05 17:22:38.974  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 17:22:38.975  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 17:22:38.976  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 17:22:38.977  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 17:22:38.978  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 17:22:38.978  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 17:22:38.980  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 17:22:38.985  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 17:22:38.986  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 17:22:38.990  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 17:22:38.992  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 17:22:39.120  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 17:22:39.219  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 17:22:39.265  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 17:22:39.548  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 17:22:39.609  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 17:22:40.882  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 17:22:40.941  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:22:41.616  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 6.6 seconds (process running for 9.158)
2024-09-05 17:22:41.623 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [de.telran.urlshortener.repository.UserRepositoryTest@6ce1cc03]
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'de.telran.urlshortener.repository.UserRepositoryTest': Unsatisfied dependency expressed through field 'passwordEncoder': No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:772)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:752)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:493)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1420)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:397)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1878)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1404)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:769)
	... 76 more
2024-09-05 17:22:41.654  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:26:16.712  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 17:26:16.793  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 326926 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 17:26:16.799  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "dev"
2024-09-05 17:26:17.325  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 17:26:17.342  WARN --- [           main] s.c.a.AnnotationConfigApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalStateException: Unable to retrieve @EnableAutoConfiguration base packages
2024-09-05 17:26:17.432  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-05 17:26:17.460 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
java.lang.IllegalStateException: Unable to retrieve @EnableAutoConfiguration base packages
	at org.springframework.boot.autoconfigure.AutoConfigurationPackages.get(AutoConfigurationPackages.java:78)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.getBasePackages(AbstractRepositoryConfigurationSourceSupport.java:79)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport$AutoConfiguredAnnotationRepositoryConfigurationSource.getBasePackages(AbstractRepositoryConfigurationSourceSupport.java:138)
	at org.springframework.data.repository.config.RepositoryConfigurationSourceSupport.lambda$getCandidates$1(RepositoryConfigurationSourceSupport.java:75)
	at org.springframework.data.util.LazyStreamable.stream(LazyStreamable.java:47)
	at org.springframework.data.util.LazyStreamable.iterator(LazyStreamable.java:42)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:80)
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:164)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:376)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:375)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:428)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:289)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:775)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:597)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2024-09-05 17:26:17.475 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [de.telran.urlshortener.repository.UserRepositoryTest@587a1cfb]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@3374b5bc testClass = de.telran.urlshortener.repository.UserRepositoryTest, locations = [], classes = [de.telran.urlshortener.repository.UserRepositoryTest.TestConfig], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@2af69643 key = [org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcClientAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@51850751, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@77602954, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@7e3f95fe, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@34be3d80, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@845125a, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@4052274f, org.springframework.boot.test.context.SpringBootTestAnnotation@9dc1cf93], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.lang.IllegalStateException: Unable to retrieve @EnableAutoConfiguration base packages
	at org.springframework.boot.autoconfigure.AutoConfigurationPackages.get(AutoConfigurationPackages.java:78)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.getBasePackages(AbstractRepositoryConfigurationSourceSupport.java:79)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport$AutoConfiguredAnnotationRepositoryConfigurationSource.getBasePackages(AbstractRepositoryConfigurationSourceSupport.java:138)
	at org.springframework.data.repository.config.RepositoryConfigurationSourceSupport.lambda$getCandidates$1(RepositoryConfigurationSourceSupport.java:75)
	at org.springframework.data.util.LazyStreamable.stream(LazyStreamable.java:47)
	at org.springframework.data.util.LazyStreamable.iterator(LazyStreamable.java:42)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:80)
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:164)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:376)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:375)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:428)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:289)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:775)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:597)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 72 more
2024-09-05 17:26:51.001  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 17:26:51.227  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-05 17:26:51.836  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 17:26:51.926  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 327251 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 17:26:51.932  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "dev"
2024-09-05 17:26:52.710  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 17:26:52.826  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 101 ms. Found 4 JPA repository interfaces.
2024-09-05 17:26:52.921  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-05 17:26:53.216  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:7cb96398-154a-49ee-9462-ea1cee9fd469;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-05 17:26:53.714  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 17:26:54.543  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 17:26:54.700  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:26:54.909  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 17:26:54.911  INFO --- [           main] l.command                                : Using deploymentId: 5550014910
2024-09-05 17:26:54.915  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:26:54.982  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 17:26:55.002  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 17:26:55.004  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 20ms
2024-09-05 17:26:55.019  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 17:26:55.025  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 17:26:55.026  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-05 17:26:55.034  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 17:26:55.041  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 17:26:55.051  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 17:26:55.052  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 17ms
2024-09-05 17:26:55.059  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 17:26:55.067  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 17:26:55.071  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 17:26:55.072  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-05 17:26:55.079  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 17:26:55.082  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 17:26:55.085  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 17:26:55.089  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 17:26:55.095  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 17:26:55.095  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-05 17:26:55.100  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 17:26:55.118  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 17:26:55.132  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 17:26:55.133  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 32ms
2024-09-05 17:26:55.139  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 17:26:55.161  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 17:26:55.162  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 21ms
2024-09-05 17:26:55.178  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 17:26:55.178  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 17:26:55.179  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 17:26:55.179  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 17:26:55.180  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 17:26:55.180  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 17:26:55.182  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 17:26:55.187  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 17:26:55.188  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 17:26:55.191  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 17:26:55.193  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 17:26:55.344  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 17:26:55.442  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 17:26:55.493  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 17:26:55.790  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 17:26:55.852  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 17:26:57.151  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 17:26:57.221  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:26:57.953  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 6.613 seconds (process running for 9.106)
2024-09-05 17:26:58.698 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:26:58.738  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:27:20.082  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 17:27:20.269  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-05 17:27:20.871  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 17:27:20.926  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 327578 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 17:27:20.931  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "dev"
2024-09-05 17:27:21.586  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 17:27:21.704  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 104 ms. Found 4 JPA repository interfaces.
2024-09-05 17:27:21.807  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-05 17:27:22.099  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:809cf05d-3a7d-496c-bb8b-57451507e8b5;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-05 17:27:22.590  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 17:27:23.412  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 17:27:23.796  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:27:24.039  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 17:27:24.042  INFO --- [           main] l.command                                : Using deploymentId: 5550044041
2024-09-05 17:27:24.045  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:27:24.116  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 17:27:24.138  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 17:27:24.140  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 22ms
2024-09-05 17:27:24.157  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 17:27:24.167  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 17:27:24.168  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 10ms
2024-09-05 17:27:24.178  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 17:27:24.185  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 17:27:24.198  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 17:27:24.199  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 21ms
2024-09-05 17:27:24.210  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 17:27:24.220  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 17:27:24.225  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 17:27:24.227  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 15ms
2024-09-05 17:27:24.235  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 17:27:24.240  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 17:27:24.244  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 17:27:24.249  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 17:27:24.256  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 17:27:24.257  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 21ms
2024-09-05 17:27:24.262  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 17:27:24.278  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 17:27:24.290  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 17:27:24.291  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 28ms
2024-09-05 17:27:24.297  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 17:27:24.316  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 17:27:24.317  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 18ms
2024-09-05 17:27:24.330  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 17:27:24.331  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 17:27:24.332  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 17:27:24.332  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 17:27:24.333  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 17:27:24.333  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 17:27:24.335  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 17:27:24.340  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 17:27:24.341  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 17:27:24.345  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 17:27:24.347  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 17:27:24.520  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 17:27:24.612  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 17:27:24.666  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 17:27:25.093  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 17:27:25.157  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 17:27:26.459  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 17:27:26.514  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:27:27.196  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 6.842 seconds (process running for 9.117)
2024-09-05 17:27:28.013 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:27:28.128 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:27:28.155 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:27:28.176  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 17:27:28.192  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 17:27:28.280  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 327578 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 17:27:28.282  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "dev"
2024-09-05 17:27:28.285 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@d1b9dd7
2024-09-05 17:27:28.984  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 17:27:29.001  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 4 JPA repository interfaces.
2024-09-05 17:27:29.399  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 17:27:29.529  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn7: url=jdbc:h2:file:./dev user=SA
2024-09-05 17:27:29.531  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 17:27:29.549  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 17:27:29.653  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:27:29.677  INFO --- [           main] l.ui                                     : Database is up to date, no changesets to execute
2024-09-05 17:27:29.678  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:27:29.683  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 17:27:29.683  INFO --- [           main] l.util                                   : Run:                          0
2024-09-05 17:27:29.683  INFO --- [           main] l.util                                   : Previously run:               7
2024-09-05 17:27:29.683  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 17:27:29.684  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 17:27:29.684  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 17:27:29.684  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 17:27:29.686  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 17:27:29.687  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 17:27:29.737  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 17:27:29.741  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 17:27:29.745  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 17:27:29.747  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 17:27:29.868  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 17:27:29.878  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:27:30.384  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 17:27:30.419  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 63704388-6cfe-4144-9878-9e1eea5bddca

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 17:27:30.686 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 17:27:30.869 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 17:27:30.932  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7ec53f8f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d0e242f, org.springframework.security.web.context.SecurityContextHolderFilter@6951e062, org.springframework.security.web.header.HeaderWriterFilter@15688af, org.springframework.web.filter.CorsFilter@edf68f5, org.springframework.security.web.authentication.logout.LogoutFilter@1eb21f22, de.telran.urlshortener.security.JwtFilter@2c8174ce, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@73430c86, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@184d73af, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1f94df5, org.springframework.security.web.session.SessionManagementFilter@73eb57e6, org.springframework.security.web.access.ExceptionTranslationFilter@ed110d6, org.springframework.security.web.access.intercept.AuthorizationFilter@5c39ec34]
2024-09-05 17:27:31.212 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 17:27:31.266 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 17:27:31.459  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:file:./dev'
2024-09-05 17:27:31.559  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 3.331 seconds (process running for 13.479)
2024-09-05 17:27:31.608 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:27:31.630  WARN --- [           main] o.h.e.j.s.SqlExceptionHelper             : SQL Error: 90098, SQLState: 90098
2024-09-05 17:27:31.630 ERROR --- [           main] o.h.e.j.s.SqlExceptionHelper             :    
The database has been closed [90098-224]
2024-09-05 17:27:31.640  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-05 17:27:31.663 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
java.lang.IllegalStateException: Failed to execute CommandLineRunner
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:789)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:770)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:330)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.dao.DataAccessResourceFailureException: JDBC exception executing SQL [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?] [   
The database has been closed [90098-224]] [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:274)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)
	at jdk.proxy2/jdk.proxy2.$Proxy147.findByName(Unknown Source)
	at de.telran.urlshortener.config.AppConfig.run(AppConfig.java:18)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:786)
	... 93 more
Caused by: org.hibernate.exception.JDBCConnectionException: JDBC exception executing SQL [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?] [   
The database has been closed [90098-224]] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:258)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:164)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:200)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:361)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:168)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:93)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:109)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:559)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405)
	at jdk.proxy2/jdk.proxy2.$Proxy219.getSingleResult(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 102 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:    
The database has been closed [90098-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionLocal.getTransaction(SessionLocal.java:1610)
	at org.h2.engine.SessionLocal.startStatementWithinTransaction(SessionLocal.java:1631)
	at org.h2.command.Command.executeQuery(Command.java:186)
	at org.h2.jdbc.JdbcPreparedStatement.executeQuery(JdbcPreparedStatement.java:131)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:240)
	... 139 more
Caused by: org.h2.mvstore.MVStoreException: java.lang.AssertionError: 57344 != 40960 [2.2.224/3]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.FileStore.storeBuffer(FileStore.java:1529)
	at org.h2.mvstore.FileStore.lambda$serializeAndStore$3(FileStore.java:1432)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.AssertionError: 57344 != 40960
	at org.h2.mvstore.RandomAccessStore.shrinkStoreIfPossible(RandomAccessStore.java:679)
	at org.h2.mvstore.RandomAccessStore.writeChunk(RandomAccessStore.java:377)
	at org.h2.mvstore.RandomAccessStore.writeChunk(RandomAccessStore.java:28)
	at org.h2.mvstore.FileStore.storeBuffer(FileStore.java:1524)
	... 6 more
2024-09-05 17:27:31.669 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@d1b9dd7, started on Thu Sep 05 17:27:28 CEST 2024
2024-09-05 17:27:31.677  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:27:31.680  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 17:27:31.686  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 17:27:31.694 ERROR --- [           main] o.s.t.c.TestContextManager               : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [de.telran.urlshortener.UrlShortenerApplicationTests@755dae57]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6018ff75 testClass = de.telran.urlshortener.UrlShortenerApplicationTests, locations = [], classes = [de.telran.urlshortener.UrlShortenerApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@4a8ab068, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@6bab2585, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@c34fd2, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@60cf80e7, org.springframework.boot.test.context.SpringBootTestAnnotation@592b6e7d], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.IllegalStateException: Failed to execute CommandLineRunner
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:789)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:770)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:330)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 more
Caused by: org.springframework.dao.DataAccessResourceFailureException: JDBC exception executing SQL [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?] [   
The database has been closed [90098-224]] [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:274)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)
	at jdk.proxy2/jdk.proxy2.$Proxy147.findByName(Unknown Source)
	at de.telran.urlshortener.config.AppConfig.run(AppConfig.java:18)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:786)
	... 93 more
Caused by: org.hibernate.exception.JDBCConnectionException: JDBC exception executing SQL [select r1_0.id,r1_0.expiry_date,r1_0.name from roles r1_0 where r1_0.name=?] [   
The database has been closed [90098-224]] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:51)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:258)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:164)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:200)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:361)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:168)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:93)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:109)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:559)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:405)
	at jdk.proxy2/jdk.proxy2.$Proxy219.getSingleResult(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 102 more
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException:    
The database has been closed [90098-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:690)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:212)
	at org.h2.engine.SessionLocal.getTransaction(SessionLocal.java:1610)
	at org.h2.engine.SessionLocal.startStatementWithinTransaction(SessionLocal.java:1631)
	at org.h2.command.Command.executeQuery(Command.java:186)
	at org.h2.jdbc.JdbcPreparedStatement.executeQuery(JdbcPreparedStatement.java:131)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:240)
	... 139 more
Caused by: org.h2.mvstore.MVStoreException: java.lang.AssertionError: 57344 != 40960 [2.2.224/3]
	at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:996)
	at org.h2.mvstore.FileStore.storeBuffer(FileStore.java:1529)
	at org.h2.mvstore.FileStore.lambda$serializeAndStore$3(FileStore.java:1432)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.AssertionError: 57344 != 40960
	at org.h2.mvstore.RandomAccessStore.shrinkStoreIfPossible(RandomAccessStore.java:679)
	at org.h2.mvstore.RandomAccessStore.writeChunk(RandomAccessStore.java:377)
	at org.h2.mvstore.RandomAccessStore.writeChunk(RandomAccessStore.java:28)
	at org.h2.mvstore.FileStore.storeBuffer(FileStore.java:1524)
	... 6 more
2024-09-05 17:27:31.753  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:30:30.729  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 17:30:30.916  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-05 17:30:31.434  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 17:30:31.515  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 329320 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 17:30:31.715  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "testdb"
2024-09-05 17:30:32.462  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 17:30:32.564  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 87 ms. Found 4 JPA repository interfaces.
2024-09-05 17:30:32.663  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-05 17:30:32.952  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:2fb0f674-3138-4ed3-940b-97df01d04e60;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-05 17:30:33.487  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 17:30:34.269  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 17:30:34.553  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:30:34.758  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 17:30:34.760  INFO --- [           main] l.command                                : Using deploymentId: 5550234760
2024-09-05 17:30:34.763  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:30:34.816  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 17:30:34.835  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 17:30:34.837  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-05 17:30:34.850  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 17:30:34.859  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 17:30:34.860  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-05 17:30:34.868  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 17:30:34.876  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 17:30:34.889  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 17:30:34.890  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 21ms
2024-09-05 17:30:34.901  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 17:30:34.912  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 17:30:34.916  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 17:30:34.917  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 15ms
2024-09-05 17:30:34.925  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 17:30:34.930  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 17:30:34.935  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 17:30:34.940  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 17:30:34.947  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 17:30:34.948  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 21ms
2024-09-05 17:30:34.953  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 17:30:34.975  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 17:30:34.994  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 17:30:34.995  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 41ms
2024-09-05 17:30:35.002  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 17:30:35.022  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 17:30:35.024  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 20ms
2024-09-05 17:30:35.040  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 17:30:35.041  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 17:30:35.042  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 17:30:35.042  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 17:30:35.043  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 17:30:35.044  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 17:30:35.046  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 17:30:35.053  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 17:30:35.054  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 17:30:35.059  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 17:30:35.061  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 17:30:35.261  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 17:30:35.359  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 17:30:35.425  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 17:30:35.826  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 17:30:35.907  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 17:30:37.167  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 17:30:37.172  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:30:37.852  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 6.837 seconds (process running for 9.08)
2024-09-05 17:30:38.705 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:30:38.845 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:30:38.871 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:30:38.893  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 17:30:38.912  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 17:30:39.037  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 329320 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 17:30:39.039  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "testdb"
2024-09-05 17:30:39.043 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@48682f91
2024-09-05 17:30:39.893  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 17:30:39.921  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 26 ms. Found 4 JPA repository interfaces.
2024-09-05 17:30:40.349  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 17:30:40.364  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn6: url=jdbc:h2:mem:ce343d29-7157-4ab2-b1f0-1665d6471592 user=SA
2024-09-05 17:30:40.367  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 17:30:40.381  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 17:30:40.486  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 17:30:40.491  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:30:40.520  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 17:30:40.521  INFO --- [           main] l.command                                : Using deploymentId: 5550240521
2024-09-05 17:30:40.523  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:30:40.540  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 17:30:40.545  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 17:30:40.546  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 4ms
2024-09-05 17:30:40.551  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 17:30:40.556  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 17:30:40.557  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-05 17:30:40.562  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 17:30:40.566  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 17:30:40.569  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 17:30:40.570  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 8ms
2024-09-05 17:30:40.575  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 17:30:40.581  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 17:30:40.584  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 17:30:40.585  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-05 17:30:40.590  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 17:30:40.592  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 17:30:40.594  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 17:30:40.599  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 17:30:40.603  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 17:30:40.604  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 14ms
2024-09-05 17:30:40.609  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 17:30:40.621  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 17:30:40.632  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 17:30:40.633  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 24ms
2024-09-05 17:30:40.638  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 17:30:40.656  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 17:30:40.657  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 18ms
2024-09-05 17:30:40.661  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 17:30:40.662  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 17:30:40.662  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 17:30:40.663  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 17:30:40.663  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 17:30:40.664  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 17:30:40.664  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 17:30:40.665  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 17:30:40.666  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 17:30:40.669  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 17:30:40.670  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 17:30:40.725  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 17:30:40.727  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 17:30:40.731  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 17:30:40.733  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 17:30:40.855  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 17:30:40.855  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:30:41.414  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 17:30:41.445  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: e616cde0-e4b5-497a-9622-ff51a9fd7956

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 17:30:41.721 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 17:30:41.928 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 17:30:41.990  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7a9df9b2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@57e0bfd6, org.springframework.security.web.context.SecurityContextHolderFilter@1dbb3001, org.springframework.security.web.header.HeaderWriterFilter@58d85a00, org.springframework.web.filter.CorsFilter@48c8c722, org.springframework.security.web.authentication.logout.LogoutFilter@ae449e7, de.telran.urlshortener.security.JwtFilter@4471f216, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@718aa49a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4992e34f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@12f826c, org.springframework.security.web.session.SessionManagementFilter@1342c6e1, org.springframework.security.web.access.ExceptionTranslationFilter@22938166, org.springframework.security.web.access.intercept.AuthorizationFilter@6619692e]
2024-09-05 17:30:42.257 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 17:30:42.319 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 17:30:42.515  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:ce343d29-7157-4ab2-b1f0-1665d6471592'
2024-09-05 17:30:42.587  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 3.643 seconds (process running for 13.815)
2024-09-05 17:30:42.706 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:30:42.724 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:30:42.732 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:30:42.744 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:30:42.749 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:30:42.754 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:30:42.758 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:30:42.762 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:30:42.766 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:30:42.773 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:30:42.969 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:30:42.980 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 17:30:42.985 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:30:43.102 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:30:43.104 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 17:30:43.156  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:30:43.161 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@48682f91, started on Thu Sep 05 17:30:39 CEST 2024
2024-09-05 17:30:43.169  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:30:43.170  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 17:30:43.174  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 17:40:36.230  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 17:40:36.392  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 17:40:38.618  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 17:40:38.668  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 334543 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 17:40:38.675  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 17:40:38.731 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 17:40:40.451  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 17:40:40.569  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 104 ms. Found 4 JPA repository interfaces.
2024-09-05 17:40:41.458  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 17:40:41.757  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 17:40:41.760  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 17:40:41.882  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 17:40:42.692  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 17:40:43.072  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:40:43.265  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 17:40:43.279  INFO --- [           main] l.command                                : Using deploymentId: 5550843278
2024-09-05 17:40:43.287  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:40:43.389  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 17:40:43.411  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 17:40:43.412  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 21ms
2024-09-05 17:40:43.426  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 17:40:43.436  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 17:40:43.437  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 10ms
2024-09-05 17:40:43.446  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 17:40:43.455  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 17:40:43.468  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 17:40:43.469  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 22ms
2024-09-05 17:40:43.479  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 17:40:43.490  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 17:40:43.496  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 17:40:43.497  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 17ms
2024-09-05 17:40:43.505  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 17:40:43.511  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 17:40:43.515  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 17:40:43.521  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 17:40:43.528  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 17:40:43.529  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 22ms
2024-09-05 17:40:43.534  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 17:40:43.557  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 17:40:43.571  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 17:40:43.572  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 37ms
2024-09-05 17:40:43.579  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 17:40:43.600  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 17:40:43.601  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 21ms
2024-09-05 17:40:43.616  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 17:40:43.616  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 17:40:43.617  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 17:40:43.617  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 17:40:43.617  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 17:40:43.618  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 17:40:43.620  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 17:40:43.624  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 17:40:43.625  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 17:40:43.629  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 17:40:43.630  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 17:40:43.817  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 17:40:43.919  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 17:40:43.974  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 17:40:44.146  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 17:40:44.212  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 17:40:45.309  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 17:40:45.330 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 17:40:45.332 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 17:40:45.333 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 17:40:45.335 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 17:40:45.336 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 17:40:45.344 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 17:40:45.349 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 17:40:45.351 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 17:40:45.353 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 17:40:45.355 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 17:40:45.358 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 17:40:45.360 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 17:40:45.362 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 17:40:45.364 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 17:40:45.371  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:40:46.419  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 17:40:46.454  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 7f84ac71-19f7-4d07-a7e2-cdcb803404b4

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 17:40:46.727 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 17:40:46.923 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 17:40:47.000  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@10847aeb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@cea6297, org.springframework.security.web.context.SecurityContextHolderFilter@60e2b6e3, org.springframework.security.web.header.HeaderWriterFilter@458044df, org.springframework.web.filter.CorsFilter@51db8b10, org.springframework.security.web.authentication.logout.LogoutFilter@545ffe1, de.telran.urlshortener.security.JwtFilter@290ebbbe, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@20f1c8ed, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1dc26de5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3afe1020, org.springframework.security.web.session.SessionManagementFilter@70edffdb, org.springframework.security.web.access.ExceptionTranslationFilter@4a842e8a, org.springframework.security.web.access.intercept.AuthorizationFilter@1a48e48e]
2024-09-05 17:40:47.341 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 17:40:47.402 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 17:40:47.608  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 17:40:47.707  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.525 seconds (process running for 13.624)
2024-09-05 17:40:47.907 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:40:48.030 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:40:48.050 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:40:48.060 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:40:48.062 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:40:48.065 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:40:48.067 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:40:48.071 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:40:48.074 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:40:48.081 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:40:48.229 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:40:48.243 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 17:40:48.248 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:40:48.360 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:40:48.362 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 17:40:48.479 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 17:40:38 CEST 2024
2024-09-05 17:40:48.486  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:40:48.487 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 17:40:48.489 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 17:40:48.490 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 17:40:48.491 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 17:40:48.492 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 17:40:48.496  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 17:40:48.498  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 17:42:50.628  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 17:42:50.736  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 17:42:53.125  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 17:42:53.173  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 335720 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 17:42:53.180  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 17:42:53.240 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3b2e5c0d
2024-09-05 17:42:54.799  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 17:42:54.910  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 98 ms. Found 4 JPA repository interfaces.
2024-09-05 17:42:55.876  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 17:42:56.188  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 17:42:56.190  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 17:42:56.328  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 17:42:57.205  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 17:42:57.533  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:42:57.727  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 17:42:57.730  INFO --- [           main] l.command                                : Using deploymentId: 5550977729
2024-09-05 17:42:57.735  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:42:57.822  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 17:42:57.837  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 17:42:57.838  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 14ms
2024-09-05 17:42:57.849  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 17:42:57.856  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 17:42:57.857  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-05 17:42:57.864  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 17:42:57.869  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 17:42:57.879  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 17:42:57.880  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-05 17:42:57.887  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 17:42:57.894  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 17:42:57.898  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 17:42:57.899  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-05 17:42:57.905  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 17:42:57.908  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 17:42:57.912  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 17:42:57.916  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 17:42:57.922  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 17:42:57.923  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 17ms
2024-09-05 17:42:57.927  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 17:42:57.943  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 17:42:57.956  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 17:42:57.957  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 30ms
2024-09-05 17:42:57.962  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 17:42:57.979  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 17:42:57.980  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 17ms
2024-09-05 17:42:57.994  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 17:42:57.995  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 17:42:57.995  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 17:42:57.995  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 17:42:57.996  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 17:42:57.996  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 17:42:57.998  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 17:42:58.003  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 17:42:58.003  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 17:42:58.007  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 17:42:58.009  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 17:42:58.172  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 17:42:58.273  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 17:42:58.324  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 17:42:58.478  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 17:42:58.535  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 17:42:59.631  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 17:42:59.653 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 17:42:59.655 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 17:42:59.657 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 17:42:59.659 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 17:42:59.660 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 17:42:59.669 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 17:42:59.684 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 17:42:59.687 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 17:42:59.689 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 17:42:59.691 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 17:42:59.694 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 17:42:59.696 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 17:42:59.698 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 17:42:59.701 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 17:42:59.708  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:43:00.641  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 17:43:00.680  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: ad8c4bf0-8fcd-48ea-b611-68c9d0ff52cf

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 17:43:00.951 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 17:43:01.155 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 17:43:01.207  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6bd5ca02, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4758f533, org.springframework.security.web.context.SecurityContextHolderFilter@3ffa3cdb, org.springframework.security.web.header.HeaderWriterFilter@34207fde, org.springframework.web.filter.CorsFilter@12b4a53d, org.springframework.security.web.authentication.logout.LogoutFilter@20961f8b, de.telran.urlshortener.security.JwtFilter@9124278, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@515d6c9f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@716cb4c0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@262e2c8c, org.springframework.security.web.session.SessionManagementFilter@63f79099, org.springframework.security.web.access.ExceptionTranslationFilter@7bd6a7f9, org.springframework.security.web.access.intercept.AuthorizationFilter@5bb1c104]
2024-09-05 17:43:01.533 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 17:43:01.580 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 17:43:01.786  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 17:43:01.892  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.304 seconds (process running for 12.949)
2024-09-05 17:43:02.108 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:43:02.194 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:43:02.217 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:43:02.227 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:43:02.229 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:43:02.233 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:43:02.234 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:43:02.238 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:43:02.241 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:43:02.249 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:43:02.419 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:43:02.435 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 17:43:02.441 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:43:02.580 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:43:02.582 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 17:43:02.677 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3b2e5c0d, started on Thu Sep 05 17:42:53 CEST 2024
2024-09-05 17:43:02.686  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:43:02.688 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 17:43:02.691 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 17:43:02.693 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 17:43:02.695 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 17:43:02.697 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 17:43:02.702  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 17:43:02.706  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 17:49:22.003  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 17:49:22.157  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 17:49:24.486  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 17:49:24.526  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 339072 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 17:49:24.531  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 17:49:24.575 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 17:49:26.007  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 17:49:26.121  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 101 ms. Found 4 JPA repository interfaces.
2024-09-05 17:49:27.006  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 17:49:27.319  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 17:49:27.322  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 17:49:27.464  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 17:49:28.251  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 17:49:28.609  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:49:28.852  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 17:49:28.854  INFO --- [           main] l.command                                : Using deploymentId: 5551368853
2024-09-05 17:49:28.857  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:49:28.915  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 17:49:28.933  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 17:49:28.935  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-05 17:49:28.948  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 17:49:28.956  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 17:49:28.957  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 17:49:28.966  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 17:49:28.973  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 17:49:28.985  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 17:49:28.985  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 18ms
2024-09-05 17:49:28.994  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 17:49:29.004  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 17:49:29.011  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 17:49:29.012  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 17ms
2024-09-05 17:49:29.023  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 17:49:29.027  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 17:49:29.034  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 17:49:29.038  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 17:49:29.046  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 17:49:29.046  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 23ms
2024-09-05 17:49:29.052  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 17:49:29.116  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 17:49:29.136  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 17:49:29.137  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 74ms
2024-09-05 17:49:29.151  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 17:49:29.179  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 17:49:29.180  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 29ms
2024-09-05 17:49:29.194  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 17:49:29.195  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 17:49:29.196  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 17:49:29.196  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 17:49:29.197  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 17:49:29.198  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 17:49:29.200  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 17:49:29.204  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 17:49:29.205  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 17:49:29.207  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 17:49:29.209  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 17:49:29.411  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 17:49:29.510  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 17:49:29.577  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 17:49:29.778  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 17:49:29.879  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 17:49:31.042  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 17:49:31.065 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 17:49:31.067 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 17:49:31.069 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 17:49:31.070 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 17:49:31.072 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 17:49:31.081 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 17:49:31.085 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 17:49:31.088 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 17:49:31.090 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 17:49:31.093 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 17:49:31.096 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 17:49:31.098 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 17:49:31.100 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 17:49:31.103 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 17:49:31.110  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:49:32.038  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 17:49:32.073  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 6b4eeb01-d767-4df5-bad9-147a0bfb11c5

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 17:49:32.344 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 17:49:32.584 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 17:49:32.630  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1a48e48e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6c30efc4, org.springframework.security.web.context.SecurityContextHolderFilter@3d8c499a, org.springframework.security.web.header.HeaderWriterFilter@4a842e8a, org.springframework.web.filter.CorsFilter@10847aeb, org.springframework.security.web.authentication.logout.LogoutFilter@5a362dc7, de.telran.urlshortener.security.JwtFilter@1508bc71, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@60e2b6e3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7f6e9e03, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@cea6297, org.springframework.security.web.session.SessionManagementFilter@75a955bf, org.springframework.security.web.access.ExceptionTranslationFilter@554f6e30, org.springframework.security.web.access.intercept.AuthorizationFilter@48f08e9]
2024-09-05 17:49:32.902 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 17:49:32.950 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 17:49:33.152  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 17:49:33.256  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.308 seconds (process running for 13.466)
2024-09-05 17:49:33.469 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:49:33.552 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:49:33.574 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:49:33.587 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:49:33.590 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:49:33.593 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:49:33.596 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:49:33.599 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:49:33.603 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:49:33.610 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:49:33.783 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:49:33.796 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 17:49:33.802 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:49:33.939 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:49:33.942 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 17:49:34.062 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 17:49:34.091 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 17:49:24 CEST 2024
2024-09-05 17:49:34.101  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:49:34.102 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 17:49:34.104 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 17:49:34.106 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 17:49:34.108 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 17:49:34.109 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 17:49:34.115  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 17:49:34.117  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 17:51:17.368  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 17:51:17.522  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 17:51:19.871  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 17:51:19.921  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 340058 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 17:51:19.927  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 17:51:19.976 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 17:51:21.697  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 17:51:21.800  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 88 ms. Found 4 JPA repository interfaces.
2024-09-05 17:51:22.737  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 17:51:23.058  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 17:51:23.061  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 17:51:23.170  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 17:51:24.081  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 17:51:24.276  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:51:24.499  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 17:51:24.502  INFO --- [           main] l.command                                : Using deploymentId: 5551484501
2024-09-05 17:51:24.512  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:51:24.661  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 17:51:24.737  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 17:51:24.740  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 77ms
2024-09-05 17:51:24.756  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 17:51:24.767  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 17:51:24.777  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 19ms
2024-09-05 17:51:24.787  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 17:51:24.802  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 17:51:24.824  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 17:51:24.825  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 37ms
2024-09-05 17:51:24.853  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 17:51:24.863  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 17:51:24.868  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 17:51:24.869  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 15ms
2024-09-05 17:51:24.877  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 17:51:24.882  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 17:51:24.887  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 17:51:24.893  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 17:51:24.902  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 17:51:24.904  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 26ms
2024-09-05 17:51:24.912  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 17:51:24.959  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 17:51:24.991  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 17:51:24.993  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 80ms
2024-09-05 17:51:25.013  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 17:51:25.066  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 17:51:25.068  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 53ms
2024-09-05 17:51:25.096  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 17:51:25.097  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 17:51:25.098  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 17:51:25.098  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 17:51:25.099  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 17:51:25.103  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 17:51:25.106  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 17:51:25.111  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 17:51:25.112  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 17:51:25.116  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 17:51:25.117  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 17:51:25.584  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 17:51:25.704  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 17:51:25.774  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 17:51:25.954  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 17:51:26.022  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 17:51:27.236  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 17:51:27.259 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 17:51:27.261 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 17:51:27.263 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 17:51:27.264 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 17:51:27.266 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 17:51:27.274 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 17:51:27.279 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 17:51:27.281 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 17:51:27.284 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 17:51:27.286 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 17:51:27.288 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 17:51:27.291 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 17:51:27.293 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 17:51:27.295 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 17:51:27.301  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:51:28.291  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 17:51:28.330  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b1c88a0d-59e7-45d7-88b2-11958e19d82d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 17:51:28.604 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 17:51:28.806 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 17:51:28.897  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@cea6297, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@51db8b10, org.springframework.security.web.context.SecurityContextHolderFilter@7f6e9e03, org.springframework.security.web.header.HeaderWriterFilter@f4cfc61, org.springframework.web.filter.CorsFilter@3afe1020, org.springframework.security.web.authentication.logout.LogoutFilter@1805b503, de.telran.urlshortener.security.JwtFilter@3c72c488, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1dc26de5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@68628510, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@91e76b6, org.springframework.security.web.session.SessionManagementFilter@3d8c499a, org.springframework.security.web.access.ExceptionTranslationFilter@6b909973, org.springframework.security.web.access.intercept.AuthorizationFilter@6c30efc4]
2024-09-05 17:51:29.202 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 17:51:29.248 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 17:51:29.476  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 17:51:29.581  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 10.186 seconds (process running for 14.388)
2024-09-05 17:51:29.785 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:51:29.897 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:51:29.920 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:51:29.931 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:51:29.934 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:51:29.938 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:51:29.940 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:51:29.944 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:51:29.948 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:51:29.956 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:51:30.112 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:51:30.126 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 17:51:30.132 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:51:30.244 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:51:30.246 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 17:51:30.371 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 17:51:30.406 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 17:51:19 CEST 2024
2024-09-05 17:51:30.414  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:51:30.415 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 17:51:30.417 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 17:51:30.419 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 17:51:30.421 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 17:51:30.422 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 17:51:30.426  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 17:51:30.430  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 17:57:37.884  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 17:57:38.047  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 17:57:40.314  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 17:57:40.364  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 343298 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 17:57:40.370  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 17:57:40.419 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7bdf61ad
2024-09-05 17:57:42.134  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 17:57:42.268  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 117 ms. Found 4 JPA repository interfaces.
2024-09-05 17:57:43.284  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 17:57:43.600  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 17:57:43.602  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 17:57:43.740  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 17:57:44.664  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 17:57:44.929  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:57:45.156  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 17:57:45.158  INFO --- [           main] l.command                                : Using deploymentId: 5551865157
2024-09-05 17:57:45.161  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 17:57:45.219  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 17:57:45.237  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 17:57:45.239  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-05 17:57:45.252  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 17:57:45.260  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 17:57:45.260  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 17:57:45.268  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 17:57:45.275  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 17:57:45.288  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 17:57:45.288  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 19ms
2024-09-05 17:57:45.297  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 17:57:45.305  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 17:57:45.309  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 17:57:45.310  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 13ms
2024-09-05 17:57:45.316  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 17:57:45.320  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 17:57:45.324  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 17:57:45.328  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 17:57:45.334  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 17:57:45.335  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 18ms
2024-09-05 17:57:45.339  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 17:57:45.357  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 17:57:45.371  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 17:57:45.372  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 32ms
2024-09-05 17:57:45.378  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 17:57:45.397  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 17:57:45.398  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 18ms
2024-09-05 17:57:45.413  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 17:57:45.414  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 17:57:45.414  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 17:57:45.415  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 17:57:45.415  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 17:57:45.416  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 17:57:45.418  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 17:57:45.422  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 17:57:45.423  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 17:57:45.427  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 17:57:45.428  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 17:57:45.573  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 17:57:45.662  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 17:57:45.710  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 17:57:45.851  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 17:57:45.907  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 17:57:46.973  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 17:57:46.994 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 17:57:46.996 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 17:57:46.998 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 17:57:46.999 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 17:57:47.000 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 17:57:47.009 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 17:57:47.013 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 17:57:47.016 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 17:57:47.018 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 17:57:47.020 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 17:57:47.022 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 17:57:47.025 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 17:57:47.027 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 17:57:47.029 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 17:57:47.036  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:57:47.971  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 17:57:48.012  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 7e772398-f57c-42e1-8dc7-ade1c2a76e1f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 17:57:48.312 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 17:57:48.513 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 17:57:48.571  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7241872c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3094111c, org.springframework.security.web.context.SecurityContextHolderFilter@2b24fcba, org.springframework.security.web.header.HeaderWriterFilter@1dc26de5, org.springframework.web.filter.CorsFilter@776e4088, org.springframework.security.web.authentication.logout.LogoutFilter@91e76b6, de.telran.urlshortener.security.JwtFilter@408f3054, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c37b0de, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3f774d60, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5e7d994c, org.springframework.security.web.session.SessionManagementFilter@61427cd3, org.springframework.security.web.access.ExceptionTranslationFilter@7f6e9e03, org.springframework.security.web.access.intercept.AuthorizationFilter@13ea9afc]
2024-09-05 17:57:48.874 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 17:57:48.925 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 17:57:49.122  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 17:57:49.221  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.426 seconds (process running for 13.359)
2024-09-05 17:57:49.413 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:57:49.503 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:57:49.524 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:57:49.534 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:57:49.536 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:57:49.540 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:57:49.542 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 17:57:49.546 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:57:49.549 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 17:57:49.558 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:57:49.726 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:57:49.741 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 17:57:49.747 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 17:57:49.913 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 17:57:49.916 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 17:57:50.081 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7bdf61ad, started on Thu Sep 05 17:57:40 CEST 2024
2024-09-05 17:57:50.090  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 17:57:50.091 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 17:57:50.093 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 17:57:50.094 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 17:57:50.096 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 17:57:50.097 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 17:57:50.101  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 17:57:50.104  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:02:25.728  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:02:25.884  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:02:28.241  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:02:28.294  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 345719 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:02:28.301  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:02:28.357 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7bdf61ad
2024-09-05 18:02:29.812  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:02:29.916  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 91 ms. Found 4 JPA repository interfaces.
2024-09-05 18:02:30.852  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:02:31.208  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:02:31.211  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:02:31.361  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:02:32.337  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:02:32.531  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:02:32.723  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:02:32.725  INFO --- [           main] l.command                                : Using deploymentId: 5552152725
2024-09-05 18:02:32.729  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:02:32.806  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:02:32.823  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:02:32.824  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 16ms
2024-09-05 18:02:32.838  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:02:32.844  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:02:32.845  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-05 18:02:32.853  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:02:32.858  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:02:32.867  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:02:32.868  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-05 18:02:32.875  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:02:32.882  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:02:32.886  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:02:32.887  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-05 18:02:32.892  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:02:32.895  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:02:32.899  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:02:32.902  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:02:32.909  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:02:32.910  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 17ms
2024-09-05 18:02:32.914  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:02:32.930  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:02:32.944  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:02:32.945  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 30ms
2024-09-05 18:02:32.950  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:02:32.968  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:02:32.969  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 18ms
2024-09-05 18:02:32.983  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:02:32.984  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:02:32.984  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:02:32.985  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:02:32.985  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:02:32.986  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:02:32.988  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:02:32.992  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:02:32.992  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:02:32.996  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:02:32.997  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:02:33.142  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:02:33.237  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:02:33.288  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:02:33.435  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:02:33.492  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:02:34.570  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:02:34.590 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:02:34.593 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:02:34.595 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:02:34.596 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:02:34.598 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:02:34.609 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:02:34.615 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:02:34.618 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:02:34.620 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:02:34.623 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:02:34.626 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:02:34.629 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:02:34.632 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:02:34.634 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:02:34.643  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:02:35.632  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:02:35.667  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: be7ea429-114f-46b6-b8a2-27f8d204c713

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:02:35.992 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:02:36.260 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:02:36.324  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5bb1c104, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1184b542, org.springframework.security.web.context.SecurityContextHolderFilter@4def8aaa, org.springframework.security.web.header.HeaderWriterFilter@7bd6a7f9, org.springframework.web.filter.CorsFilter@6bd5ca02, org.springframework.security.web.authentication.logout.LogoutFilter@815e8e3, de.telran.urlshortener.security.JwtFilter@456c6754, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3ffa3cdb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@605610e5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4758f533, org.springframework.security.web.session.SessionManagementFilter@1dc26de5, org.springframework.security.web.access.ExceptionTranslationFilter@4c822e9b, org.springframework.security.web.access.intercept.AuthorizationFilter@91e76b6]
2024-09-05 18:02:36.631 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:02:36.684 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:02:36.899  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:02:37.006  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.217 seconds (process running for 13.339)
2024-09-05 18:02:37.230 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:02:37.327 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:02:37.349 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:02:37.364 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:02:37.367 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:02:37.372 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:02:37.375 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:02:37.379 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:02:37.383 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:02:37.392 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:02:37.561 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:02:37.577 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:02:37.583 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:02:37.724 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:02:37.726 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:02:37.860 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7bdf61ad, started on Thu Sep 05 18:02:28 CEST 2024
2024-09-05 18:02:37.868  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:02:37.869 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:02:37.871 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:02:37.872 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:02:37.874 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:02:37.875 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:02:37.879  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:02:37.881  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:04:28.020  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:04:28.191  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:04:30.354  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:04:30.403  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 346796 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:04:30.409  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:04:30.459 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 18:04:31.964  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:04:32.080  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 103 ms. Found 4 JPA repository interfaces.
2024-09-05 18:04:32.987  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:04:33.329  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:04:33.332  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:04:33.452  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:04:34.274  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:04:34.436  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:04:34.620  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:04:34.622  INFO --- [           main] l.command                                : Using deploymentId: 5552274622
2024-09-05 18:04:34.625  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:04:34.722  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:04:34.742  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:04:34.743  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 19ms
2024-09-05 18:04:34.757  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:04:34.766  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:04:34.767  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 18:04:34.775  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:04:34.781  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:04:34.790  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:04:34.791  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-05 18:04:34.798  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:04:34.806  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:04:34.810  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:04:34.811  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-05 18:04:34.816  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:04:34.820  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:04:34.823  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:04:34.827  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:04:34.833  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:04:34.834  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-05 18:04:34.841  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:04:34.860  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:04:34.874  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:04:34.875  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 34ms
2024-09-05 18:04:34.880  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:04:34.899  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:04:34.900  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 19ms
2024-09-05 18:04:34.916  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:04:34.917  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:04:34.917  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:04:34.917  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:04:34.918  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:04:34.918  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:04:34.920  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:04:34.925  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:04:34.926  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:04:34.929  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:04:34.931  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:04:35.084  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:04:35.176  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:04:35.229  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:04:35.388  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:04:35.444  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:04:36.582  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:04:36.632 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:04:36.635 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:04:36.637 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:04:36.639 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:04:36.640 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:04:36.649 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:04:36.653 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:04:36.656 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:04:36.658 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:04:36.660 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:04:36.663 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:04:36.665 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:04:36.667 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:04:36.669 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:04:36.676  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:04:37.770  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:04:37.816  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 008cd2d6-e663-4f75-8e4e-c60668756ab9

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:04:38.168 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:04:38.408 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:04:38.467  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@cea6297, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@51db8b10, org.springframework.security.web.context.SecurityContextHolderFilter@7f6e9e03, org.springframework.security.web.header.HeaderWriterFilter@f4cfc61, org.springframework.web.filter.CorsFilter@3afe1020, org.springframework.security.web.authentication.logout.LogoutFilter@1805b503, de.telran.urlshortener.security.JwtFilter@3c72c488, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1dc26de5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@68628510, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@91e76b6, org.springframework.security.web.session.SessionManagementFilter@3d8c499a, org.springframework.security.web.access.ExceptionTranslationFilter@6b909973, org.springframework.security.web.access.intercept.AuthorizationFilter@6c30efc4]
2024-09-05 18:04:38.773 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:04:38.823 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:04:39.031  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:04:39.155  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.241 seconds (process running for 13.253)
2024-09-05 18:04:39.362 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:04:39.452 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:04:39.475 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:04:39.486 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:04:39.488 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:04:39.492 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:04:39.493 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:04:39.497 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:04:39.500 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:04:39.509 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:04:39.662 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:04:39.678 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:04:39.683 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:04:39.794 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:04:39.795 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:04:39.924 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 18:04:30 CEST 2024
2024-09-05 18:04:39.931  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:04:39.932 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:04:39.934 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:04:39.935 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:04:39.936 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:04:39.938 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:04:39.942  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:04:39.944  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:06:18.826  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:06:18.986  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:06:21.333  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:06:21.382  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 347768 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:06:21.389  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:06:21.448 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 18:06:23.193  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:06:23.310  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 102 ms. Found 4 JPA repository interfaces.
2024-09-05 18:06:24.410  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:06:24.725  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:06:24.728  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:06:24.834  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:06:25.627  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:06:26.003  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:06:26.185  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:06:26.188  INFO --- [           main] l.command                                : Using deploymentId: 5552386187
2024-09-05 18:06:26.191  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:06:26.287  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:06:26.305  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:06:26.306  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-05 18:06:26.320  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:06:26.329  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:06:26.330  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 18:06:26.338  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:06:26.346  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:06:26.355  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:06:26.356  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 17ms
2024-09-05 18:06:26.365  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:06:26.375  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:06:26.379  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:06:26.380  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 14ms
2024-09-05 18:06:26.388  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:06:26.392  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:06:26.396  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:06:26.401  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:06:26.408  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:06:26.408  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-09-05 18:06:26.412  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:06:26.430  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:06:26.444  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:06:26.445  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 32ms
2024-09-05 18:06:26.450  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:06:26.469  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:06:26.470  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 19ms
2024-09-05 18:06:26.484  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:06:26.484  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:06:26.485  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:06:26.485  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:06:26.486  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:06:26.486  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:06:26.488  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:06:26.492  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:06:26.493  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:06:26.496  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:06:26.499  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:06:26.653  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:06:26.751  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:06:26.809  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:06:26.978  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:06:27.076  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:06:28.289  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:06:28.310 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:06:28.313 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:06:28.315 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:06:28.317 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:06:28.318 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:06:28.328 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:06:28.333 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:06:28.336 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:06:28.338 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:06:28.341 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:06:28.344 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:06:28.347 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:06:28.350 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:06:28.352 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:06:28.360  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:06:29.319  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:06:29.358  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b581c9cb-b481-488f-8933-170c8bab1d71

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:06:29.627 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:06:29.800 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:06:29.846  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@ab2d814, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1a48e48e, org.springframework.security.web.context.SecurityContextHolderFilter@70edffdb, org.springframework.security.web.header.HeaderWriterFilter@7537f638, org.springframework.web.filter.CorsFilter@6c30efc4, org.springframework.security.web.authentication.logout.LogoutFilter@22a7ff5d, de.telran.urlshortener.security.JwtFilter@7ae2f5b6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2b7e739, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@60e2b6e3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@10847aeb, org.springframework.security.web.session.SessionManagementFilter@3b8ec458, org.springframework.security.web.access.ExceptionTranslationFilter@45ec9b22, org.springframework.security.web.access.intercept.AuthorizationFilter@23faae85]
2024-09-05 18:06:30.222 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:06:30.295 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:06:30.580  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:06:30.720  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.899 seconds (process running for 14.025)
2024-09-05 18:06:30.996 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:06:31.097 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:06:31.122 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:06:31.132 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:06:31.134 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:06:31.139 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:06:31.141 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:06:31.146 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:06:31.150 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:06:31.158 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:06:31.335 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:06:31.349 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:06:31.354 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:06:31.465 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:06:31.466 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:06:31.594 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 18:06:21 CEST 2024
2024-09-05 18:06:31.605  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:06:31.606 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:06:31.608 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:06:31.610 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:06:31.611 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:06:31.612 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:06:31.617  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:06:31.622  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:07:31.955  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:07:32.107  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:07:34.462  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:07:34.492  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 348442 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:07:34.499  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:07:34.553 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 18:07:36.123  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:07:36.250  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 112 ms. Found 4 JPA repository interfaces.
2024-09-05 18:07:37.351  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:07:37.665  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:07:37.667  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:07:37.773  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:07:38.516  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:07:38.659  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:07:38.844  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:07:38.846  INFO --- [           main] l.command                                : Using deploymentId: 5552458845
2024-09-05 18:07:38.849  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:07:38.905  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:07:38.921  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:07:38.923  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 16ms
2024-09-05 18:07:38.935  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:07:38.941  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:07:38.942  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-05 18:07:38.949  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:07:38.954  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:07:38.964  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:07:38.964  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-05 18:07:38.972  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:07:38.979  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:07:38.983  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:07:38.984  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-05 18:07:38.990  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:07:38.994  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:07:38.997  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:07:39.001  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:07:39.007  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:07:39.008  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 16ms
2024-09-05 18:07:39.012  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:07:39.027  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:07:39.038  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:07:39.038  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 26ms
2024-09-05 18:07:39.043  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:07:39.073  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:07:39.074  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 31ms
2024-09-05 18:07:39.093  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:07:39.094  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:07:39.094  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:07:39.095  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:07:39.095  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:07:39.096  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:07:39.098  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:07:39.104  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:07:39.105  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:07:39.109  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:07:39.139  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:07:39.268  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:07:39.369  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:07:39.425  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:07:39.578  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:07:39.639  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:07:40.739  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:07:40.761 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:07:40.763 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:07:40.765 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:07:40.766 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:07:40.767 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:07:40.776 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:07:40.780 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:07:40.783 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:07:40.785 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:07:40.787 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:07:40.790 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:07:40.792 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:07:40.795 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:07:40.797 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:07:40.804  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:07:41.736  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:07:41.771  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 0d93101c-aa3c-4611-baad-20947499c565

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:07:42.048 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:07:42.267 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:07:42.317  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@10847aeb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@cea6297, org.springframework.security.web.context.SecurityContextHolderFilter@60e2b6e3, org.springframework.security.web.header.HeaderWriterFilter@458044df, org.springframework.web.filter.CorsFilter@51db8b10, org.springframework.security.web.authentication.logout.LogoutFilter@545ffe1, de.telran.urlshortener.security.JwtFilter@290ebbbe, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@20f1c8ed, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1dc26de5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3afe1020, org.springframework.security.web.session.SessionManagementFilter@70edffdb, org.springframework.security.web.access.ExceptionTranslationFilter@4a842e8a, org.springframework.security.web.access.intercept.AuthorizationFilter@1a48e48e]
2024-09-05 18:07:42.629 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:07:42.676 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:07:42.879  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:07:42.978  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.03 seconds (process running for 13.111)
2024-09-05 18:07:43.160 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:07:43.246 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:07:43.267 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:07:43.278 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:07:43.280 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:07:43.283 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:07:43.285 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:07:43.289 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:07:43.292 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:07:43.299 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:07:43.469 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:07:43.484 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:07:43.490 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:07:43.632 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:07:43.634 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:07:43.760 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 18:07:34 CEST 2024
2024-09-05 18:07:43.769  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:07:43.770 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:07:43.772 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:07:43.774 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:07:43.775 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:07:43.777 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:07:43.781  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:07:43.799  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:11:33.447  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:11:33.613  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:11:35.880  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:11:35.930  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 350478 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:11:35.937  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:11:35.992 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 18:11:37.639  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:11:37.761  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 107 ms. Found 4 JPA repository interfaces.
2024-09-05 18:11:38.614  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:11:38.943  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:11:38.945  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:11:39.061  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:11:39.903  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:11:40.216  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:11:40.382  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:11:40.384  INFO --- [           main] l.command                                : Using deploymentId: 5552700383
2024-09-05 18:11:40.401  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:11:40.504  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:11:40.524  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:11:40.526  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 19ms
2024-09-05 18:11:40.541  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:11:40.547  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:11:40.548  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-05 18:11:40.555  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:11:40.560  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:11:40.570  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:11:40.571  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-05 18:11:40.578  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:11:40.585  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:11:40.589  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:11:40.590  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-05 18:11:40.595  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:11:40.598  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:11:40.601  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:11:40.605  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:11:40.611  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:11:40.612  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 17ms
2024-09-05 18:11:40.616  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:11:40.631  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:11:40.643  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:11:40.643  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 26ms
2024-09-05 18:11:40.648  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:11:40.664  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:11:40.665  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 16ms
2024-09-05 18:11:40.677  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:11:40.678  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:11:40.678  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:11:40.678  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:11:40.679  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:11:40.679  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:11:40.681  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:11:40.686  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:11:40.686  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:11:40.689  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:11:40.691  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:11:40.864  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:11:40.968  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:11:41.034  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:11:41.194  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:11:41.254  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:11:42.426  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:11:42.447 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:11:42.449 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:11:42.450 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:11:42.452 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:11:42.453 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:11:42.461 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:11:42.465 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:11:42.468 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:11:42.470 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:11:42.472 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:11:42.475 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:11:42.477 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:11:42.479 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:11:42.481 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:11:42.488  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:11:43.403  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:11:43.437  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: c4dfa155-0e7b-410c-ba0a-9a0c288f4998

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:11:43.748 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:11:43.971 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:11:44.037  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@20961f8b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@23faae85, org.springframework.security.web.context.SecurityContextHolderFilter@3b8ec458, org.springframework.security.web.header.HeaderWriterFilter@6eda3ade, org.springframework.web.filter.CorsFilter@48f08e9, org.springframework.security.web.authentication.logout.LogoutFilter@4d56b7f1, de.telran.urlshortener.security.JwtFilter@1508bc71, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4704b66a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@70edffdb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@ab2d814, org.springframework.security.web.session.SessionManagementFilter@7bd6a7f9, org.springframework.security.web.access.ExceptionTranslationFilter@328446e1, org.springframework.security.web.access.intercept.AuthorizationFilter@815e8e3]
2024-09-05 18:11:44.333 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:11:44.381 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:11:44.587  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:11:44.712  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.318 seconds (process running for 13.504)
2024-09-05 18:11:44.899 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:11:44.985 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:11:45.006 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:11:45.017 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:11:45.019 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:11:45.023 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:11:45.024 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:11:45.028 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:11:45.031 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:11:45.038 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:11:45.188 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:11:45.203 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:11:45.210 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:11:45.322 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:11:45.324 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:11:45.437 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 18:11:45.470 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 18:11:35 CEST 2024
2024-09-05 18:11:45.478  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:11:45.479 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:11:45.481 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:11:45.483 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:11:45.485 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:11:45.486 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:11:45.491  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:11:45.493  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:15:16.291  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:15:16.592  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:15:18.896  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:15:18.951  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 352399 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:15:18.957  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:15:19.009 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 18:15:20.520  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:15:20.623  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 90 ms. Found 4 JPA repository interfaces.
2024-09-05 18:15:21.537  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:15:21.873  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:15:21.877  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:15:21.996  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:15:22.823  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:15:23.051  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:15:23.228  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:15:23.230  INFO --- [           main] l.command                                : Using deploymentId: 5552923229
2024-09-05 18:15:23.232  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:15:23.339  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:15:23.357  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:15:23.358  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-05 18:15:23.372  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:15:23.380  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:15:23.381  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-05 18:15:23.390  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:15:23.397  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:15:23.410  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:15:23.410  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 19ms
2024-09-05 18:15:23.420  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:15:23.429  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:15:23.434  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:15:23.435  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 15ms
2024-09-05 18:15:23.442  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:15:23.446  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:15:23.451  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:15:23.455  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:15:23.462  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:15:23.463  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-09-05 18:15:23.469  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:15:23.488  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:15:23.499  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:15:23.500  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 29ms
2024-09-05 18:15:23.504  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:15:23.519  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:15:23.520  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 14ms
2024-09-05 18:15:23.532  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:15:23.532  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:15:23.533  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:15:23.533  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:15:23.533  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:15:23.534  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:15:23.536  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:15:23.540  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:15:23.541  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:15:23.545  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:15:23.547  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:15:23.717  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:15:23.815  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:15:23.871  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:15:24.024  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:15:24.094  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:15:25.277  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:15:25.298 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:15:25.300 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:15:25.302 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:15:25.303 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:15:25.305 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:15:25.313 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:15:25.318 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:15:25.320 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:15:25.323 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:15:25.325 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:15:25.339 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:15:25.342 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:15:25.344 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:15:25.346 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:15:25.354  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:15:26.336  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:15:26.379  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: a3df26d4-37c8-46ab-9fca-1b81d889119b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:15:26.696 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:15:26.902 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:15:27.012  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@22a7ff5d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a362dc7, org.springframework.security.web.context.SecurityContextHolderFilter@4a842e8a, org.springframework.security.web.header.HeaderWriterFilter@3fd64d6b, org.springframework.web.filter.CorsFilter@564b86b, org.springframework.security.web.authentication.logout.LogoutFilter@61427cd3, de.telran.urlshortener.security.JwtFilter@2c99419f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@458044df, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@f4cfc61, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@545ffe1, org.springframework.security.web.session.SessionManagementFilter@45ec9b22, org.springframework.security.web.access.ExceptionTranslationFilter@3fc261b7, org.springframework.security.web.access.intercept.AuthorizationFilter@6dd65b79]
2024-09-05 18:15:27.320 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:15:27.372 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:15:27.613  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:15:27.727  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.301 seconds (process running for 13.569)
2024-09-05 18:15:27.959 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:15:28.053 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:15:28.076 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:15:28.086 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:15:28.088 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:15:28.092 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:15:28.094 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:15:28.097 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:15:28.101 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:15:28.108 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:15:28.255 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:15:28.272 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:15:28.278 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:15:28.389 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:15:28.391 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:15:28.504 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 18:15:28.537 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 18:15:19 CEST 2024
2024-09-05 18:15:28.546  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:15:28.547 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:15:28.549 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:15:28.550 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:15:28.552 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:15:28.554 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:15:28.558  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:15:28.561  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:16:53.875  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:16:54.045  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:16:56.213  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:16:56.266  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 353263 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:16:56.271  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:16:56.322 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 18:16:57.805  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:16:57.924  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 105 ms. Found 4 JPA repository interfaces.
2024-09-05 18:16:58.900  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:16:59.278  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:16:59.281  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:16:59.447  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:17:00.430  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:17:00.771  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:17:00.991  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:17:00.994  INFO --- [           main] l.command                                : Using deploymentId: 5553020993
2024-09-05 18:17:00.998  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:17:01.119  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:17:01.138  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:17:01.140  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 19ms
2024-09-05 18:17:01.154  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:17:01.162  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:17:01.163  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 18:17:01.170  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:17:01.177  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:17:01.188  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:17:01.189  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 17ms
2024-09-05 18:17:01.196  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:17:01.206  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:17:01.211  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:17:01.212  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 14ms
2024-09-05 18:17:01.219  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:17:01.223  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:17:01.228  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:17:01.232  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:17:01.238  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:17:01.239  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-09-05 18:17:01.244  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:17:01.274  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:17:01.294  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:17:01.295  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 51ms
2024-09-05 18:17:01.301  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:17:01.324  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:17:01.325  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 23ms
2024-09-05 18:17:01.339  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:17:01.340  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:17:01.340  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:17:01.341  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:17:01.341  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:17:01.342  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:17:01.344  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:17:01.349  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:17:01.350  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:17:01.353  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:17:01.355  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:17:01.564  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:17:01.678  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:17:01.769  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:17:01.976  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:17:02.056  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:17:03.223  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:17:03.244 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:17:03.247 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:17:03.249 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:17:03.250 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:17:03.251 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:17:03.260 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:17:03.265 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:17:03.269 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:17:03.272 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:17:03.274 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:17:03.278 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:17:03.280 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:17:03.283 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:17:03.286 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:17:03.297  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:17:04.230  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:17:04.273  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 54ed490b-e219-4fa5-baea-2759d004d7df

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:17:04.542 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:17:04.753 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:17:04.856  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@61427cd3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ca72afb, org.springframework.security.web.context.SecurityContextHolderFilter@2f9a7d6f, org.springframework.security.web.header.HeaderWriterFilter@45dc4d1a, org.springframework.web.filter.CorsFilter@3e4dabcb, org.springframework.security.web.authentication.logout.LogoutFilter@7f6e9e03, de.telran.urlshortener.security.JwtFilter@51a42767, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@12039ae0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1fb320de, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2b24fcba, org.springframework.security.web.session.SessionManagementFilter@3fc261b7, org.springframework.security.web.access.ExceptionTranslationFilter@44cd3ea9, org.springframework.security.web.access.intercept.AuthorizationFilter@4f1fb8fc]
2024-09-05 18:17:05.137 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:17:05.183 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:17:05.378  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:17:05.471  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.713 seconds (process running for 13.735)
2024-09-05 18:17:05.689 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:17:05.774 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:17:05.796 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:17:05.807 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:17:05.810 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:17:05.813 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:17:05.816 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:17:05.819 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:17:05.823 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:17:05.830 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:17:05.999 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:17:06.013 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:17:06.019 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:17:06.158 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:17:06.160 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:17:06.288 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 18:17:06.327 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 18:16:56 CEST 2024
2024-09-05 18:17:06.338  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:17:06.340 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:17:06.342 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:17:06.344 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:17:06.347 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:17:06.348 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:17:06.353  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:17:06.356  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:17:38.353  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:17:38.513  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:17:40.644  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:17:40.676  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 353727 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:17:40.681  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:17:40.726 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 18:17:42.302  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:17:42.428  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 110 ms. Found 4 JPA repository interfaces.
2024-09-05 18:17:43.422  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:17:43.761  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:17:43.764  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:17:43.894  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:17:44.847  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:17:45.087  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:17:45.292  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:17:45.295  INFO --- [           main] l.command                                : Using deploymentId: 5553065294
2024-09-05 18:17:45.311  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:17:45.397  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:17:45.417  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:17:45.419  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 19ms
2024-09-05 18:17:45.431  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:17:45.439  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:17:45.440  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 18:17:45.448  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:17:45.454  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:17:45.464  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:17:45.465  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 17ms
2024-09-05 18:17:45.473  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:17:45.481  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:17:45.485  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:17:45.486  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-05 18:17:45.493  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:17:45.497  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:17:45.501  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:17:45.508  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:17:45.516  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:17:45.517  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 24ms
2024-09-05 18:17:45.523  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:17:45.543  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:17:45.557  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:17:45.558  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 33ms
2024-09-05 18:17:45.563  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:17:45.582  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:17:45.583  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 19ms
2024-09-05 18:17:45.598  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:17:45.599  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:17:45.599  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:17:45.600  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:17:45.600  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:17:45.601  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:17:45.603  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:17:45.608  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:17:45.609  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:17:45.612  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:17:45.614  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:17:45.773  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:17:45.857  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:17:45.909  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:17:46.068  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:17:46.128  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:17:47.251  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:17:47.272 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:17:47.274 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:17:47.276 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:17:47.277 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:17:47.279 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:17:47.287 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:17:47.291 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:17:47.294 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:17:47.296 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:17:47.298 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:17:47.301 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:17:47.304 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:17:47.306 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:17:47.309 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:17:47.316  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:17:48.263  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:17:48.299  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 9b1567a4-6b61-4ed3-8529-fa1f4551b824

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:17:48.568 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:17:48.798 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:17:48.855  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2b3247f8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4d56b7f1, org.springframework.security.web.context.SecurityContextHolderFilter@6eda3ade, org.springframework.security.web.header.HeaderWriterFilter@4b6cb083, org.springframework.web.filter.CorsFilter@6dd65b79, org.springframework.security.web.authentication.logout.LogoutFilter@716cb4c0, de.telran.urlshortener.security.JwtFilter@4528a871, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@554f6e30, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7537f638, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b136640, org.springframework.security.web.session.SessionManagementFilter@23110196, org.springframework.security.web.access.ExceptionTranslationFilter@2495a351, org.springframework.security.web.access.intercept.AuthorizationFilter@7fcbed77]
2024-09-05 18:17:49.147 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:17:49.195 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:17:49.408  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:17:49.525  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.308 seconds (process running for 13.369)
2024-09-05 18:17:49.744 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:17:49.838 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:17:49.860 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:17:49.871 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:17:49.873 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:17:49.877 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:17:49.879 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:17:49.883 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:17:49.886 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:17:49.894 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:17:50.057 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:17:50.071 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:17:50.077 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:17:50.217 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:17:50.220 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:17:50.339 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 18:17:50.385 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 18:17:40 CEST 2024
2024-09-05 18:17:50.394  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:17:50.395 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:17:50.397 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:17:50.398 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:17:50.400 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:17:50.401 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:17:50.406  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:17:50.409  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:29:28.740  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:29:28.908  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:29:31.438  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:29:31.505  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 359744 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:29:31.512  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:29:31.574 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 18:29:33.235  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:29:33.351  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 102 ms. Found 4 JPA repository interfaces.
2024-09-05 18:29:34.351  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:29:34.681  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:29:34.683  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:29:34.793  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:29:35.689  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:29:36.051  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:29:36.253  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:29:36.256  INFO --- [           main] l.command                                : Using deploymentId: 5553776255
2024-09-05 18:29:36.261  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:29:36.376  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:29:36.396  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:29:36.397  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 19ms
2024-09-05 18:29:36.412  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:29:36.420  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:29:36.421  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-05 18:29:36.430  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:29:36.437  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:29:36.449  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:29:36.450  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 18ms
2024-09-05 18:29:36.458  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:29:36.466  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:29:36.471  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:29:36.471  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 13ms
2024-09-05 18:29:36.479  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:29:36.484  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:29:36.489  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:29:36.494  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:29:36.501  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:29:36.502  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 22ms
2024-09-05 18:29:36.508  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:29:36.527  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:29:36.541  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:29:36.542  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 32ms
2024-09-05 18:29:36.547  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:29:36.564  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:29:36.565  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 17ms
2024-09-05 18:29:36.576  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:29:36.577  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:29:36.577  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:29:36.577  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:29:36.578  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:29:36.578  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:29:36.580  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:29:36.583  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:29:36.584  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:29:36.587  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:29:36.589  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:29:36.736  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:29:36.827  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:29:36.877  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:29:37.024  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:29:37.080  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:29:38.202  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:29:38.221 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:29:38.223 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:29:38.225 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:29:38.226 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:29:38.227 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:29:38.234 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:29:38.238 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:29:38.241 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:29:38.243 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:29:38.245 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:29:38.249 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:29:38.251 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:29:38.254 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:29:38.256 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:29:38.262  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:29:39.173  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:29:39.206  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 19e51f96-bc6e-42d1-ae1e-9d5186413c7e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:29:39.512 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:29:39.718 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:29:39.772  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2b3247f8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4d56b7f1, org.springframework.security.web.context.SecurityContextHolderFilter@6eda3ade, org.springframework.security.web.header.HeaderWriterFilter@4b6cb083, org.springframework.web.filter.CorsFilter@6dd65b79, org.springframework.security.web.authentication.logout.LogoutFilter@716cb4c0, de.telran.urlshortener.security.JwtFilter@5b6a9ef6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@554f6e30, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7537f638, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b136640, org.springframework.security.web.session.SessionManagementFilter@23110196, org.springframework.security.web.access.ExceptionTranslationFilter@2495a351, org.springframework.security.web.access.intercept.AuthorizationFilter@7fcbed77]
2024-09-05 18:29:40.064 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:29:40.108 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:29:40.294  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:29:40.395  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.458 seconds (process running for 13.794)
2024-09-05 18:29:40.593 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:29:40.680 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:29:40.703 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:29:40.715 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:29:40.717 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:29:40.721 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:29:40.723 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:29:40.727 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:29:40.730 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:29:40.738 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:29:40.903 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:29:40.917 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:29:40.924 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:29:41.035 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:29:41.037 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:29:41.111 ERROR --- [           main] d.t.u.s.RoleService                      : Role not found with name: ADMIN
2024-09-05 18:29:41.159 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 18:29:41.182 ERROR --- [           main] d.t.u.s.RoleService                      : Role not found with name: ADMIN
2024-09-05 18:29:41.192 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 18:29:31 CEST 2024
2024-09-05 18:29:41.200  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:29:41.201 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:29:41.203 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:29:41.204 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:29:41.206 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:29:41.207 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:29:41.210  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:29:41.213  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:37:24.605  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:37:24.765  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:37:26.999  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:37:27.017  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 363841 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:37:27.023  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:37:27.067 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 18:37:28.526  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:37:28.643  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 103 ms. Found 4 JPA repository interfaces.
2024-09-05 18:37:29.578  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:37:29.876  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:37:29.879  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:37:29.999  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:37:30.795  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:37:31.110  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:37:31.341  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:37:31.348  INFO --- [           main] l.command                                : Using deploymentId: 5554251347
2024-09-05 18:37:31.352  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:37:31.443  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:37:31.460  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:37:31.462  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 16ms
2024-09-05 18:37:31.474  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:37:31.482  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:37:31.483  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 18:37:31.490  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:37:31.495  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:37:31.505  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:37:31.506  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-05 18:37:31.512  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:37:31.520  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:37:31.523  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:37:31.524  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-05 18:37:31.530  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:37:31.534  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:37:31.537  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:37:31.542  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:37:31.548  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:37:31.549  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 17ms
2024-09-05 18:37:31.554  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:37:31.572  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:37:31.584  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:37:31.585  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 31ms
2024-09-05 18:37:31.591  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:37:31.608  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:37:31.608  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 16ms
2024-09-05 18:37:31.623  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:37:31.624  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:37:31.625  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:37:31.626  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:37:31.626  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:37:31.627  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:37:31.629  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:37:31.634  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:37:31.634  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:37:31.639  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:37:31.641  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:37:31.823  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:37:31.908  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:37:31.960  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:37:32.104  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:37:32.159  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:37:33.329  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:37:33.364 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:37:33.366 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:37:33.368 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:37:33.369 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:37:33.370 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:37:33.378 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:37:33.382 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:37:33.385 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:37:33.387 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:37:33.389 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:37:33.392 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:37:33.394 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:37:33.396 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:37:33.398 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:37:33.405  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:37:34.351  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:37:34.388  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 85362682-f33d-4e3b-a5b5-e673d97f979d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:37:34.656 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:37:34.899 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:37:34.946  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@61427cd3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ca72afb, org.springframework.security.web.context.SecurityContextHolderFilter@2f9a7d6f, org.springframework.security.web.header.HeaderWriterFilter@45dc4d1a, org.springframework.web.filter.CorsFilter@3e4dabcb, org.springframework.security.web.authentication.logout.LogoutFilter@7f6e9e03, de.telran.urlshortener.security.JwtFilter@51a42767, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@12039ae0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1fb320de, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2b24fcba, org.springframework.security.web.session.SessionManagementFilter@3fc261b7, org.springframework.security.web.access.ExceptionTranslationFilter@44cd3ea9, org.springframework.security.web.access.intercept.AuthorizationFilter@4f1fb8fc]
2024-09-05 18:37:35.232 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:37:35.280 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:37:35.503  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:37:35.598  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.082 seconds (process running for 13.131)
2024-09-05 18:37:35.832 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:37:35.923 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:37:35.948 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:37:35.963 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:37:35.965 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:37:35.970 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:37:35.972 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:37:35.976 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:37:35.980 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:37:35.989 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:37:36.150 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:37:36.165 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:37:36.170 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:37:36.282 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:37:36.284 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:37:36.380 ERROR --- [           main] d.t.u.s.RoleService                      : Role not found with name: ADMIN
2024-09-05 18:37:36.437 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 18:37:36.465 ERROR --- [           main] d.t.u.s.RoleService                      : Role not found with name: ADMIN
2024-09-05 18:37:36.478 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 18:37:27 CEST 2024
2024-09-05 18:37:36.490  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:37:36.491 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:37:36.493 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:37:36.495 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:37:36.497 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:37:36.498 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:37:36.503  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:37:36.506  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:42:38.993  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:42:39.151  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:42:41.433  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:42:41.497  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 366447 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:42:41.504  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:42:41.555 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 18:42:43.137  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:42:43.270  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 116 ms. Found 4 JPA repository interfaces.
2024-09-05 18:42:44.351  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:42:44.650  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:42:44.652  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:42:44.756  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:42:45.621  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:42:46.012  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:42:46.249  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:42:46.251  INFO --- [           main] l.command                                : Using deploymentId: 5554566251
2024-09-05 18:42:46.254  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:42:46.314  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:42:46.331  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:42:46.333  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-05 18:42:46.344  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:42:46.351  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:42:46.352  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-05 18:42:46.359  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:42:46.364  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:42:46.374  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:42:46.375  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-05 18:42:46.382  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:42:46.389  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:42:46.393  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:42:46.394  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-05 18:42:46.400  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:42:46.404  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:42:46.408  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:42:46.412  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:42:46.418  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:42:46.419  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 18ms
2024-09-05 18:42:46.423  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:42:46.438  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:42:46.448  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:42:46.449  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 26ms
2024-09-05 18:42:46.454  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:42:46.471  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:42:46.473  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 17ms
2024-09-05 18:42:46.487  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:42:46.488  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:42:46.488  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:42:46.489  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:42:46.489  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:42:46.490  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:42:46.492  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:42:46.496  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:42:46.497  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:42:46.501  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:42:46.503  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:42:46.641  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:42:46.740  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:42:46.790  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:42:46.919  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:42:46.987  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:42:48.101  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:42:48.122 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:42:48.124 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:42:48.127 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:42:48.128 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:42:48.130 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:42:48.142 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:42:48.148 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:42:48.151 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:42:48.155 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:42:48.158 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:42:48.161 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:42:48.164 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:42:48.167 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:42:48.169 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:42:48.178  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:42:49.127  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:42:49.161  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: e4665f6b-6857-47b7-a656-2060f9b9287b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:42:49.444 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:42:49.671 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:42:49.720  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6c30efc4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@10847aeb, org.springframework.security.web.context.SecurityContextHolderFilter@2b7e739, org.springframework.security.web.header.HeaderWriterFilter@6b909973, org.springframework.web.filter.CorsFilter@cea6297, org.springframework.security.web.authentication.logout.LogoutFilter@564b86b, de.telran.urlshortener.security.JwtFilter@6cc91654, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7f6e9e03, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@20f1c8ed, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@51db8b10, org.springframework.security.web.session.SessionManagementFilter@4704b66a, org.springframework.security.web.access.ExceptionTranslationFilter@7537f638, org.springframework.security.web.access.intercept.AuthorizationFilter@ab2d814]
2024-09-05 18:42:50.011 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:42:50.059 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:42:50.245  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:42:50.348  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.402 seconds (process running for 13.501)
2024-09-05 18:42:50.561 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:42:50.661 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:42:50.684 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:42:50.697 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:42:50.699 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:42:50.703 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:42:50.705 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:42:50.709 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:42:50.713 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:42:50.720 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:42:50.899 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:42:50.943 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:42:50.950 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:42:51.088 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:42:51.090 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:42:51.190 ERROR --- [           main] d.t.u.s.RoleService                      : Role not found with name: ADMIN
2024-09-05 18:42:51.240 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 18:42:51.264 ERROR --- [           main] d.t.u.s.RoleService                      : Role not found with name: ADMIN
2024-09-05 18:42:51.276 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 18:42:41 CEST 2024
2024-09-05 18:42:51.284  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:42:51.285 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:42:51.288 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:42:51.291 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:42:51.293 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:42:51.294 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:42:51.298  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:42:51.301  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:48:21.854  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:48:22.013  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:48:24.242  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:48:24.284  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 369407 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:48:24.290  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:48:24.336 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 18:48:25.867  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:48:25.970  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 91 ms. Found 4 JPA repository interfaces.
2024-09-05 18:48:26.860  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:48:27.200  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:48:27.203  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:48:27.326  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:48:28.178  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:48:34.055  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:48:34.258  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:48:34.260  INFO --- [           main] l.command                                : Using deploymentId: 5554914259
2024-09-05 18:48:34.263  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:48:34.342  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:48:34.361  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:48:34.362  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 18ms
2024-09-05 18:48:34.376  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:48:34.386  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:48:34.387  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 10ms
2024-09-05 18:48:34.395  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:48:34.402  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:48:34.417  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:48:34.418  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 22ms
2024-09-05 18:48:34.428  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:48:34.438  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:48:34.444  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:48:34.445  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 16ms
2024-09-05 18:48:34.453  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:48:34.458  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:48:34.463  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:48:34.468  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:48:34.476  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:48:34.478  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 23ms
2024-09-05 18:48:34.484  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:48:34.506  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:48:34.518  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:48:34.519  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 34ms
2024-09-05 18:48:34.527  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:48:34.550  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:48:34.551  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 22ms
2024-09-05 18:48:34.571  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:48:34.572  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:48:34.573  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:48:34.573  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:48:34.574  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:48:34.574  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:48:34.576  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:48:34.580  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:48:34.581  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:48:34.585  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:48:34.587  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:48:34.764  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:48:34.864  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:48:34.928  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:48:35.112  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:48:35.174  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:48:36.279  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:48:36.300 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:48:36.302 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:48:36.303 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:48:36.305 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:48:36.306 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:48:36.314 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:48:36.318 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:48:36.321 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:48:36.323 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:48:36.325 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:48:36.328 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:48:36.330 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:48:36.332 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:48:36.334 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:48:36.342  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:48:37.347  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:48:37.387  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 83a1d5a6-833d-443b-a106-3bf4fd13cdcb

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:48:37.724 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:48:37.947 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:48:38.016  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@22a7ff5d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a362dc7, org.springframework.security.web.context.SecurityContextHolderFilter@4a842e8a, org.springframework.security.web.header.HeaderWriterFilter@3fd64d6b, org.springframework.web.filter.CorsFilter@564b86b, org.springframework.security.web.authentication.logout.LogoutFilter@61427cd3, de.telran.urlshortener.security.JwtFilter@2c99419f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@458044df, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@f4cfc61, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@545ffe1, org.springframework.security.web.session.SessionManagementFilter@45ec9b22, org.springframework.security.web.access.ExceptionTranslationFilter@3fc261b7, org.springframework.security.web.access.intercept.AuthorizationFilter@6dd65b79]
2024-09-05 18:48:38.366 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:48:38.413 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:48:38.633  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:48:38.743  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 14.94 seconds (process running for 18.999)
2024-09-05 18:48:38.958 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:48:39.045 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:48:39.067 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:48:39.078 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:48:39.081 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:48:39.085 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:48:39.087 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:48:39.090 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:48:39.094 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:48:39.101 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:48:39.252 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:48:39.270 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:48:39.277 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:48:39.387 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:48:39.389 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:48:39.458 ERROR --- [           main] d.t.u.s.RoleService                      : Role not found with name: ADMIN
2024-09-05 18:48:39.506 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 18:48:39.528 ERROR --- [           main] d.t.u.s.RoleService                      : Role not found with name: ADMIN
2024-09-05 18:48:39.538 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 18:48:24 CEST 2024
2024-09-05 18:48:39.546  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:48:39.547 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:48:39.549 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:48:39.550 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:48:39.552 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:48:39.553 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:48:39.557  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:48:39.560  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:50:25.264  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:50:25.494  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-05 18:50:26.132  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:50:26.194  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 370437 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:50:26.199  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "testdb"
2024-09-05 18:50:26.883  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:50:26.990  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 95 ms. Found 4 JPA repository interfaces.
2024-09-05 18:50:27.088  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-05 18:50:27.383  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:0c72ecba-d1f5-4537-ba3d-77461b49ee3d;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-05 18:50:28.014  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:50:28.799  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:50:29.128  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:50:29.322  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:50:29.324  INFO --- [           main] l.command                                : Using deploymentId: 5555029324
2024-09-05 18:50:29.327  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:50:29.376  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:50:29.392  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:50:29.393  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 15ms
2024-09-05 18:50:29.406  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:50:29.412  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:50:29.413  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-05 18:50:29.421  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:50:29.428  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:50:29.438  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:50:29.439  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 17ms
2024-09-05 18:50:29.447  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:50:29.454  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:50:29.459  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:50:29.459  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-05 18:50:29.466  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:50:29.469  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:50:29.473  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:50:29.477  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:50:29.483  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:50:29.484  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 17ms
2024-09-05 18:50:29.487  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:50:29.500  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:50:29.509  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:50:29.510  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 22ms
2024-09-05 18:50:29.514  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:50:29.528  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:50:29.529  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 14ms
2024-09-05 18:50:29.540  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:50:29.540  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:50:29.541  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:50:29.541  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:50:29.542  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:50:29.542  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:50:29.544  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:50:29.548  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:50:29.548  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:50:29.551  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:50:29.553  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:50:29.727  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:50:29.813  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:50:29.875  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:50:30.220  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:50:30.284  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:50:31.664  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:50:31.669  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:50:32.430  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 6.812 seconds (process running for 9.413)
2024-09-05 18:50:33.344 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:50:33.473 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:50:33.498 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:50:33.526  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:50:33.544  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:50:34.281  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 370437 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:50:34.283  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:50:34.291 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@51c660c8
2024-09-05 18:50:35.358  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:50:35.393  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 33 ms. Found 4 JPA repository interfaces.
2024-09-05 18:50:35.944  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:50:35.963  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn6: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:50:35.966  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:50:35.983  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:50:36.207  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:50:36.221  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:50:36.296  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:50:36.298  INFO --- [           main] l.command                                : Using deploymentId: 5555036297
2024-09-05 18:50:36.301  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:50:36.338  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:50:36.346  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:50:36.347  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 9ms
2024-09-05 18:50:36.358  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:50:36.367  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:50:36.368  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 18:50:36.377  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:50:36.385  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:50:36.390  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:50:36.391  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-05 18:50:36.401  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:50:36.412  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:50:36.418  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:50:36.419  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 16ms
2024-09-05 18:50:36.427  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:50:36.432  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:50:36.436  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:50:36.441  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:50:36.446  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:50:36.447  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 19ms
2024-09-05 18:50:36.453  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:50:36.466  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:50:36.479  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:50:36.480  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 27ms
2024-09-05 18:50:36.485  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:50:36.504  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:50:36.505  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 18ms
2024-09-05 18:50:36.509  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:50:36.510  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:50:36.511  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:50:36.512  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:50:36.512  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:50:36.513  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:50:36.514  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:50:36.515  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:50:36.516  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:50:36.518  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:50:36.519  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:50:36.614  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:50:36.619  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:50:36.626  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:50:36.629  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:50:36.878  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:50:36.899 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:50:36.901 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:50:36.903 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:50:36.904 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:50:36.906 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:50:36.916 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:50:36.921 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:50:36.923 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:50:36.926 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:50:36.928 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:50:36.931 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:50:36.933 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:50:36.935 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:50:36.937 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:50:36.943  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:50:37.532  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:50:37.574  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 9665b92d-134a-472b-8d84-a8e4358e34ae

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:50:37.890 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:50:38.077 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:50:38.139  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@74e8ef59, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2e1a8c1a, org.springframework.security.web.context.SecurityContextHolderFilter@8a37c6a, org.springframework.security.web.header.HeaderWriterFilter@63be03c8, org.springframework.web.filter.CorsFilter@3fc736c4, org.springframework.security.web.authentication.logout.LogoutFilter@2fe8ec31, de.telran.urlshortener.security.JwtFilter@418f5f63, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@66a75eab, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3f114f13, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@770d65c2, org.springframework.security.web.session.SessionManagementFilter@4917a741, org.springframework.security.web.access.ExceptionTranslationFilter@b78dcdf, org.springframework.security.web.access.intercept.AuthorizationFilter@9d313fe]
2024-09-05 18:50:38.519 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:50:38.592 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:50:38.805  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:50:38.903  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 4.777 seconds (process running for 15.886)
2024-09-05 18:50:38.961 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:50:38.975 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:50:38.982 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:50:38.992 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:50:38.997 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:50:39.001 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:50:39.003 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:50:39.006 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:50:39.010 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:50:39.016 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:50:39.156 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:50:39.165 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:50:39.171 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:50:39.298 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:50:39.300 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:50:39.370 ERROR --- [           main] d.t.u.s.RoleService                      : Role not found with name: ADMIN
2024-09-05 18:50:39.395 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 18:50:39.421 ERROR --- [           main] d.t.u.s.RoleService                      : Role not found with name: ADMIN
2024-09-05 18:50:39.437  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:50:39.450  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 18:50:39.515  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 370437 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:50:39.516  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "testdb"
2024-09-05 18:50:39.519 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@13ea4f97
2024-09-05 18:50:39.956  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:50:39.972  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 4 JPA repository interfaces.
2024-09-05 18:50:40.162  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-2 - Starting...
2024-09-05 18:50:40.167  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-2 - Added connection conn16: url=jdbc:h2:mem:311a9043-742a-4447-a544-82285acb074d user=SA
2024-09-05 18:50:40.167  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-2 - Start completed.
2024-09-05 18:50:40.170  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:50:40.278  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:50:40.282  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:50:40.314  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:50:40.314  INFO --- [           main] l.command                                : Using deploymentId: 5555040314
2024-09-05 18:50:40.316  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:50:40.331  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:50:40.335  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:50:40.336  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 5ms
2024-09-05 18:50:40.341  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:50:40.347  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:50:40.347  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 5ms
2024-09-05 18:50:40.352  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:50:40.356  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:50:40.360  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:50:40.361  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 8ms
2024-09-05 18:50:40.371  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:50:40.376  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:50:40.379  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:50:40.380  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-05 18:50:40.385  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:50:40.388  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:50:40.390  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:50:40.394  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:50:40.397  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:50:40.397  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 11ms
2024-09-05 18:50:40.401  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:50:40.408  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:50:40.415  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:50:40.416  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 15ms
2024-09-05 18:50:40.421  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:50:40.434  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:50:40.435  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 13ms
2024-09-05 18:50:40.439  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:50:40.440  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:50:40.440  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:50:40.441  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:50:40.442  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:50:40.443  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:50:40.443  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:50:40.445  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:50:40.446  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:50:40.448  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:50:40.449  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:50:40.498  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:50:40.501  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:50:40.506  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:50:40.508  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:50:40.655  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:50:40.655  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:50:40.916  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:50:40.934  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: ef256e0d-e9f9-4715-a1cf-80c95a97f7d7

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:50:40.999 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:50:41.107 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:50:41.173  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@234a21e9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4236d55, org.springframework.security.web.context.SecurityContextHolderFilter@54978e18, org.springframework.security.web.header.HeaderWriterFilter@2908fc20, org.springframework.web.filter.CorsFilter@c7eb2a9, org.springframework.security.web.authentication.logout.LogoutFilter@473c1e53, de.telran.urlshortener.security.JwtFilter@5d16f27b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1f6881af, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@71ef979e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@783a76d8, org.springframework.security.web.session.SessionManagementFilter@1189f179, org.springframework.security.web.access.ExceptionTranslationFilter@b381194, org.springframework.security.web.access.intercept.AuthorizationFilter@115cbd9b]
2024-09-05 18:50:41.284 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:50:41.296 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:50:41.390  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:311a9043-742a-4447-a544-82285acb074d'
2024-09-05 18:50:41.451  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 1.992 seconds (process running for 18.434)
2024-09-05 18:50:41.456 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:50:41.469 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:50:41.473 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:50:41.478 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:50:41.481 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:50:41.486 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:50:41.488 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:50:41.493 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:50:41.497 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:50:41.501 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:50:41.630 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:50:41.633 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:50:41.636 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:50:41.755 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:50:41.757 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:50:41.796  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:50:41.800 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@51c660c8, started on Thu Sep 05 18:50:34 CEST 2024
2024-09-05 18:50:41.808  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:50:41.809 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:50:41.810 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:50:41.812 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:50:41.813 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:50:41.815 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:50:41.817  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:50:41.821  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 18:50:41.822 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@13ea4f97, started on Thu Sep 05 18:50:39 CEST 2024
2024-09-05 18:50:41.828  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:50:41.829  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-2 - Shutdown initiated...
2024-09-05 18:50:41.830  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-2 - Shutdown completed.
2024-09-05 18:50:57.487  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 18:50:57.640  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 18:50:59.874  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 18:50:59.925  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 370764 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 18:50:59.932  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 18:50:59.991 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 18:51:01.562  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 18:51:01.674  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 96 ms. Found 4 JPA repository interfaces.
2024-09-05 18:51:02.552  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 18:51:02.848  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 18:51:02.851  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 18:51:02.970  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 18:51:03.795  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 18:51:04.143  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:51:04.394  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 18:51:04.396  INFO --- [           main] l.command                                : Using deploymentId: 5555064395
2024-09-05 18:51:04.399  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 18:51:04.463  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 18:51:04.484  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 18:51:04.485  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 20ms
2024-09-05 18:51:04.499  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 18:51:04.508  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 18:51:04.509  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-05 18:51:04.518  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 18:51:04.526  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 18:51:04.538  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 18:51:04.539  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 20ms
2024-09-05 18:51:04.549  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 18:51:04.558  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 18:51:04.563  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 18:51:04.564  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 14ms
2024-09-05 18:51:04.570  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 18:51:04.575  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 18:51:04.579  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 18:51:04.583  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 18:51:04.590  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 18:51:04.591  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-09-05 18:51:04.597  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 18:51:04.619  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 18:51:04.632  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 18:51:04.633  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 36ms
2024-09-05 18:51:04.639  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 18:51:04.659  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 18:51:04.660  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 20ms
2024-09-05 18:51:04.675  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 18:51:04.675  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 18:51:04.676  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 18:51:04.677  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 18:51:04.677  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 18:51:04.679  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 18:51:04.681  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 18:51:04.686  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 18:51:04.686  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 18:51:04.690  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 18:51:04.692  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 18:51:04.841  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 18:51:04.942  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 18:51:04.995  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 18:51:05.157  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 18:51:05.224  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 18:51:06.455  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 18:51:06.476 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:51:06.479 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:51:06.481 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:51:06.482 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:51:06.484 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:51:06.493 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:51:06.497 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:51:06.500 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 18:51:06.502 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 18:51:06.505 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 18:51:06.508 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 18:51:06.511 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 18:51:06.513 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 18:51:06.515 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 18:51:06.523  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:51:07.485  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 18:51:07.550  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: dc11e520-b8b1-40c6-b7af-e0427a7a0333

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 18:51:07.940 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 18:51:08.214 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 18:51:08.292  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1b136640, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@22a7ff5d, org.springframework.security.web.context.SecurityContextHolderFilter@7537f638, org.springframework.security.web.header.HeaderWriterFilter@11101f62, org.springframework.web.filter.CorsFilter@5a362dc7, org.springframework.security.web.authentication.logout.LogoutFilter@759c0c14, de.telran.urlshortener.security.JwtFilter@4cae7d5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6b909973, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@458044df, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@564b86b, org.springframework.security.web.session.SessionManagementFilter@6eda3ade, org.springframework.security.web.access.ExceptionTranslationFilter@3644d305, org.springframework.security.web.access.intercept.AuthorizationFilter@4d56b7f1]
2024-09-05 18:51:08.687 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 18:51:08.739 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 18:51:08.979  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 18:51:09.077  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.674 seconds (process running for 13.704)
2024-09-05 18:51:09.266 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:51:09.346 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:51:09.367 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:51:09.377 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:51:09.379 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:51:09.383 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:51:09.385 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 18:51:09.388 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:51:09.391 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 18:51:09.398 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:51:09.547 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:51:09.565 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:51:09.572 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 18:51:09.687 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 18:51:09.689 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 18:51:09.765 ERROR --- [           main] d.t.u.s.RoleService                      : Role not found with name: ADMIN
2024-09-05 18:51:09.809 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 18:51:09.834 ERROR --- [           main] d.t.u.s.RoleService                      : Role not found with name: ADMIN
2024-09-05 18:51:09.846 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 18:50:59 CEST 2024
2024-09-05 18:51:09.857  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 18:51:09.858 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 18:51:09.861 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 18:51:09.863 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 18:51:09.865 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 18:51:09.866 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 18:51:09.871  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 18:51:09.876  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 19:00:05.976  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 19:00:06.130  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 19:00:08.543  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 19:00:08.598  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 375497 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 19:00:08.604  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 19:00:08.655 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 19:00:10.338  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 19:00:10.446  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 95 ms. Found 4 JPA repository interfaces.
2024-09-05 19:00:11.377  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 19:00:11.642  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 19:00:11.644  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 19:00:11.768  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 19:00:12.558  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 19:00:12.922  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:00:13.145  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 19:00:13.147  INFO --- [           main] l.command                                : Using deploymentId: 5555613146
2024-09-05 19:00:13.151  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:00:13.217  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 19:00:13.236  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 19:00:13.238  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 19ms
2024-09-05 19:00:13.252  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 19:00:13.260  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 19:00:13.261  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-05 19:00:13.270  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 19:00:13.278  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 19:00:13.290  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 19:00:13.291  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 20ms
2024-09-05 19:00:13.300  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 19:00:13.309  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 19:00:13.315  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 19:00:13.316  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 15ms
2024-09-05 19:00:13.323  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 19:00:13.328  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 19:00:13.332  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 19:00:13.335  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 19:00:13.342  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 19:00:13.342  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 18ms
2024-09-05 19:00:13.346  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 19:00:13.363  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 19:00:13.377  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 19:00:13.378  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 32ms
2024-09-05 19:00:13.383  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 19:00:13.400  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 19:00:13.400  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 17ms
2024-09-05 19:00:13.415  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 19:00:13.415  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 19:00:13.416  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 19:00:13.416  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 19:00:13.416  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 19:00:13.417  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 19:00:13.419  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 19:00:13.425  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 19:00:13.426  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 19:00:13.429  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 19:00:13.431  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 19:00:13.572  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 19:00:13.666  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 19:00:13.710  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 19:00:13.847  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 19:00:13.909  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 19:00:15.065  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 19:00:15.087 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 19:00:15.090 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 19:00:15.092 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 19:00:15.093 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 19:00:15.095 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 19:00:15.105 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 19:00:15.110 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 19:00:15.112 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 19:00:15.115 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 19:00:15.118 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 19:00:15.121 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 19:00:15.125 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 19:00:15.126 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 19:00:15.128 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 19:00:15.135  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:00:16.314  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 19:00:16.357  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 93fa0e32-4901-4ae5-98d4-2874ea555dd7

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 19:00:16.671 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 19:00:16.885 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 19:00:16.940  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@20961f8b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@23faae85, org.springframework.security.web.context.SecurityContextHolderFilter@3b8ec458, org.springframework.security.web.header.HeaderWriterFilter@6eda3ade, org.springframework.web.filter.CorsFilter@48f08e9, org.springframework.security.web.authentication.logout.LogoutFilter@4d56b7f1, de.telran.urlshortener.security.JwtFilter@1508bc71, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4704b66a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@70edffdb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@ab2d814, org.springframework.security.web.session.SessionManagementFilter@7bd6a7f9, org.springframework.security.web.access.ExceptionTranslationFilter@328446e1, org.springframework.security.web.access.intercept.AuthorizationFilter@815e8e3]
2024-09-05 19:00:17.327 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 19:00:17.382 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 19:00:17.616  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 19:00:17.732  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.729 seconds (process running for 13.941)
2024-09-05 19:00:17.926 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:00:18.013 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 19:00:18.037 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:00:18.050 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:00:18.052 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 19:00:18.057 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:00:18.059 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 19:00:18.063 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:00:18.067 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:00:18.075 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 19:00:18.227 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 19:00:18.243 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 19:00:18.249 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 19:00:18.361 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 19:00:18.363 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 19:00:18.488 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 19:00:18.537 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 19:00:08 CEST 2024
2024-09-05 19:00:18.549  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:00:18.551 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 19:00:18.553 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 19:00:18.555 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 19:00:18.557 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 19:00:18.560 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 19:00:18.565  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 19:00:18.569  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 19:07:11.688  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 19:07:11.904  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 19:07:14.588  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 19:07:14.652  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 379082 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 19:07:14.660  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 19:07:14.719 DEBUG --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@56846330
2024-09-05 19:07:16.307  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 19:07:16.419  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 95 ms. Found 4 JPA repository interfaces.
2024-09-05 19:07:17.348  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 19:07:17.664  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 19:07:17.667  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 19:07:17.772  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 19:07:18.639  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 19:07:18.824  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:07:19.048  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 19:07:19.050  INFO --- [           main] l.command                                : Using deploymentId: 5556039049
2024-09-05 19:07:19.054  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:07:19.158  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 19:07:19.175  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 19:07:19.176  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 16ms
2024-09-05 19:07:19.188  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 19:07:19.197  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 19:07:19.198  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 19:07:19.206  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 19:07:19.213  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 19:07:19.224  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 19:07:19.225  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 18ms
2024-09-05 19:07:19.232  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 19:07:19.241  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 19:07:19.245  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 19:07:19.246  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-05 19:07:19.252  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 19:07:19.255  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 19:07:19.259  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 19:07:19.265  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 19:07:19.275  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 19:07:19.276  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 24ms
2024-09-05 19:07:19.283  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 19:07:19.309  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 19:07:19.324  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 19:07:19.325  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 42ms
2024-09-05 19:07:19.331  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 19:07:19.353  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 19:07:19.355  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 22ms
2024-09-05 19:07:19.370  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 19:07:19.371  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 19:07:19.371  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 19:07:19.371  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 19:07:19.372  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 19:07:19.372  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 19:07:19.374  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 19:07:19.378  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 19:07:19.379  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 19:07:19.382  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 19:07:19.383  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 19:07:19.591  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 19:07:19.683  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 19:07:19.742  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 19:07:19.893  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 19:07:19.953  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 19:07:21.075  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 19:07:21.094 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 19:07:21.096 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 19:07:21.097 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 19:07:21.099 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 19:07:21.100 DEBUG --- [           main] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 19:07:21.107 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        expiry_date timestamp(6),
        id bigint generated by default as identity,
        name varchar(255) not null unique check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 19:07:21.112 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        click_count bigint,
        id bigint generated by default as identity,
        user_id bigint,
        full_url varchar(255) not null,
        short_key varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 19:07:21.114 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        end_date timestamp(6),
        id bigint generated by default as identity,
        start_date timestamp(6),
        user_id bigint unique,
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-05 19:07:21.117 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        role_id bigint not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    )
2024-09-05 19:07:21.119 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        refresh_token varchar(255),
        user_name varchar(255) not null unique,
        primary key (id)
    )
2024-09-05 19:07:21.122 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-05 19:07:21.124 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-05 19:07:21.126 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-05 19:07:21.128 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-05 19:07:21.135  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:07:22.121  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 19:07:22.156  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 242c9066-257d-4daa-bfbd-7f6014dca364

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 19:07:22.465 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 19:07:22.685 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 19:07:22.732  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1b136640, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@22a7ff5d, org.springframework.security.web.context.SecurityContextHolderFilter@7537f638, org.springframework.security.web.header.HeaderWriterFilter@11101f62, org.springframework.web.filter.CorsFilter@5a362dc7, org.springframework.security.web.authentication.logout.LogoutFilter@759c0c14, de.telran.urlshortener.security.JwtFilter@70290678, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6b909973, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@458044df, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@564b86b, org.springframework.security.web.session.SessionManagementFilter@6eda3ade, org.springframework.security.web.access.ExceptionTranslationFilter@3644d305, org.springframework.security.web.access.intercept.AuthorizationFilter@4d56b7f1]
2024-09-05 19:07:23.055 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 19:07:23.106 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 19:07:23.311  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 19:07:23.413  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.333 seconds (process running for 14.006)
2024-09-05 19:07:23.613 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:07:23.709 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 19:07:23.731 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:07:23.743 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:07:23.746 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 19:07:23.750 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:07:23.752 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 19:07:23.756 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:07:23.760 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:07:23.768 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 19:07:23.955 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 19:07:23.971 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 19:07:23.978 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 19:07:24.101 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 19:07:24.103 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 19:07:24.242 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 19:07:24.278 DEBUG --- [ionShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@56846330, started on Thu Sep 05 19:07:14 CEST 2024
2024-09-05 19:07:24.290  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:07:24.291 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists roles cascade 
2024-09-05 19:07:24.293 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists short_urls cascade 
2024-09-05 19:07:24.295 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists subscriptions cascade 
2024-09-05 19:07:24.297 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists user_roles cascade 
2024-09-05 19:07:24.299 DEBUG --- [ionShutdownHook] o.h.SQL                                  : 
    drop table if exists users cascade 
2024-09-05 19:07:24.304  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 19:07:24.308  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 19:10:17.978  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 19:10:18.135  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 19:10:20.472  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 19:10:20.527  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 380689 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 19:10:20.533 DEBUG --- [           main] d.t.u.s.RoleServiceTest                  : Running with Spring Boot v3.2.0, Spring v6.1.1
2024-09-05 19:10:20.535  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 19:10:22.251  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 19:10:22.371  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 106 ms. Found 4 JPA repository interfaces.
2024-09-05 19:10:23.260  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 19:10:23.557  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 19:10:23.559  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 19:10:23.669  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 19:10:24.452  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 19:10:24.884  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:10:25.107  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 19:10:25.110  INFO --- [           main] l.command                                : Using deploymentId: 5556225109
2024-09-05 19:10:25.113  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:10:25.172  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 19:10:25.203  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 19:10:25.205  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 30ms
2024-09-05 19:10:25.221  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 19:10:25.229  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 19:10:25.230  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-05 19:10:25.262  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 19:10:25.269  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 19:10:25.280  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 19:10:25.281  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 18ms
2024-09-05 19:10:25.290  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 19:10:25.299  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 19:10:25.304  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 19:10:25.305  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 13ms
2024-09-05 19:10:25.312  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 19:10:25.318  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 19:10:25.323  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 19:10:25.328  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 19:10:25.338  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 19:10:25.339  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 25ms
2024-09-05 19:10:25.345  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 19:10:25.369  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 19:10:25.386  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 19:10:25.387  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 40ms
2024-09-05 19:10:25.393  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 19:10:25.413  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 19:10:25.414  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 19ms
2024-09-05 19:10:25.427  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 19:10:25.428  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 19:10:25.429  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 19:10:25.429  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 19:10:25.430  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 19:10:25.431  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 19:10:25.433  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 19:10:25.437  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 19:10:25.437  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 19:10:25.440  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 19:10:25.442  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 19:10:25.622  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 19:10:25.725  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 19:10:25.783  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 19:10:25.967  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 19:10:26.030  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 19:10:27.216  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 19:10:27.272  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:10:28.240  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 19:10:28.271  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 6c1f1ffb-fc0d-4f97-8af8-0d51978f0042

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 19:10:28.882  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@759c0c14, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@61427cd3, org.springframework.security.web.context.SecurityContextHolderFilter@3fd64d6b, org.springframework.security.web.header.HeaderWriterFilter@352df548, org.springframework.web.filter.CorsFilter@ca72afb, org.springframework.security.web.authentication.logout.LogoutFilter@60e2b6e3, de.telran.urlshortener.security.JwtFilter@3c51dec5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3f96ef2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@12039ae0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3e4dabcb, org.springframework.security.web.session.SessionManagementFilter@3644d305, org.springframework.security.web.access.ExceptionTranslationFilter@2dc4b58a, org.springframework.security.web.access.intercept.AuthorizationFilter@1f9e42d2]
2024-09-05 19:10:29.513  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 19:10:29.605  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.657 seconds (process running for 13.858)
2024-09-05 19:10:30.305 DEBUG --- [           main] d.t.u.s.RoleService                      : Parsed role name: ADMIN
2024-09-05 19:10:30.353 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 19:10:30.374 DEBUG --- [           main] d.t.u.s.RoleService                      : Parsed role name: ADMIN
2024-09-05 19:10:30.393  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:10:30.403  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 19:10:30.406  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 19:22:54.041  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 19:22:54.109  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.1 with PID 387326 (/home/volodymyr/forComunityIdea/target/classes started by volodymyr in /home/volodymyr/forComunityIdea)
2024-09-05 19:22:54.116  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb"
2024-09-05 19:22:55.860  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 19:22:55.987  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 111 ms. Found 4 JPA repository interfaces.
2024-09-05 19:22:57.086  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-05 19:22:57.103  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-05 19:22:57.106  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-05 19:22:57.107  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-05 19:22:57.198  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-05 19:22:57.202  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3011 ms
2024-09-05 19:22:57.282  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 19:22:57.663  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:5c69f4e9-d9b6-49ec-b675-60f74c3e8ba7 user=SA
2024-09-05 19:22:57.667  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 19:22:57.706  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:5c69f4e9-d9b6-49ec-b675-60f74c3e8ba7'
2024-09-05 19:22:58.069  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 19:22:58.923  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 19:22:59.292  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:22:59.472  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 19:22:59.475  INFO --- [           main] l.command                                : Using deploymentId: 5556979474
2024-09-05 19:22:59.478  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:22:59.557  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 19:22:59.573  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 19:22:59.575  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 15ms
2024-09-05 19:22:59.587  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 19:22:59.595  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 19:22:59.595  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-05 19:22:59.602  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 19:22:59.607  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 19:22:59.617  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 19:22:59.617  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-05 19:22:59.625  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 19:22:59.633  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 19:22:59.636  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 19:22:59.637  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-05 19:22:59.643  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 19:22:59.647  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 19:22:59.651  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 19:22:59.654  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 19:22:59.661  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 19:22:59.661  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 17ms
2024-09-05 19:22:59.666  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 19:22:59.685  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 19:22:59.700  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 19:22:59.701  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 35ms
2024-09-05 19:22:59.706  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 19:22:59.722  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 19:22:59.723  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 16ms
2024-09-05 19:22:59.735  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 19:22:59.735  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 19:22:59.735  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 19:22:59.736  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 19:22:59.736  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 19:22:59.737  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 19:22:59.738  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 19:22:59.742  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 19:22:59.743  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 19:22:59.746  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 19:22:59.748  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 19:22:59.939  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 19:23:00.028  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 19:23:00.075  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 19:23:00.405  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 19:23:00.474  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 19:23:01.957  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 19:23:01.962  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:23:02.904  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 19:23:02.937  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: d9e1241c-ee25-47f5-9b87-e4658892885b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 19:23:03.238 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2024-09-05 19:23:03.405 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-05 19:23:03.472  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1d63c523, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@64f55630, org.springframework.security.web.context.SecurityContextHolderFilter@2ae92511, org.springframework.security.web.header.HeaderWriterFilter@613aeb51, org.springframework.web.filter.CorsFilter@336b6e93, org.springframework.security.web.authentication.logout.LogoutFilter@36e6e59f, de.telran.urlshortener.security.JwtFilter@1182413a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6df8131c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5e888fba, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@40fd9358, org.springframework.security.web.session.SessionManagementFilter@4d57fc11, org.springframework.security.web.access.ExceptionTranslationFilter@50720344, org.springframework.security.web.access.intercept.AuthorizationFilter@72117fc0]
2024-09-05 19:23:03.633 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-05 19:23:03.685 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-05 19:23:04.020  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-05 19:23:04.040  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-05 19:23:04.054  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 10.507 seconds (process running for 12.549)
2024-09-05 19:23:04.267 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:23:04.357 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 19:23:04.381 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:23:04.391 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:23:04.393 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 19:23:04.397 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:23:04.399 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-05 19:23:04.403 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:23:04.407 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-05 19:23:04.415 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 19:23:04.673 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 19:23:04.691 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 19:23:04.697 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-05 19:23:04.833 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, refresh_token, user_name, id) 
    values
        (?, ?, ?, ?, default)
2024-09-05 19:23:04.835 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-05 19:26:16.647  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:26:16.651  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 19:26:16.656  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 19:30:22.900  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.service.RoleServiceTest]: RoleServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 19:30:23.069  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.service.RoleServiceTest
2024-09-05 19:30:23.625  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 19:30:23.656  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Starting RoleServiceTest using Java 21.0.2 with PID 391399 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 19:30:23.661 DEBUG --- [           main] d.t.u.s.RoleServiceTest                  : Running with Spring Boot v3.2.0, Spring v6.1.1
2024-09-05 19:30:23.663  INFO --- [           main] d.t.u.s.RoleServiceTest                  : The following 1 profile is active: "test"
2024-09-05 19:30:25.223  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 19:30:25.337  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 99 ms. Found 4 JPA repository interfaces.
2024-09-05 19:30:26.198  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 19:30:26.522  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2024-09-05 19:30:26.525  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 19:30:26.644  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 19:30:27.468  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 19:30:27.809  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:30:27.983  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 19:30:27.985  INFO --- [           main] l.command                                : Using deploymentId: 5557427984
2024-09-05 19:30:27.988  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:30:28.051  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 19:30:28.070  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 19:30:28.072  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 19ms
2024-09-05 19:30:28.086  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 19:30:28.094  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 19:30:28.095  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-05 19:30:28.101  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 19:30:28.108  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 19:30:28.118  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 19:30:28.118  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 16ms
2024-09-05 19:30:28.126  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 19:30:28.133  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 19:30:28.137  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 19:30:28.138  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-05 19:30:28.144  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 19:30:28.148  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 19:30:28.151  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 19:30:28.155  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 19:30:28.161  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 19:30:28.162  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 17ms
2024-09-05 19:30:28.166  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 19:30:28.182  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 19:30:28.193  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 19:30:28.194  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 27ms
2024-09-05 19:30:28.198  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 19:30:28.212  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 19:30:28.213  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 13ms
2024-09-05 19:30:28.224  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 19:30:28.224  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 19:30:28.225  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 19:30:28.225  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 19:30:28.225  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 19:30:28.226  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 19:30:28.227  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 19:30:28.231  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 19:30:28.231  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 19:30:28.234  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 19:30:28.236  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 19:30:28.404  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 19:30:28.487  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 19:30:28.554  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 19:30:28.893  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 19:30:28.953  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 19:30:30.311  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 19:30:30.370  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:30:31.362  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 19:30:31.396  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 3ca3a48b-10a0-4f5c-ad29-f0912b55b35a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 19:30:32.077  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4d8458a1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2d2c794d, org.springframework.security.web.context.SecurityContextHolderFilter@2a7ed9bd, org.springframework.security.web.header.HeaderWriterFilter@69c03fa2, org.springframework.web.filter.CorsFilter@53f67af6, org.springframework.security.web.authentication.logout.LogoutFilter@7d911f95, de.telran.urlshortener.security.JwtFilter@3d056418, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@28dae87e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@80f3111, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a85f41b, org.springframework.security.web.session.SessionManagementFilter@2f6fcc70, org.springframework.security.web.access.ExceptionTranslationFilter@4545ac62, org.springframework.security.web.access.intercept.AuthorizationFilter@8cd00bc]
2024-09-05 19:30:32.799  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2024-09-05 19:30:32.910  INFO --- [           main] d.t.u.s.RoleServiceTest                  : Started RoleServiceTest in 9.64 seconds (process running for 12.434)
2024-09-05 19:30:34.844 DEBUG --- [           main] d.t.u.s.RoleService                      : Parsed role name: ADMIN
2024-09-05 19:30:34.949 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 19:30:34.997 DEBUG --- [           main] d.t.u.s.RoleService                      : Parsed role name: ADMIN
2024-09-05 19:30:35.052  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:30:35.061  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 19:30:35.067  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 19:32:19.625 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 19:34:59.978 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 19:35:34.568  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 19:35:34.764  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-05 19:35:35.320  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 19:35:35.426  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 394271 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 19:35:35.432 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.2.0, Spring v6.1.1
2024-09-05 19:35:35.435  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "testdb"
2024-09-05 19:35:36.243  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 19:35:36.365  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 108 ms. Found 4 JPA repository interfaces.
2024-09-05 19:35:36.472  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-05 19:35:36.776  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:0c6aa70b-0d59-43f1-a2dc-3abee47572cd;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-05 19:35:37.313  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 19:35:38.217  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 19:35:38.607  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:35:38.827  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 19:35:38.830  INFO --- [           main] l.command                                : Using deploymentId: 5557738829
2024-09-05 19:35:38.833  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:35:38.898  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 19:35:38.915  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 19:35:38.917  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 17ms
2024-09-05 19:35:38.930  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 19:35:38.937  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 19:35:38.938  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-05 19:35:38.945  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 19:35:38.953  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 19:35:38.964  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 19:35:38.966  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 19ms
2024-09-05 19:35:38.975  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 19:35:38.985  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 19:35:38.989  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 19:35:38.990  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 14ms
2024-09-05 19:35:38.996  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 19:35:39.000  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 19:35:39.003  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 19:35:39.007  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 19:35:39.014  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 19:35:39.015  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 18ms
2024-09-05 19:35:39.019  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 19:35:39.036  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 19:35:39.048  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 19:35:39.049  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 29ms
2024-09-05 19:35:39.053  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 19:35:39.069  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 19:35:39.070  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 15ms
2024-09-05 19:35:39.082  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 19:35:39.082  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 19:35:39.083  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 19:35:39.083  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 19:35:39.084  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 19:35:39.085  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 19:35:39.089  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 19:35:39.093  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 19:35:39.093  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 19:35:39.099  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 19:35:39.102  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 19:35:39.366  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 19:35:39.456  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 19:35:39.501  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 19:35:39.811  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 19:35:39.879  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 19:35:41.193  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 19:35:41.198  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:35:41.945  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 7.077 seconds (process running for 9.336)
2024-09-05 19:35:43.560 DEBUG --- [           main] d.t.u.s.RoleService                      : Parsed role name: ADMIN
2024-09-05 19:35:43.567 DEBUG --- [           main] d.t.u.s.RoleService                      : Found role: de.telran.urlshortener.entity.Role@35ec9d29
2024-09-05 19:35:43.607 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 19:35:43.621 DEBUG --- [           main] d.t.u.s.RoleService                      : Parsed role name: ADMIN
2024-09-05 19:35:43.655  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-05 19:35:43.699  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-05 19:35:43.854  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 394271 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 19:35:43.855 DEBUG --- [           main] d.t.u.UrlShortenerApplicationTests       : Running with Spring Boot v3.2.0, Spring v6.1.1
2024-09-05 19:35:43.856  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "testdb"
2024-09-05 19:35:45.023  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 19:35:45.066  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 41 ms. Found 4 JPA repository interfaces.
2024-09-05 19:35:45.649  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 19:35:45.669  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn6: url=jdbc:h2:mem:26ce6ab4-2d10-4747-8411-d13cbde4a8ae user=SA
2024-09-05 19:35:45.673  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 19:35:45.692  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 19:35:45.911  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 19:35:45.922  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:35:45.989  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 19:35:45.990  INFO --- [           main] l.command                                : Using deploymentId: 5557745990
2024-09-05 19:35:45.993  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:35:46.022  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 19:35:46.028  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 19:35:46.029  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 6ms
2024-09-05 19:35:46.037  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 19:35:46.045  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 19:35:46.046  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-05 19:35:46.053  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 19:35:46.059  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 19:35:46.063  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 19:35:46.064  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 11ms
2024-09-05 19:35:46.072  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 19:35:46.080  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 19:35:46.084  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 19:35:46.085  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 12ms
2024-09-05 19:35:46.092  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 19:35:46.095  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 19:35:46.098  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 19:35:46.102  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 19:35:46.106  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 19:35:46.107  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 14ms
2024-09-05 19:35:46.111  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 19:35:46.123  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 19:35:46.133  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 19:35:46.134  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 22ms
2024-09-05 19:35:46.139  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 19:35:46.152  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 19:35:46.153  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 14ms
2024-09-05 19:35:46.157  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 19:35:46.158  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 19:35:46.158  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 19:35:46.159  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 19:35:46.159  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 19:35:46.159  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 19:35:46.160  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 19:35:46.161  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 19:35:46.161  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 19:35:46.164  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 19:35:46.165  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 19:35:46.266  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 19:35:46.272  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 19:35:46.279  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 19:35:46.283  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 19:35:46.479  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 19:35:46.480  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:35:47.102  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 19:35:47.143  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: cc04c883-b5e4-4430-b3fe-0c7409710ef5

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 19:35:47.781  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@71ebd1d9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@49f82f95, org.springframework.security.web.context.SecurityContextHolderFilter@487befb, org.springframework.security.web.header.HeaderWriterFilter@1f6b9ab7, org.springframework.web.filter.CorsFilter@73c72238, org.springframework.security.web.authentication.logout.LogoutFilter@93231b2, de.telran.urlshortener.security.JwtFilter@631990cc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@17a17af5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@694c23e4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3e6be3c1, org.springframework.security.web.session.SessionManagementFilter@4edea6b4, org.springframework.security.web.access.ExceptionTranslationFilter@144d8c4f, org.springframework.security.web.access.intercept.AuthorizationFilter@56cd8903]
2024-09-05 19:35:48.404  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:26ce6ab4-2d10-4747-8411-d13cbde4a8ae'
2024-09-05 19:35:48.531  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 4.81 seconds (process running for 15.922)
2024-09-05 19:35:49.129  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:35:49.140  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:35:49.148  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 19:35:49.155  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-05 19:46:23.707 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-05 19:46:55.460  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-05 19:46:55.507  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 400407 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-05 19:46:55.511 DEBUG --- [           main] d.t.u.UrlShortenerApplication            : Running with Spring Boot v3.2.0, Spring v6.1.1
2024-09-05 19:46:55.513  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb"
2024-09-05 19:46:56.737  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-05 19:46:56.821  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2024-09-05 19:46:57.662  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-05 19:46:57.675  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-05 19:46:57.678  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-05 19:46:57.679  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-05 19:46:57.743  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-05 19:46:57.743  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2176 ms
2024-09-05 19:46:57.817  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-05 19:46:58.086  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:b5e8a2cf-6c94-43b5-9761-9e52ffe6eb5e user=SA
2024-09-05 19:46:58.088  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-05 19:46:58.103  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:b5e8a2cf-6c94-43b5-9761-9e52ffe6eb5e'
2024-09-05 19:46:58.203 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-05 19:46:58.377  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-05 19:46:58.943  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-05 19:46:59.235  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:46:59.407  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-05 19:46:59.408  INFO --- [           main] l.command                                : Using deploymentId: 5558419408
2024-09-05 19:46:59.411  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-05 19:46:59.457  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-05 19:46:59.473  INFO --- [           main] l.changelog                              : Table roles created
2024-09-05 19:46:59.474  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 15ms
2024-09-05 19:46:59.486  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-05 19:46:59.493  INFO --- [           main] l.changelog                              : Table users created
2024-09-05 19:46:59.493  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-05 19:46:59.500  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-05 19:46:59.506  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-05 19:46:59.515  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-05 19:46:59.516  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-05 19:46:59.522  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-05 19:46:59.528  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-05 19:46:59.531  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-05 19:46:59.532  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-05 19:46:59.536  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-05 19:46:59.539  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-05 19:46:59.542  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-05 19:46:59.545  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-05 19:46:59.550  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-05 19:46:59.551  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-05 19:46:59.555  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-05 19:46:59.569  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-05 19:46:59.578  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-05 19:46:59.579  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 22ms
2024-09-05 19:46:59.582  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-05 19:46:59.595  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-05 19:46:59.595  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 12ms
2024-09-05 19:46:59.604  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-05 19:46:59.604  INFO --- [           main] l.util                                   : Run:                          7
2024-09-05 19:46:59.605  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-05 19:46:59.605  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-05 19:46:59.605  INFO --- [           main] l.util                                   : -------------------------------
2024-09-05 19:46:59.605  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-05 19:46:59.606  INFO --- [           main] l.util                                   : Update summary generated
2024-09-05 19:46:59.609  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-05 19:46:59.610  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-05 19:46:59.612  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-05 19:46:59.613  INFO --- [           main] l.command                                : Command execution complete
2024-09-05 19:46:59.742  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-05 19:46:59.809  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-05 19:46:59.849  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-05 19:47:00.122  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-05 19:47:00.174  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-05 19:47:01.380  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-05 19:47:01.384  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:47:02.238  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-05 19:47:02.276  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 1040daa1-5ddb-4c46-95a0-ecfba031dc90

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-05 19:47:02.782  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@54a98439, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4b20b431, org.springframework.security.web.context.SecurityContextHolderFilter@43ef1243, org.springframework.security.web.header.HeaderWriterFilter@33903444, org.springframework.web.filter.CorsFilter@46875fae, org.springframework.security.web.authentication.logout.LogoutFilter@2968d3c0, de.telran.urlshortener.security.JwtFilter@5e385b6f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2e3c5ecc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@790bd0e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5b3f0552, org.springframework.security.web.session.SessionManagementFilter@68226b59, org.springframework.security.web.access.ExceptionTranslationFilter@16a83016, org.springframework.security.web.access.intercept.AuthorizationFilter@6b334a1]
2024-09-05 19:47:03.329  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-05 19:47:03.357  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-05 19:47:03.372  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.362 seconds (process running for 9.842)
2024-09-05 19:47:33.136  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-05 19:47:33.140  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-05 19:47:33.142  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-06 06:24:21.729  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-06 06:24:21.795  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 5308 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-06 06:24:21.801 DEBUG --- [           main] d.t.u.UrlShortenerApplication            : Running with Spring Boot v3.2.0, Spring v6.1.1
2024-09-06 06:24:21.803  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb"
2024-09-06 06:24:23.105  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-06 06:24:23.200  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 83 ms. Found 4 JPA repository interfaces.
2024-09-06 06:24:24.237  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-06 06:24:24.251  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-06 06:24:24.254  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-06 06:24:24.255  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-06 06:24:24.326  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-06 06:24:24.326  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2458 ms
2024-09-06 06:24:24.404  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-06 06:24:24.768  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:3ac8d3a5-b6d8-4c75-9695-428f5995aaa9 user=SA
2024-09-06 06:24:24.771  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-06 06:24:24.788  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:3ac8d3a5-b6d8-4c75-9695-428f5995aaa9'
2024-09-06 06:24:24.894 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-06 06:24:25.103  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-06 06:24:25.761  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-06 06:24:26.158  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-06 06:24:26.360  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-06 06:24:26.362  INFO --- [           main] l.command                                : Using deploymentId: 5596666361
2024-09-06 06:24:26.365  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-06 06:24:26.427  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-06 06:24:26.443  INFO --- [           main] l.changelog                              : Table roles created
2024-09-06 06:24:26.444  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 15ms
2024-09-06 06:24:26.456  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-06 06:24:26.464  INFO --- [           main] l.changelog                              : Table users created
2024-09-06 06:24:26.465  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 8ms
2024-09-06 06:24:26.473  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-06 06:24:26.480  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-06 06:24:26.491  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-06 06:24:26.492  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 18ms
2024-09-06 06:24:26.499  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-06 06:24:26.506  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-06 06:24:26.510  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-06 06:24:26.511  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 10ms
2024-09-06 06:24:26.517  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-06 06:24:26.520  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-06 06:24:26.524  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-06 06:24:26.528  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-06 06:24:26.535  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-06 06:24:26.536  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 19ms
2024-09-06 06:24:26.541  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-06 06:24:26.565  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-06 06:24:26.577  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-06 06:24:26.578  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 36ms
2024-09-06 06:24:26.584  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-06 06:24:26.610  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-06 06:24:26.611  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 25ms
2024-09-06 06:24:26.627  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-06 06:24:26.628  INFO --- [           main] l.util                                   : Run:                          7
2024-09-06 06:24:26.629  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-06 06:24:26.629  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-06 06:24:26.630  INFO --- [           main] l.util                                   : -------------------------------
2024-09-06 06:24:26.631  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-06 06:24:26.633  INFO --- [           main] l.util                                   : Update summary generated
2024-09-06 06:24:26.639  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-06 06:24:26.641  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-06 06:24:26.654  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-06 06:24:26.656  INFO --- [           main] l.command                                : Command execution complete
2024-09-06 06:24:26.821  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-06 06:24:26.934  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-06 06:24:26.986  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-06 06:24:27.340  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-06 06:24:27.411  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-06 06:24:28.756  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-06 06:24:28.760  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-06 06:24:29.662  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-06 06:24:29.701  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 46dc55b1-0134-45fc-8002-327d943b6326

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-06 06:24:30.252  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5b3f0552, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@432fca40, org.springframework.security.web.context.SecurityContextHolderFilter@790bd0e, org.springframework.security.web.header.HeaderWriterFilter@24c8bc1e, org.springframework.web.filter.CorsFilter@de06f28, org.springframework.security.web.authentication.logout.LogoutFilter@63a833c5, de.telran.urlshortener.security.JwtFilter@4cecc15a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@626a4e0a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2e6ca6b5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@71662b15, org.springframework.security.web.session.SessionManagementFilter@43ef1243, org.springframework.security.web.access.ExceptionTranslationFilter@6149adee, org.springframework.security.web.access.intercept.AuthorizationFilter@54a98439]
2024-09-06 06:24:30.832  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-06 06:24:30.851  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-06 06:24:30.864  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 9.566 seconds (process running for 12.061)
2024-09-06 06:24:35.862  INFO --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-06 06:24:35.863  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-06 06:24:35.864  INFO --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed initialization in 1 ms
2024-09-06 06:24:35.880  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-06 06:24:35.894  WARN --- [nio-8080-exec-2] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-06 06:24:37.770  INFO --- [nio-8080-exec-9] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 863 ms
2024-09-06 06:26:33.002  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : Received request to create user with username: opanas
2024-09-06 06:26:33.003  INFO --- [nio-8080-exec-3] d.t.u.s.UserService                      : Attempting to create user with username: opanas and email: opanas@string.com
2024-09-06 06:26:33.095 DEBUG --- [nio-8080-exec-3] d.t.u.s.RoleService                      : Parsed role name: TRIAL
2024-09-06 06:26:33.098 DEBUG --- [nio-8080-exec-3] d.t.u.s.RoleService                      : Found role: de.telran.urlshortener.entity.Role@13fcae4d
2024-09-06 06:26:33.110  INFO --- [nio-8080-exec-3] d.t.u.s.UserService                      : User created successfully with ID: 3
2024-09-06 06:26:33.110  INFO --- [nio-8080-exec-3] d.t.u.c.UserController                   : User created successfully with ID: 3
2024-09-06 06:27:16.862  WARN --- [nio-8080-exec-4] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Unexpected character ('"' (code 34)): was expecting comma to separate Object entries]
2024-09-06 06:31:02.305  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Creating short URL for: https://skilldesk.starta.university/lesson?filters436934284=id__eq__reck4spIlkwuZFvQH&filters469453959=id__eq__reck4spIlkwuZFvQH&filters712786067=id__eq__reck4spIlkwuZFvQH
2024-09-06 06:31:02.305  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Creating short URL for user email: opanas@string.com
2024-09-06 06:31:02.312  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Generating short key with length: 6
2024-09-06 06:31:02.313  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Generated short key: uPcCO6
2024-09-06 06:31:02.313  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Generated short key: uPcCO6
2024-09-06 06:31:02.318  INFO --- [nio-8080-exec-9] d.t.u.s.ShortUrlService                  : Short URL created with ID: 1
2024-09-06 06:31:02.319  INFO --- [nio-8080-exec-9] d.t.u.c.ShortUrlController               : Short URL created successfully with key: uPcCO6
2024-09-06 06:31:26.389  INFO --- [nio-8080-exec-2] d.t.u.c.ShortUrlController               : Fetching short URL with key: uPcCO6
2024-09-06 06:31:26.390  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Fetching short URL with key: uPcCO6
2024-09-06 06:31:26.410  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: uPcCO6
2024-09-06 06:31:26.418  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: uPcCO6
2024-09-06 06:31:26.418  INFO --- [nio-8080-exec-2] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: uPcCO6
2024-09-06 06:31:26.419  INFO --- [nio-8080-exec-2] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@f934c27
2024-09-06 06:31:27.804  INFO --- [io-8080-exec-10] d.t.u.c.ShortUrlController               : Fetching short URL with key: uPcCO6
2024-09-06 06:31:27.805  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Fetching short URL with key: uPcCO6
2024-09-06 06:31:27.808  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: uPcCO6
2024-09-06 06:31:27.812  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: uPcCO6
2024-09-06 06:31:27.812  INFO --- [io-8080-exec-10] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: uPcCO6
2024-09-06 06:31:27.812  INFO --- [io-8080-exec-10] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@31ea3fdb
2024-09-06 06:31:57.895 ERROR --- [nio-8080-exec-1] d.t.u.s.RoleService                      : Role name uPcCO6 is invalid
2024-09-06 06:31:57.899 ERROR --- [nio-8080-exec-1] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.RuntimeException: Role not found with name: uPcCO6] with root cause
java.lang.RuntimeException: Role not found with name: uPcCO6
	at de.telran.urlshortener.service.RoleService.getRoleByName(RoleService.java:30)
	at de.telran.urlshortener.controller.RoleController.getRoleByName(RoleController.java:29)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:80)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-06 06:43:09.729 ERROR --- [nio-8080-exec-8] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-06T04:34:12Z. Current time: 2024-09-06T04:43:09Z, a difference of 537727 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:99)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:74)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:67)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-06 06:43:09.735 ERROR --- [nio-8080-exec-8] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-06T04:34:12Z. Current time: 2024-09-06T04:43:09Z, a difference of 537734 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:99)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:74)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:67)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-06 06:43:47.043 ERROR --- [nio-8080-exec-9] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-06T04:34:12Z. Current time: 2024-09-06T04:43:47Z, a difference of 575042 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:99)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:74)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:67)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-06 06:43:47.045 ERROR --- [nio-8080-exec-9] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-06T04:34:12Z. Current time: 2024-09-06T04:43:47Z, a difference of 575045 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:99)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:74)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:67)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-06 06:44:29.081 ERROR --- [nio-8080-exec-2] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-06T04:34:12Z. Current time: 2024-09-06T04:44:29Z, a difference of 617081 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:99)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:74)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:67)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-06 06:44:29.084 ERROR --- [nio-8080-exec-2] d.t.u.s.JwtProvider                      : Token expired
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2024-09-06T04:34:12Z. Current time: 2024-09-06T04:44:29Z, a difference of 617084 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:427)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:529)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:589)
	at io.jsonwebtoken.impl.ImmutableJwtParser.parseClaimsJws(ImmutableJwtParser.java:173)
	at de.telran.urlshortener.security.JwtProvider.validateToken(JwtProvider.java:99)
	at de.telran.urlshortener.security.JwtProvider.validateAccessToken(JwtProvider.java:74)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:67)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at de.telran.urlshortener.security.JwtFilter.doFilter(JwtFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-09-06 06:45:21.043  INFO --- [io-8080-exec-10] d.t.u.c.UserController                   : Received request to change role for user with ID: 3 to PAID
2024-09-06 06:45:21.044  INFO --- [io-8080-exec-10] d.t.u.s.UserService                      : Attempting to change role for user with ID: 3 to PAID
2024-09-06 06:45:21.057 DEBUG --- [io-8080-exec-10] d.t.u.s.RoleService                      : Parsed role name: PAID
2024-09-06 06:45:21.059 DEBUG --- [io-8080-exec-10] d.t.u.s.RoleService                      : Found role: de.telran.urlshortener.entity.Role@c0c6a44
2024-09-06 06:45:21.069  INFO --- [io-8080-exec-10] d.t.u.s.UserService                      : User role updated successfully with ID: 3
2024-09-06 06:45:21.069  INFO --- [io-8080-exec-10] d.t.u.c.UserController                   : User role updated successfully with ID: 3
2024-09-06 06:47:20.591  INFO --- [nio-8080-exec-5] d.t.u.c.ShortUrlController               : Creating short URL for: https://skilldesk.starta.university/lesson?filters436934284=id__eq__reck4spIlkwuZFvQH&filters469453959=id__eq__reck4spIlkwuZFvQH&filters712786067=id__eq__reck4spIlkwuZFvQH
2024-09-06 06:47:20.591  INFO --- [nio-8080-exec-5] d.t.u.s.ShortUrlService                  : Creating short URL for user email: admin@example.com
2024-09-06 06:47:20.599  INFO --- [nio-8080-exec-5] d.t.u.s.ShortUrlService                  : Generating short key with length: 6
2024-09-06 06:47:20.600  INFO --- [nio-8080-exec-5] d.t.u.s.ShortUrlService                  : Generated short key: gk47IU
2024-09-06 06:47:20.600  INFO --- [nio-8080-exec-5] d.t.u.s.ShortUrlService                  : Generated short key: gk47IU
2024-09-06 06:47:20.604  INFO --- [nio-8080-exec-5] d.t.u.s.ShortUrlService                  : Short URL created with ID: 2
2024-09-06 06:47:20.604  INFO --- [nio-8080-exec-5] d.t.u.c.ShortUrlController               : Short URL created successfully with key: gk47IU
2024-09-06 06:47:45.711  INFO --- [nio-8080-exec-3] d.t.u.c.ShortUrlController               : Fetching short URL with key: gk47IU
2024-09-06 06:47:45.712  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Fetching short URL with key: gk47IU
2024-09-06 06:47:45.715  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: gk47IU
2024-09-06 06:47:45.725  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: gk47IU
2024-09-06 06:47:45.725  INFO --- [nio-8080-exec-3] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: gk47IU
2024-09-06 06:47:45.726  INFO --- [nio-8080-exec-3] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@18f8a27e
2024-09-06 06:47:46.827  INFO --- [nio-8080-exec-4] d.t.u.c.ShortUrlController               : Fetching short URL with key: gk47IU
2024-09-06 06:47:46.827  INFO --- [nio-8080-exec-4] d.t.u.s.ShortUrlService                  : Fetching short URL with key: gk47IU
2024-09-06 06:47:46.832  INFO --- [nio-8080-exec-4] d.t.u.s.ShortUrlService                  : Incrementing click count for short URL with key: gk47IU
2024-09-06 06:47:46.839  INFO --- [nio-8080-exec-4] d.t.u.s.ShortUrlService                  : Click count incremented successfully for short URL with key: gk47IU
2024-09-06 06:47:46.839  INFO --- [nio-8080-exec-4] d.t.u.s.ShortUrlService                  : Short URL fetched successfully with key: gk47IU
2024-09-06 06:47:46.840  INFO --- [nio-8080-exec-4] d.t.u.c.ShortUrlController               : Short URL fetched successfully: de.telran.urlshortener.dto.urlDto.ShortUrlResponse@5e5e9b3a
2024-09-06 06:56:24.862  INFO --- [ionShutdownHook] o.a.c.h.Http11NioProtocol                : Stopping ProtocolHandler ["http-nio-8080"]
2024-09-06 06:56:24.882  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-06 06:56:24.886  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-06 06:56:24.891  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-06 07:00:12.038  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-06 07:00:12.110  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.1 with PID 25326 (/home/volodymyr/forComunityIdea/target/classes started by volodymyr in /home/volodymyr/forComunityIdea)
2024-09-06 07:00:12.119  INFO --- [           main] d.t.u.UrlShortenerApplication            : No active profile set, falling back to 1 default profile: "default"
2024-09-06 07:00:13.647  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-06 07:00:13.773  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 112 ms. Found 4 JPA repository interfaces.
2024-09-06 07:00:14.814  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-06 07:00:14.834  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-06 07:00:14.837  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-06 07:00:14.837  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-06 07:00:14.925  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-06 07:00:14.928  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2721 ms
2024-09-06 07:00:14.998  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-06 07:00:15.331  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dev user=SA
2024-09-06 07:00:15.333  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-06 07:00:15.350  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:dev'
2024-09-06 07:00:15.572  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-06 07:00:15.676  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-06 07:00:15.733  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-06 07:00:16.115  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-06 07:00:16.194  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-06 07:00:17.645  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-06 07:00:17.712 DEBUG --- [           main] o.h.SQL                                  : 
    create table roles (
        id bigint generated by default as identity,
        expiry_date timestamp(6),
        name varchar(255) not null check (name in ('ADMIN','TRIAL','PAID')),
        primary key (id)
    )
2024-09-06 07:00:17.728 DEBUG --- [           main] o.h.SQL                                  : 
    create table short_urls (
        id bigint generated by default as identity,
        click_count bigint,
        creation_date timestamp(6),
        expiry_date timestamp(6),
        full_url varchar(255) not null,
        short_key varchar(255) not null,
        user_id bigint,
        primary key (id)
    )
2024-09-06 07:00:17.730 DEBUG --- [           main] o.h.SQL                                  : 
    create table subscriptions (
        id bigint generated by default as identity,
        end_date timestamp(6),
        start_date timestamp(6),
        subscription_type varchar(255) check (subscription_type in ('ADMIN','TRIAL','PAID')),
        user_id bigint,
        primary key (id)
    )
2024-09-06 07:00:17.733 DEBUG --- [           main] o.h.SQL                                  : 
    create table user_roles (
        user_id bigint not null,
        role_id bigint not null,
        primary key (user_id, role_id)
    )
2024-09-06 07:00:17.737 DEBUG --- [           main] o.h.SQL                                  : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null,
        password varchar(255) not null,
        user_name varchar(255) not null,
        primary key (id)
    )
2024-09-06 07:00:17.740 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       drop constraint if exists UK_ofx66keruapi6vyqpv6f2or37
2024-09-06 07:00:17.741 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists roles 
       add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name)
2024-09-06 07:00:17.743 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       drop constraint if exists UK_idjisas7f7xg6ax6cc63t349j
2024-09-06 07:00:17.744 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint UK_idjisas7f7xg6ax6cc63t349j unique (short_key)
2024-09-06 07:00:17.745 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       drop constraint if exists UK_l3ommhd1n0tu0k2va0cbp87qe
2024-09-06 07:00:17.746 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint UK_l3ommhd1n0tu0k2va0cbp87qe unique (user_id)
2024-09-06 07:00:17.747 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2024-09-06 07:00:17.747 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2024-09-06 07:00:17.749 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       drop constraint if exists UK_k8d0f2n7n88w1a16yhua64onx
2024-09-06 07:00:17.749 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists users 
       add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
2024-09-06 07:00:17.751 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists short_urls 
       add constraint FKqgjewmkgpppu86xx8t1oe574y 
       foreign key (user_id) 
       references users
2024-09-06 07:00:17.760 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists subscriptions 
       add constraint FKhro52ohfqfbay9774bev0qinr 
       foreign key (user_id) 
       references users
2024-09-06 07:00:17.763 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 
       foreign key (role_id) 
       references roles
2024-09-06 07:00:17.766 DEBUG --- [           main] o.h.SQL                                  : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2024-09-06 07:00:17.771  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-06 07:00:18.794  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-06 07:00:19.118 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 16 mappings in 'requestMappingHandlerMapping'
2024-09-06 07:00:19.256 DEBUG --- [           main] o.s.w.s.h.SimpleUrlHandlerMapping        : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2024-09-06 07:00:19.301  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@65a7bc80, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5b132063, org.springframework.security.web.context.SecurityContextHolderFilter@3be60847, org.springframework.security.web.header.HeaderWriterFilter@564e9c0b, org.springframework.web.filter.CorsFilter@4b98c80c, org.springframework.security.web.authentication.logout.LogoutFilter@34e7a627, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3dfe2797, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3f6fd33b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@a486851, org.springframework.security.web.access.ExceptionTranslationFilter@5367d46f, org.springframework.security.web.access.intercept.AuthorizationFilter@52984065]
2024-09-06 07:00:19.468 DEBUG --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-09-06 07:00:19.516 DEBUG --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2024-09-06 07:00:19.808  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-06 07:00:19.834  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-06 07:00:19.850  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.36 seconds (process running for 10.227)
2024-09-06 07:00:20.131 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-06 07:00:20.215 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-06 07:00:20.246 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-06 07:00:20.264 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-06 07:00:20.269 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-06 07:00:20.276 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-06 07:00:20.280 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        roles
        (expiry_date, name, id) 
    values
        (?, ?, default)
2024-09-06 07:00:20.286 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-06 07:00:20.291 DEBUG --- [           main] o.h.SQL                                  : 
    select
        r1_0.id,
        r1_0.expiry_date,
        r1_0.name 
    from
        roles r1_0 
    where
        r1_0.name=?
2024-09-06 07:00:20.302 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-06 07:00:20.513 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-06 07:00:20.530 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-06 07:00:20.538 DEBUG --- [           main] o.h.SQL                                  : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2024-09-06 07:00:20.667 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        users
        (email, password, user_name, id) 
    values
        (?, ?, ?, default)
2024-09-06 07:00:20.670 DEBUG --- [           main] o.h.SQL                                  : 
    insert 
    into
        user_roles
        (user_id, role_id) 
    values
        (?, ?)
2024-09-06 07:00:34.527  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-06 07:00:34.528  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-06 07:00:34.528 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected StandardServletMultipartResolver
2024-09-06 07:00:34.528 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected AcceptHeaderLocaleResolver
2024-09-06 07:00:34.529 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected FixedThemeResolver
2024-09-06 07:00:34.531 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@622c658d
2024-09-06 07:00:34.532 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Detected org.springframework.web.servlet.support.SessionFlashMapManager@57f83dc7
2024-09-06 07:00:34.533 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-09-06 07:00:34.534  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 6 ms
2024-09-06 07:00:34.552  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-06 07:00:34.568  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-06 07:00:34.576 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.html", parameters={}
2024-09-06 07:00:34.581 DEBUG --- [nio-8080-exec-1] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-06 07:00:34.636 DEBUG --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-06 07:00:34.680 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/index.css", parameters={}
2024-09-06 07:00:34.681 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui.css", parameters={}
2024-09-06 07:00:34.682 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-06 07:00:34.683 DEBUG --- [nio-8080-exec-3] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-06 07:00:34.685 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2024-09-06 07:00:34.690 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2024-09-06 07:00:34.690 DEBUG --- [nio-8080-exec-3] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-06 07:00:34.693 DEBUG --- [nio-8080-exec-5] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-06 07:00:34.688 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/swagger-initializer.js", parameters={}
2024-09-06 07:00:34.696 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-06 07:00:34.698 DEBUG --- [nio-8080-exec-4] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-06 07:00:34.697 DEBUG --- [nio-8080-exec-6] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-06 07:00:34.711 DEBUG --- [nio-8080-exec-5] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-06 07:00:34.746 DEBUG --- [nio-8080-exec-4] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-06 07:00:34.772 DEBUG --- [nio-8080-exec-6] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-06 07:00:35.463 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-06 07:00:35.465 DEBUG --- [nio-8080-exec-7] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-06 07:00:35.469 DEBUG --- [nio-8080-exec-7] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-06 07:00:35.509 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs/swagger-config", parameters={}
2024-09-06 07:00:35.510 DEBUG --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2024-09-06 07:00:35.513 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : GET "/swagger-ui/favicon-32x32.png", parameters={}
2024-09-06 07:00:35.515 DEBUG --- [nio-8080-exec-9] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2024-09-06 07:00:35.519 DEBUG --- [nio-8080-exec-9] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-06 07:00:35.536 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json]
2024-09-06 07:00:35.538 DEBUG --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2024-09-06 07:00:35.557 DEBUG --- [nio-8080-exec-8] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-06 07:00:35.587 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/v3/api-docs", parameters={}
2024-09-06 07:00:35.590 DEBUG --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2024-09-06 07:00:36.721  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 1101 ms
2024-09-06 07:00:36.753 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, */*] and supported [application/json]
2024-09-06 07:00:36.758 DEBUG --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2024-09-06 07:00:36.760 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 200 OK
2024-09-06 07:12:28.628 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-09-06 07:12:28.631 DEBUG --- [io-8080-exec-10] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-09-06 07:12:28.633 DEBUG --- [io-8080-exec-10] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-09-06 07:12:28.636 DEBUG --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleGlobalException(Exception)
2024-09-06 07:12:28.639 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'image/avif', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [text/plain, */*, application/json, application/*+json]
2024-09-06 07:12:28.640 DEBUG --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["No static resource favicon.ico."]
2024-09-06 07:12:28.651 DEBUG --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-09-06 07:12:28.652 DEBUG --- [io-8080-exec-10] o.s.w.s.DispatcherServlet                : Completed 500 INTERNAL_SERVER_ERROR
2024-09-06 07:12:30.509 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : GET "/favicon.ico", parameters={}
2024-09-06 07:12:30.510 DEBUG --- [nio-8080-exec-2] o.s.w.s.h.SimpleUrlHandlerMapping        : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2024-09-06 07:12:30.512 DEBUG --- [nio-8080-exec-2] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2024-09-06 07:12:30.513 DEBUG --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler de.telran.urlshortener.exception.GlobalExceptionHandler#handleGlobalException(Exception)
2024-09-06 07:12:30.514 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'image/avif', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [text/plain, */*, application/json, application/*+json]
2024-09-06 07:12:30.514 DEBUG --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["No static resource favicon.ico."]
2024-09-06 07:12:30.515 DEBUG --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2024-09-06 07:12:30.516 DEBUG --- [nio-8080-exec-2] o.s.w.s.DispatcherServlet                : Completed 500 INTERNAL_SERVER_ERROR
2024-09-06 07:34:34.369  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-06 07:34:34.595  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.repository.UserRepositoryTest
2024-09-06 07:34:35.129  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-06 07:34:35.187  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Starting UserRepositoryTest using Java 21.0.2 with PID 43817 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-06 07:34:35.191 DEBUG --- [           main] d.t.u.r.UserRepositoryTest               : Running with Spring Boot v3.2.0, Spring v6.1.1
2024-09-06 07:34:35.192  INFO --- [           main] d.t.u.r.UserRepositoryTest               : The following 1 profile is active: "testdb"
2024-09-06 07:34:35.909  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-06 07:34:36.022  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 101 ms. Found 4 JPA repository interfaces.
2024-09-06 07:34:36.144  INFO --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2024-09-06 07:34:36.524  INFO --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:fb270abf-44ce-47dc-ac66-9d39dc9ee8c6;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2024-09-06 07:34:37.109  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-06 07:34:38.021  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-06 07:34:38.480  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-06 07:34:38.725  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-06 07:34:38.727  INFO --- [           main] l.command                                : Using deploymentId: 5600878726
2024-09-06 07:34:38.731  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-06 07:34:38.800  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-06 07:34:38.819  INFO --- [           main] l.changelog                              : Table roles created
2024-09-06 07:34:38.821  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 19ms
2024-09-06 07:34:38.835  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-06 07:34:38.841  INFO --- [           main] l.changelog                              : Table users created
2024-09-06 07:34:38.842  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-06 07:34:38.848  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-06 07:34:38.854  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-06 07:34:38.862  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-06 07:34:38.863  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-06 07:34:38.870  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-06 07:34:38.877  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-06 07:34:38.881  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-06 07:34:38.881  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 11ms
2024-09-06 07:34:38.890  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-06 07:34:38.896  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-06 07:34:38.899  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-06 07:34:38.903  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-06 07:34:38.909  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-06 07:34:38.910  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 17ms
2024-09-06 07:34:38.914  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-06 07:34:38.929  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-06 07:34:38.939  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-06 07:34:38.940  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 26ms
2024-09-06 07:34:38.945  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-06 07:34:38.960  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-06 07:34:38.960  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 14ms
2024-09-06 07:34:38.979  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-06 07:34:38.979  INFO --- [           main] l.util                                   : Run:                          7
2024-09-06 07:34:38.980  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-06 07:34:38.981  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-06 07:34:38.981  INFO --- [           main] l.util                                   : -------------------------------
2024-09-06 07:34:38.982  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-06 07:34:38.984  INFO --- [           main] l.util                                   : Update summary generated
2024-09-06 07:34:38.990  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-06 07:34:38.991  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-06 07:34:38.995  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-06 07:34:38.997  INFO --- [           main] l.command                                : Command execution complete
2024-09-06 07:34:39.202  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-06 07:34:39.291  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-06 07:34:39.349  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-06 07:34:39.781  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-06 07:34:39.848  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-06 07:34:41.126  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-06 07:34:41.131  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-06 07:34:41.873  INFO --- [           main] d.t.u.r.UserRepositoryTest               : Started UserRepositoryTest in 7.182 seconds (process running for 10.034)
2024-09-06 07:34:43.499 DEBUG --- [           main] d.t.u.s.RoleService                      : Parsed role name: ADMIN
2024-09-06 07:34:43.505 DEBUG --- [           main] d.t.u.s.RoleService                      : Found role: de.telran.urlshortener.entity.Role@7c48ea9e
2024-09-06 07:34:43.541 ERROR --- [           main] d.t.u.s.RoleService                      : Role name INVALID_ROLE is invalid
2024-09-06 07:34:43.553 DEBUG --- [           main] d.t.u.s.RoleService                      : Parsed role name: ADMIN
2024-09-06 07:34:43.579  INFO --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [de.telran.urlshortener.UrlShortenerApplicationTests]: UrlShortenerApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-09-06 07:34:43.614  INFO --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration de.telran.urlshortener.UrlShortenerApplication for test class de.telran.urlshortener.UrlShortenerApplicationTests
2024-09-06 07:34:43.727  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Starting UrlShortenerApplicationTests using Java 21.0.2 with PID 43817 (started by volodymyr in /home/volodymyr/url-shortener)
2024-09-06 07:34:43.728 DEBUG --- [           main] d.t.u.UrlShortenerApplicationTests       : Running with Spring Boot v3.2.0, Spring v6.1.1
2024-09-06 07:34:43.729  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : The following 1 profile is active: "testdb"
2024-09-06 07:34:44.785  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-06 07:34:44.816  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 29 ms. Found 4 JPA repository interfaces.
2024-09-06 07:34:45.384  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-06 07:34:45.403  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn6: url=jdbc:h2:mem:489efaef-8778-456f-bcfd-8d6daeddfbf1 user=SA
2024-09-06 07:34:45.406  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-06 07:34:45.424  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-06 07:34:45.621  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-06 07:34:45.632  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-06 07:34:45.701  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-06 07:34:45.703  INFO --- [           main] l.command                                : Using deploymentId: 5600885702
2024-09-06 07:34:45.705  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-06 07:34:45.742  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-06 07:34:45.750  INFO --- [           main] l.changelog                              : Table roles created
2024-09-06 07:34:45.751  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 8ms
2024-09-06 07:34:45.760  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-06 07:34:45.769  INFO --- [           main] l.changelog                              : Table users created
2024-09-06 07:34:45.770  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 9ms
2024-09-06 07:34:45.777  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-06 07:34:45.783  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-06 07:34:45.788  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-06 07:34:45.789  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 11ms
2024-09-06 07:34:45.798  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-06 07:34:45.805  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-06 07:34:45.810  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-06 07:34:45.811  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 13ms
2024-09-06 07:34:45.818  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-06 07:34:45.822  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-06 07:34:45.826  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-06 07:34:45.832  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-06 07:34:45.838  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-06 07:34:45.839  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 20ms
2024-09-06 07:34:45.844  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-06 07:34:45.858  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-06 07:34:45.872  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-06 07:34:45.873  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 27ms
2024-09-06 07:34:45.877  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-06 07:34:45.893  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-06 07:34:45.894  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 15ms
2024-09-06 07:34:45.899  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-06 07:34:45.900  INFO --- [           main] l.util                                   : Run:                          7
2024-09-06 07:34:45.900  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-06 07:34:45.901  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-06 07:34:45.902  INFO --- [           main] l.util                                   : -------------------------------
2024-09-06 07:34:45.902  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-06 07:34:45.903  INFO --- [           main] l.util                                   : Update summary generated
2024-09-06 07:34:45.904  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-06 07:34:45.905  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-06 07:34:45.907  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-06 07:34:45.908  INFO --- [           main] l.command                                : Command execution complete
2024-09-06 07:34:46.003  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-06 07:34:46.008  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-06 07:34:46.017  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-06 07:34:46.020  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-06 07:34:46.259  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-06 07:34:46.260  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-06 07:34:47.093  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-06 07:34:47.136  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: c1474a72-1785-4742-90c9-1c30b1169598

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-06 07:34:47.780  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@32a53a59, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2f5fb329, org.springframework.security.web.context.SecurityContextHolderFilter@4178074f, org.springframework.security.web.header.HeaderWriterFilter@3c7b89ae, org.springframework.web.filter.CorsFilter@5ac88d71, org.springframework.security.web.authentication.logout.LogoutFilter@46fdb4d, de.telran.urlshortener.security.JwtFilter@3310bb28, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@22955ef2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7111b312, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@457512b, org.springframework.security.web.session.SessionManagementFilter@50853850, org.springframework.security.web.access.ExceptionTranslationFilter@e08853d, org.springframework.security.web.access.intercept.AuthorizationFilter@19ad99fa]
2024-09-06 07:34:48.570  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:489efaef-8778-456f-bcfd-8d6daeddfbf1'
2024-09-06 07:34:48.688  INFO --- [           main] d.t.u.UrlShortenerApplicationTests       : Started UrlShortenerApplicationTests in 5.051 seconds (process running for 16.849)
2024-09-06 07:34:49.277  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-06 07:34:49.287  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-06 07:34:49.289  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-06 07:34:49.293  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-06 07:35:04.867  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-06 07:35:04.944  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 44188 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-06 07:35:04.955 DEBUG --- [           main] d.t.u.UrlShortenerApplication            : Running with Spring Boot v3.2.0, Spring v6.1.1
2024-09-06 07:35:04.957  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb"
2024-09-06 07:35:06.169  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-06 07:35:06.254  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 4 JPA repository interfaces.
2024-09-06 07:35:07.082  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-06 07:35:07.096  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-06 07:35:07.098  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-06 07:35:07.099  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-06 07:35:07.163  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-06 07:35:07.164  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2136 ms
2024-09-06 07:35:07.235  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-06 07:35:07.493  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:7eb1117e-46da-485d-a23f-f802c0a52f23 user=SA
2024-09-06 07:35:07.495  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-06 07:35:07.511  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:7eb1117e-46da-485d-a23f-f802c0a52f23'
2024-09-06 07:35:07.604 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-06 07:35:07.774  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-06 07:35:08.336  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-06 07:35:08.527  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-06 07:35:08.684  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-06 07:35:08.686  INFO --- [           main] l.command                                : Using deploymentId: 5600908685
2024-09-06 07:35:08.688  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-06 07:35:08.730  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-06 07:35:08.743  INFO --- [           main] l.changelog                              : Table roles created
2024-09-06 07:35:08.744  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 12ms
2024-09-06 07:35:08.754  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-06 07:35:08.760  INFO --- [           main] l.changelog                              : Table users created
2024-09-06 07:35:08.760  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 6ms
2024-09-06 07:35:08.767  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-06 07:35:08.773  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-06 07:35:08.781  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-06 07:35:08.781  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 14ms
2024-09-06 07:35:08.787  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-06 07:35:08.793  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-06 07:35:08.796  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-06 07:35:08.797  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 9ms
2024-09-06 07:35:08.802  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-06 07:35:08.804  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-06 07:35:08.808  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-06 07:35:08.811  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-06 07:35:08.816  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-06 07:35:08.817  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 15ms
2024-09-06 07:35:08.821  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-06 07:35:08.835  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-06 07:35:08.843  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-06 07:35:08.844  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 23ms
2024-09-06 07:35:08.848  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-06 07:35:08.861  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-06 07:35:08.861  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 13ms
2024-09-06 07:35:08.871  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-06 07:35:08.871  INFO --- [           main] l.util                                   : Run:                          7
2024-09-06 07:35:08.871  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-06 07:35:08.872  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-06 07:35:08.872  INFO --- [           main] l.util                                   : -------------------------------
2024-09-06 07:35:08.872  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-06 07:35:08.873  INFO --- [           main] l.util                                   : Update summary generated
2024-09-06 07:35:08.876  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-06 07:35:08.877  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-06 07:35:08.879  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-06 07:35:08.881  INFO --- [           main] l.command                                : Command execution complete
2024-09-06 07:35:09.031  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-06 07:35:09.096  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-06 07:35:09.140  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-06 07:35:09.418  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-06 07:35:09.472  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-06 07:35:10.709  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-06 07:35:10.714  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-06 07:35:11.585  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-06 07:35:11.622  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 7d08099a-5212-4417-aa85-068429d2e211

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-06 07:35:12.107  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@65f270e7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@417f7d7f, org.springframework.security.web.context.SecurityContextHolderFilter@15d04c41, org.springframework.security.web.header.HeaderWriterFilter@14bbfdee, org.springframework.web.filter.CorsFilter@da09b52, org.springframework.security.web.authentication.logout.LogoutFilter@32b5b8f8, de.telran.urlshortener.security.JwtFilter@aca2fc3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4290332d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@740ddb41, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3652ce04, org.springframework.security.web.session.SessionManagementFilter@74c919b2, org.springframework.security.web.access.ExceptionTranslationFilter@41a940a9, org.springframework.security.web.access.intercept.AuthorizationFilter@4a6dd88e]
2024-09-06 07:35:12.728  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-06 07:35:12.735  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2024-09-06 07:35:12.740  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-06 07:35:12.742  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-06 07:35:12.745  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-06 07:35:12.762  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-09-06 07:35:12.784 ERROR --- [           main] o.s.b.SpringApplication                  : Application run failed
org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:287)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:467)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:256)
	at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:201)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:965)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at de.telran.urlshortener.UrlShortenerApplication.main(UrlShortenerApplication.java:10)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:229)
	at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:44)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:284)
	... 13 more
Caused by: java.lang.IllegalArgumentException: standardService.connector.startFailed
	at org.apache.catalina.core.StandardService.addConnector(StandardService.java:235)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:286)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:214)
	... 15 more
Caused by: org.apache.catalina.LifecycleException: Protocol handler start failed
	at org.apache.catalina.connector.Connector.startInternal(Connector.java:1046)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:171)
	at org.apache.catalina.core.StandardService.addConnector(StandardService.java:232)
	... 17 more
Caused by: java.net.BindException:   
	at java.base/sun.nio.ch.Net.bind0(Native Method)
	at java.base/sun.nio.ch.Net.bind(Net.java:565)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:344)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:301)
	at org.apache.tomcat.util.net.NioEndpoint.initServerSocket(NioEndpoint.java:247)
	at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:202)
	at org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1280)
	at org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1366)
	at org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:635)
	at org.apache.catalina.connector.Connector.startInternal(Connector.java:1043)
	... 19 more
2024-09-06 07:38:38.250  INFO --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-09-06 07:38:38.255  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown initiated...
2024-09-06 07:38:38.260  INFO --- [ionShutdownHook] c.z.h.HikariDataSource                   : HikariPool-1 - Shutdown completed.
2024-09-06 07:38:45.882  INFO --- [kground-preinit] o.h.v.i.u.Version                        : HV000001: Hibernate Validator 8.0.1.Final
2024-09-06 07:38:45.938  INFO --- [           main] d.t.u.UrlShortenerApplication            : Starting UrlShortenerApplication using Java 21.0.2 with PID 46349 (/home/volodymyr/url-shortener/target/classes started by volodymyr in /home/volodymyr/url-shortener)
2024-09-06 07:38:45.942 DEBUG --- [           main] d.t.u.UrlShortenerApplication            : Running with Spring Boot v3.2.0, Spring v6.1.1
2024-09-06 07:38:45.944  INFO --- [           main] d.t.u.UrlShortenerApplication            : The following 1 profile is active: "testdb"
2024-09-06 07:38:47.140  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-09-06 07:38:47.224  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2024-09-06 07:38:48.042  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat initialized with port 8080 (http)
2024-09-06 07:38:48.056  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Initializing ProtocolHandler ["http-nio-8080"]
2024-09-06 07:38:48.058  INFO --- [           main] o.a.c.c.StandardService                  : Starting service [Tomcat]
2024-09-06 07:38:48.059  INFO --- [           main] o.a.c.c.StandardEngine                   : Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-09-06 07:38:48.123  INFO --- [           main] o.a.c.c.C.[.[.[/]                        : Initializing Spring embedded WebApplicationContext
2024-09-06 07:38:48.123  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2121 ms
2024-09-06 07:38:48.196  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Starting...
2024-09-06 07:38:48.472  INFO --- [           main] c.z.h.p.HikariPool                       : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:ead069c7-922a-45d3-aa0c-8d80248c71ea user=SA
2024-09-06 07:38:48.474  INFO --- [           main] c.z.h.HikariDataSource                   : HikariPool-1 - Start completed.
2024-09-06 07:38:48.490  INFO --- [           main] o.s.b.a.h.H2ConsoleAutoConfiguration     : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:ead069c7-922a-45d3-aa0c-8d80248c71ea'
2024-09-06 07:38:48.588 DEBUG --- [           main] d.t.u.s.JwtFilter                        : Filter 'jwtFilter' configured for use
2024-09-06 07:38:48.760  INFO --- [           main] l.database                               : Set default schema name to PUBLIC
2024-09-06 07:38:49.313  INFO --- [           main] l.changelog                              : Creating database history table with name: PUBLIC.DATABASECHANGELOG
2024-09-06 07:38:49.730  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-06 07:38:49.876  INFO --- [           main] l.lockservice                            : Successfully acquired change log lock
2024-09-06 07:38:49.878  INFO --- [           main] l.command                                : Using deploymentId: 5601129877
2024-09-06 07:38:49.880  INFO --- [           main] l.changelog                              : Reading from PUBLIC.DATABASECHANGELOG
2024-09-06 07:38:49.923  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::1::shemchuk
2024-09-06 07:38:49.936  INFO --- [           main] l.changelog                              : Table roles created
2024-09-06 07:38:49.938  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::1::shemchuk ran successfully in 13ms
2024-09-06 07:38:49.950  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::2::shemchuk
2024-09-06 07:38:49.956  INFO --- [           main] l.changelog                              : Table users created
2024-09-06 07:38:49.957  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::2::shemchuk ran successfully in 7ms
2024-09-06 07:38:49.965  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::3::shemchuk
2024-09-06 07:38:49.971  INFO --- [           main] l.changelog                              : Table subscriptions created
2024-09-06 07:38:49.980  INFO --- [           main] l.changelog                              : Foreign key constraint added to subscriptions (user_id)
2024-09-06 07:38:49.981  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::3::shemchuk ran successfully in 15ms
2024-09-06 07:38:49.986  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::4::shemchuk
2024-09-06 07:38:49.998  INFO --- [           main] l.changelog                              : Table short_urls created
2024-09-06 07:38:50.002  INFO --- [           main] l.changelog                              : Foreign key constraint added to short_urls (user_id)
2024-09-06 07:38:50.003  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::4::shemchuk ran successfully in 15ms
2024-09-06 07:38:50.007  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::5::shemchuk
2024-09-06 07:38:50.010  INFO --- [           main] l.changelog                              : Table user_roles created
2024-09-06 07:38:50.013  INFO --- [           main] l.changelog                              : Primary key added to user_roles (user_id, role_id)
2024-09-06 07:38:50.016  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (user_id)
2024-09-06 07:38:50.021  INFO --- [           main] l.changelog                              : Foreign key constraint added to user_roles (role_id)
2024-09-06 07:38:50.022  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::5::shemchuk ran successfully in 14ms
2024-09-06 07:38:50.025  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.0.xml::6::shemchuk
2024-09-06 07:38:50.040  INFO --- [           main] l.changelog                              : Column short_urls.creation_date dropped
2024-09-06 07:38:50.048  INFO --- [           main] l.changelog                              : Column short_urls.expiry_date dropped
2024-09-06 07:38:50.049  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.0.xml::6::shemchuk ran successfully in 23ms
2024-09-06 07:38:50.052  INFO --- [           main] l.ui                                     : Running Changeset: db/changelog/db.changelog-1.1.xml::1::shemchuk
2024-09-06 07:38:50.065  INFO --- [           main] l.changelog                              : Columns refresh_token(VARCHAR(255)) added to users
2024-09-06 07:38:50.066  INFO --- [           main] l.changelog                              : ChangeSet db/changelog/db.changelog-1.1.xml::1::shemchuk ran successfully in 13ms
2024-09-06 07:38:50.076  INFO --- [           main] l.util                                   : UPDATE SUMMARY
2024-09-06 07:38:50.077  INFO --- [           main] l.util                                   : Run:                          7
2024-09-06 07:38:50.077  INFO --- [           main] l.util                                   : Previously run:               0
2024-09-06 07:38:50.077  INFO --- [           main] l.util                                   : Filtered out:                 0
2024-09-06 07:38:50.078  INFO --- [           main] l.util                                   : -------------------------------
2024-09-06 07:38:50.078  INFO --- [           main] l.util                                   : Total change sets:            7
2024-09-06 07:38:50.079  INFO --- [           main] l.util                                   : Update summary generated
2024-09-06 07:38:50.082  INFO --- [           main] l.command                                : Update command completed successfully.
2024-09-06 07:38:50.083  INFO --- [           main] l.ui                                     : Liquibase: Update has been successful. Rows affected: 7
2024-09-06 07:38:50.085  INFO --- [           main] l.lockservice                            : Successfully released change log lock
2024-09-06 07:38:50.087  INFO --- [           main] l.command                                : Command execution complete
2024-09-06 07:38:50.224  INFO --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-09-06 07:38:50.299  INFO --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.3.1.Final
2024-09-06 07:38:50.343  INFO --- [           main] o.h.c.i.RegionFactoryInitiator           : HHH000026: Second-level cache disabled
2024-09-06 07:38:50.624  INFO --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-09-06 07:38:50.676  WARN --- [           main] o.h.o.deprecation                        : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-09-06 07:38:51.888  INFO --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-09-06 07:38:51.893  INFO --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-09-06 07:38:52.781  WARN --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-09-06 07:38:52.820  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: f832449e-d987-49f7-8d8f-9d615592b790

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-09-06 07:38:53.346  INFO --- [           main] o.s.s.w.DefaultSecurityFilterChain       : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2ee91bdf, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1a034bbc, org.springframework.security.web.context.SecurityContextHolderFilter@565b77ba, org.springframework.security.web.header.HeaderWriterFilter@5d27a744, org.springframework.web.filter.CorsFilter@5453b15d, org.springframework.security.web.authentication.logout.LogoutFilter@2179127d, de.telran.urlshortener.security.JwtFilter@6e068ac9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7d4bb16b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@74c919b2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4a6dd88e, org.springframework.security.web.session.SessionManagementFilter@56a7f57f, org.springframework.security.web.access.ExceptionTranslationFilter@269fe2fe, org.springframework.security.web.access.intercept.AuthorizationFilter@dc72335]
2024-09-06 07:38:53.879  INFO --- [           main] o.a.c.h.Http11NioProtocol                : Starting ProtocolHandler ["http-nio-8080"]
2024-09-06 07:38:53.898  INFO --- [           main] o.s.b.w.e.t.TomcatWebServer              : Tomcat started on port 8080 (http) with context path ''
2024-09-06 07:38:53.910  INFO --- [           main] d.t.u.UrlShortenerApplication            : Started UrlShortenerApplication in 8.5 seconds (process running for 10.423)
2024-09-06 07:39:01.261  INFO --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/]                        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-09-06 07:39:01.262  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Initializing Servlet 'dispatcherServlet'
2024-09-06 07:39:01.264  INFO --- [nio-8080-exec-1] o.s.w.s.DispatcherServlet                : Completed initialization in 2 ms
2024-09-06 07:39:01.280  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-06 07:39:01.295  WARN --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-09-06 07:39:03.086  INFO --- [io-8080-exec-10] o.s.a.AbstractOpenApiResource            : Init duration for springdoc-openapi is: 808 ms
